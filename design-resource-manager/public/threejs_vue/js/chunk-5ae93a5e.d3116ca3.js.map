{"version":3,"sources":["webpack:///./node_modules/_core-js@3.21.0@core-js/modules/es.object.keys.js","webpack:///./src/views/插件/Gui.vue?2810","webpack:///./src/views/插件/Gui.vue?2dfd","webpack:///src/views/插件/Gui.vue","webpack:///./src/views/插件/Gui.vue?23d8","webpack:///./src/views/插件/Gui.vue"],"names":["$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","target","stat","forced","keys","it","render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","attrs","data","params","methods","animation","renderer","light","statement","events","windowResize","container","rendererParams","antialias","mounted","document","getElementById","app","camera","scene","url","type","name","animations","dt","mixer","createGUI","model","actions","api","state","states","emotes","i","length","clip","action","clipAction","indexOf","gui","enabledFolder","addFolder","enabled","that","statesFolder","clipCtrl","add","options","emoteFolder","createEmoteCallback","restoreState","face","getObjectByName","expressions","Object","morphTargetDictionary","expressionFolder","activeAction","play","fadeToAction","duration","previousAction","reset","setEffectiveTimeScale","setEffectiveWeight","fadeIn","beforeDestroy","destroy","component"],"mappings":"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","file":"js/chunk-5ae93a5e.d3116ca3.js","sourcesContent":["var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Gui.vue?vue&type=style&index=0&id=698bdf2e&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"views\",attrs:{\"id\":\"views\"}},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"container\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"views\" id=\"views\">\n    <div id=\"container\" class=\"container\"></div>\n  </div>\n</template>\n\n<script>\nimport { App } from '@/assets/App/App'\nimport * as THREE from 'three'\nimport { GUI } from 'three/examples/jsm/libs/dat.gui.module.js'\n\nconst app = new App()\nexport default {\n  data () {\n    return {\n      params: {\n        methods: {\n          animation: false, // 循环调用渲染\n          renderer: true, // 应用渲染器\n          light: true, // 在场景中加入全景光\n          statement: true // 在控制台打印声明，与本案例无关，可忽略。\n        },\n        events: {\n          windowResize: true // 监听窗口尺寸变化，并改变渲染页面尺寸\n        },\n        params: {\n          container: null, // 渲染结果输出dom页面\n          renderer: [\n            'WebGLRenderer'\n          ],\n          rendererParams: {\n            antialias: true // 抗锯齿，可忽略。\n          }\n        }\n      }\n    }\n  },\n  mounted () {\n    this.params.params.container = document.getElementById('container') // 获取渲染结果输出dom页面\n    /**\n     * 初始化场景\n     */\n    app.init(this.params, (scene, camera, renderer) => {\n      camera.position.set(-5, 3, 10)\n      camera.lookAt(new THREE.Vector3(0, 2, 0))\n\n      scene.background = new THREE.Color(0xe0e0e0)\n      scene.fog = new THREE.Fog(0xe0e0e0, 20, 100)\n\n      renderer.setPixelRatio(window.devicePixelRatio)\n      renderer.outputEncoding = THREE.sRGBEncoding\n\n      this.clock = new THREE.Clock()\n    })\n    /**\n     * 导入模型\n     */\n    app.addModel({\n      url: 'static/model/glb/RobotExpressive.glb', // 模型地址\n      type: 'glb', // 模型格式\n      name: 'robot',\n      animations: true\n    }, (obj, animations, mixer, actions) => {\n      this.model = obj\n      this.animations = animations\n      this.mixer = mixer\n      this.actions = actions\n\n      // 创建gui\n      this.createGUI(obj, animations, mixer, actions)\n\n      // 循环渲染\n      app.animate(() => {\n        var dt = this.clock.getDelta()\n        if (mixer && this.enabled) mixer.update(dt)\n      })\n    })\n  },\n  methods: {\n    createGUI (model, animations, mixer, actions) {\n      const that = this\n\n      var api = { state: 'Walking' }\n      var states = ['Idle', 'Walking', 'Running', 'Dance', 'Death', 'Sitting', 'Standing']\n      var emotes = ['Jump', 'Yes', 'No', 'Wave', 'Punch', 'ThumbsUp']\n\n      this.actions = {} // 重写actions\n\n      for (var i = 0; i < animations.length; i++) {\n        var clip = animations[i]\n        var action = mixer.clipAction(clip)\n        this.actions[clip.name] = action\n\n        if (emotes.indexOf(clip.name) >= 0 || states.indexOf(clip.name) >= 4) {\n          action.clampWhenFinished = true\n          action.loop = THREE.LoopOnce\n        }\n      }\n\n      const gui = new GUI()\n      this.gui = gui // 将gui加到this\n\n      // enabled\n\n      var enabledFolder = gui.addFolder('Enabled')\n      enabledFolder.add({ enabled: false }, 'enabled').onChange((value) => {\n        that.enabled = value\n      })\n      enabledFolder.open()\n\n      // states\n\n      var statesFolder = gui.addFolder('States')\n\n      var clipCtrl = statesFolder.add(api, 'state').options(states)\n\n      clipCtrl.onChange(function () {\n        that.fadeToAction(api.state, 0.5)\n      })\n\n      statesFolder.open()\n\n      // emotes\n\n      var emoteFolder = gui.addFolder('Emotes')\n\n      function createEmoteCallback (name) {\n        api[name] = function () {\n          that.fadeToAction(name, 0.2)\n          mixer.addEventListener('finished', restoreState)\n        }\n\n        emoteFolder.add(api, name)\n      }\n\n      function restoreState () {\n        mixer.removeEventListener('finished', restoreState)\n        that.fadeToAction(api.state, 0.2)\n      }\n\n      for (var i = 0; i < emotes.length; i++) {\n        createEmoteCallback(emotes[i])\n      }\n\n      emoteFolder.open()\n\n      // expressions\n\n      var face = model.getObjectByName('Head_2')\n\n      var expressions = Object.keys(face.morphTargetDictionary)\n      var expressionFolder = gui.addFolder('Expressions')\n\n      for (var i = 0; i < expressions.length; i++) {\n        expressionFolder.add(face.morphTargetInfluences, i, 0, 1, 0.01).name(expressions[i])\n      }\n\n      expressionFolder.open()\n\n      this.activeAction = actions['Walking']\n      this.activeAction.play()\n    },\n    fadeToAction (name, duration) {\n      var previousAction = this.activeAction\n      this.activeAction = this.actions[name]\n\n      if (previousAction !== this.activeAction) {\n        previousAction.fadeOut(duration)\n      }\n\n      this.activeAction\n        .reset()\n        .setEffectiveTimeScale(1)\n        .setEffectiveWeight(1)\n        .fadeIn(duration)\n        .play()\n    }\n  },\n  beforeDestroy () {\n    this.gui.destroy()\n  }\n}\n</script>\n\n<style scoped>\n.views {\n  height: 100%;\n  width: 100%;\n}\n\n.container {\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Gui.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Gui.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Gui.vue?vue&type=template&id=698bdf2e&scoped=true&\"\nimport script from \"./Gui.vue?vue&type=script&lang=js&\"\nexport * from \"./Gui.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Gui.vue?vue&type=style&index=0&id=698bdf2e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"698bdf2e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}