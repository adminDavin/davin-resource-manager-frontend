(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c1ec538"],{"03bc":function(e,t,n){"use strict";var r=n("d5b6"),i=n("137b"),A=n("986c"),o=n("9927"),s=n("61d6"),a=Error.prototype.toString,c=i((function(){if(r){var e=o(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==a.call(e))return!0}return"2: 1"!==a.call({message:1,name:2})||"Error"!==a.call({})}));e.exports=c?function(){var e=A(this),t=s(e.name,"Error"),n=s(e.message);return t?n?t+": "+n:t:n}:a},"138e":function(e,t){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},"156b":function(e,t,n){
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,A){function o(e){try{a(r.next(e))}catch(zt){A(zt)}}function s(e){try{a(r["throw"](e))}catch(zt){A(zt)}}function a(e){e.done?n(e.value):i(e.value).then(o,s)}a((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,i,A,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return A={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function s(e){return function(t){return a([e,t])}}function a(A){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,r&&(i=2&A[0]?r["return"]:A[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,A[1])).done)return i;switch(r=0,i&&(A=[2&A[0],i.value]),A[0]){case 0:case 1:i=A;break;case 4:return o.label++,{value:A[1],done:!1};case 5:o.label++,r=A[1],A=[0];continue;case 7:A=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(6===A[0]||2===A[0])){o=0;continue}if(3===A[0]&&(!i||A[1]>i[0]&&A[1]<i[3])){o.label=A[1];break}if(6===A[0]&&o.label<i[1]){o.label=i[1],i=A;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(A);break}i[2]&&o.ops.pop(),o.trys.pop();continue}A=t.call(e,o)}catch(zt){A=[6,zt],r=0}finally{n=i=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function A(e,t,n){if(n||2===arguments.length)for(var r,i=0,A=t.length;i<A;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}for(var o=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,i){return new e(this.left+t,this.top+n,this.width+r,this.height+i)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),s=function(e,t){return o.fromClientRect(e,t.getBoundingClientRect())},a=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new o(0,0,r,i)},c=function(e){var t=[],n=0,r=e.length;while(n<r){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var A=e.charCodeAt(n++);56320===(64512&A)?t.push(((1023&i)<<10)+(1023&A)+65536):(t.push(i),n--)}else t.push(i)}return t},l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";var r=[],i=-1,A="";while(++i<n){var o=e[i];o<=65535?r.push(o):(o-=65536,r.push(55296+(o>>10),o%1024+56320)),(i+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),d=0;d<u.length;d++)h[u.charCodeAt(d)]=d;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<p.length;m++)f[p.charCodeAt(m)]=m;for(var g=function(e){var t,n,r,i,A,o=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),l=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<s;t+=4)n=f[e.charCodeAt(t)],r=f[e.charCodeAt(t+1)],i=f[e.charCodeAt(t+2)],A=f[e.charCodeAt(t+3)],l[a++]=n<<2|r>>4,l[a++]=(15&r)<<4|i>>2,l[a++]=(3&i)<<6|63&A;return c},w=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},x=5,y=11,B=2,b=y-x,C=65536>>x,M=1<<x,E=M-1,F=1024>>x,_=C+F,T=_,U=32,S=T+U,Q=65536>>y,L=1<<b,D=L-1,I=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},O=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},P=function(e,t){var n=g(e),r=Array.isArray(n)?v(n):new Uint32Array(n),i=Array.isArray(n)?w(n):new Uint16Array(n),A=24,o=I(i,A/2,r[4]/2),s=2===r[5]?I(i,(A+r[4])/2):O(r,Math.ceil((A+r[4])/4));return new H(r[0],r[1],r[2],r[3],o,s)},H=function(){function e(e,t,n,r,i,A){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=A}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>x],t=(t<<B)+(e&E),this.data[t];if(e<=65535)return t=this.index[C+(e-55296>>x)],t=(t<<B)+(e&E),this.data[t];if(e<this.highStart)return t=S-Q+(e>>y),t=this.index[t],t+=e>>x&D,t=this.index[t],t=(t<<B)+(e&E),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N="undefined"===typeof Uint8Array?[]:new Uint8Array(256),k=0;k<R.length;k++)N[R.charCodeAt(k)]=k;var K="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",G=50,V=1,z=2,j=3,X=4,W=5,Y=7,q=8,J=9,Z=10,$=11,ee=12,te=13,ne=14,re=15,ie=16,Ae=17,oe=18,se=19,ae=20,ce=21,le=22,ue=23,he=24,de=25,pe=26,fe=27,me=28,ge=29,we=30,ve=31,xe=32,ye=33,Be=34,be=35,Ce=36,Me=37,Ee=38,Fe=39,_e=40,Te=41,Ue=42,Se=43,Qe=[9001,65288],Le="!",De="×",Ie="÷",Oe=P(K),Pe=[we,Ce],He=[V,z,j,W],Re=[Z,q],Ne=[fe,pe],ke=He.concat(Re),Ke=[Ee,Fe,_e,Be,be],Ge=[re,te],Ve=function(e,t){void 0===t&&(t="strict");var n=[],r=[],i=[];return e.forEach((function(e,A){var o=Oe.get(e);if(o>G?(i.push(!0),o-=G):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(A),n.push(ie);if(o===X||o===$){if(0===A)return r.push(A),n.push(we);var s=n[A-1];return-1===ke.indexOf(s)?(r.push(r[A-1]),n.push(s)):(r.push(A),n.push(we))}return r.push(A),o===ve?n.push("strict"===t?ce:Me):o===Ue||o===ge?n.push(we):o===Se?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(Me):n.push(we):void n.push(o)})),[r,n,i]},ze=function(e,t,n,r){var i=r[n];if(Array.isArray(e)?-1!==e.indexOf(i):e===i){var A=n;while(A<=r.length){A++;var o=r[A];if(o===t)return!0;if(o!==Z)break}}if(i===Z){A=n;while(A>0){A--;var s=r[A];if(Array.isArray(e)?-1!==e.indexOf(s):e===s){var a=n;while(a<=r.length){a++;o=r[a];if(o===t)return!0;if(o!==Z)break}}if(s!==Z)break}}return!1},je=function(e,t){var n=e;while(n>=0){var r=t[n];if(r!==Z)return r;n--}return 0},Xe=function(e,t,n,r,i){if(0===n[r])return De;var A=r-1;if(Array.isArray(i)&&!0===i[A])return De;var o=A-1,s=A+1,a=t[A],c=o>=0?t[o]:0,l=t[s];if(a===z&&l===j)return De;if(-1!==He.indexOf(a))return Le;if(-1!==He.indexOf(l))return De;if(-1!==Re.indexOf(l))return De;if(je(A,t)===q)return Ie;if(Oe.get(e[A])===$)return De;if((a===xe||a===ye)&&Oe.get(e[s])===$)return De;if(a===Y||l===Y)return De;if(a===J)return De;if(-1===[Z,te,re].indexOf(a)&&l===J)return De;if(-1!==[Ae,oe,se,he,me].indexOf(l))return De;if(je(A,t)===le)return De;if(ze(ue,le,A,t))return De;if(ze([Ae,oe],ce,A,t))return De;if(ze(ee,ee,A,t))return De;if(a===Z)return Ie;if(a===ue||l===ue)return De;if(l===ie||a===ie)return Ie;if(-1!==[te,re,ce].indexOf(l)||a===ne)return De;if(c===Ce&&-1!==Ge.indexOf(a))return De;if(a===me&&l===Ce)return De;if(l===ae)return De;if(-1!==Pe.indexOf(l)&&a===de||-1!==Pe.indexOf(a)&&l===de)return De;if(a===fe&&-1!==[Me,xe,ye].indexOf(l)||-1!==[Me,xe,ye].indexOf(a)&&l===pe)return De;if(-1!==Pe.indexOf(a)&&-1!==Ne.indexOf(l)||-1!==Ne.indexOf(a)&&-1!==Pe.indexOf(l))return De;if(-1!==[fe,pe].indexOf(a)&&(l===de||-1!==[le,re].indexOf(l)&&t[s+1]===de)||-1!==[le,re].indexOf(a)&&l===de||a===de&&-1!==[de,me,he].indexOf(l))return De;if(-1!==[de,me,he,Ae,oe].indexOf(l)){var u=A;while(u>=0){var h=t[u];if(h===de)return De;if(-1===[me,he].indexOf(h))break;u--}}if(-1!==[fe,pe].indexOf(l)){u=-1!==[Ae,oe].indexOf(a)?o:A;while(u>=0){h=t[u];if(h===de)return De;if(-1===[me,he].indexOf(h))break;u--}}if(Ee===a&&-1!==[Ee,Fe,Be,be].indexOf(l)||-1!==[Fe,Be].indexOf(a)&&-1!==[Fe,_e].indexOf(l)||-1!==[_e,be].indexOf(a)&&l===_e)return De;if(-1!==Ke.indexOf(a)&&-1!==[ae,pe].indexOf(l)||-1!==Ke.indexOf(l)&&a===fe)return De;if(-1!==Pe.indexOf(a)&&-1!==Pe.indexOf(l))return De;if(a===he&&-1!==Pe.indexOf(l))return De;if(-1!==Pe.concat(de).indexOf(a)&&l===le&&-1===Qe.indexOf(e[s])||-1!==Pe.concat(de).indexOf(l)&&a===oe)return De;if(a===Te&&l===Te){var d=n[A],p=1;while(d>0){if(d--,t[d]!==Te)break;p++}if(p%2!==0)return De}return a===xe&&l===ye?De:Ie},We=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Ve(e,t.lineBreak),r=n[0],i=n[1],A=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(i=i.map((function(e){return-1!==[de,we,Ue].indexOf(e)?Me:e})));var o="keep-all"===t.wordBreak?A.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0;return[r,i,o]},Ye=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Le,this.start=n,this.end=r}return e.prototype.slice=function(){return l.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),qe=function(e,t){var n=c(e),r=We(n,t),i=r[0],A=r[1],o=r[2],s=n.length,a=0,l=0;return{next:function(){if(l>=s)return{done:!0,value:null};var e=De;while(l<s&&(e=Xe(n,A,i,++l,o))===De);if(e!==De||l===s){var t=new Ye(n,e,a,l);return a=l,{value:t,done:!1}}return{done:!0,value:null}}}},Je=1,Ze=2,$e=4,et=8,tt=10,nt=47,rt=92,it=9,At=32,ot=34,st=61,at=35,ct=36,lt=37,ut=39,ht=40,dt=41,pt=95,ft=45,mt=33,gt=60,wt=62,vt=64,xt=91,yt=93,Bt=61,bt=123,Ct=63,Mt=125,Et=124,Ft=126,_t=128,Tt=65533,Ut=42,St=43,Qt=44,Lt=58,Dt=59,It=46,Ot=0,Pt=8,Ht=11,Rt=14,Nt=31,kt=127,Kt=-1,Gt=48,Vt=97,zt=101,jt=102,Xt=117,Wt=122,Yt=65,qt=69,Jt=70,Zt=85,$t=90,en=function(e){return e>=Gt&&e<=57},tn=function(e){return e>=55296&&e<=57343},nn=function(e){return en(e)||e>=Yt&&e<=Jt||e>=Vt&&e<=jt},rn=function(e){return e>=Vt&&e<=Wt},An=function(e){return e>=Yt&&e<=$t},on=function(e){return rn(e)||An(e)},sn=function(e){return e>=_t},an=function(e){return e===tt||e===it||e===At},cn=function(e){return on(e)||sn(e)||e===pt},ln=function(e){return cn(e)||en(e)||e===ft},un=function(e){return e>=Ot&&e<=Pt||e===Ht||e>=Rt&&e<=Nt||e===kt},hn=function(e,t){return e===rt&&t!==tt},dn=function(e,t,n){return e===ft?cn(t)||hn(t,n):!!cn(e)||!(e!==rt||!hn(e,t))},pn=function(e,t,n){return e===St||e===ft?!!en(t)||t===It&&en(n):en(e===It?t:e)},fn=function(e){var t=0,n=1;e[t]!==St&&e[t]!==ft||(e[t]===ft&&(n=-1),t++);var r=[];while(en(e[t]))r.push(e[t++]);var i=r.length?parseInt(l.apply(void 0,r),10):0;e[t]===It&&t++;var A=[];while(en(e[t]))A.push(e[t++]);var o=A.length,s=o?parseInt(l.apply(void 0,A),10):0;e[t]!==qt&&e[t]!==zt||t++;var a=1;e[t]!==St&&e[t]!==ft||(e[t]===ft&&(a=-1),t++);var c=[];while(en(e[t]))c.push(e[t++]);var u=c.length?parseInt(l.apply(void 0,c),10):0;return n*(i+s*Math.pow(10,-o))*Math.pow(10,a*u)},mn={type:2},gn={type:3},wn={type:4},vn={type:13},xn={type:8},yn={type:21},Bn={type:9},bn={type:10},Cn={type:11},Mn={type:12},En={type:14},Fn={type:23},_n={type:1},Tn={type:25},Un={type:24},Sn={type:26},Qn={type:27},Ln={type:28},Dn={type:29},In={type:31},On={type:32},Pn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){var e=[],t=this.consumeToken();while(t!==On)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ot:return this.consumeStringToken(ot);case at:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(ln(t)||hn(n,r)){var i=dn(t,n,r)?Ze:Je,A=this.consumeName();return{type:5,value:A,flags:i}}break;case ct:if(this.peekCodePoint(0)===st)return this.consumeCodePoint(),vn;break;case ut:return this.consumeStringToken(ut);case ht:return mn;case dt:return gn;case Ut:if(this.peekCodePoint(0)===st)return this.consumeCodePoint(),En;break;case St:if(pn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Qt:return wn;case ft:var o=e,s=this.peekCodePoint(0),a=this.peekCodePoint(1);if(pn(o,s,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(dn(o,s,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(s===ft&&a===wt)return this.consumeCodePoint(),this.consumeCodePoint(),Un;break;case It:if(pn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case nt:if(this.peekCodePoint(0)===Ut){this.consumeCodePoint();while(1){var c=this.consumeCodePoint();if(c===Ut&&(c=this.consumeCodePoint(),c===nt))return this.consumeToken();if(c===Kt)return this.consumeToken()}}break;case Lt:return Sn;case Dt:return Qn;case gt:if(this.peekCodePoint(0)===mt&&this.peekCodePoint(1)===ft&&this.peekCodePoint(2)===ft)return this.consumeCodePoint(),this.consumeCodePoint(),Tn;break;case vt:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(dn(u,h,d)){A=this.consumeName();return{type:7,value:A}}break;case xt:return Ln;case rt:if(hn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case yt:return Dn;case Bt:if(this.peekCodePoint(0)===st)return this.consumeCodePoint(),xn;break;case bt:return Cn;case Mt:return Mn;case Xt:case Zt:var p=this.peekCodePoint(0),f=this.peekCodePoint(1);return p!==St||!nn(f)&&f!==Ct||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Et:if(this.peekCodePoint(0)===st)return this.consumeCodePoint(),Bn;if(this.peekCodePoint(0)===Et)return this.consumeCodePoint(),yn;break;case Ft:if(this.peekCodePoint(0)===st)return this.consumeCodePoint(),bn;break;case Kt:return On}return an(e)?(this.consumeWhiteSpace(),In):en(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):cn(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:l(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){var e=[],t=this.consumeCodePoint();while(nn(t)&&e.length<6)e.push(t),t=this.consumeCodePoint();var n=!1;while(t===Ct&&e.length<6)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(l.apply(void 0,e.map((function(e){return e===Ct?Gt:e}))),16),i=parseInt(l.apply(void 0,e.map((function(e){return e===Ct?Jt:e}))),16);return{type:30,start:r,end:i}}var A=parseInt(l.apply(void 0,e),16);if(this.peekCodePoint(0)===ft&&nn(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();var o=[];while(nn(t)&&o.length<6)o.push(t),t=this.consumeCodePoint();i=parseInt(l.apply(void 0,o),16);return{type:30,start:A,end:i}}return{type:30,start:A,end:A}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===ht?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ht?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Kt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===ut||t===ot){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Kt||this.peekCodePoint(0)===dt)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Fn)}while(1){var r=this.consumeCodePoint();if(r===Kt||r===dt)return{type:22,value:l.apply(void 0,e)};if(an(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Kt||this.peekCodePoint(0)===dt?(this.consumeCodePoint(),{type:22,value:l.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Fn);if(r===ot||r===ut||r===ht||un(r))return this.consumeBadUrlRemnants(),Fn;if(r===rt){if(!hn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Fn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){while(an(this.peekCodePoint(0)))this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){while(1){var e=this.consumeCodePoint();if(e===dt||e===Kt)return;hn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){var t=5e4,n="";while(e>0){var r=Math.min(t,e);n+=l.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){var t="",n=0;do{var r=this._value[n];if(r===Kt||void 0===r||r===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(r===tt)return this._value.splice(0,n),_n;if(r===rt){var i=this._value[n+1];i!==Kt&&void 0!==i&&(i===tt?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):hn(r,i)&&(t+=this.consumeStringSlice(n),t+=l(this.consumeEscapedCodePoint()),n=-1))}n++}while(1)},e.prototype.consumeNumber=function(){var e=[],t=$e,n=this.peekCodePoint(0);n!==St&&n!==ft||e.push(this.consumeCodePoint());while(en(this.peekCodePoint(0)))e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===It&&en(r)){e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=et;while(en(this.peekCodePoint(0)))e.push(this.consumeCodePoint())}n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===qt||n===zt)&&((r===St||r===ft)&&en(i)||en(r))){e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=et;while(en(this.peekCodePoint(0)))e.push(this.consumeCodePoint())}return[fn(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),A=this.peekCodePoint(2);if(dn(r,i,A)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return r===lt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(nn(e)){var t=l(e);while(nn(this.peekCodePoint(0))&&t.length<6)t+=l(this.consumeCodePoint());an(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||tn(n)||n>1114111?Tt:n}return e===Kt?Tt:e},e.prototype.consumeName=function(){var e="";while(1){var t=this.consumeCodePoint();if(ln(t))e+=l(t);else{if(!hn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=l(this.consumeEscapedCodePoint())}}},e}(),Hn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Pn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){var e=this.consumeToken();while(31===e.type)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){var e=[];while(1){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){var t={type:e,values:[]},n=this.consumeToken();while(1){if(32===n.type||Xn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){var t={name:e.value,values:[],type:18};while(1){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?On:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Rn=function(e){return 15===e.type},Nn=function(e){return 17===e.type},kn=function(e){return 20===e.type},Kn=function(e){return 0===e.type},Gn=function(e,t){return kn(e)&&e.value===t},Vn=function(e){return 31!==e.type},zn=function(e){return 31!==e.type&&4!==e.type},jn=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},Xn=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},Wn=function(e){return 17===e.type||15===e.type},Yn=function(e){return 16===e.type||Wn(e)},qn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Jn={type:17,number:0,flags:$e},Zn={type:16,number:50,flags:$e},$n={type:16,number:100,flags:$e},er=function(e,t,n){var r=e[0],i=e[1];return[tr(r,t),tr("undefined"!==typeof i?i:r,n)]},tr=function(e,t){if(16===e.type)return e.number/100*t;if(Rn(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},nr="deg",rr="grad",ir="rad",Ar="turn",or={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case nr:return Math.PI*t.number/180;case rr:return Math.PI/200*t.number;case ir:return t.number;case Ar:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},sr=function(e){return 15===e.type&&(e.unit===nr||e.unit===rr||e.unit===ir||e.unit===Ar)},ar=function(e){var t=e.filter(kn).map((function(e){return e.value})).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Jn,Jn];case"to top":case"bottom":return cr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Jn,$n];case"to right":case"left":return cr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$n,$n];case"to bottom":case"top":return cr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$n,Jn];case"to left":case"right":return cr(270)}return 0},cr=function(e){return Math.PI*e/180},lr={name:"color",parse:function(e,t){if(18===t.type){var n=wr[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),i=t.value.substring(1,2),A=t.value.substring(2,3);return dr(parseInt(r+r,16),parseInt(i+i,16),parseInt(A+A,16),1)}if(4===t.value.length){r=t.value.substring(0,1),i=t.value.substring(1,2),A=t.value.substring(2,3);var o=t.value.substring(3,4);return dr(parseInt(r+r,16),parseInt(i+i,16),parseInt(A+A,16),parseInt(o+o,16)/255)}if(6===t.value.length){r=t.value.substring(0,2),i=t.value.substring(2,4),A=t.value.substring(4,6);return dr(parseInt(r,16),parseInt(i,16),parseInt(A,16),1)}if(8===t.value.length){r=t.value.substring(0,2),i=t.value.substring(2,4),A=t.value.substring(4,6),o=t.value.substring(6,8);return dr(parseInt(r,16),parseInt(i,16),parseInt(A,16),parseInt(o,16)/255)}}if(20===t.type){var s=xr[t.value.toUpperCase()];if("undefined"!==typeof s)return s}return xr.TRANSPARENT}},ur=function(e){return 0===(255&e)},hr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+r+","+n+","+t/255+")":"rgb("+i+","+r+","+n+")"},dr=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r)<<0)>>>0},pr=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},fr=function(e,t){var n=t.filter(zn);if(3===n.length){var r=n.map(pr),i=r[0],A=r[1],o=r[2];return dr(i,A,o,1)}if(4===n.length){var s=n.map(pr),a=(i=s[0],A=s[1],o=s[2],s[3]);return dr(i,A,o,a)}return 0};function mr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var gr=function(e,t){var n=t.filter(zn),r=n[0],i=n[1],A=n[2],o=n[3],s=(17===r.type?cr(r.number):or.parse(e,r))/(2*Math.PI),a=Yn(i)?i.number/100:0,c=Yn(A)?A.number/100:0,l="undefined"!==typeof o&&Yn(o)?tr(o,1):1;if(0===a)return dr(255*c,255*c,255*c,1);var u=c<=.5?c*(a+1):c+a-c*a,h=2*c-u,d=mr(h,u,s+1/3),p=mr(h,u,s),f=mr(h,u,s-1/3);return dr(255*d,255*p,255*f,l)},wr={hsl:gr,hsla:gr,rgb:fr,rgba:fr},vr=function(e,t){return lr.parse(e,Hn.create(t).parseComponentValue())},xr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},yr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(kn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Br={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},br=function(e,t){var n=lr.parse(e,t[0]),r=t[1];return r&&Yn(r)?{color:n,stop:r}:{color:n,stop:null}},Cr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=Jn),null===r.stop&&(r.stop=$n);for(var i=[],A=0,o=0;o<e.length;o++){var s=e[o].stop;if(null!==s){var a=tr(s,t);a>A?i.push(a):i.push(A),A=a}else i.push(null)}var c=null;for(o=0;o<i.length;o++){var l=i[o];if(null===l)null===c&&(c=o);else if(null!==c){for(var u=o-c,h=i[c-1],d=(l-h)/(u+1),p=1;p<=u;p++)i[c+p-1]=d*p;c=null}}return e.map((function(e,n){var r=e.color;return{color:r,stop:Math.max(Math.min(1,i[n]/t),0)}}))},Mr=function(e,t,n){var r=t/2,i=n/2,A=tr(e[0],t)-r,o=i-tr(e[1],n);return(Math.atan2(o,A)+2*Math.PI)%(2*Math.PI)},Er=function(e,t,n){var r="number"===typeof e?e:Mr(e,t,n),i=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),A=t/2,o=n/2,s=i/2,a=Math.sin(r-Math.PI/2)*s,c=Math.cos(r-Math.PI/2)*s;return[i,A-c,A+c,o-a,o+a]},Fr=function(e,t){return Math.sqrt(e*e+t*t)},_r=function(e,t,n,r,i){var A=[[0,0],[0,t],[e,0],[e,t]];return A.reduce((function(e,t){var A=t[0],o=t[1],s=Fr(n-A,r-o);return(i?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Tr=function(e,t,n,r,i){var A=0,o=0;switch(e.size){case 0:0===e.shape?A=o=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(A=Math.min(Math.abs(t),Math.abs(t-r)),o=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===e.shape)A=o=Math.min(Fr(t,n),Fr(t,n-i),Fr(t-r,n),Fr(t-r,n-i));else if(1===e.shape){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(t),Math.abs(t-r)),a=_r(r,i,t,n,!0),c=a[0],l=a[1];A=Fr(c-t,(l-n)/s),o=s*A}break;case 1:0===e.shape?A=o=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):1===e.shape&&(A=Math.max(Math.abs(t),Math.abs(t-r)),o=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===e.shape)A=o=Math.max(Fr(t,n),Fr(t,n-i),Fr(t-r,n),Fr(t-r,n-i));else if(1===e.shape){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(t),Math.abs(t-r));var u=_r(r,i,t,n,!1);c=u[0],l=u[1];A=Fr(c-t,(l-n)/s),o=s*A}break}return Array.isArray(e.size)&&(A=tr(e.size[0],r),o=2===e.size.length?tr(e.size[1],i):A),[A,o]},Ur=function(e,t){var n=cr(180),r=[];return jn(t).forEach((function(t,i){if(0===i){var A=t[0];if(20===A.type&&"to"===A.value)return void(n=ar(t));if(sr(A))return void(n=or.parse(e,A))}var o=br(e,t);r.push(o)})),{angle:n,stops:r,type:1}},Sr=function(e,t){var n=cr(180),r=[];return jn(t).forEach((function(t,i){if(0===i){var A=t[0];if(20===A.type&&-1!==["top","left","right","bottom"].indexOf(A.value))return void(n=ar(t));if(sr(A))return void(n=(or.parse(e,A)+cr(270))%cr(360))}var o=br(e,t);r.push(o)})),{angle:n,stops:r,type:1}},Qr=function(e,t){var n=cr(180),r=[],i=1,A=0,o=3,s=[];return jn(t).forEach((function(t,n){var A=t[0];if(0===n){if(kn(A)&&"linear"===A.value)return void(i=1);if(kn(A)&&"radial"===A.value)return void(i=2)}if(18===A.type)if("from"===A.name){var o=lr.parse(e,A.values[0]);r.push({stop:Jn,color:o})}else if("to"===A.name){o=lr.parse(e,A.values[0]);r.push({stop:$n,color:o})}else if("color-stop"===A.name){var s=A.values.filter(zn);if(2===s.length){o=lr.parse(e,s[1]);var a=s[0];Nn(a)&&r.push({stop:{type:16,number:100*a.number,flags:a.flags},color:o})}}})),1===i?{angle:(n+cr(180))%cr(360),stops:r,type:i}:{size:o,shape:A,stops:r,position:s,type:i}},Lr="closest-side",Dr="farthest-side",Ir="closest-corner",Or="farthest-corner",Pr="circle",Hr="ellipse",Rr="cover",Nr="contain",kr=function(e,t){var n=0,r=3,i=[],A=[];return jn(t).forEach((function(t,o){var s=!0;if(0===o){var a=!1;s=t.reduce((function(e,t){if(a)if(kn(t))switch(t.value){case"center":return A.push(Zn),e;case"top":case"left":return A.push(Jn),e;case"right":case"bottom":return A.push($n),e}else(Yn(t)||Wn(t))&&A.push(t);else if(kn(t))switch(t.value){case Pr:return n=0,!1;case Hr:return n=1,!1;case"at":return a=!0,!1;case Lr:return r=0,!1;case Rr:case Dr:return r=1,!1;case Nr:case Ir:return r=2,!1;case Or:return r=3,!1}else if(Wn(t)||Yn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)}if(s){var c=br(e,t);i.push(c)}})),{size:r,shape:n,stops:i,position:A,type:2}},Kr=function(e,t){var n=0,r=3,i=[],A=[];return jn(t).forEach((function(t,o){var s=!0;if(0===o?s=t.reduce((function(e,t){if(kn(t))switch(t.value){case"center":return A.push(Zn),!1;case"top":case"left":return A.push(Jn),!1;case"right":case"bottom":return A.push($n),!1}else if(Yn(t)||Wn(t))return A.push(t),!1;return e}),s):1===o&&(s=t.reduce((function(e,t){if(kn(t))switch(t.value){case Pr:return n=0,!1;case Hr:return n=1,!1;case Nr:case Lr:return r=0,!1;case Dr:return r=1,!1;case Ir:return r=2,!1;case Rr:case Or:return r=3,!1}else if(Wn(t)||Yn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)),s){var a=br(e,t);i.push(a)}})),{size:r,shape:n,stops:i,position:A,type:2}},Gr=function(e){return 1===e.type},Vr=function(e){return 2===e.type},zr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Wr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function jr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Wr[e.name])}var Xr,Wr={"linear-gradient":Ur,"-moz-linear-gradient":Sr,"-ms-linear-gradient":Sr,"-o-linear-gradient":Sr,"-webkit-linear-gradient":Sr,"radial-gradient":kr,"-moz-radial-gradient":Kr,"-ms-radial-gradient":Kr,"-o-radial-gradient":Kr,"-webkit-radial-gradient":Kr,"-webkit-gradient":Qr},Yr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return zn(e)&&jr(e)})).map((function(t){return zr.parse(e,t)}))}},qr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(kn(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Jr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return jn(t).map((function(e){return e.filter(Yn)})).map(qn)}},Zr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return jn(t).map((function(e){return e.filter(kn).map((function(e){return e.value})).join(" ")})).map($r)}},$r=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}};(function(e){e["AUTO"]="auto",e["CONTAIN"]="contain",e["COVER"]="cover"})(Xr||(Xr={}));var ei,ti={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return jn(t).map((function(e){return e.filter(ni)}))}},ni=function(e){return kn(e)||Yn(e)},ri=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ii=ri("top"),Ai=ri("right"),oi=ri("bottom"),si=ri("left"),ai=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return qn(t.filter(Yn))}}},ci=ai("top-left"),li=ai("top-right"),ui=ai("bottom-right"),hi=ai("bottom-left"),di=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},pi=di("top"),fi=di("right"),mi=di("bottom"),gi=di("left"),wi=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Rn(t)?t.number:0}}},vi=wi("top"),xi=wi("right"),yi=wi("bottom"),Bi=wi("left"),bi={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ci={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Mi={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).reduce((function(e,t){return e|Ei(t.value)}),0)}},Ei=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Fi={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_i={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};(function(e){e["NORMAL"]="normal",e["STRICT"]="strict"})(ei||(ei={}));var Ti,Ui={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return ei.STRICT;case"normal":default:return ei.NORMAL}}},Si={name:"line-height",initialValue:"normal",prefix:!1,type:4},Qi=function(e,t){return kn(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Yn(e)?tr(e,t):t},Li={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:zr.parse(e,t)}},Di={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},Ii={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Oi=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Pi=Oi("top"),Hi=Oi("right"),Ri=Oi("bottom"),Ni=Oi("left"),ki={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}}))}},Ki={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Gi=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Vi=Gi("top"),zi=Gi("right"),ji=Gi("bottom"),Xi=Gi("left"),Wi={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Yi={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},qi={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Gn(t[0],"none")?[]:jn(t).map((function(t){for(var n={color:xr.TRANSPARENT,offsetX:Jn,offsetY:Jn,blur:Jn},r=0,i=0;i<t.length;i++){var A=t[i];Wn(A)?(0===r?n.offsetX=A:1===r?n.offsetY=A:n.blur=A,r++):n.color=lr.parse(e,A)}return n}))}},Ji={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Zi={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=tA[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},$i=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},eA=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var i=t[4],A=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],s=t[13];return t[14],t[15],16===t.length?[n,r,i,A,o,s]:null},tA={matrix:$i,matrix3d:eA},nA={type:16,number:50,flags:$e},rA=[nA,nA],iA={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Yn);return 2!==n.length?rA:[n[0],n[1]]}},AA={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}};(function(e){e["NORMAL"]="normal",e["BREAK_ALL"]="break-all",e["KEEP_ALL"]="keep-all"})(Ti||(Ti={}));for(var oA={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Ti.BREAK_ALL;case"keep-all":return Ti.KEEP_ALL;case"normal":default:return Ti.NORMAL}}},sA={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Nn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},aA={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},cA={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Nn(t)?t.number:1}},lA={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uA={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(kn).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},hA={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},dA={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},pA={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(Nn(t))return t.number;if(kn(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},fA={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(kn).map((function(e){return e.value}))}},mA={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},gA=function(e,t){return 0!==(e&t)},wA={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},vA={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=t.filter(Vn),A=0;A<i.length;A++){var o=i[A],s=i[A+1];if(20===o.type){var a=s&&Nn(s)?s.number:1;r.push({counter:o.value,increment:a})}}return r}},xA={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Vn),i=0;i<r.length;i++){var A=r[i],o=r[i+1];if(kn(A)&&"none"!==A.value){var s=o&&Nn(o)?o.number:0;n.push({counter:A.value,reset:s})}}return n}},yA={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Rn).map((function(t){return aA.parse(e,t)}))}},BA={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=t.filter(Kn);if(i.length%2!==0)return null;for(var A=0;A<i.length;A+=2){var o=i[A].value,s=i[A+1].value;r.push({open:o,close:s})}return r}},bA=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},CA={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Gn(t[0],"none")?[]:jn(t).map((function(t){for(var n={color:255,offsetX:Jn,offsetY:Jn,blur:Jn,spread:Jn,inset:!1},r=0,i=0;i<t.length;i++){var A=t[i];Gn(A,"inset")?n.inset=!0:Wn(A)?(0===r?n.offsetX=A:1===r?n.offsetY=A:2===r?n.blur=A:n.spread=A,r++):n.color=lr.parse(e,A)}return n}))}},MA={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(kn).forEach((function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}})),n.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r}},EA={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},FA={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Rn(t)?t.number:0}},_A=function(){function e(e,t){var n,r;this.animationDuration=SA(e,yA,t.animationDuration),this.backgroundClip=SA(e,yr,t.backgroundClip),this.backgroundColor=SA(e,Br,t.backgroundColor),this.backgroundImage=SA(e,Yr,t.backgroundImage),this.backgroundOrigin=SA(e,qr,t.backgroundOrigin),this.backgroundPosition=SA(e,Jr,t.backgroundPosition),this.backgroundRepeat=SA(e,Zr,t.backgroundRepeat),this.backgroundSize=SA(e,ti,t.backgroundSize),this.borderTopColor=SA(e,ii,t.borderTopColor),this.borderRightColor=SA(e,Ai,t.borderRightColor),this.borderBottomColor=SA(e,oi,t.borderBottomColor),this.borderLeftColor=SA(e,si,t.borderLeftColor),this.borderTopLeftRadius=SA(e,ci,t.borderTopLeftRadius),this.borderTopRightRadius=SA(e,li,t.borderTopRightRadius),this.borderBottomRightRadius=SA(e,ui,t.borderBottomRightRadius),this.borderBottomLeftRadius=SA(e,hi,t.borderBottomLeftRadius),this.borderTopStyle=SA(e,pi,t.borderTopStyle),this.borderRightStyle=SA(e,fi,t.borderRightStyle),this.borderBottomStyle=SA(e,mi,t.borderBottomStyle),this.borderLeftStyle=SA(e,gi,t.borderLeftStyle),this.borderTopWidth=SA(e,vi,t.borderTopWidth),this.borderRightWidth=SA(e,xi,t.borderRightWidth),this.borderBottomWidth=SA(e,yi,t.borderBottomWidth),this.borderLeftWidth=SA(e,Bi,t.borderLeftWidth),this.boxShadow=SA(e,CA,t.boxShadow),this.color=SA(e,bi,t.color),this.direction=SA(e,Ci,t.direction),this.display=SA(e,Mi,t.display),this.float=SA(e,Fi,t.cssFloat),this.fontFamily=SA(e,hA,t.fontFamily),this.fontSize=SA(e,dA,t.fontSize),this.fontStyle=SA(e,mA,t.fontStyle),this.fontVariant=SA(e,fA,t.fontVariant),this.fontWeight=SA(e,pA,t.fontWeight),this.letterSpacing=SA(e,_i,t.letterSpacing),this.lineBreak=SA(e,Ui,t.lineBreak),this.lineHeight=SA(e,Si,t.lineHeight),this.listStyleImage=SA(e,Li,t.listStyleImage),this.listStylePosition=SA(e,Di,t.listStylePosition),this.listStyleType=SA(e,Ii,t.listStyleType),this.marginTop=SA(e,Pi,t.marginTop),this.marginRight=SA(e,Hi,t.marginRight),this.marginBottom=SA(e,Ri,t.marginBottom),this.marginLeft=SA(e,Ni,t.marginLeft),this.opacity=SA(e,cA,t.opacity);var i=SA(e,ki,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=SA(e,Ki,t.overflowWrap),this.paddingTop=SA(e,Vi,t.paddingTop),this.paddingRight=SA(e,zi,t.paddingRight),this.paddingBottom=SA(e,ji,t.paddingBottom),this.paddingLeft=SA(e,Xi,t.paddingLeft),this.paintOrder=SA(e,MA,t.paintOrder),this.position=SA(e,Yi,t.position),this.textAlign=SA(e,Wi,t.textAlign),this.textDecorationColor=SA(e,lA,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=SA(e,uA,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=SA(e,qi,t.textShadow),this.textTransform=SA(e,Ji,t.textTransform),this.transform=SA(e,Zi,t.transform),this.transformOrigin=SA(e,iA,t.transformOrigin),this.visibility=SA(e,AA,t.visibility),this.webkitTextStrokeColor=SA(e,EA,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=SA(e,FA,t.webkitTextStrokeWidth),this.wordBreak=SA(e,oA,t.wordBreak),this.zIndex=SA(e,sA,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return ur(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return gA(this.display,4)||gA(this.display,33554432)||gA(this.display,268435456)||gA(this.display,536870912)||gA(this.display,67108864)||gA(this.display,134217728)},e}(),TA=function(){function e(e,t){this.content=SA(e,wA,t.content),this.quotes=SA(e,BA,t.quotes)}return e}(),UA=function(){function e(e,t){this.counterIncrement=SA(e,vA,t.counterIncrement),this.counterReset=SA(e,xA,t.counterReset)}return e}(),SA=function(e,t,n){var r=new Pn,i=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(i);var A=new Hn(r.read());switch(t.type){case 2:var o=A.parseComponentValue();return t.parse(e,kn(o)?o.value:t.initialValue);case 0:return t.parse(e,A.parseComponentValue());case 1:return t.parse(e,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(t.format){case"angle":return or.parse(e,A.parseComponentValue());case"color":return lr.parse(e,A.parseComponentValue());case"image":return zr.parse(e,A.parseComponentValue());case"length":var s=A.parseComponentValue();return Wn(s)?s:Jn;case"length-percentage":var a=A.parseComponentValue();return Yn(a)?a:Jn;case"time":return aA.parse(e,A.parseComponentValue())}break}},QA="data-html2canvas-debug",LA=function(e){var t=e.getAttribute(QA);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},DA=function(e,t){var n=LA(e);return 1===n||t===n},IA=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,DA(t,3),this.styles=new _A(e,window.getComputedStyle(t,null)),Us(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=s(this.context,t),DA(t,4)&&(this.flags|=16)}return e}(),OA="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HA="undefined"===typeof Uint8Array?[]:new Uint8Array(256),RA=0;RA<PA.length;RA++)HA[PA.charCodeAt(RA)]=RA;for(var NA=function(e){var t,n,r,i,A,o=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),l=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<s;t+=4)n=HA[e.charCodeAt(t)],r=HA[e.charCodeAt(t+1)],i=HA[e.charCodeAt(t+2)],A=HA[e.charCodeAt(t+3)],l[a++]=n<<2|r>>4,l[a++]=(15&r)<<4|i>>2,l[a++]=(3&i)<<6|63&A;return c},kA=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},KA=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},GA=5,VA=11,zA=2,jA=VA-GA,XA=65536>>GA,WA=1<<GA,YA=WA-1,qA=1024>>GA,JA=XA+qA,ZA=JA,$A=32,eo=ZA+$A,to=65536>>VA,no=1<<jA,ro=no-1,io=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Ao=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},oo=function(e,t){var n=NA(e),r=Array.isArray(n)?KA(n):new Uint32Array(n),i=Array.isArray(n)?kA(n):new Uint16Array(n),A=24,o=io(i,A/2,r[4]/2),s=2===r[5]?io(i,(A+r[4])/2):Ao(r,Math.ceil((A+r[4])/4));return new so(r[0],r[1],r[2],r[3],o,s)},so=function(){function e(e,t,n,r,i,A){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=A}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>GA],t=(t<<zA)+(e&YA),this.data[t];if(e<=65535)return t=this.index[XA+(e-55296>>GA)],t=(t<<zA)+(e&YA),this.data[t];if(e<this.highStart)return t=eo-to+(e>>VA),t=this.index[t],t+=e>>GA&ro,t=this.index[t],t=(t<<zA)+(e&YA),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",co="undefined"===typeof Uint8Array?[]:new Uint8Array(256),lo=0;lo<ao.length;lo++)co[ao.charCodeAt(lo)]=lo;var uo,ho=1,po=2,fo=3,mo=4,go=5,wo=7,vo=8,xo=9,yo=10,Bo=11,bo=12,Co=13,Mo=14,Eo=15,Fo=function(e){var t=[],n=0,r=e.length;while(n<r){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var A=e.charCodeAt(n++);56320===(64512&A)?t.push(((1023&i)<<10)+(1023&A)+65536):(t.push(i),n--)}else t.push(i)}return t},_o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";var r=[],i=-1,A="";while(++i<n){var o=e[i];o<=65535?r.push(o):(o-=65536,r.push(55296+(o>>10),o%1024+56320)),(i+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},To=oo(OA),Uo="×",So="÷",Qo=function(e){return To.get(e)},Lo=function(e,t,n){var r=n-2,i=t[r],A=t[n-1],o=t[n];if(A===po&&o===fo)return Uo;if(A===po||A===fo||A===mo)return So;if(o===po||o===fo||o===mo)return So;if(A===vo&&-1!==[vo,xo,Bo,bo].indexOf(o))return Uo;if((A===Bo||A===xo)&&(o===xo||o===yo))return Uo;if((A===bo||A===yo)&&o===yo)return Uo;if(o===Co||o===go)return Uo;if(o===wo)return Uo;if(A===ho)return Uo;if(A===Co&&o===Mo){while(i===go)i=t[--r];if(i===Mo)return Uo}if(A===Eo&&o===Eo){var s=0;while(i===Eo)s++,i=t[--r];if(s%2===0)return Uo}return So},Do=function(e){var t=Fo(e),n=t.length,r=0,i=0,A=t.map(Qo);return{next:function(){if(r>=n)return{done:!0,value:null};var e=Uo;while(r<n&&(e=Lo(t,A,++r))===Uo);if(e!==Uo||r===n){var o=_o.apply(null,t.slice(i,r));return i=r,{value:o,done:!1}}return{done:!0,value:null}}}},Io=function(e){var t,n=Do(e),r=[];while(!(t=n.next()).done)t.value&&r.push(t.value.slice());return r},Oo=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var i=n.getBoundingClientRect(),A=Math.round(i.height);if(e.body.removeChild(r),A===t)return!0}}return!1},Po=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,i=c(r.data).map((function(e){return l(e)})),A=0,o={},s=i.every((function(e,t){n.setStart(r,A),n.setEnd(r,A+e.length);var i=n.getBoundingClientRect();A+=e.length;var s=i.x>o.x||i.y>o.y;return o=i,0===t||s}));return e.body.removeChild(t),s},Ho=function(){return"undefined"!==typeof(new Image).crossOrigin},Ro=function(){return"string"===typeof(new XMLHttpRequest).responseType},No=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(zt){return!1}return!0},ko=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},Ko=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,A=t.toDataURL();i.src=A;var o=Go(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),Vo(o).then((function(t){r.drawImage(t,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var o=e.createElement("div");return o.style.backgroundImage="url("+A+")",o.style.height=n+"px",ko(i)?Vo(Go(n,n,0,0,o)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),ko(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},Go=function(e,t,n,r,i){var A="http://www.w3.org/2000/svg",o=document.createElementNS(A,"svg"),s=document.createElementNS(A,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(s),s.appendChild(i),o},Vo=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},zo={get SUPPORT_RANGE_BOUNDS(){var e=Oo(document);return Object.defineProperty(zo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=zo.SUPPORT_RANGE_BOUNDS&&Po(document);return Object.defineProperty(zo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=No(document);return Object.defineProperty(zo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?Ko(document):Promise.resolve(!1);return Object.defineProperty(zo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Ho();return Object.defineProperty(zo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Ro();return Object.defineProperty(zo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(zo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(zo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},jo=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Xo=function(e,t,n,r){var i=Zo(t,n),A=[],s=0;return i.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(zo.SUPPORT_RANGE_BOUNDS){var i=Yo(r,s,t.length).getClientRects();if(i.length>1){var a=qo(t),c=0;a.forEach((function(t){A.push(new jo(t,o.fromDOMRectList(e,Yo(r,c+s,t.length).getClientRects()))),c+=t.length}))}else A.push(new jo(t,o.fromDOMRectList(e,i)))}else{var l=r.splitText(t.length);A.push(new jo(t,Wo(e,r))),r=l}else zo.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));s+=t.length})),A},Wo=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(r,t);var A=s(e,r);return r.firstChild&&i.replaceChild(r.firstChild,r),A}}return o.EMPTY},Yo=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(e,t),i.setEnd(e,t+n),i},qo=function(e){if(zo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return Io(e)},Jo=function(e,t){if(zo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return es(e,t)},Zo=function(e,t){return 0!==t.letterSpacing?qo(e):Jo(e,t)},$o=[32,160,4961,65792,65793,4153,4241],es=function(e,t){var n,r=qe(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),i=[],A=function(){if(n.value){var e=n.value.slice(),t=c(e),r="";t.forEach((function(e){-1===$o.indexOf(e)?r+=l(e):(r.length&&i.push(r),i.push(l(e)),r="")})),r.length&&i.push(r)}};while(!(n=r.next()).done)A();return i},ts=function(){function e(e,t,n){this.text=ns(t.data,n.textTransform),this.textBounds=Xo(e,this.text,n,t)}return e}(),ns=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(rs,is);case 2:return e.toUpperCase();default:return e}},rs=/(^|\s|:|-|\(|\))([a-z])/g,is=function(e,t,n){return e.length>0?t+n.toUpperCase():e},As=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(IA),os=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(IA),ss=function(e){function n(t,n){var r=e.call(this,t,n)||this,i=new XMLSerializer,A=s(t,n);return n.setAttribute("width",A.width+"px"),n.setAttribute("height",A.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(IA),as=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(IA),cs=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(IA),ls=[{type:15,flags:0,unit:"px",number:3}],us=[{type:16,flags:0,number:50}],hs=function(e){return e.width>e.height?new o(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new o(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},ds=function(e){var t=e.type===ms?new Array(e.value.length+1).join("•"):e.value;return 0===t.length?e.placeholder||"":t},ps="checkbox",fs="radio",ms="password",gs=707406591,ws=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=ds(n),r.type!==ps&&r.type!==fs||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=hs(r.bounds)),r.type){case ps:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=ls;break;case fs:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=us;break}return r}return t(n,e),n}(IA),vs=function(e){function n(t,n){var r=e.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return t(n,e),n}(IA),xs=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(IA),ys=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=Ms(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?vr(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):xr.TRANSPARENT,A=n.contentWindow.document.body?vr(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):xr.TRANSPARENT;r.backgroundColor=ur(i)?ur(A)?r.styles.backgroundColor:A:i}}catch(zt){}return r}return t(n,e),n}(IA),Bs=["OL","UL","MENU"],bs=function(e,t,n,r){for(var i=t.firstChild,A=void 0;i;i=A)if(A=i.nextSibling,_s(i)&&i.data.trim().length>0)n.textNodes.push(new ts(e,i,n.styles));else if(Ts(i))if(js(i)&&i.assignedNodes)i.assignedNodes().forEach((function(t){return bs(e,t,n,r)}));else{var o=Cs(e,i);o.styles.isVisible()&&(Es(i,o,r)?o.flags|=4:Fs(o.styles)&&(o.flags|=2),-1!==Bs.indexOf(i.tagName)&&(o.flags|=8),n.elements.push(o),i.slot,i.shadowRoot?bs(e,i.shadowRoot,o,r):Vs(i)||Os(i)||zs(i)||bs(e,i,o,r))}},Cs=function(e,t){return Ns(t)?new As(e,t):Hs(t)?new os(e,t):Os(t)?new ss(e,t):Qs(t)?new as(e,t):Ls(t)?new cs(e,t):Ds(t)?new ws(e,t):zs(t)?new vs(e,t):Vs(t)?new xs(e,t):ks(t)?new ys(e,t):new IA(e,t)},Ms=function(e,t){var n=Cs(e,t);return n.flags|=4,bs(e,t,n,n),n},Es=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Ps(e)&&n.styles.isTransparent()},Fs=function(e){return e.isPositioned()||e.isFloating()},_s=function(e){return e.nodeType===Node.TEXT_NODE},Ts=function(e){return e.nodeType===Node.ELEMENT_NODE},Us=function(e){return Ts(e)&&"undefined"!==typeof e.style&&!Ss(e)},Ss=function(e){return"object"===typeof e.className},Qs=function(e){return"LI"===e.tagName},Ls=function(e){return"OL"===e.tagName},Ds=function(e){return"INPUT"===e.tagName},Is=function(e){return"HTML"===e.tagName},Os=function(e){return"svg"===e.tagName},Ps=function(e){return"BODY"===e.tagName},Hs=function(e){return"CANVAS"===e.tagName},Rs=function(e){return"VIDEO"===e.tagName},Ns=function(e){return"IMG"===e.tagName},ks=function(e){return"IFRAME"===e.tagName},Ks=function(e){return"STYLE"===e.tagName},Gs=function(e){return"SCRIPT"===e.tagName},Vs=function(e){return"TEXTAREA"===e.tagName},zs=function(e){return"SELECT"===e.tagName},js=function(e){return"SLOT"===e.tagName},Xs=function(e){return e.tagName.indexOf("-")>0},Ws=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,i=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var A=[];return i&&r.forEach((function(e){var n=t.counters[e.counter];A.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),A},e}(),Ys={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},qs={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Js={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Zs={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},$s=function(e,t,n,r,i,A){return e<t||e>n?ha(e,i,A.length>0):r.integers.reduce((function(t,n,i){while(e>=n)e-=n,t+=r.values[i];return t}),"")+A},ea=function(e,t,n,r){var i="";do{n||e--,i=r(e)+i,e/=t}while(e*t>=t);return i},ta=function(e,t,n,r,i){var A=n-t+1;return(e<0?"-":"")+(ea(Math.abs(e),A,r,(function(e){return l(Math.floor(e%A)+t)}))+i)},na=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return ea(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},ra=1,ia=2,Aa=4,oa=8,sa=function(e,t,n,r,i,A){if(e<-9999||e>9999)return ha(e,4,i.length>0);var o=Math.abs(e),s=i;if(0===o)return t[0]+s;for(var a=0;o>0&&a<=4;a++){var c=o%10;0===c&&gA(A,ra)&&""!==s?s=t[c]+s:c>1||1===c&&0===a||1===c&&1===a&&gA(A,ia)||1===c&&1===a&&gA(A,Aa)&&e>100||1===c&&a>1&&gA(A,oa)?s=t[c]+(a>0?n[a-1]:"")+s:1===c&&a>0&&(s=n[a-1]+s),o=Math.floor(o/10)}return(e<0?r:"")+s},aa="十百千萬",ca="拾佰仟萬",la="マイナス",ua="마이너스",ha=function(e,t,n){var r=n?". ":"",i=n?"、":"",A=n?", ":"",o=n?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var s=ta(e,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return na(e,"〇一二三四五六七八九",i);case 6:return $s(e,1,3999,Ys,3,r).toLowerCase();case 7:return $s(e,1,3999,Ys,3,r);case 8:return ta(e,945,969,!1,r);case 9:return ta(e,97,122,!1,r);case 10:return ta(e,65,90,!1,r);case 11:return ta(e,1632,1641,!0,r);case 12:case 49:return $s(e,1,9999,qs,3,r);case 35:return $s(e,1,9999,qs,3,r).toLowerCase();case 13:return ta(e,2534,2543,!0,r);case 14:case 30:return ta(e,6112,6121,!0,r);case 15:return na(e,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return na(e,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return sa(e,"零一二三四五六七八九",aa,"負",i,ia|Aa|oa);case 47:return sa(e,"零壹貳參肆伍陸柒捌玖",ca,"負",i,ra|ia|Aa|oa);case 42:return sa(e,"零一二三四五六七八九",aa,"负",i,ia|Aa|oa);case 41:return sa(e,"零壹贰叁肆伍陆柒捌玖",ca,"负",i,ra|ia|Aa|oa);case 26:return sa(e,"〇一二三四五六七八九","十百千万",la,i,0);case 25:return sa(e,"零壱弐参四伍六七八九","拾百千万",la,i,ra|ia|Aa);case 31:return sa(e,"영일이삼사오육칠팔구","십백천만",ua,A,ra|ia|Aa);case 33:return sa(e,"零一二三四五六七八九","十百千萬",ua,A,0);case 32:return sa(e,"零壹貳參四五六七八九","拾百千",ua,A,ra|ia|Aa);case 18:return ta(e,2406,2415,!0,r);case 20:return $s(e,1,19999,Zs,3,r);case 21:return ta(e,2790,2799,!0,r);case 22:return ta(e,2662,2671,!0,r);case 22:return $s(e,1,10999,Js,3,r);case 23:return na(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return na(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ta(e,3302,3311,!0,r);case 28:return na(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return na(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return ta(e,3792,3801,!0,r);case 37:return ta(e,6160,6169,!0,r);case 38:return ta(e,4160,4169,!0,r);case 39:return ta(e,2918,2927,!0,r);case 40:return ta(e,1776,1785,!0,r);case 43:return ta(e,3046,3055,!0,r);case 44:return ta(e,3174,3183,!0,r);case 45:return ta(e,3664,3673,!0,r);case 46:return ta(e,3872,3881,!0,r);case 3:default:return ta(e,48,57,!0,r)}},da="data-html2canvas-ignore",pa=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ws,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,A=ma(e,t);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,a=A.contentWindow,c=a.document,l=va(A).then((function(){return r(n,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(Ca),a&&(a.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===t.top&&a.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),e=this.options.onclone,n=this.clonedReferenceElement,"undefined"===typeof n?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,wa(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then((function(){return e(c,n)})).then((function(){return A}))]:[2,A]}}))}))}));return c.open(),c.write(Ba(document.doctype)+"<html></html>"),ba(this.referenceElement.ownerDocument,o,s),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),l},e.prototype.createElementClone=function(e){if(DA(e,2),Hs(e))return this.createCanvasClone(e);if(Rs(e))return this.createVideoClone(e);if(Ks(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Ns(t)&&(Ns(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Xs(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return ya(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(zt){if(this.context.logger.error("Unable to access cssRules property",zt),"SecurityError"!==zt.name)throw zt}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(zt){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var i=e.getContext("2d"),A=r.getContext("2d");if(A)if(!this.options.allowTaint&&i)A.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(o){var s=o.getContextAttributes();!1===(null===s||void 0===s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}A.drawImage(e,0,0)}return r}catch(zt){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(zt){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){Ts(t)&&(Gs(t)||t.hasAttribute(da)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Ts(t)&&Ks(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Ts(i)&&js(i)&&"function"===typeof i.assignedNodes){var A=i.assignedNodes();A.length&&A.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,i,n)},e.prototype.cloneNode=function(e,t){if(_s(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ts(e)&&(Us(e)||Ss(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var i=n.getComputedStyle(e),A=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&Us(r)&&(this.clonedReferenceElement=r),Ps(r)&&Ua(r);var s=this.counters.parse(new UA(this.context,i)),a=this.resolvePseudoContent(e,r,A,uo.BEFORE);Xs(e)&&(t=!0),Rs(e)||this.cloneChildNodes(e,r,t),a&&r.insertBefore(a,r.firstChild);var c=this.resolvePseudoContent(e,r,o,uo.AFTER);return c&&r.appendChild(c),this.counters.pop(s),(i&&(this.options.copyStyles||Ss(e))&&!ks(e)||t)&&ya(i,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(Vs(e)||zs(e))&&(Vs(r)||zs(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var i=this;if(n){var A=n.content,o=t.ownerDocument;if(o&&A&&"none"!==A&&"-moz-alt-content"!==A&&"none"!==n.display){this.counters.parse(new UA(this.context,n));var s=new TA(this.context,n),a=o.createElement("html2canvaspseudoelement");ya(n,a),s.content.forEach((function(t){if(0===t.type)a.appendChild(o.createTextNode(t.value));else if(22===t.type){var n=o.createElement("img");n.src=t.value,n.style.opacity="1",a.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(kn);r.length&&a.appendChild(o.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var A=t.values.filter(zn),c=A[0],l=A[1];if(c&&kn(c)){var u=i.counters.getCounterValue(c.value),h=l&&kn(l)?Ii.parse(i.context,l.value):3;a.appendChild(o.createTextNode(ha(u,h,!1)))}}else if("counters"===t.name){var d=t.values.filter(zn),p=(c=d[0],d[1]);l=d[2];if(c&&kn(c)){var f=i.counters.getCounterValues(c.value),m=l&&kn(l)?Ii.parse(i.context,l.value):3,g=p&&0===p.type?p.value:"",w=f.map((function(e){return ha(e,m,!1)})).join(g);a.appendChild(o.createTextNode(w))}}}else if(20===t.type)switch(t.value){case"open-quote":a.appendChild(o.createTextNode(bA(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":a.appendChild(o.createTextNode(bA(s.quotes,--i.quoteDepth,!1)));break;default:a.appendChild(o.createTextNode(t.value))}})),a.className=Fa+" "+_a;var c=r===uo.BEFORE?" "+Fa:" "+_a;return Ss(t)?t.className.baseValue+=c:t.className+=c,a}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();(function(e){e[e["BEFORE"]=0]="BEFORE",e[e["AFTER"]=1]="AFTER"})(uo||(uo={}));var fa,ma=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(da,"true"),e.body.appendChild(n),n},ga=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},wa=function(e){return Promise.all([].slice.call(e.images,0).map(ga))},va=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),t(e))}),50)}}))},xa=["all","d","content"],ya=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===xa.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},Ba=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},ba=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},Ca=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},Ma=":before",Ea=":after",Fa="___html2canvas___pseudoelement_before",_a="___html2canvas___pseudoelement_after",Ta='{\n    content: "" !important;\n    display: none !important;\n}',Ua=function(e){Sa(e,"."+Fa+Ma+Ta+"\n         ."+_a+Ea+Ta)},Sa=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},Qa=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),La=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:Na(e)||Pa(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,A,o=this;return i(this,(function(i){switch(i.label){case 0:return t=Qa.isSameOrigin(e),n=!Ha(e)&&!0===this._options.useCORS&&zo.SUPPORT_CORS_IMAGES&&!t,r=!Ha(e)&&!t&&!Na(e)&&"string"===typeof this._options.proxy&&zo.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||Ha(e)||Na(e)||r||n?(A=e,r?[4,this.proxy(A)]:[3,2]):[2];case 1:A=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(Ra(A)||n)&&(r.crossOrigin="anonymous"),r.src=A,!0===r.complete&&setTimeout((function(){return e(r)}),500),o._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,i.sent()]}}))}))},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(i,A){var o=zo.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===o)i(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return i(e.result)}),!1),e.addEventListener("error",(function(e){return A(e)}),!1),e.readAsDataURL(s.response)}else A("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=A;var a=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+a+"url="+encodeURIComponent(e)+"&responseType="+o),"text"!==o&&s instanceof XMLHttpRequest&&(s.responseType=o),t._options.imageTimeout){var c=t._options.imageTimeout;s.timeout=c,s.ontimeout=function(){return A("Timed out ("+c+"ms) proxying "+r)}}s.send()}))},e}(),Da=/^data:image\/svg\+xml/i,Ia=/^data:image\/.*;base64,/i,Oa=/^data:image\/.*/i,Pa=function(e){return zo.SUPPORT_SVG_DRAWING||!ka(e)},Ha=function(e){return Oa.test(e)},Ra=function(e){return Ia.test(e)},Na=function(e){return"blob"===e.substr(0,4)},ka=function(e){return"svg"===e.substr(-3).toLowerCase()||Da.test(e)},Ka=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Ga=function(e,t,n){return new Ka(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Va=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Ga(this.start,this.startControl,t),i=Ga(this.startControl,this.endControl,t),A=Ga(this.endControl,this.end,t),o=Ga(r,i,t),s=Ga(i,A,t),a=Ga(o,s,t);return n?new e(this.start,r,o,a):new e(a,s,A,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),za=function(e){return 1===e.type},ja=function(){function e(e){var t=e.styles,n=e.bounds,r=er(t.borderTopLeftRadius,n.width,n.height),i=r[0],A=r[1],o=er(t.borderTopRightRadius,n.width,n.height),s=o[0],a=o[1],c=er(t.borderBottomRightRadius,n.width,n.height),l=c[0],u=c[1],h=er(t.borderBottomLeftRadius,n.width,n.height),d=h[0],p=h[1],f=[];f.push((i+s)/n.width),f.push((d+l)/n.width),f.push((A+p)/n.height),f.push((a+u)/n.height);var m=Math.max.apply(Math,f);m>1&&(i/=m,A/=m,s/=m,a/=m,l/=m,u/=m,d/=m,p/=m);var g=n.width-s,w=n.height-u,v=n.width-l,x=n.height-p,y=t.borderTopWidth,B=t.borderRightWidth,b=t.borderBottomWidth,C=t.borderLeftWidth,M=tr(t.paddingTop,e.bounds.width),E=tr(t.paddingRight,e.bounds.width),F=tr(t.paddingBottom,e.bounds.width),_=tr(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||A>0?Xa(n.left+C/3,n.top+y/3,i-C/3,A-y/3,fa.TOP_LEFT):new Ka(n.left+C/3,n.top+y/3),this.topRightBorderDoubleOuterBox=i>0||A>0?Xa(n.left+g,n.top+y/3,s-B/3,a-y/3,fa.TOP_RIGHT):new Ka(n.left+n.width-B/3,n.top+y/3),this.bottomRightBorderDoubleOuterBox=l>0||u>0?Xa(n.left+v,n.top+w,l-B/3,u-b/3,fa.BOTTOM_RIGHT):new Ka(n.left+n.width-B/3,n.top+n.height-b/3),this.bottomLeftBorderDoubleOuterBox=d>0||p>0?Xa(n.left+C/3,n.top+x,d-C/3,p-b/3,fa.BOTTOM_LEFT):new Ka(n.left+C/3,n.top+n.height-b/3),this.topLeftBorderDoubleInnerBox=i>0||A>0?Xa(n.left+2*C/3,n.top+2*y/3,i-2*C/3,A-2*y/3,fa.TOP_LEFT):new Ka(n.left+2*C/3,n.top+2*y/3),this.topRightBorderDoubleInnerBox=i>0||A>0?Xa(n.left+g,n.top+2*y/3,s-2*B/3,a-2*y/3,fa.TOP_RIGHT):new Ka(n.left+n.width-2*B/3,n.top+2*y/3),this.bottomRightBorderDoubleInnerBox=l>0||u>0?Xa(n.left+v,n.top+w,l-2*B/3,u-2*b/3,fa.BOTTOM_RIGHT):new Ka(n.left+n.width-2*B/3,n.top+n.height-2*b/3),this.bottomLeftBorderDoubleInnerBox=d>0||p>0?Xa(n.left+2*C/3,n.top+x,d-2*C/3,p-2*b/3,fa.BOTTOM_LEFT):new Ka(n.left+2*C/3,n.top+n.height-2*b/3),this.topLeftBorderStroke=i>0||A>0?Xa(n.left+C/2,n.top+y/2,i-C/2,A-y/2,fa.TOP_LEFT):new Ka(n.left+C/2,n.top+y/2),this.topRightBorderStroke=i>0||A>0?Xa(n.left+g,n.top+y/2,s-B/2,a-y/2,fa.TOP_RIGHT):new Ka(n.left+n.width-B/2,n.top+y/2),this.bottomRightBorderStroke=l>0||u>0?Xa(n.left+v,n.top+w,l-B/2,u-b/2,fa.BOTTOM_RIGHT):new Ka(n.left+n.width-B/2,n.top+n.height-b/2),this.bottomLeftBorderStroke=d>0||p>0?Xa(n.left+C/2,n.top+x,d-C/2,p-b/2,fa.BOTTOM_LEFT):new Ka(n.left+C/2,n.top+n.height-b/2),this.topLeftBorderBox=i>0||A>0?Xa(n.left,n.top,i,A,fa.TOP_LEFT):new Ka(n.left,n.top),this.topRightBorderBox=s>0||a>0?Xa(n.left+g,n.top,s,a,fa.TOP_RIGHT):new Ka(n.left+n.width,n.top),this.bottomRightBorderBox=l>0||u>0?Xa(n.left+v,n.top+w,l,u,fa.BOTTOM_RIGHT):new Ka(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||p>0?Xa(n.left,n.top+x,d,p,fa.BOTTOM_LEFT):new Ka(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||A>0?Xa(n.left+C,n.top+y,Math.max(0,i-C),Math.max(0,A-y),fa.TOP_LEFT):new Ka(n.left+C,n.top+y),this.topRightPaddingBox=s>0||a>0?Xa(n.left+Math.min(g,n.width-B),n.top+y,g>n.width+B?0:Math.max(0,s-B),Math.max(0,a-y),fa.TOP_RIGHT):new Ka(n.left+n.width-B,n.top+y),this.bottomRightPaddingBox=l>0||u>0?Xa(n.left+Math.min(v,n.width-C),n.top+Math.min(w,n.height-b),Math.max(0,l-B),Math.max(0,u-b),fa.BOTTOM_RIGHT):new Ka(n.left+n.width-B,n.top+n.height-b),this.bottomLeftPaddingBox=d>0||p>0?Xa(n.left+C,n.top+Math.min(x,n.height-b),Math.max(0,d-C),Math.max(0,p-b),fa.BOTTOM_LEFT):new Ka(n.left+C,n.top+n.height-b),this.topLeftContentBox=i>0||A>0?Xa(n.left+C+_,n.top+y+M,Math.max(0,i-(C+_)),Math.max(0,A-(y+M)),fa.TOP_LEFT):new Ka(n.left+C+_,n.top+y+M),this.topRightContentBox=s>0||a>0?Xa(n.left+Math.min(g,n.width+C+_),n.top+y+M,g>n.width+C+_?0:s-C+_,a-(y+M),fa.TOP_RIGHT):new Ka(n.left+n.width-(B+E),n.top+y+M),this.bottomRightContentBox=l>0||u>0?Xa(n.left+Math.min(v,n.width-(C+_)),n.top+Math.min(w,n.height+y+M),Math.max(0,l-(B+E)),u-(b+F),fa.BOTTOM_RIGHT):new Ka(n.left+n.width-(B+E),n.top+n.height-(b+F)),this.bottomLeftContentBox=d>0||p>0?Xa(n.left+C+_,n.top+x,Math.max(0,d-(C+_)),p-(b+F),fa.BOTTOM_LEFT):new Ka(n.left+C+_,n.top+n.height-(b+F))}return e}();(function(e){e[e["TOP_LEFT"]=0]="TOP_LEFT",e[e["TOP_RIGHT"]=1]="TOP_RIGHT",e[e["BOTTOM_RIGHT"]=2]="BOTTOM_RIGHT",e[e["BOTTOM_LEFT"]=3]="BOTTOM_LEFT"})(fa||(fa={}));var Xa=function(e,t,n,r,i){var A=(Math.sqrt(2)-1)/3*4,o=n*A,s=r*A,a=e+n,c=t+r;switch(i){case fa.TOP_LEFT:return new Va(new Ka(e,c),new Ka(e,c-s),new Ka(a-o,t),new Ka(a,t));case fa.TOP_RIGHT:return new Va(new Ka(e,t),new Ka(e+o,t),new Ka(a,c-s),new Ka(a,c));case fa.BOTTOM_RIGHT:return new Va(new Ka(a,t),new Ka(a,t+s),new Ka(e+o,c),new Ka(e,c));case fa.BOTTOM_LEFT:default:return new Va(new Ka(a,c),new Ka(a-o,c),new Ka(e,t+s),new Ka(e,t))}},Wa=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Ya=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},qa=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Ja=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Za=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),$a=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),ec=function(e){return 0===e.type},tc=function(e){return 1===e.type},nc=function(e){return 2===e.type},rc=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},ic=function(e,t,n,r,i){return e.map((function(e,A){switch(A){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+i);case 3:return e.add(t,n+i)}return e}))},Ac=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),oc=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new ja(this.container),this.container.styles.opacity<1&&this.effects.push(new $a(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Ja(n,r,i))}if(0!==this.container.styles.overflowX){var A=Wa(this.curves),o=qa(this.curves);rc(A,o)?this.effects.push(new Za(A,6)):(this.effects.push(new Za(A,2)),this.effects.push(new Za(o,4)))}}return e.prototype.getEffects=function(e){var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);while(n){var i=n.effects.filter((function(e){return!tc(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var A=Wa(n.curves),o=qa(n.curves);rc(A,o)||r.unshift(new Za(o,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter((function(t){return gA(t.target,e)}))},e}(),sc=function(e,t,n,r){e.container.elements.forEach((function(i){var A=gA(i.flags,4),o=gA(i.flags,2),s=new oc(i,e);gA(i.styles.display,2048)&&r.push(s);var a=gA(i.flags,8)?[]:r;if(A||o){var c=A||i.styles.isPositioned()?n:t,l=new Ac(s);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;c.negativeZIndex.some((function(e,t){return u>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),c.negativeZIndex.splice(h,0,l)}else if(u>0){var d=0;c.positiveZIndex.some((function(e,t){return u>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0})),c.positiveZIndex.splice(d,0,l)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(l)}else i.styles.isFloating()?c.nonPositionedFloats.push(l):c.nonPositionedInlineLevel.push(l);sc(s,l,A?l:n,a)}else i.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),sc(s,t,n,a);gA(i.flags,8)&&ac(i,a)}))},ac=function(e,t){for(var n=e instanceof cs?e.start:1,r=e instanceof cs&&e.reversed,i=0;i<t.length;i++){var A=t[i];A.container instanceof as&&"number"===typeof A.container.value&&0!==A.container.value&&(n=A.container.value),A.listValue=ha(n,A.container.styles.listStyleType,!0),n+=r?-1:1}},cc=function(e){var t=new oc(e,null),n=new Ac(t),r=[];return sc(t,n,n,r),ac(t.container,r),n},lc=function(e,t){switch(t){case 0:return fc(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return fc(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return fc(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return fc(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},uc=function(e,t){switch(t){case 0:return fc(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return fc(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return fc(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return fc(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},hc=function(e,t){switch(t){case 0:return fc(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return fc(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return fc(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return fc(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},dc=function(e,t){switch(t){case 0:return pc(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return pc(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return pc(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return pc(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},pc=function(e,t){var n=[];return za(e)?n.push(e.subdivide(.5,!1)):n.push(e),za(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},fc=function(e,t,n,r){var i=[];return za(e)?i.push(e.subdivide(.5,!1)):i.push(e),za(n)?i.push(n.subdivide(.5,!0)):i.push(n),za(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),za(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},mc=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},gc=function(e){var t=e.styles,n=e.bounds,r=tr(t.paddingLeft,n.width),i=tr(t.paddingRight,n.width),A=tr(t.paddingTop,n.width),o=tr(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,A+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+i),-(t.borderTopWidth+t.borderBottomWidth+A+o))},wc=function(e,t){return 0===e?t.bounds:2===e?gc(t):mc(t)},vc=function(e,t){return 0===e?t.bounds:2===e?gc(t):mc(t)},xc=function(e,t,n){var r=wc(Cc(e.styles.backgroundOrigin,t),e),i=vc(Cc(e.styles.backgroundClip,t),e),A=bc(Cc(e.styles.backgroundSize,t),n,r),o=A[0],s=A[1],a=er(Cc(e.styles.backgroundPosition,t),r.width-o,r.height-s),c=Mc(Cc(e.styles.backgroundRepeat,t),a,A,r,i),l=Math.round(r.left+a[0]),u=Math.round(r.top+a[1]);return[c,l,u,o,s]},yc=function(e){return kn(e)&&e.value===Xr.AUTO},Bc=function(e){return"number"===typeof e},bc=function(e,t,n){var r=t[0],i=t[1],A=t[2],o=e[0],s=e[1];if(!o)return[0,0];if(Yn(o)&&s&&Yn(s))return[tr(o,n.width),tr(s,n.height)];var a=Bc(A);if(kn(o)&&(o.value===Xr.CONTAIN||o.value===Xr.COVER)){if(Bc(A)){var c=n.width/n.height;return c<A!==(o.value===Xr.COVER)?[n.width,n.width/A]:[n.height*A,n.height]}return[n.width,n.height]}var l=Bc(r),u=Bc(i),h=l||u;if(yc(o)&&(!s||yc(s))){if(l&&u)return[r,i];if(!a&&!h)return[n.width,n.height];if(h&&a){var d=l?r:i*A,p=u?i:r/A;return[d,p]}var f=l?r:n.width,m=u?i:n.height;return[f,m]}if(a){var g=0,w=0;return Yn(o)?g=tr(o,n.width):Yn(s)&&(w=tr(s,n.height)),yc(o)?g=w*A:s&&!yc(s)||(w=g/A),[g,w]}var v=null,x=null;if(Yn(o)?v=tr(o,n.width):s&&Yn(s)&&(x=tr(s,n.height)),null===v||s&&!yc(s)||(x=l&&u?v/r*i:n.height),null!==x&&yc(o)&&(v=l&&u?x/i*r:n.width),null!==v&&null!==x)return[v,x];throw new Error("Unable to calculate background-size for element")},Cc=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},Mc=function(e,t,n,r,i){var A=t[0],o=t[1],s=n[0],a=n[1];switch(e){case 2:return[new Ka(Math.round(r.left),Math.round(r.top+o)),new Ka(Math.round(r.left+r.width),Math.round(r.top+o)),new Ka(Math.round(r.left+r.width),Math.round(a+r.top+o)),new Ka(Math.round(r.left),Math.round(a+r.top+o))];case 3:return[new Ka(Math.round(r.left+A),Math.round(r.top)),new Ka(Math.round(r.left+A+s),Math.round(r.top)),new Ka(Math.round(r.left+A+s),Math.round(r.height+r.top)),new Ka(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new Ka(Math.round(r.left+A),Math.round(r.top+o)),new Ka(Math.round(r.left+A+s),Math.round(r.top+o)),new Ka(Math.round(r.left+A+s),Math.round(r.top+o+a)),new Ka(Math.round(r.left+A),Math.round(r.top+o+a))];default:return[new Ka(Math.round(i.left),Math.round(i.top)),new Ka(Math.round(i.left+i.width),Math.round(i.top)),new Ka(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ka(Math.round(i.left),Math.round(i.height+i.top))]}},Ec="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Fc="Hidden Text",_c=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),A=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",A.appendChild(n),r.src=Ec,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Fc)),n.appendChild(i),n.appendChild(r);var o=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Fc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return A.removeChild(n),{baseline:o,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),Tc=function(){function e(e,t){this.context=e,this.options=t}return e}(),Uc=1e4,Sc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new _c(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){var t=this;while(this._activeEffects.length)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},n.prototype.applyEffect=function(e){this.ctx.save(),nc(e)&&(this.ctx.globalAlpha=e.opacity),ec(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),tc(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return t=e.element.container.styles,t.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return gA(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;if(0===t)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n);else{var i=qo(e.text);i.reduce((function(t,i){return r.ctx.fillText(i,t,e.bounds.top+n),t+r.ctx.measureText(i).width}),e.bounds.left)}},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=Oc(e.fontFamily).join(", "),r=Rn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,(function(){var n,r,A,o,s,a,c,l,u=this;return i(this,(function(i){return n=this.createFontStyle(t),r=n[0],A=n[1],o=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=this.fontMetrics.getMetrics(A,o),a=s.baseline,c=s.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(n){switch(n){case 0:u.ctx.fillStyle=hr(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,a);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){u.ctx.shadowColor=hr(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,a)})),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=hr(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+a),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1);break}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=hr(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+a)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter";break}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=gc(e),i=qa(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var t,r,A,s,a,c,l,u,h,d,p,f,m,g,w,v,x,y,B;return i(this,(function(i){switch(i.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,A=t.styles,s=0,a=t.textNodes,i.label=1;case 1:return s<a.length?(c=a[s],[4,this.renderTextNode(c,A)]):[3,4];case 2:i.sent(),i.label=3;case 3:return s++,[3,1];case 4:if(!(t instanceof As))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return v=i.sent(),this.renderReplacedElement(t,r,v),[3,8];case 7:return i.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof os&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof ss))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return v=i.sent(),this.renderReplacedElement(t,r,v),[3,12];case 11:return i.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof ys&&t.tree?(l=new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}),[4,l.render(t.tree)]):[3,14];case 13:u=i.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),i.label=14;case 14:if(t instanceof ws&&(h=Math.min(t.bounds.width,t.bounds.height),t.type===ps?t.checked&&(this.ctx.save(),this.path([new Ka(t.bounds.left+.39363*h,t.bounds.top+.79*h),new Ka(t.bounds.left+.16*h,t.bounds.top+.5549*h),new Ka(t.bounds.left+.27347*h,t.bounds.top+.44071*h),new Ka(t.bounds.left+.39694*h,t.bounds.top+.5649*h),new Ka(t.bounds.left+.72983*h,t.bounds.top+.23*h),new Ka(t.bounds.left+.84*h,t.bounds.top+.34085*h),new Ka(t.bounds.left+.39363*h,t.bounds.top+.79*h)]),this.ctx.fillStyle=hr(gs),this.ctx.fill(),this.ctx.restore()):t.type===fs&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+h/2,t.bounds.top+h/2,h/4,0,2*Math.PI,!0),this.ctx.fillStyle=hr(gs),this.ctx.fill(),this.ctx.restore())),Qc(t)&&t.value.length){switch(d=this.createFontStyle(A),y=d[0],p=d[1],f=this.fontMetrics.getMetrics(y,p).baseline,this.ctx.font=y,this.ctx.fillStyle=hr(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Dc(t.styles.textAlign),B=gc(t),m=0,t.styles.textAlign){case 1:m+=B.width/2;break;case 2:m+=B.width;break}g=B.add(m,0,0,-B.height/2+1),this.ctx.save(),this.path([new Ka(B.left,B.top),new Ka(B.left+B.width,B.top),new Ka(B.left+B.width,B.top+B.height),new Ka(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new jo(t.value,g),A.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gA(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(w=t.styles.listStyleImage,0!==w.type)return[3,18];v=void 0,x=w.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return v=i.sent(),this.ctx.drawImage(v,t.bounds.left-(v.width+10),t.bounds.top),[3,18];case 17:return i.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(y=this.createFontStyle(A)[0],this.ctx.font=y,this.ctx.fillStyle=hr(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new o(t.bounds.left,t.bounds.top+tr(t.styles.paddingTop,t.bounds.width),t.bounds.width,Qi(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new jo(e.listValue,B),A.letterSpacing,Qi(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),i.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,(function(){var t,n,r,A,o,s,a,c,l,u,h,d,p,f,m;return i(this,(function(i){switch(i.label){case 0:return gA(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:i.sent(),t=0,n=e.negativeZIndex,i.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:i.sent(),i.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:i.sent(),r=0,A=e.nonInlineLevel,i.label=7;case 7:return r<A.length?(m=A[r],[4,this.renderNode(m)]):[3,10];case 8:i.sent(),i.label=9;case 9:return r++,[3,7];case 10:o=0,s=e.nonPositionedFloats,i.label=11;case 11:return o<s.length?(m=s[o],[4,this.renderStack(m)]):[3,14];case 12:i.sent(),i.label=13;case 13:return o++,[3,11];case 14:a=0,c=e.nonPositionedInlineLevel,i.label=15;case 15:return a<c.length?(m=c[a],[4,this.renderStack(m)]):[3,18];case 16:i.sent(),i.label=17;case 17:return a++,[3,15];case 18:l=0,u=e.inlineLevel,i.label=19;case 19:return l<u.length?(m=u[l],[4,this.renderNode(m)]):[3,22];case 20:i.sent(),i.label=21;case 21:return l++,[3,19];case 22:h=0,d=e.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return h<d.length?(m=d[h],[4,this.renderStack(m)]):[3,26];case 24:i.sent(),i.label=25;case 25:return h++,[3,23];case 26:p=0,f=e.positiveZIndex,i.label=27;case 27:return p<f.length?(m=f[p],[4,this.renderStack(m)]):[3,30];case 28:i.sent(),i.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=za(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),za(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var i=null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document,A=i.createElement("canvas");A.width=Math.max(1,t),A.height=Math.max(1,n);var o=A.getContext("2d");return o.drawImage(e,0,0,e.width,e.height,0,0,t,n),A},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,A,o,s;return i(this,(function(a){switch(a.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var A,o,s,a,c,l,u,h,d,p,f,m,g,w,v,x,y,B,b,C,M,E,F,_,T,U,S,Q,L,D,I;return i(this,(function(i){switch(i.label){case 0:if(0!==n.type)return[3,5];A=void 0,o=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.context.cache.match(o)];case 2:return A=i.sent(),[3,4];case 3:return i.sent(),r.context.logger.error("Error loading background-image "+o),[3,4];case 4:return A&&(s=xc(e,t,[A.width,A.height,A.width/A.height]),x=s[0],E=s[1],F=s[2],b=s[3],C=s[4],w=r.ctx.createPattern(r.resizeImage(A,b,C),"repeat"),r.renderRepeat(x,w,E,F)),[3,6];case 5:Gr(n)?(a=xc(e,t,[null,null,null]),x=a[0],E=a[1],F=a[2],b=a[3],C=a[4],c=Er(n.angle,b,C),l=c[0],u=c[1],h=c[2],d=c[3],p=c[4],f=document.createElement("canvas"),f.width=b,f.height=C,m=f.getContext("2d"),g=m.createLinearGradient(u,d,h,p),Cr(n.stops,l).forEach((function(e){return g.addColorStop(e.stop,hr(e.color))})),m.fillStyle=g,m.fillRect(0,0,b,C),b>0&&C>0&&(w=r.ctx.createPattern(f,"repeat"),r.renderRepeat(x,w,E,F))):Vr(n)&&(v=xc(e,t,[null,null,null]),x=v[0],y=v[1],B=v[2],b=v[3],C=v[4],M=0===n.position.length?[Zn]:n.position,E=tr(M[0],b),F=tr(M[M.length-1],C),_=Tr(n,E,F,b,C),T=_[0],U=_[1],T>0&&U>0&&(S=r.ctx.createRadialGradient(y+E,B+F,0,y+E,B+F,T),Cr(n.stops,2*T).forEach((function(e){return S.addColorStop(e.stop,hr(e.color))})),r.path(x),r.ctx.fillStyle=S,T!==U?(Q=e.bounds.left+.5*e.bounds.width,L=e.bounds.top+.5*e.bounds.height,D=U/T,I=1/D,r.ctx.save(),r.ctx.translate(Q,L),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-Q,-L),r.ctx.fillRect(y,I*(B-L)+L,b,C*I),r.ctx.restore()):r.ctx.fill())),i.label=6;case 6:return t--,[2]}}))},r=this,A=0,o=e.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return A<o.length?(s=o[A],[5,n(s)]):[3,4];case 2:a.sent(),a.label=3;case 3:return A++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,(function(){return i(this,(function(r){return this.path(lc(n,t)),this.ctx.fillStyle=hr(e),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(e,t,n,A){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,A)]:[3,2];case 1:return i.sent(),[2];case 2:return r=uc(A,n),this.path(r),this.ctx.fillStyle=hr(e),this.ctx.fill(),o=hc(A,n),this.path(o),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,(function(){var t,n,r,A,o,s,a,c,l=this;return i(this,(function(i){switch(i.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!ur(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],A=Lc(Cc(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(A),this.ctx.clip(),ur(t.backgroundColor)||(this.ctx.fillStyle=hr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){l.ctx.save();var n=Wa(e.curves),r=t.inset?0:Uc,i=ic(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(l.path(n),l.ctx.clip(),l.mask(i)):(l.mask(n),l.ctx.clip(),l.path(i)),l.ctx.shadowOffsetX=t.offsetX.number+r,l.ctx.shadowOffsetY=t.offsetY.number,l.ctx.shadowColor=hr(t.color),l.ctx.shadowBlur=t.blur.number,l.ctx.fillStyle=t.inset?hr(t.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),i.label=2;case 2:o=0,s=0,a=r,i.label=3;case 3:return s<a.length?(c=a[s],0!==c.style&&!ur(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,e.curves,2)]:[3,11]):[3,13];case 4:return i.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,e.curves,3)];case 6:return i.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,e.curves)];case 8:return i.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,e.curves)];case 10:i.sent(),i.label=11;case 11:o++,i.label=12;case 12:return s++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(e,t,n,A,o){return r(this,void 0,void 0,(function(){var r,s,a,c,l,u,h,d,p,f,m,g,w,v,x,y;return i(this,(function(i){return this.ctx.save(),r=dc(A,n),s=lc(A,n),2===o&&(this.path(s),this.ctx.clip()),za(s[0])?(a=s[0].start.x,c=s[0].start.y):(a=s[0].x,c=s[0].y),za(s[1])?(l=s[1].end.x,u=s[1].end.y):(l=s[1].x,u=s[1].y),h=0===n||2===n?Math.abs(a-l):Math.abs(c-u),this.ctx.beginPath(),3===o?this.formatPath(r):this.formatPath(s.slice(0,2)),d=t<3?3*t:2*t,p=t<3?2*t:t,3===o&&(d=t,p=t),f=!0,h<=2*d?f=!1:h<=2*d+p?(m=h/(2*d+p),d*=m,p*=m):(g=Math.floor((h+p)/(d+p)),w=(h-g*d)/(g-1),v=(h-(g+1)*d)/g,p=v<=0||Math.abs(p-w)<Math.abs(p-v)?w:v),f&&(3===o?this.ctx.setLineDash([0,d+p]):this.ctx.setLineDash([d,p])),3===o?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=hr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===o&&(za(s[0])&&(x=s[3],y=s[0],this.ctx.beginPath(),this.formatPath([new Ka(x.end.x,x.end.y),new Ka(y.start.x,y.start.y)]),this.ctx.stroke()),za(s[1])&&(x=s[1],y=s[2],this.ctx.beginPath(),this.formatPath([new Ka(x.end.x,x.end.y),new Ka(y.start.x,y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=hr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=cc(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},n}(Tc),Qc=function(e){return e instanceof xs||(e instanceof vs||e instanceof ws&&e.type!==fs&&e.type!==ps)},Lc=function(e,t){switch(e){case 0:return Wa(t);case 2:return Ya(t);case 1:default:return qa(t)}},Dc=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Ic=["-apple-system","system-ui"],Oc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===Ic.indexOf(e)})):e},Pc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=Go(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Hc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=hr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(Tc),Hc=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Rc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,A([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,A([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,A([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,A([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Nc=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new Rc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new La(this,t)}return e.instanceCount=1,e}(),kc=function(e,t){return void 0===t&&(t={}),Kc(e,t)};"undefined"!==typeof window&&Qa.setContext(window);var Kc=function(e,t){return r(void 0,void 0,void 0,(function(){var r,A,c,l,u,h,d,p,f,m,g,w,v,x,y,B,b,C,M,E,F,_,T,U,S,Q,L,D,I,O,P,H,R,N,k,K,G,V,z;return i(this,(function(i){switch(i.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(A=r.defaultView,!A)throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(T=t.allowTaint)&&void 0!==T&&T,imageTimeout:null!==(U=t.imageTimeout)&&void 0!==U?U:15e3,proxy:t.proxy,useCORS:null!==(S=t.useCORS)&&void 0!==S&&S},l=n({logging:null===(Q=t.logging)||void 0===Q||Q,cache:t.cache},c),u={windowWidth:null!==(L=t.windowWidth)&&void 0!==L?L:A.innerWidth,windowHeight:null!==(D=t.windowHeight)&&void 0!==D?D:A.innerHeight,scrollX:null!==(I=t.scrollX)&&void 0!==I?I:A.pageXOffset,scrollY:null!==(O=t.scrollY)&&void 0!==O?O:A.pageYOffset},h=new o(u.scrollX,u.scrollY,u.windowWidth,u.windowHeight),d=new Nc(l,h),p=null!==(P=t.foreignObjectRendering)&&void 0!==P&&P,f={allowTaint:null!==(H=t.allowTaint)&&void 0!==H&&H,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:p,copyStyles:p},d.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),m=new pa(d,e,f),g=m.clonedReferenceElement,g?[4,m.toIFrame(r,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=i.sent(),v=Ps(g)||Is(g)?a(g.ownerDocument):s(d,g),x=v.width,y=v.height,B=v.left,b=v.top,C=Gc(d,g,t.backgroundColor),M={canvas:t.canvas,backgroundColor:C,scale:null!==(N=null!==(R=t.scale)&&void 0!==R?R:A.devicePixelRatio)&&void 0!==N?N:1,x:(null!==(k=t.x)&&void 0!==k?k:0)+B,y:(null!==(K=t.y)&&void 0!==K?K:0)+b,width:null!==(G=t.width)&&void 0!==G?G:Math.ceil(x),height:null!==(V=t.height)&&void 0!==V?V:Math.ceil(y)},p?(d.logger.debug("Document cloned, using foreign object rendering"),_=new Pc(d,M),[4,_.render(g)]):[3,3];case 2:return E=i.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+B+","+b+" with size "+x+"x"+y+" using computed rendering"),d.logger.debug("Starting DOM parsing"),F=Ms(d,g),C===F.styles.backgroundColor&&(F.styles.backgroundColor=xr.TRANSPARENT),d.logger.debug("Starting renderer for element at "+M.x+","+M.y+" with size "+M.width+"x"+M.height),_=new Sc(d,M),[4,_.render(F)];case 4:E=i.sent(),i.label=5;case 5:return(null===(z=t.removeContainer)||void 0===z||z)&&(pa.destroy(w)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,E]}}))}))},Gc=function(e,t,n){var r=t.ownerDocument,i=r.documentElement?vr(e,getComputedStyle(r.documentElement).backgroundColor):xr.TRANSPARENT,A=r.body?vr(e,getComputedStyle(r.body).backgroundColor):xr.TRANSPARENT,o="string"===typeof n?vr(e,n):null===n?xr.TRANSPARENT:4294967295;return t===r.documentElement?ur(i)?ur(A)?o:A:i:o};return kc}))},"160a":function(e,t,n){"use strict";var r=n("137b");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},"18d2":function(e,t,n){var r=n("71fe"),i=n("6d92"),A=n("986c"),o=n("218a"),s=n("3616"),a=n("9f5b3"),c=r.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var r=i(n,e,t);return null!==r&&A(r),r}if("RegExp"===s(e))return i(a,e,t);throw c("RegExp#exec called on incompatible receiver")}},"1baf":function(e,t,n){var r=n("d5b6"),i=n("f995").EXISTS,A=n("add7"),o=n("edd2").f,s=Function.prototype,a=A(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=A(c.exec),u="name";r&&!i&&o(s,u,{configurable:!0,get:function(){try{return l(c,a(this))[1]}catch(e){return""}}})},2249:function(e,t,n){var r=n("7e70"),i=n("57ad"),A=n("add7"),o=n("137b"),s=n("9145"),a=n("ec0b"),c=n("09a8"),l=n("79be").ctoi,u=/[^\d+/a-z]/i,h=/[\t\n\f\r ]+/g,d=/[=]+$/,p=i("atob"),f=String.fromCharCode,m=A("".charAt),g=A("".replace),w=A(u.exec),v=o((function(){return""!==atob(" ")})),x=!v&&!o((function(){p()}));r({global:!0,enumerable:!0,forced:v||x},{atob:function(e){if(c(arguments.length,1),x)return p(e);var t,n,r=g(s(e),h,""),A="",o=0,v=0;if(r.length%4==0&&(r=g(r,d,"")),r.length%4==1||w(u,r))throw new(i("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(t=m(r,o++))a(l,t)&&(n=v%4?64*n+l[t]:l[t],v++%4&&(A+=f(255&n>>(-2*v&6))));return A}})},2574:function(e,t,n){var r=n("137b"),i=n("4cd7"),A=n("3f47"),o=i("species");e.exports=function(e){return A>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"2ffc":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"3db2":function(e,t,n){var r=n("3616");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"42ce":function(e,t,n){"use strict";var r=n("5c04"),i=n("edd2"),A=n("80cb");e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,A(0,n)):e[o]=n}},"434b":function(e,t,n){var r=n("0db1"),i=n("add7"),A=n("adb7"),o=n("df65"),s=n("07d2"),a=n("e01f"),c=i([].push),l=function(e){var t=1==e,n=2==e,i=3==e,l=4==e,u=6==e,h=7==e,d=5==e||u;return function(p,f,m,g){for(var w,v,x=o(p),y=A(x),B=r(f,m),b=s(y),C=0,M=g||a,E=t?M(p,b):n||h?M(p,0):void 0;b>C;C++)if((d||C in y)&&(w=y[C],v=B(w,C,x),e))if(t)E[C]=v;else if(v)switch(e){case 3:return!0;case 5:return w;case 6:return C;case 2:c(E,w)}else switch(e){case 4:return!1;case 7:c(E,w)}return u?-1:i||l?l:E}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},"4f84":function(e,t,n){"use strict";var r=n("7e70"),i=n("71fe"),A=n("3db2"),o=n("1ef5"),s=n("8c6b"),a=n("4839"),c=n("07d2"),l=n("bed2"),u=n("42ce"),h=n("4cd7"),d=n("2574"),p=n("f432"),f=d("slice"),m=h("species"),g=i.Array,w=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,i,h=l(this),d=c(h),f=a(e,d),v=a(void 0===t?d:t,d);if(A(h)&&(n=h.constructor,o(n)&&(n===g||A(n.prototype))?n=void 0:s(n)&&(n=n[m],null===n&&(n=void 0)),n===g||void 0===n))return p(h,f,v);for(r=new(void 0===n?g:n)(w(v-f,0)),i=0;f<v;f++,i++)f in h&&u(r,i,h[f]);return r.length=i,r}})},5459:function(e,t,n){var r=n("8c6b"),i=n("7799");e.exports=function(e,t){r(t)&&"cause"in t&&i(e,"cause",t.cause)}},"570d":function(e,t,n){var r=n("137b"),i=n("71fe"),A=i.RegExp;e.exports=r((function(){var e=A("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"5e4f":function(e,t,n){var r=n("7e70"),i=n("71fe"),A=n("b5a9"),o=n("7b39"),s="WebAssembly",a=i[s],c=7!==Error("e",{cause:7}).cause,l=function(e,t){var n={};n[e]=o(e,t,c),r({global:!0,forced:c},n)},u=function(e,t){if(a&&a[e]){var n={};n[e]=o(s+"."+e,t,c),r({target:s,stat:!0,forced:c},n)}};l("Error",(function(e){return function(t){return A(e,this,arguments)}})),l("EvalError",(function(e){return function(t){return A(e,this,arguments)}})),l("RangeError",(function(e){return function(t){return A(e,this,arguments)}})),l("ReferenceError",(function(e){return function(t){return A(e,this,arguments)}})),l("SyntaxError",(function(e){return function(t){return A(e,this,arguments)}})),l("TypeError",(function(e){return function(t){return A(e,this,arguments)}})),l("URIError",(function(e){return function(t){return A(e,this,arguments)}})),u("CompileError",(function(e){return function(t){return A(e,this,arguments)}})),u("LinkError",(function(e){return function(t){return A(e,this,arguments)}})),u("RuntimeError",(function(e){return function(t){return A(e,this,arguments)}}))},"61d6":function(e,t,n){var r=n("9145");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},6266:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,A=arguments.length-1;A>=-1&&!r;A--){var o=A>=0?arguments[A]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,r="/"===o.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),o="/"===A(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),A=r(n.split("/")),o=Math.min(i.length,A.length),s=o,a=0;a<o;a++)if(i[a]!==A[a]){s=a;break}var c=[];for(a=s;a<i.length;a++)c.push("..");return c=c.concat(A.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,A=e.length-1;A>=1;--A)if(t=e.charCodeAt(A),47===t){if(!i){r=A;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,A=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===t?t=o:1!==A&&(A=1):-1!==t&&(A=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===A||1===A&&t===r-1&&t===n+1?"":e.slice(t,r)};var A="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("eef6"))},6954:function(e,t,n){"use strict";var r=n("7e70"),i=n("c201"),A=n("57ad"),o=n("137b"),s=n("9927"),a=n("80cb"),c=n("edd2").f,l=n("a551").f,u=n("0d5e"),h=n("ec0b"),d=n("3b40"),p=n("986c"),f=n("03bc"),m=n("61d6"),g=n("138e"),w=n("be31"),v=n("e132"),x=n("d5b6"),y=n("6c4d"),B="DOMException",b="DATA_CLONE_ERR",C=A("Error"),M=A(B)||function(){try{var e=A("MessageChannel")||i("worker_threads").MessageChannel;(new e).port1.postMessage(new WeakMap)}catch(t){if(t.name==b&&25==t.code)return t.constructor}}(),E=M&&M.prototype,F=C.prototype,_=v.set,T=v.getterFor(B),U="stack"in C(B),S=function(e){return h(g,e)&&g[e].m?g[e].c:0},Q=function(){d(this,L);var e=arguments.length,t=m(e<1?void 0:arguments[0]),n=m(e<2?void 0:arguments[1],"Error"),r=S(n);if(_(this,{type:B,name:n,message:t,code:r}),x||(this.name=n,this.message=t,this.code=r),U){var i=C(t);i.name=B,c(this,"stack",a(1,w(i.stack,1)))}},L=Q.prototype=s(F),D=function(e){return{enumerable:!0,configurable:!0,get:e}},I=function(e){return D((function(){return T(this)[e]}))};x&&l(L,{name:I("name"),message:I("message"),code:I("code")}),c(L,"constructor",a(1,Q));var O=o((function(){return!(new M instanceof C)})),P=O||o((function(){return F.toString!==f||"2: 1"!==String(new M(1,2))})),H=O||o((function(){return 25!==new M(1,"DataCloneError").code})),R=O||25!==M[b]||25!==E[b],N=y?P||H||R:O;r({global:!0,forced:N},{DOMException:N?Q:M});var k=A(B),K=k.prototype;for(var G in P&&(y||M===k)&&u(K,"toString",f),H&&x&&M===k&&c(K,"code",D((function(){return S(p(this).name)}))),g)if(h(g,G)){var V=g[G],z=V.s,j=a(6,V.c);h(k,z)||c(k,z,j),h(K,z)||c(K,z,j)}},"6ca7":function(e,t,n){"use strict";var r=n("7e70"),i=n("57ad"),A=n("80cb"),o=n("edd2").f,s=n("ec0b"),a=n("3b40"),c=n("bab3"),l=n("61d6"),u=n("138e"),h=n("be31"),d=n("6c4d"),p="DOMException",f=i("Error"),m=i(p),g=function(){a(this,w);var e=arguments.length,t=l(e<1?void 0:arguments[0]),n=l(e<2?void 0:arguments[1],"Error"),r=new m(t,n),i=f(t);return i.name=p,o(r,"stack",A(1,h(i.stack,1))),c(r,this,g),r},w=g.prototype=m.prototype,v="stack"in f(p),x="stack"in new m(1,2),y=v&&!x;r({global:!0,forced:d||y},{DOMException:y?g:m});var B=i(p),b=B.prototype;if(b.constructor!==B)for(var C in d||o(b,"constructor",A(1,B)),u)if(s(u,C)){var M=u[C],E=M.s;s(B,E)||o(B,E,A(6,M.c))}},7519:function(e,t,n){"use strict";n.d(t,"a",(function(){return Se}));n("5e4f");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n("cf33"),n("bab0"),n("2249"),n("6954"),n("6ca7"),n("e991"),n("4f84"),n("e456"),n("8cb5"),n("1baf"),n("af46");var o=n("cf64"),s=function(e){o["Object3D"].call(this),this.element=e||document.createElement("div"),this.element.style.position="absolute",this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))};s.prototype=Object.assign(Object.create(o["Object3D"].prototype),{constructor:s,copy:function(e,t){return o["Object3D"].prototype.copy.call(this,e,t),this.element=e.element.cloneNode(!0),this}});var a=function(){var e,t,n,r,i=this,A=new o["Vector3"],a=new o["Matrix4"],c=new o["Matrix4"],l={objects:new WeakMap},u=document.createElement("div");u.style.overflow="hidden",this.domElement=u,this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,A){e=i,t=A,n=e/2,r=t/2,u.style.width=i+"px",u.style.height=A+"px"};var h=function(e,t,o){if(e instanceof s){e.onBeforeRender(i,t,o),A.setFromMatrixPosition(e.matrixWorld),A.applyMatrix4(c);var a=e.element,p="translate(-50%,-50%) translate("+(A.x*n+n)+"px,"+(-A.y*r+r)+"px)";a.style.WebkitTransform=p,a.style.MozTransform=p,a.style.oTransform=p,a.style.transform=p,a.style.display=e.visible&&A.z>=-1&&A.z<=1?"":"none";var f={distanceToCameraSquared:d(o,e)};l.objects.set(e,f),a.parentNode!==u&&u.appendChild(a),e.onAfterRender(i,t,o)}for(var m=0,g=e.children.length;m<g;m++)h(e.children[m],t,o)},d=function(){var e=new o["Vector3"],t=new o["Vector3"];return function(n,r){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(r.matrixWorld),e.distanceToSquared(t)}}(),p=function(e){var t=[];return e.traverse((function(e){e instanceof s&&t.push(e)})),t},f=function(e){for(var t=p(e).sort((function(e,t){var n=l.objects.get(e).distanceToCameraSquared,r=l.objects.get(t).distanceToCameraSquared;return n-r})),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r};this.render=function(e,t){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),a.copy(t.matrixWorldInverse),c.multiplyMatrices(t.projectionMatrix,a),h(e,e,t),f(e)}},c=function(e){o["Object3D"].call(this),this.element=e||document.createElement("div"),this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))};c.prototype=Object.assign(Object.create(o["Object3D"].prototype),{constructor:c,copy:function(e,t){return o["Object3D"].prototype.copy.call(this,e,t),this.element=e.element.cloneNode(!0),this}});var l=function(e){c.call(this,e)};l.prototype=Object.create(c.prototype),l.prototype.constructor=l;var u=function(){var e,t,n,r,i=this,A=new o["Matrix4"],s={camera:{fov:0,style:""},objects:new WeakMap},a=document.createElement("div");a.style.overflow="hidden",this.domElement=a;var u=document.createElement("div");u.style.WebkitTransformStyle="preserve-3d",u.style.transformStyle="preserve-3d",u.style.pointerEvents="none",a.appendChild(u);var h=/Trident/i.test(navigator.userAgent);function d(e){return Math.abs(e)<1e-10?0:e}function p(e){var t=e.elements;return"matrix3d("+d(t[0])+","+d(-t[1])+","+d(t[2])+","+d(t[3])+","+d(t[4])+","+d(-t[5])+","+d(t[6])+","+d(t[7])+","+d(t[8])+","+d(-t[9])+","+d(t[10])+","+d(t[11])+","+d(t[12])+","+d(-t[13])+","+d(t[14])+","+d(t[15])+")"}function f(e,t){var i=e.elements,A="matrix3d("+d(i[0])+","+d(i[1])+","+d(i[2])+","+d(i[3])+","+d(-i[4])+","+d(-i[5])+","+d(-i[6])+","+d(-i[7])+","+d(i[8])+","+d(i[9])+","+d(i[10])+","+d(i[11])+","+d(i[12])+","+d(i[13])+","+d(i[14])+","+d(i[15])+")";return h?"translate(-50%,-50%)translate("+n+"px,"+r+"px)"+t+A:"translate(-50%,-50%)"+A}function m(e,t,n,r){if(e instanceof c){var o;e.onBeforeRender(i,t,n),e instanceof l?(A.copy(n.matrixWorldInverse),A.transpose(),A.copyPosition(e.matrixWorld),A.scale(e.scale),A.elements[3]=0,A.elements[7]=0,A.elements[11]=0,A.elements[15]=1,o=f(A,r)):o=f(e.matrixWorld,r);var a=e.element,d=s.objects.get(e);if(void 0===d||d.style!==o){a.style.WebkitTransform=o,a.style.transform=o;var p={style:o};h&&(p.distanceToCameraSquared=g(n,e)),s.objects.set(e,p)}a.style.display=e.visible?"":"none",a.parentNode!==u&&u.appendChild(a),e.onAfterRender(i,t,n)}for(var w=0,v=e.children.length;w<v;w++)m(e.children[w],t,n,r)}this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,A){e=i,t=A,n=e/2,r=t/2,a.style.width=i+"px",a.style.height=A+"px",u.style.width=i+"px",u.style.height=A+"px"};var g=function(){var e=new o["Vector3"],t=new o["Vector3"];return function(n,r){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(r.matrixWorld),e.distanceToSquared(t)}}();function w(e){var t=[];return e.traverse((function(e){e instanceof c&&t.push(e)})),t}function v(e){for(var t=w(e).sort((function(e,t){var n=s.objects.get(e).distanceToCameraSquared,r=s.objects.get(t).distanceToCameraSquared;return n-r})),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r}this.render=function(e,t){var i=t.projectionMatrix.elements[5]*r;if(s.camera.fov!==i&&(t.isPerspectiveCamera?(a.style.WebkitPerspective=i+"px",a.style.perspective=i+"px"):(a.style.WebkitPerspective="",a.style.perspective=""),s.camera.fov=i),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera)var A=-(t.right+t.left)/2,o=(t.top+t.bottom)/2;var c=t.isOrthographicCamera?"scale("+i+")translate("+d(A)+"px,"+d(o)+"px)"+p(t.matrixWorldInverse):"translateZ("+i+"px)"+p(t.matrixWorldInverse),l=c+"translate("+n+"px,"+r+"px)";s.camera.style===l||h||(u.style.WebkitTransform=l,u.style.transform=l,s.camera.style=l),m(e,e,t,c),h&&v(e)}},h=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new o["Vector3"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o["MOUSE"].ROTATE,MIDDLE:o["MOUSE"].DOLLY,RIGHT:o["MOUSE"].PAN},this.touches={ONE:o["TOUCH"].ROTATE,TWO:o["TOUCH"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),a=s.NONE},this.update=function(){var t=new o["Vector3"],i=(new o["Quaternion"]).setFromUnitVectors(e.up,new o["Vector3"](0,1,0)),A=i.clone().invert(),f=new o["Vector3"],m=new o["Quaternion"],g=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),l.setFromVector3(t),n.autoRotate&&a===s.NONE&&E(C()),n.enableDamping?(l.theta+=u.theta*n.dampingFactor,l.phi+=u.phi*n.dampingFactor):(l.theta+=u.theta,l.phi+=u.phi);var o=n.minAzimuthAngle,w=n.maxAzimuthAngle;return isFinite(o)&&isFinite(w)&&(o<-Math.PI?o+=g:o>Math.PI&&(o-=g),w<-Math.PI?w+=g:w>Math.PI&&(w-=g),l.theta=o<=w?Math.max(o,Math.min(w,l.theta)):l.theta>(o+w)/2?Math.max(o,l.theta):Math.min(w,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=h,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(l),t.applyQuaternion(A),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),d.set(0,0,0)),h=1,!!(p||f.distanceToSquared(n.object.position)>c||8*(1-m.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",le,!1),n.domElement.removeEventListener("pointerdown",$,!1),n.domElement.removeEventListener("wheel",Ae,!1),n.domElement.removeEventListener("touchstart",se,!1),n.domElement.removeEventListener("touchend",ce,!1),n.domElement.removeEventListener("touchmove",ae,!1),n.domElement.ownerDocument.removeEventListener("pointermove",ee,!1),n.domElement.ownerDocument.removeEventListener("pointerup",te,!1),n.domElement.removeEventListener("keydown",oe,!1)};var n=this,r={type:"change"},i={type:"start"},A={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=s.NONE,c=1e-6,l=new o["Spherical"],u=new o["Spherical"],h=1,d=new o["Vector3"],p=!1,f=new o["Vector2"],m=new o["Vector2"],g=new o["Vector2"],w=new o["Vector2"],v=new o["Vector2"],x=new o["Vector2"],y=new o["Vector2"],B=new o["Vector2"],b=new o["Vector2"];function C(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function E(e){u.theta-=e}function F(e){u.phi-=e}var _=function(){var e=new o["Vector3"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),T=function(){var e=new o["Vector3"];return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),U=function(){var e=new o["Vector3"];return function(t,r){var i=n.domElement;if(n.object.isPerspectiveCamera){var A=n.object.position;e.copy(A).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),_(2*t*o/i.clientHeight,n.object.matrix),T(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(_(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),T(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function S(e){n.object.isPerspectiveCamera?h/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Q(e){n.object.isPerspectiveCamera?h*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){f.set(e.clientX,e.clientY)}function D(e){y.set(e.clientX,e.clientY)}function I(e){w.set(e.clientX,e.clientY)}function O(e){m.set(e.clientX,e.clientY),g.subVectors(m,f).multiplyScalar(n.rotateSpeed);var t=n.domElement;E(2*Math.PI*g.x/t.clientHeight),F(2*Math.PI*g.y/t.clientHeight),f.copy(m),n.update()}function P(e){B.set(e.clientX,e.clientY),b.subVectors(B,y),b.y>0?S(M()):b.y<0&&Q(M()),y.copy(B),n.update()}function H(e){v.set(e.clientX,e.clientY),x.subVectors(v,w).multiplyScalar(n.panSpeed),U(x.x,x.y),w.copy(v),n.update()}function R(){}function N(e){e.deltaY<0?Q(M()):e.deltaY>0&&S(M()),n.update()}function k(e){var t=!1;switch(e.keyCode){case n.keys.UP:U(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:U(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:U(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:U(-n.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),n.update())}function K(e){if(1==e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}}function G(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,n)}}function V(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);y.set(0,r)}function z(e){n.enableZoom&&V(e),n.enablePan&&G(e)}function j(e){n.enableZoom&&V(e),n.enableRotate&&K(e)}function X(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,r)}g.subVectors(m,f).multiplyScalar(n.rotateSpeed);var i=n.domElement;E(2*Math.PI*g.x/i.clientHeight),F(2*Math.PI*g.y/i.clientHeight),f.copy(m)}function W(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,r)}x.subVectors(v,w).multiplyScalar(n.panSpeed),U(x.x,x.y),w.copy(v)}function Y(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);B.set(0,i),b.set(0,Math.pow(B.y/y.y,n.zoomSpeed)),S(b.y),y.copy(B)}function q(e){n.enableZoom&&Y(e),n.enablePan&&W(e)}function J(e){n.enableZoom&&Y(e),n.enableRotate&&X(e)}function Z(){}function $(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":ne(e);break}}function ee(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":re(e);break}}function te(e){switch(e.pointerType){case"mouse":case"pen":ie(e);break}}function ne(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o["MOUSE"].DOLLY:if(!1===n.enableZoom)return;D(e),a=s.DOLLY;break;case o["MOUSE"].ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;I(e),a=s.PAN}else{if(!1===n.enableRotate)return;L(e),a=s.ROTATE}break;case o["MOUSE"].PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),a=s.ROTATE}else{if(!1===n.enablePan)return;I(e),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",ee,!1),n.domElement.ownerDocument.addEventListener("pointerup",te,!1),n.dispatchEvent(i))}function re(e){if(!1!==n.enabled)switch(e.preventDefault(),a){case s.ROTATE:if(!1===n.enableRotate)return;O(e);break;case s.DOLLY:if(!1===n.enableZoom)return;P(e);break;case s.PAN:if(!1===n.enablePan)return;H(e);break}}function ie(e){n.domElement.ownerDocument.removeEventListener("pointermove",ee,!1),n.domElement.ownerDocument.removeEventListener("pointerup",te,!1),!1!==n.enabled&&(R(e),n.dispatchEvent(A),a=s.NONE)}function Ae(e){!1===n.enabled||!1===n.enableZoom||a!==s.NONE&&a!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),N(e),n.dispatchEvent(A))}function oe(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&k(e)}function se(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case o["TOUCH"].ROTATE:if(!1===n.enableRotate)return;K(e),a=s.TOUCH_ROTATE;break;case o["TOUCH"].PAN:if(!1===n.enablePan)return;G(e),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(n.touches.TWO){case o["TOUCH"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;z(e),a=s.TOUCH_DOLLY_PAN;break;case o["TOUCH"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;j(e),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(i)}}function ae(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),a){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;X(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;W(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;q(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;J(e),n.update();break;default:a=s.NONE}}function ce(e){!1!==n.enabled&&(Z(e),n.dispatchEvent(A),a=s.NONE)}function le(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",le,!1),n.domElement.addEventListener("pointerdown",$,!1),n.domElement.addEventListener("wheel",Ae,!1),n.domElement.addEventListener("touchstart",se,!1),n.domElement.addEventListener("touchend",ce,!1),n.domElement.addEventListener("touchmove",ae,!1),n.domElement.addEventListener("keydown",oe,!1),this.update()};h.prototype=Object.create(o["EventDispatcher"].prototype),h.prototype.constructor=h;var d=function(e,t){h.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=o["MOUSE"].PAN,this.mouseButtons.RIGHT=o["MOUSE"].ROTATE,this.touches.ONE=o["TOUCH"].PAN,this.touches.TWO=o["TOUCH"].DOLLY_ROTATE};d.prototype=Object.create(o["EventDispatcher"].prototype),d.prototype.constructor=d;var p=function(e,t){void 0===t&&(console.warn('THREE.FirstPersonControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.mouseX=0,this.mouseY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;var n=0,r=0,i=new o["Vector3"],A=new o["Spherical"],s=new o["Vector3"];function a(e){e.preventDefault()}this.domElement!==document&&this.domElement.setAttribute("tabindex",-1),this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onMouseDown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.activeLook)switch(e.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0},this.onMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),this.activeLook)switch(e.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1},this.onMouseMove=function(e){this.domElement===document?(this.mouseX=e.pageX-this.viewHalfX,this.mouseY=e.pageY-this.viewHalfY):(this.mouseX=e.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=e.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 82:this.moveUp=!0;break;case 70:this.moveDown=!0;break}},this.onKeyUp=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 82:this.moveUp=!1;break;case 70:this.moveDown=!1;break}},this.lookAt=function(e,t,n){return e.isVector3?s.copy(e):s.set(e,t,n),this.object.lookAt(s),f(this),this},this.update=function(){var e=new o["Vector3"];return function(t){if(!1!==this.enabled){if(this.heightSpeed){var i=o["MathUtils"].clamp(this.object.position.y,this.heightMin,this.heightMax),A=i-this.heightMin;this.autoSpeedFactor=t*(A*this.heightCoef)}else this.autoSpeedFactor=0;var s=t*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(s+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(s),this.moveLeft&&this.object.translateX(-s),this.moveRight&&this.object.translateX(s),this.moveUp&&this.object.translateY(s),this.moveDown&&this.object.translateY(-s);var a=t*this.lookSpeed;this.activeLook||(a=0);var c=1;this.constrainVertical&&(c=Math.PI/(this.verticalMax-this.verticalMin)),r-=this.mouseX*a,this.lookVertical&&(n-=this.mouseY*a*c),n=Math.max(-85,Math.min(85,n));var l=o["MathUtils"].degToRad(90-n),u=o["MathUtils"].degToRad(r);this.constrainVertical&&(l=o["MathUtils"].mapLinear(l,0,Math.PI,this.verticalMin,this.verticalMax));var h=this.object.position;e.setFromSphericalCoords(1,l,u).add(h),this.object.lookAt(e)}}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",a,!1),this.domElement.removeEventListener("mousedown",l,!1),this.domElement.removeEventListener("mousemove",c,!1),this.domElement.removeEventListener("mouseup",u,!1),window.removeEventListener("keydown",h,!1),window.removeEventListener("keyup",d,!1)};var c=p(this,this.onMouseMove),l=p(this,this.onMouseDown),u=p(this,this.onMouseUp),h=p(this,this.onKeyDown),d=p(this,this.onKeyUp);function p(e,t){return function(){t.apply(e,arguments)}}function f(e){var t=e.object.quaternion;i.set(0,0,-1).applyQuaternion(t),A.setFromVector3(i),n=90-o["MathUtils"].radToDeg(A.phi),r=o["MathUtils"].radToDeg(A.theta)}this.domElement.addEventListener("contextmenu",a,!1),this.domElement.addEventListener("mousemove",c,!1),this.domElement.addEventListener("mousedown",l,!1),this.domElement.addEventListener("mouseup",u,!1),window.addEventListener("keydown",h,!1),window.addEventListener("keyup",d,!1),this.handleResize(),f(this)},f=function(e,t){void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI;var n=this,r={type:"change"},i={type:"lock"},A={type:"unlock"},s=new o["Euler"](0,0,0,"YXZ"),a=Math.PI/2,c=new o["Vector3"];function l(t){if(!1!==n.isLocked){var i=t.movementX||t.mozMovementX||t.webkitMovementX||0,A=t.movementY||t.mozMovementY||t.webkitMovementY||0;s.setFromQuaternion(e.quaternion),s.y-=.002*i,s.x-=.002*A,s.x=Math.max(a-n.maxPolarAngle,Math.min(a-n.minPolarAngle,s.x)),e.quaternion.setFromEuler(s),n.dispatchEvent(r)}}function u(){n.domElement.ownerDocument.pointerLockElement===n.domElement?(n.dispatchEvent(i),n.isLocked=!0):(n.dispatchEvent(A),n.isLocked=!1)}function h(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){n.domElement.ownerDocument.addEventListener("mousemove",l,!1),n.domElement.ownerDocument.addEventListener("pointerlockchange",u,!1),n.domElement.ownerDocument.addEventListener("pointerlockerror",h,!1)},this.disconnect=function(){n.domElement.ownerDocument.removeEventListener("mousemove",l,!1),n.domElement.ownerDocument.removeEventListener("pointerlockchange",u,!1),n.domElement.ownerDocument.removeEventListener("pointerlockerror",h,!1)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){var t=new o["Vector3"](0,0,-1);return function(n){return n.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){c.setFromMatrixColumn(e.matrix,0),c.crossVectors(e.up,c),e.position.addScaledVector(c,t)},this.moveRight=function(t){c.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(c,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){n.domElement.ownerDocument.exitPointerLock()},this.connect()};f.prototype=Object.create(o["EventDispatcher"].prototype),f.prototype.constructor=f;var m=function(){var e=m.SkyShader,t=new o["ShaderMaterial"]({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:o["UniformsUtils"].clone(e.uniforms),side:o["BackSide"],depthWrite:!1});o["Mesh"].call(this,new o["BoxBufferGeometry"](1,1,1),t)};m.prototype=Object.create(o["Mesh"].prototype),m.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new o["Vector3"]},up:{value:new o["Vector3"](0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","#include <tonemapping_fragment>","#include <encodings_fragment>","}"].join("\n")};var g={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function w(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(w.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),w.FullScreenQuad=function(){var e=new o["OrthographicCamera"](-1,1,1,-1,0,1),t=new o["PlaneBufferGeometry"](2,2),n=function(e){this._mesh=new o["Mesh"](t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var v=function(e,t){w.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof o["ShaderMaterial"]?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=o["UniformsUtils"].clone(e.uniforms),this.material=new o["ShaderMaterial"]({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new w.FullScreenQuad(this.material)};v.prototype=Object.assign(Object.create(w.prototype),{constructor:v,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var x=function(e,t){w.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};x.prototype=Object.assign(Object.create(w.prototype),{constructor:x,render:function(e,t,n){var r,i,A=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(A.REPLACE,A.REPLACE,A.REPLACE),o.buffers.stencil.setFunc(A.ALWAYS,r,4294967295),o.buffers.stencil.setClear(i),o.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(A.EQUAL,1,4294967295),o.buffers.stencil.setOp(A.KEEP,A.KEEP,A.KEEP),o.buffers.stencil.setLocked(!0)}});var y=function(){w.call(this),this.needsSwap=!1};y.prototype=Object.create(w.prototype),Object.assign(y.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var B=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:o["LinearFilter"],magFilter:o["LinearFilter"],format:o["RGBAFormat"]},r=e.getSize(new o["Vector2"]);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new o["WebGLRenderTarget"](this._width*this._pixelRatio,this._height*this._pixelRatio,n),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===g&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===v&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new v(g),this.clock=new o["Clock"]};Object.assign(B.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},removePass:function(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,A=this.passes.length;for(n=0;n<A;n++)if(t=this.passes[n],!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var o=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==x&&(t instanceof x?i=!0:t instanceof y&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new o["Vector2"]);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var b=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(b.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),b.FullScreenQuad=function(){var e=new o["OrthographicCamera"](-1,1,1,-1,0,1),t=new o["PlaneBufferGeometry"](2,2),n=function(e){this._mesh=new o["Mesh"](t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,e)}}),n}();var C=function(e,t,n,r){this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new o["Color"](1,1,1),this.hiddenEdgeColor=new o["Color"](.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,w.call(this),this.resolution=void 0!==e?new o["Vector2"](e.x,e.y):new o["Vector2"](256,256);var i={minFilter:o["LinearFilter"],magFilter:o["LinearFilter"],format:o["RGBAFormat"]},A=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new o["MeshBasicMaterial"]({color:16777215}),this.maskBufferMaterial.side=o["DoubleSide"],this.renderTargetMaskBuffer=new o["WebGLRenderTarget"](this.resolution.x,this.resolution.y,i),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new o["MeshDepthMaterial"],this.depthMaterial.side=o["DoubleSide"],this.depthMaterial.depthPacking=o["RGBADepthPacking"],this.depthMaterial.blending=o["NoBlending"],this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=o["DoubleSide"],this.prepareMaskMaterial.fragmentShader=u(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new o["WebGLRenderTarget"](this.resolution.x,this.resolution.y,i),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new o["WebGLRenderTarget"](A,s,i),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new o["WebGLRenderTarget"](A,s,i),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new o["WebGLRenderTarget"](Math.round(A/2),Math.round(s/2),i),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new o["WebGLRenderTarget"](A,s,i),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new o["WebGLRenderTarget"](Math.round(A/2),Math.round(s/2),i),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;var a=4,c=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms["texSize"].value.set(A,s),this.separableBlurMaterial1.uniforms["kernelRadius"].value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(c),this.separableBlurMaterial2.uniforms["texSize"].value.set(Math.round(A/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms["kernelRadius"].value=c,this.overlayMaterial=this.getOverlayMaterial(),void 0===g&&console.error("THREE.OutlinePass relies on CopyShader");var l=g;function u(e,t){var n=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}this.copyUniforms=o["UniformsUtils"].clone(l.uniforms),this.copyUniforms["opacity"].value=1,this.materialCopy=new o["ShaderMaterial"]({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:o["NoBlending"],depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new o["Color"],this.oldClearAlpha=1,this.fsQuad=new w.FullScreenQuad(null),this.tempPulseColor1=new o["Color"],this.tempPulseColor2=new o["Color"],this.textureMatrix=new o["Matrix4"]};C.prototype=Object.assign(Object.create(w.prototype),{constructor:C,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var n=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms["texSize"].value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms["texSize"].value.set(n,r)},changeVisibilityOfSelectedObjects:function(e){var t=this._visibilityCache;function n(n){n.isMesh&&(!0===e?n.visible=t.get(n):(t.set(n,n.visible),n.visible=e))}for(var r=0;r<this.selectedObjects.length;r++){var i=this.selectedObjects[r];i.traverse(n)}},changeVisibilityOfNonSelectedObjects:function(e){var t=this._visibilityCache,n=[];function r(e){e.isMesh&&n.push(e)}for(var i=0;i<this.selectedObjects.length;i++){var A=this.selectedObjects[i];A.traverse(r)}function o(r){if(r.isMesh||r.isSprite){for(var i=!1,A=0;A<n.length;A++){var o=n[A].id;if(o===r.id){i=!0;break}}if(!1===i){var s=r.visible;!1!==e&&!0!==t.get(r)||(r.visible=e),t.set(r,s)}}else(r.isPoints||r.isLine)&&(!0===e?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}this.renderScene.traverse(o)},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(e,t,n,r,i){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var A=e.autoClear;e.autoClear=!1,i&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var o=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms["cameraNearFar"].value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms["depthTexture"].value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms["textureMatrix"].value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=o,this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var s=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(s),this.tempPulseColor2.multiplyScalar(s)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms["maskTexture"].value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms["texSize"].value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms["visibleEdgeColor"].value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms["hiddenEdgeColor"].value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms["colorTexture"].value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms["direction"].value=C.BlurDirectionX,this.separableBlurMaterial1.uniforms["kernelRadius"].value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms["colorTexture"].value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms["direction"].value=C.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms["colorTexture"].value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms["direction"].value=C.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms["colorTexture"].value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms["direction"].value=C.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms["maskTexture"].value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms["edgeTexture1"].value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms["edgeTexture2"].value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms["patternTexture"].value=this.patternTexture,this.overlayMaterial.uniforms["edgeStrength"].value=this.edgeStrength,this.overlayMaterial.uniforms["edgeGlow"].value=this.edgeGlow,this.overlayMaterial.uniforms["usePatternTexture"].value=this.usePatternTexture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=A}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))},getPrepareMaskMaterial:function(){return new o["ShaderMaterial"]({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new o["Vector2"](.5,.5)},textureMatrix:{value:null}},vertexShader:["#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","\t#include <skinbase_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\tvPosition = mvPosition;","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tprojTexCoord = textureMatrix * worldPosition;","}"].join("\n"),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join("\n")})},getEdgeDetectionMaterial:function(){return new o["ShaderMaterial"]({uniforms:{maskTexture:{value:null},texSize:{value:new o["Vector2"](.5,.5)},visibleEdgeColor:{value:new o["Vector3"](1,1,1)},hiddenEdgeColor:{value:new o["Vector3"](1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new o["ShaderMaterial"]({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new o["Vector2"](.5,.5)},direction:{value:new o["Vector2"](.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new o["ShaderMaterial"]({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:o["AdditiveBlending"],depthTest:!1,depthWrite:!1,transparent:!0})}}),C.BlurDirectionX=new o["Vector2"](1,0),C.BlurDirectionY=new o["Vector2"](0,1);var M={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new o["Color"](0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},E=function(e,t,n,r){w.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new o["Vector2"](e.x,e.y):new o["Vector2"](256,256),this.clearColor=new o["Color"](0,0,0);var i={minFilter:o["LinearFilter"],magFilter:o["LinearFilter"],format:o["RGBAFormat"]};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var A=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2);this.renderTargetBright=new o["WebGLRenderTarget"](A,s,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var a=0;a<this.nMips;a++){var c=new o["WebGLRenderTarget"](A,s,i);c.texture.name="UnrealBloomPass.h"+a,c.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(c);var l=new o["WebGLRenderTarget"](A,s,i);l.texture.name="UnrealBloomPass.v"+a,l.texture.generateMipmaps=!1,this.renderTargetsVertical.push(l),A=Math.round(A/2),s=Math.round(s/2)}void 0===M&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");var u=M;this.highPassUniforms=o["UniformsUtils"].clone(u.uniforms),this.highPassUniforms["luminosityThreshold"].value=r,this.highPassUniforms["smoothWidth"].value=.01,this.materialHighPassFilter=new o["ShaderMaterial"]({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var h=[3,5,7,9,11];for(A=Math.round(this.resolution.x/2),s=Math.round(this.resolution.y/2),a=0;a<this.nMips;a++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[a])),this.separableBlurMaterials[a].uniforms["texSize"].value=new o["Vector2"](A,s),A=Math.round(A/2),s=Math.round(s/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms["blurTexture1"].value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms["blurTexture2"].value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms["blurTexture3"].value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms["blurTexture4"].value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms["blurTexture5"].value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms["bloomStrength"].value=t,this.compositeMaterial.uniforms["bloomRadius"].value=.1,this.compositeMaterial.needsUpdate=!0;var d=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms["bloomFactors"].value=d,this.bloomTintColors=[new o["Vector3"](1,1,1),new o["Vector3"](1,1,1),new o["Vector3"](1,1,1),new o["Vector3"](1,1,1),new o["Vector3"](1,1,1)],this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,void 0===g&&console.error("THREE.UnrealBloomPass relies on CopyShader");var p=g;this.copyUniforms=o["UniformsUtils"].clone(p.uniforms),this.copyUniforms["opacity"].value=1,this.materialCopy=new o["ShaderMaterial"]({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:o["AdditiveBlending"],depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new o["Color"],this.oldClearAlpha=1,this.basic=new o["MeshBasicMaterial"],this.fsQuad=new w.FullScreenQuad(null)};E.prototype=Object.assign(Object.create(w.prototype),{constructor:E,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms["texSize"].value=new o["Vector2"](n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(e,t,n,r,i){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var A=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms["tDiffuse"].value=n.texture,this.highPassUniforms["luminosityThreshold"].value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var o=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms["colorTexture"].value=o.texture,this.separableBlurMaterials[s].uniforms["direction"].value=E.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[s]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[s].uniforms["colorTexture"].value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms["direction"].value=E.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[s]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms["bloomStrength"].value=this.strength,this.compositeMaterial.uniforms["bloomRadius"].value=this.radius,this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=A},getSeperableBlurMaterial:function(e){return new o["ShaderMaterial"]({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new o["Vector2"](.5,.5)},direction:{value:new o["Vector2"](.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new o["ShaderMaterial"]({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),E.BlurDirectionX=new o["Vector2"](1,0),E.BlurDirectionY=new o["Vector2"](0,1);var F=function(e,t,n,r,i){w.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new o["Color"]};F.prototype=Object.assign(Object.create(w.prototype),{constructor:F,render:function(e,t,n){var r,i,A=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=i),e.autoClear=A}});var _={uniforms:{tDiffuse:{value:null},resolution:{value:new o["Vector2"](1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")},T=function(e){o["Loader"].call(this,e)};T.prototype=Object.assign(Object.create(o["Loader"].prototype),{constructor:T,load:function(e,t,n,r){var i=this,A=""===this.path?o["LoaderUtils"].extractUrlBase(e):this.path,s=new o["FileLoader"](this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(n,A))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var n=e.split("\n"),r={},i=/\s+/,A={},o=0;o<n.length;o++){var s=n[o];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var a=s.indexOf(" "),c=a>=0?s.substring(0,a):s;c=c.toLowerCase();var l=a>=0?s.substring(a+1):"";if(l=l.trim(),"newmtl"===c)r={name:l},A[l]=r;else if("ka"===c||"kd"===c||"ks"===c||"ke"===c){var u=l.split(i,3);r[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else r[c]=l}}var h=new T.MaterialCreator(this.resourcePath||t,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(A),h}}),T.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:o["FrontSide"],this.wrap=this.options&&this.options.wrap?this.options.wrap:o["RepeatWrapping"]},T.MaterialCreator.prototype={constructor:T.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],i={};for(var A in t[n]=i,r){var o=!0,s=r[A],a=A.toLowerCase();switch(a){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(o=!1);break;default:break}o&&(i[a]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function i(e,t){return"string"!==typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}function A(e,n){if(!r[e]){var A=t.getTextureParams(n,r),o=t.loadTexture(i(t.baseUrl,A.url));o.repeat.copy(A.scale),o.offset.copy(A.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,r[e]=o}}for(var s in n){var a,c=n[s];if(""!==c)switch(s.toLowerCase()){case"kd":r.color=(new o["Color"]).fromArray(c);break;case"ks":r.specular=(new o["Color"]).fromArray(c);break;case"ke":r.emissive=(new o["Color"]).fromArray(c);break;case"map_kd":A("map",c);break;case"map_ks":A("specularMap",c);break;case"map_ke":A("emissiveMap",c);break;case"norm":A("normalMap",c);break;case"map_bump":case"bump":A("bumpMap",c);break;case"map_d":A("alphaMap",c),r.transparent=!0;break;case"ns":r.shininess=parseFloat(c);break;case"d":a=parseFloat(c),a<1&&(r.opacity=a,r.transparent=!0);break;case"tr":a=parseFloat(c),this.options&&this.options.invertTrProperty&&(a=1-a),a>0&&(r.opacity=1-a,r.transparent=!0);break;default:break}}return this.materials[e]=new o["MeshPhongMaterial"](r),this.materials[e]},getTextureParams:function(e,t){var n,r={scale:new o["Vector2"](1,1),offset:new o["Vector2"](0,0)},i=e.split(/\s+/);return n=i.indexOf("-bm"),n>=0&&(t.bumpScale=parseFloat(i[n+1]),i.splice(n,2)),n=i.indexOf("-s"),n>=0&&(r.scale.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),n=i.indexOf("-o"),n>=0&&(r.offset.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),r.url=i.join(" ").trim(),r},loadTexture:function(e,t,n,r,i){var A,s=void 0!==this.manager?this.manager:o["DefaultLoadingManager"],a=s.getHandler(e);return null===a&&(a=new o["TextureLoader"](s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),A=a.load(e,n,r,i),void 0!==t&&(A.mapping=t),A}};var U=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /,r=/^usemap /,i=new o["Vector3"],A=new o["Vector3"],s=new o["Vector3"],a=new o["Vector3"],c=new o["Vector3"];function l(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){var r=this.vertices,o=this.object.geometry.normals;i.fromArray(r,e),A.fromArray(r,t),s.fromArray(r,n),c.subVectors(s,A),a.subVectors(i,A),c.cross(a),c.normalize(),o.push(c.x,c.y,c.z),o.push(c.x,c.y,c.z),o.push(c.x,c.y,c.z)},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,A,o,s,a){var c=this.vertices.length,l=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(n,c);if(this.addVertex(l,u,h),this.addColor(l,u,h),void 0!==o&&""!==o){var d=this.normals.length;l=this.parseNormalIndex(o,d),u=this.parseNormalIndex(s,d),h=this.parseNormalIndex(a,d),this.addNormal(l,u,h)}else this.addFaceNormal(l,u,h);if(void 0!==r&&""!==r){var p=this.uvs.length;l=this.parseUVIndex(r,p),u=this.parseUVIndex(i,p),h=this.parseUVIndex(A,p),this.addUV(l,u,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++){var i=this.parseVertexIndex(e[n],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,A=e.length;i<A;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));var o=0;for(A=t.length;o<A;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return e.startObject("",!1),e}function u(e){o["Loader"].call(this,e),this.materials=null}return u.prototype=Object.assign(Object.create(o["Loader"].prototype),{constructor:u,load:function(e,t,n,r){var i=this,A=new o["FileLoader"](this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,(function(n){try{t(i.parse(n))}catch(A){r?r(A):console.error(A),i.manager.itemError(e)}}),n,r)},setMaterials:function(e){return this.materials=e,this},parse:function(i){var A=new l;-1!==i.indexOf("\r\n")&&(i=i.replace(/\r\n/g,"\n")),-1!==i.indexOf("\\\n")&&(i=i.replace(/\\\n/g,""));for(var s=i.split("\n"),a="",c="",u=0,h=[],d="function"===typeof"".trimLeft,p=0,f=s.length;p<f;p++)if(a=s[p],a=d?a.trimLeft():a.trim(),u=a.length,0!==u&&(c=a.charAt(0),"#"!==c))if("v"===c){var m=a.split(/\s+/);switch(m[0]){case"v":A.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),m.length>=7?A.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6])):A.colors.push(void 0,void 0,void 0);break;case"vn":A.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":A.uvs.push(parseFloat(m[1]),parseFloat(m[2]));break}}else if("f"===c){for(var g=a.substr(1).trim(),w=g.split(/\s+/),v=[],x=0,y=w.length;x<y;x++){var B=w[x];if(B.length>0){var b=B.split("/");v.push(b)}}var C=v[0];for(x=1,y=v.length-1;x<y;x++){var M=v[x],E=v[x+1];A.addFace(C[0],M[0],E[0],C[1],M[1],E[1],C[2],M[2],E[2])}}else if("l"===c){var F=a.substring(1).trim().split(" "),_=[],T=[];if(-1===a.indexOf("/"))_=F;else for(var U=0,S=F.length;U<S;U++){var Q=F[U].split("/");""!==Q[0]&&_.push(Q[0]),""!==Q[1]&&T.push(Q[1])}A.addLineGeometry(_,T)}else if("p"===c){g=a.substr(1).trim();var L=g.split(" ");A.addPointGeometry(L)}else if(null!==(h=e.exec(a))){var D=(" "+h[0].substr(1).trim()).substr(1);A.startObject(D)}else if(n.test(a))A.object.startMaterial(a.substring(7).trim(),A.materialLibraries);else if(t.test(a))A.materialLibraries.push(a.substring(7).trim());else if(r.test(a))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===c){if(h=a.split(" "),h.length>1){var I=h[1].trim().toLowerCase();A.object.smooth="0"!==I&&"off"!==I}else A.object.smooth=!0;var O=A.object.currentMaterial();O&&(O.smooth=A.object.smooth)}else{if("\0"===a)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+a+'"')}A.finalize();var P=new o["Group"];P.materialLibraries=[].concat(A.materialLibraries);var H=!(1===A.objects.length&&0===A.objects[0].geometry.vertices.length);if(!0===H)for(p=0,f=A.objects.length;p<f;p++){var R=A.objects[p],N=R.geometry,k=R.materials,K="Line"===N.type,G="Points"===N.type,V=!1;if(0!==N.vertices.length){var z=new o["BufferGeometry"];z.setAttribute("position",new o["Float32BufferAttribute"](N.vertices,3)),N.normals.length>0&&z.setAttribute("normal",new o["Float32BufferAttribute"](N.normals,3)),N.colors.length>0&&(V=!0,z.setAttribute("color",new o["Float32BufferAttribute"](N.colors,3))),!0===N.hasUVIndices&&z.setAttribute("uv",new o["Float32BufferAttribute"](N.uvs,2));for(var j,X=[],W=0,Y=k.length;W<Y;W++){var q=k[W],J=q.name+"_"+q.smooth+"_"+V;O=A.materials[J];if(null!==this.materials)if(O=this.materials.create(q.name),!K||!O||O instanceof o["LineBasicMaterial"]){if(G&&O&&!(O instanceof o["PointsMaterial"])){var Z=new o["PointsMaterial"]({size:10,sizeAttenuation:!1});o["Material"].prototype.copy.call(Z,O),Z.color.copy(O.color),Z.map=O.map,O=Z}}else{var $=new o["LineBasicMaterial"];o["Material"].prototype.copy.call($,O),$.color.copy(O.color),O=$}void 0===O&&(O=K?new o["LineBasicMaterial"]:G?new o["PointsMaterial"]({size:1,sizeAttenuation:!1}):new o["MeshPhongMaterial"],O.name=q.name,O.flatShading=!q.smooth,O.vertexColors=V,A.materials[J]=O),X.push(O)}if(X.length>1){for(W=0,Y=k.length;W<Y;W++){q=k[W];z.addGroup(q.groupStart,q.groupCount,W)}j=K?new o["LineSegments"](z,X):G?new o["Points"](z,X):new o["Mesh"](z,X)}else j=K?new o["LineSegments"](z,X[0]):G?new o["Points"](z,X[0]):new o["Mesh"](z,X[0]);j.name=R.name,P.add(j)}}else if(A.vertices.length>0){O=new o["PointsMaterial"]({size:1,sizeAttenuation:!1}),z=new o["BufferGeometry"];z.setAttribute("position",new o["Float32BufferAttribute"](A.vertices,3)),A.colors.length>0&&void 0!==A.colors[0]&&(z.setAttribute("color",new o["Float32BufferAttribute"](A.colors,3)),O.vertexColors=!0);var ee=new o["Points"](z,O);P.add(ee)}return P}}),u}(),S=function(){function e(e){o["Loader"].call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new s(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new a(e)})),this.register((function(e){return new i(e)})),this.register((function(e){return new u(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(o["Loader"].prototype),{constructor:e,load:function(e,t,n,r){var i,A=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:o["LoaderUtils"].extractUrlBase(e),this.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),A.manager.itemError(e),A.manager.itemEnd(e)},a=new o["FileLoader"](this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{A.parse(n,i,(function(n){t(n),A.manager.itemEnd(e)}),s)}catch(r){s(r)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,i,s){var a,c={},l={};if("string"===typeof e)a=e;else{var u=o["LoaderUtils"].decodeText(new Uint8Array(e,0,4));if(u===h){try{c[n.KHR_BINARY_GLTF]=new f(e)}catch(C){return void(s&&s(C))}a=c[n.KHR_BINARY_GLTF].content}else a=o["LoaderUtils"].decodeText(new Uint8Array(e))}var d=JSON.parse(a);if(void 0===d.asset||d.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var p=new R(d,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(var w=0;w<this.pluginCallbacks.length;w++){var y=this.pluginCallbacks[w](p);l[y.name]=y,c[y.name]=!0}if(d.extensionsUsed)for(w=0;w<d.extensionsUsed.length;++w){var B=d.extensionsUsed[w],b=d.extensionsRequired||[];switch(B){case n.KHR_MATERIALS_UNLIT:c[B]=new A;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:c[B]=new v;break;case n.KHR_DRACO_MESH_COMPRESSION:c[B]=new m(d,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:c[B]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:c[B]=new g;break;case n.KHR_MESH_QUANTIZATION:c[B]=new x;break;default:b.indexOf(B)>=0&&void 0===l[B]&&console.warn('THREE.GLTFLoader: Unknown extension "'+B+'".')}}p.setExtensions(c),p.setPlugins(l),p.parse(i,s)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function i(e){this.parser=e,this.name=n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function A(){this.name=n.KHR_MATERIALS_UNLIT}function s(e){this.parser=e,this.name=n.KHR_MATERIALS_CLEARCOAT}function a(e){this.parser=e,this.name=n.KHR_MATERIALS_TRANSMISSION}function c(e){this.parser=e,this.name=n.KHR_TEXTURE_BASISU}function l(e){this.parser=e,this.name=n.EXT_TEXTURE_WEBP,this.isSupported=null}function u(e){this.name=n.EXT_MESHOPT_COMPRESSION,this.parser=e}i.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}},i.prototype._loadLight=function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,A=t.json,s=A.extensions&&A.extensions[this.name]||{},a=s.lights||[],c=a[e],l=new o["Color"](16777215);void 0!==c.color&&l.fromArray(c.color);var u=void 0!==c.range?c.range:0;switch(c.type){case"directional":i=new o["DirectionalLight"](l),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new o["PointLight"](l),i.distance=u;break;case"spot":i=new o["SpotLight"](l),i.distance=u,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,i.angle=c.spot.outerConeAngle,i.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return i.position.set(0,0,0),i.decay=2,void 0!==c.intensity&&(i.intensity=c.intensity),i.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r},i.prototype.createNodeAttachment=function(e){var t=this,n=this.parser,r=n.json,i=r.nodes[e],A=i.extensions&&i.extensions[this.name]||{},o=A.light;return void 0===o?null:this._loadLight(o).then((function(e){return n._getNodeRef(t.cache,o,e)}))},A.prototype.getMaterialType=function(){return o["MeshBasicMaterial"]},A.prototype.extendParams=function(e,t,n){var r=[];e.color=new o["Color"](1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var A=i.baseColorFactor;e.color.fromArray(A),e.opacity=A[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)},s.prototype.getMaterialType=function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?o["MeshPhysicalMaterial"]:null},s.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],A=r.extensions[this.name];if(void 0!==A.clearcoatFactor&&(t.clearcoat=A.clearcoatFactor),void 0!==A.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",A.clearcoatTexture)),void 0!==A.clearcoatRoughnessFactor&&(t.clearcoatRoughness=A.clearcoatRoughnessFactor),void 0!==A.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",A.clearcoatRoughnessTexture)),void 0!==A.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",A.clearcoatNormalTexture)),void 0!==A.clearcoatNormalTexture.scale)){var s=A.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new o["Vector2"](s,s)}return Promise.all(i)},a.prototype.getMaterialType=function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?o["MeshPhysicalMaterial"]:null},a.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],A=r.extensions[this.name];return void 0!==A.transmissionFactor&&(t.transmission=A.transmissionFactor),void 0!==A.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",A.transmissionTexture)),Promise.all(i)},c.prototype.loadTexture=function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],A=n.images[i.source],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,A,o)},l.prototype.loadTexture=function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var A=i.extensions[t],o=r.images[A.source],s=o.uri?n.options.manager.getHandler(o.uri):n.textureLoader;return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))},l.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},u.prototype.loadBufferView=function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),A=this.parser.options.meshoptDecoder;if(!A||!A.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,A.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new ArrayBuffer(i*o),a=new Uint8Array(e[0],t,n);return A.decodeGltfBuffer(new Uint8Array(s),i,o,a,r.mode,r.filter),s}))}return null};var h="glTF",d=12,p={JSON:1313821514,BIN:5130562};function f(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,d);if(this.header={magic:o["LoaderUtils"].decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var r=new DataView(e,d),i=0;while(i<r.byteLength){var A=r.getUint32(i,!0);i+=4;var s=r.getUint32(i,!0);if(i+=4,s===p.JSON){var a=new Uint8Array(e,d+i,A);this.content=o["LoaderUtils"].decodeText(a)}else if(s===p.BIN){var c=d+i;this.body=e.slice(c,c+A)}i+=A}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function m(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function g(){this.name=n.KHR_TEXTURE_TRANSFORM}function w(e){o["MeshStandardMaterial"].call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),A=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new o["Color"]).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var o in s)e.uniforms[o]=s[o];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",A)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function v(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return w},extendParams:function(e,t,n){var r=t.extensions[this.name];e.color=new o["Color"](1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var A=r.diffuseFactor;e.color.fromArray(A),e.opacity=A[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new o["Color"](0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new o["Color"](1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var s=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",s)),i.push(n.assignTexture(e,"specularMap",s))}return Promise.all(i)},createMaterial:function(e){var t=new w(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=o["TangentSpaceNormalMap"],e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function x(){this.name=n.KHR_MESH_QUANTIZATION}function y(e,t,n,r){o["Interpolant"].call(this,e,t,n,r)}m.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,A=e.extensions[this.name].attributes,o={},s={},a={};for(var c in A){var l=F[c]||c.toLowerCase();o[l]=A[c]}for(c in e.attributes){l=F[c]||c.toLowerCase();if(void 0!==A[c]){var u=n.accessors[e.attributes[c]],h=b[u.componentType];a[l]=h,s[l]=!0===u.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,a)}))}))},g.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},w.prototype=Object.create(o["MeshStandardMaterial"].prototype),w.prototype.constructor=w,w.prototype.copy=function(e){return o["MeshStandardMaterial"].prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},y.prototype=Object.create(o["Interpolant"].prototype),y.prototype.constructor=y,y.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,A=0;A!==r;A++)t[A]=n[i+A];return t},y.prototype.beforeStart_=y.prototype.copySampleValue_,y.prototype.afterEnd_=y.prototype.copySampleValue_,y.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,A=this.sampleValues,o=this.valueSize,s=2*o,a=3*o,c=r-t,l=(n-t)/c,u=l*l,h=u*l,d=e*a,p=d-a,f=-2*h+3*u,m=h-u,g=1-f,w=m-u+l,v=0;v!==o;v++){var x=A[p+v+o],y=A[p+v+s]*c,B=A[d+v+o],b=A[d+v]*c;i[v]=g*x+w*y+f*B+m*b}return i};var B={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},b={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},C={9728:o["NearestFilter"],9729:o["LinearFilter"],9984:o["NearestMipmapNearestFilter"],9985:o["LinearMipmapNearestFilter"],9986:o["NearestMipmapLinearFilter"],9987:o["LinearMipmapLinearFilter"]},M={33071:o["ClampToEdgeWrapping"],33648:o["MirroredRepeatWrapping"],10497:o["RepeatWrapping"]},E={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},F={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},T={CUBICSPLINE:void 0,LINEAR:o["InterpolateLinear"],STEP:o["InterpolateDiscrete"]},U={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function S(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function Q(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new o["MeshStandardMaterial"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o["FrontSide"]})),e["DefaultMaterial"]}function L(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function D(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function I(e,t,n){for(var r=!1,i=!1,A=0,o=t.length;A<o;A++){var s=t[A];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);var a=[],c=[];for(A=0,o=t.length;A<o;A++){s=t[A];if(r){var l=void 0!==s.POSITION?n.getDependency("accessor",s.POSITION):e.attributes.position;a.push(l)}if(i){l=void 0!==s.NORMAL?n.getDependency("accessor",s.NORMAL):e.attributes.normal;c.push(l)}}return Promise.all([Promise.all(a),Promise.all(c)]).then((function(t){var n=t[0],A=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=A),e.morphTargetsRelative=!0,e}))}function O(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function P(e){var t,r=e.extensions&&e.extensions[n.KHR_DRACO_MESH_COMPRESSION];return t=r?"draco:"+r.bufferView+":"+r.indices+":"+H(r.attributes):e.indices+":"+H(e.attributes)+":"+e.mode,t}function H(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function R(e,n){this.json=e||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new o["ImageBitmapLoader"](this.options.manager):this.textureLoader=new o["TextureLoader"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new o["FileLoader"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function N(e,t,n){var r=t.attributes,i=new o["Box3"];if(void 0!==r.POSITION){var A=n.json.accessors[r.POSITION],s=A.min,a=A.max;if(void 0!==s&&void 0!==a){i.set(new o["Vector3"](s[0],s[1],s[2]),new o["Vector3"](a[0],a[1],a[2]));var c=t.targets;if(void 0!==c){for(var l=new o["Vector3"],u=new o["Vector3"],h=0,d=c.length;h<d;h++){var p=c[h];if(void 0!==p.POSITION){A=n.json.accessors[p.POSITION],s=A.min,a=A.max;void 0!==s&&void 0!==a?(u.setX(Math.max(Math.abs(s[0]),Math.abs(a[0]))),u.setY(Math.max(Math.abs(s[1]),Math.abs(a[1]))),u.setZ(Math.max(Math.abs(s[2]),Math.abs(a[2]))),l.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}e.boundingBox=i;var f=new o["Sphere"];i.getCenter(f.center),f.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=f}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function k(e,t,n){var r=t.attributes,i=[];function A(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=F[o]||o.toLowerCase();s in e.attributes||i.push(A(r[o],s))}if(void 0!==t.indices&&!e.index){var a=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(a)}return D(e,t),N(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?I(e,t.targets,n):e}))}function K(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var A=0;A<i.count;A++)r.push(A);e.setIndex(r),n=e.getIndex()}var s=n.count-2,a=[];if(t===o["TriangleFanDrawMode"])for(A=1;A<=s;A++)a.push(n.getX(0)),a.push(n.getX(A)),a.push(n.getX(A+1));else for(A=0;A<s;A++)A%2===0?(a.push(n.getX(A)),a.push(n.getX(A+1)),a.push(n.getX(A+2))):(a.push(n.getX(A+2)),a.push(n.getX(A+1)),a.push(n.getX(A)));a.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(a),c}return R.prototype.setExtensions=function(e){this.extensions=e},R.prototype.setPlugins=function(e){this.plugins=e},R.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var A={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};L(i,A,r),D(A,r),e(A)})).catch(t)},R.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var A=t[r].joints,o=0,s=A.length;o<s;o++)e[A[o]].isBone=!0;for(var a=0,c=e.length;a<c;a++){var l=e[a];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}},R.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},R.prototype._getNodeRef=function(e,t,n){if(e.refs[t]<=1)return n;var r=n.clone();return r.name+="_instance_"+e.uses[t]++,r},R.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}},R.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n},R.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},R.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},R.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,n){r.load(S(t.uri,i.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},R.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},R.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,A,s=e[0],a=E[r.type],c=b[r.componentType],l=c.BYTES_PER_ELEMENT,u=l*a,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(d&&d!==u){var f=Math.floor(h/d),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+f+":"+r.count,g=t.cache.get(m);g||(i=new c(s,f*d,r.count*d/l),g=new o["InterleavedBuffer"](i,d/l),t.cache.add(m,g)),A=new o["InterleavedBufferAttribute"](g,a,h%d/l,p)}else i=null===s?new c(r.count*a):new c(s,h,r.count*a),A=new o["BufferAttribute"](i,a,p);if(void 0!==r.sparse){var w=E.SCALAR,v=b[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,B=new v(e[1],x,r.sparse.count*w),C=new c(e[2],y,r.sparse.count*a);null!==s&&(A=new o["BufferAttribute"](A.array.slice(),A.itemSize,A.normalized));for(var M=0,F=B.length;M<F;M++){var _=B[M];if(A.setX(_,C[M*a]),a>=2&&A.setY(_,C[M*a+1]),a>=3&&A.setZ(_,C[M*a+2]),a>=4&&A.setW(_,C[M*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A}))},R.prototype.loadTexture=function(e){var t,r,i=this,A=this.json,o=this.options,s=A.textures[e],a=s.extensions||{};return t=a[n.MSFT_TEXTURE_DDS]?A.images[a[n.MSFT_TEXTURE_DDS].source]:A.images[s.source],t.uri&&(r=o.manager.getHandler(t.uri)),r||(r=a[n.MSFT_TEXTURE_DDS]?i.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,r)},R.prototype.loadTextureImage=function(e,t,n){var r=this,i=this.json,A=this.options,s=i.textures[e],a=self.URL||self.webkitURL,c=t.uri,l=!1,u=!0;return"image/jpeg"===t.mimeType&&(u=!1),void 0!==t.bufferView&&(c=r.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var n=new DataView(e,25,1).getUint8(0,!1);u=6===n||4===n||3===n}l=!0;var r=new Blob([e],{type:t.mimeType});return c=a.createObjectURL(r),c}))),Promise.resolve(c).then((function(e){return new Promise((function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function(e){t(new o["CanvasTexture"](e))}),n.load(S(e,A.path),i,void 0,r)}))})).then((function(t){!0===l&&a.revokeObjectURL(c),t.flipY=!1,s.name&&(t.name=s.name),u||(t.format=o["RGBFormat"]);var n=i.samplers||{},A=n[s.sampler]||{};return t.magFilter=C[A.magFilter]||o["LinearFilter"],t.minFilter=C[A.minFilter]||o["LinearMipmapLinearFilter"],t.wrapS=M[A.wrapS]||o["RepeatWrapping"],t.wrapT=M[A.wrapT]||o["RepeatWrapping"],r.associations.set(t,{type:"textures",index:e}),t}))},R.prototype.assignTexture=function(e,t,r){var i=this;return this.getDependency("texture",r.index).then((function(A){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[n.KHR_TEXTURE_TRANSFORM]){var o=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(A);A=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(A,o),i.associations.set(A,s)}}e[t]=A}))},R.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,i=void 0!==t.attributes.color,A=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,a=Object.keys(t.morphAttributes).length>0,c=a&&void 0!==t.morphAttributes.normal;if(e.isPoints){var l="PointsMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new o["PointsMaterial"],o["Material"].prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){l="LineBasicMaterial:"+n.uuid;var h=this.cache.get(l);h||(h=new o["LineBasicMaterial"],o["Material"].prototype.copy.call(h,n),h.color.copy(n.color),this.cache.add(l,h)),n=h}if(r||i||A||s||a){l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),s&&(l+="skinning:"),r&&(l+="vertex-tangents:"),i&&(l+="vertex-colors:"),A&&(l+="flat-shading:"),a&&(l+="morph-targets:"),c&&(l+="morph-normals:");var d=this.cache.get(l);d||(d=n.clone(),s&&(d.skinning=!0),r&&(d.vertexTangents=!0),i&&(d.vertexColors=!0),A&&(d.flatShading=!0),a&&(d.morphTargets=!0),c&&(d.morphNormals=!0),this.cache.add(l,d),this.associations.set(d,this.associations.get(n))),n=d}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n},R.prototype.getMaterialType=function(){return o["MeshStandardMaterial"]},R.prototype.loadMaterial=function(e){var t,r=this,i=this.json,A=this.extensions,s=i.materials[e],a={},c=s.extensions||{},l=[];if(c[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=A[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(a,s,r))}else if(c[n.KHR_MATERIALS_UNLIT]){var h=A[n.KHR_MATERIALS_UNLIT];t=h.getMaterialType(),l.push(h.extendParams(a,s,r))}else{var d=s.pbrMetallicRoughness||{};if(a.color=new o["Color"](1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){var p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}void 0!==d.baseColorTexture&&l.push(r.assignTexture(a,"map",d.baseColorTexture)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(r.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(r.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===s.doubleSided&&(a.side=o["DoubleSide"]);var f=s.alphaMode||U.OPAQUE;return f===U.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===U.MASK&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==o["MeshBasicMaterial"]&&(l.push(r.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new o["Vector2"](1,1),void 0!==s.normalTexture.scale&&a.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==o["MeshBasicMaterial"]&&(l.push(r.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==o["MeshBasicMaterial"]&&(a.emissive=(new o["Color"]).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==o["MeshBasicMaterial"]&&l.push(r.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(l).then((function(){var i;return i=t===w?A[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new t(a),s.name&&(i.name=s.name),i.map&&(i.map.encoding=o["sRGBEncoding"]),i.emissiveMap&&(i.emissiveMap.encoding=o["sRGBEncoding"]),D(i,s),r.associations.set(i,{type:"materials",index:e}),s.extensions&&L(A,i,s),i}))},R.prototype.createUniqueName=function(e){for(var t=o["PropertyBinding"].sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n},R.prototype.loadGeometries=function(e){var t=this,r=this.extensions,i=this.primitiveCache;function A(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return k(n,e,t)}))}for(var s=[],a=0,c=e.length;a<c;a++){var l,u=e[a],h=P(u),d=i[h];if(d)s.push(d.promise);else l=u.extensions&&u.extensions[n.KHR_DRACO_MESH_COMPRESSION]?A(u):k(new o["BufferGeometry"],u,t),i[h]={primitive:u,promise:l},s.push(l)}return Promise.all(s)},R.prototype.loadMesh=function(e){for(var t=this,n=this.json,r=this.extensions,i=n.meshes[e],A=i.primitives,s=[],a=0,c=A.length;a<c;a++){var l=void 0===A[a].material?Q(this.cache):this.getDependency("material",A[a].material);s.push(l)}return s.push(t.loadGeometries(A)),Promise.all(s).then((function(n){for(var s=n.slice(0,n.length-1),a=n[n.length-1],c=[],l=0,u=a.length;l<u;l++){var h,d=a[l],p=A[l],f=s[l];if(p.mode===B.TRIANGLES||p.mode===B.TRIANGLE_STRIP||p.mode===B.TRIANGLE_FAN||void 0===p.mode)h=!0===i.isSkinnedMesh?new o["SkinnedMesh"](d,f):new o["Mesh"](d,f),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),p.mode===B.TRIANGLE_STRIP?h.geometry=K(h.geometry,o["TriangleStripDrawMode"]):p.mode===B.TRIANGLE_FAN&&(h.geometry=K(h.geometry,o["TriangleFanDrawMode"]));else if(p.mode===B.LINES)h=new o["LineSegments"](d,f);else if(p.mode===B.LINE_STRIP)h=new o["Line"](d,f);else if(p.mode===B.LINE_LOOP)h=new o["LineLoop"](d,f);else{if(p.mode!==B.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new o["Points"](d,f)}Object.keys(h.geometry.morphAttributes).length>0&&O(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),D(h,i),p.extensions&&L(r,h,p),t.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var m=new o["Group"];for(l=0,u=c.length;l<u;l++)m.add(c[l]);return m}))},R.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new o["PerspectiveCamera"](o["MathUtils"].radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new o["OrthographicCamera"](-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),D(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},R.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},R.prototype.loadAnimation=function(e){for(var t=this.json,n=t.animations[e],r=[],i=[],A=[],s=[],a=[],c=0,l=n.channels.length;c<l;c++){var u=n.channels[c],h=n.samplers[u.sampler],d=u.target,p=void 0!==d.node?d.node:d.id,f=void 0!==n.parameters?n.parameters[h.input]:h.input,m=void 0!==n.parameters?n.parameters[h.output]:h.output;r.push(this.getDependency("node",p)),i.push(this.getDependency("accessor",f)),A.push(this.getDependency("accessor",m)),s.push(h),a.push(d)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(A),Promise.all(s),Promise.all(a)]).then((function(t){for(var r=t[0],i=t[1],A=t[2],s=t[3],a=t[4],c=[],l=0,u=r.length;l<u;l++){var h=r[l],d=i[l],p=A[l],f=s[l],m=a[l];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,_[m.path]){case _.weights:g=o["NumberKeyframeTrack"];break;case _.rotation:g=o["QuaternionKeyframeTrack"];break;case _.position:case _.scale:default:g=o["VectorKeyframeTrack"];break}var w=h.name?h.name:h.uuid,v=void 0!==f.interpolation?T[f.interpolation]:o["InterpolateLinear"],x=[];_[m.path]===_.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(w);var B=p.array;if(p.normalized){var b;if(B.constructor===Int8Array)b=1/127;else if(B.constructor===Uint8Array)b=1/255;else if(B.constructor==Int16Array)b=1/32767;else{if(B.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");b=1/65535}for(var C=new Float32Array(B.length),M=0,E=B.length;M<E;M++)C[M]=B[M]*b;B=C}for(M=0,E=x.length;M<E;M++){var F=new g(x[M]+"."+_[m.path],d.array,B,v);"CUBICSPLINE"===f.interpolation&&(F.createInterpolant=function(e){return new y(this.times,this.values,this.getValueSize()/3,e)},F.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(F)}}}var U=n.name?n.name:"animation_"+e;return new o["AnimationClip"](U,void 0,c)}))},R.prototype.loadNode=function(e){var t=this.json,n=this.extensions,r=this,i=t.nodes[e],A=i.name?r.createUniqueName(i.name):"";return function(){var t=[];return void 0!==i.mesh&&t.push(r.getDependency("mesh",i.mesh).then((function(e){var t=r._getNodeRef(r.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var s;if(s=!0===i.isBone?new o["Bone"]:t.length>1?new o["Group"]:1===t.length?t[0]:new o["Object3D"],s!==t[0])for(var a=0,c=t.length;a<c;a++)s.add(t[a]);if(i.name&&(s.userData.name=i.name,s.name=A),D(s,i),i.extensions&&L(n,s,i),void 0!==i.matrix){var l=new o["Matrix4"];l.fromArray(i.matrix),s.applyMatrix4(l)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return r.associations.set(s,{type:"nodes",index:e}),s}))},R.prototype.loadScene=function(){function e(t,n,r,i){var A=r.nodes[t];return i.getDependency("node",t).then((function(e){return void 0===A.skin?e:i.getDependency("skin",A.skin).then((function(e){t=e;for(var n=[],r=0,A=t.joints.length;r<A;r++)n.push(i.getDependency("node",t.joints[r]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],i=[],A=0,s=n.length;A<s;A++){var a=n[A];if(a){r.push(a);var c=new o["Matrix4"];void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*A),i.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[A])}e.bind(new o["Skeleton"](r,i),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var o=[];if(A.children)for(var s=A.children,a=0,c=s.length;a<c;a++){var l=s[a];o.push(e(l,t,r,i))}return Promise.all(o)}))}return function(t){var n=this.json,r=this.extensions,i=this.json.scenes[t],A=this,s=new o["Group"];i.name&&(s.name=A.createUniqueName(i.name)),D(s,i),i.extensions&&L(r,s,i);for(var a=i.nodes||[],c=[],l=0,u=a.length;l<u;l++)c.push(e(a[l],s,n,A));return Promise.all(c).then((function(){return s}))}}(),e}(),Q={},L=void 0,D=Q;function I(e,t){var n,r=e.split("."),i=D;!(r[0]in i)&&i.execScript&&i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||t===L?i=i[n]?i[n]:i[n]={}:i[n]=t}var O="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function P(e){var t,n,r,i,A,o,s,a,c,l,u=e.length,h=0,d=Number.POSITIVE_INFINITY;for(a=0;a<u;++a)e[a]>h&&(h=e[a]),e[a]<d&&(d=e[a]);for(t=1<<h,n=new(O?Uint32Array:Array)(t),r=1,i=0,A=2;r<=h;){for(a=0;a<u;++a)if(e[a]===r){for(o=0,s=i,c=0;c<r;++c)o=o<<1|1&s,s>>=1;for(l=r<<16|a,c=o;c<t;c+=A)n[c]=l;++i}++r,i<<=1,A<<=1}return[n,h,d]}function H(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=O?new Uint8Array(e):e,this.m=!1,this.i=N,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case R:this.b=32768,this.c=new(O?Uint8Array:Array)(32768+this.h+258);break;case N:this.b=0,this.c=new(O?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var R=0,N=1,k={t:R,s:N};H.prototype.k=function(){for(;!this.m;){var e=oe(this,3);switch(1&e&&(this.m=!0),e>>>=1,e){case 0:var t=this.input,n=this.a,r=this.c,i=this.b,A=t.length,o=L,s=L,a=r.length,c=L;if(this.d=this.f=0,n+1>=A)throw Error("invalid uncompressed block header: LEN");if(o=t[n++]|t[n++]<<8,n+1>=A)throw Error("invalid uncompressed block header: NLEN");if(s=t[n++]|t[n++]<<8,o===~s)throw Error("invalid uncompressed block header: length verify");if(n+o>t.length)throw Error("input buffer is broken");switch(this.i){case R:for(;i+o>r.length;){if(c=a-i,o-=c,O)r.set(t.subarray(n,n+c),i),i+=c,n+=c;else for(;c--;)r[i++]=t[n++];this.b=i,r=this.e(),i=this.b}break;case N:for(;i+o>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(O)r.set(t.subarray(n,n+o),i),i+=o,n+=o;else for(;o--;)r[i++]=t[n++];this.a=n,this.b=i,this.c=r;break;case 1:this.j(re,Ae);break;case 2:var l=oe(this,5)+257,u=oe(this,5)+1,h=oe(this,4)+4,d=new(O?Uint8Array:Array)(z.length),p=L,f=L,m=L,g=L,w=L,v=L,x=L,y=L,B=L;for(y=0;y<h;++y)d[z[y]]=oe(this,3);if(!O)for(y=h,h=d.length;y<h;++y)d[z[y]]=0;for(p=P(d),g=new(O?Uint8Array:Array)(l+u),y=0,B=l+u;y<B;)switch(w=se(this,p),w){case 16:for(x=3+oe(this,2);x--;)g[y++]=v;break;case 17:for(x=3+oe(this,3);x--;)g[y++]=0;v=0;break;case 18:for(x=11+oe(this,7);x--;)g[y++]=0;v=0;break;default:v=g[y++]=w}f=P(O?g.subarray(0,l):g.slice(0,l)),m=P(O?g.subarray(l):g.slice(l)),this.j(f,m);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var K,G,V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=O?new Uint16Array(V):V,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],X=O?new Uint16Array(j):j,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],Y=O?new Uint8Array(W):W,q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],J=O?new Uint16Array(q):q,Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=O?new Uint8Array(Z):Z,ee=new(O?Uint8Array:Array)(288);for(K=0,G=ee.length;K<G;++K)ee[K]=143>=K?8:255>=K?9:279>=K?7:8;var te,ne,re=P(ee),ie=new(O?Uint8Array:Array)(30);for(te=0,ne=ie.length;te<ne;++te)ie[te]=5;var Ae=P(ie);function oe(e,t){for(var n,r=e.f,i=e.d,A=e.input,o=e.a,s=A.length;i<t;){if(o>=s)throw Error("input buffer is broken");r|=A[o++]<<i,i+=8}return n=r&(1<<t)-1,e.f=r>>>t,e.d=i-t,e.a=o,n}function se(e,t){for(var n,r,i=e.f,A=e.d,o=e.input,s=e.a,a=o.length,c=t[0],l=t[1];A<l&&!(s>=a);)i|=o[s++]<<A,A+=8;if(n=c[i&(1<<l)-1],r=n>>>16,r>A)throw Error("invalid code length: "+r);return e.f=i>>r,e.d=A-r,e.a=s,65535&n}function ae(e,t){var n,r;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],r=e[this.a++],15&n){case ce:this.method=ce;break;default:throw Error("unsupported compression method")}if(0!==((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new H(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}H.prototype.j=function(e,t){var n=this.c,r=this.b;this.o=e;for(var i,A,o,s,a=n.length-258;256!==(i=se(this,e));)if(256>i)r>=a&&(this.b=r,n=this.e(),r=this.b),n[r++]=i;else for(A=i-257,s=X[A],0<Y[A]&&(s+=oe(this,Y[A])),i=se(this,t),o=J[i],0<$[i]&&(o+=oe(this,$[i])),r>=a&&(this.b=r,n=this.e(),r=this.b);s--;)n[r]=n[r++-o];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},H.prototype.w=function(e,t){var n=this.c,r=this.b;this.o=e;for(var i,A,o,s,a=n.length;256!==(i=se(this,e));)if(256>i)r>=a&&(n=this.e(),a=n.length),n[r++]=i;else for(A=i-257,s=X[A],0<Y[A]&&(s+=oe(this,Y[A])),i=se(this,t),o=J[i],0<$[i]&&(o+=oe(this,$[i])),r+s>a&&(n=this.e(),a=n.length);s--;)n[r]=n[r++-o];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},H.prototype.e=function(){var e,t,n=new(O?Uint8Array:Array)(this.b-32768),r=this.b-32768,i=this.c;if(O)n.set(i.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=i[e+32768];if(this.g.push(n),this.l+=n.length,O)i.set(i.subarray(r,r+32768));else for(e=0;32768>e;++e)i[e]=i[r+e];return this.b=32768,i},H.prototype.z=function(e){var t,n,r,i,A=this.input.length/this.a+1|0,o=this.input,s=this.c;return e&&("number"===typeof e.p&&(A=e.p),"number"===typeof e.u&&(A+=e.u)),2>A?(n=(o.length-this.a)/this.o[2],i=n/2*258|0,r=i<s.length?s.length+i:s.length<<1):r=s.length*A,O?(t=new Uint8Array(r),t.set(s)):t=s,this.c=t},H.prototype.n=function(){var e,t,n,r,i,A=0,o=this.c,s=this.g,a=new(O?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return O?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=s.length;t<n;++t)for(e=s[t],r=0,i=e.length;r<i;++r)a[A++]=e[r];for(t=32768,n=this.b;t<n;++t)a[A++]=o[t];return this.g=[],this.buffer=a},H.prototype.v=function(){var e,t=this.b;return O?this.r?(e=new Uint8Array(t),e.set(this.c.subarray(0,t))):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},ae.prototype.k=function(){var e,t,n=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=e;if("string"===typeof r){var i,A,o=r.split("");for(i=0,A=o.length;i<A;i++)o[i]=(255&o[i].charCodeAt(0))>>>0;r=o}for(var s,a=1,c=0,l=r.length,u=0;0<l;){s=1024<l?1024:l,l-=s;do{a+=r[u++],c+=a}while(--s);a%=65521,c%=65521}if(t!==(c<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return e};var ce=8;I("Zlib.Inflate",ae),I("Zlib.Inflate.prototype.decompress",ae.prototype.k);var le,ue,he,de,pe={ADAPTIVE:k.s,BLOCK:k.t};if(Object.keys)le=Object.keys(pe);else for(ue in le=[],he=0,pe)le[he++]=ue;for(he=0,de=le.length;he<de;++he)ue=le[he],I("Zlib.Inflate.BufferType."+ue,pe[ue]);var fe=Q.Zlib.Inflate,me={findSpan:function(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;var i=e,A=r,o=Math.floor((i+A)/2);while(t<n[o]||t>=n[o+1])t<n[o]?A=o:i=o,o=Math.floor((i+A)/2);return o},calcBasisFunctions:function(e,t,n,r){var i=[],A=[],o=[];i[0]=1;for(var s=1;s<=n;++s){A[s]=t-r[e+1-s],o[s]=r[e+s]-t;for(var a=0,c=0;c<s;++c){var l=o[c+1],u=A[s-c],h=i[c]/(l+u);i[c]=a+l*h,a=u*h}i[s]=a}return i},calcBSplinePoint:function(e,t,n,r){for(var i=this.findSpan(e,r,t),A=this.calcBasisFunctions(i,r,e,t),s=new o["Vector4"](0,0,0,0),a=0;a<=e;++a){var c=n[i-e+a],l=A[a],u=c.w*l;s.x+=c.x*u,s.y+=c.y*u,s.z+=c.z*u,s.w+=c.w*l}return s},calcBasisFunctionDerivatives:function(e,t,n,r,i){for(var A=[],o=0;o<=n;++o)A[o]=0;var s=[];for(o=0;o<=r;++o)s[o]=A.slice(0);var a=[];for(o=0;o<=n;++o)a[o]=A.slice(0);a[0][0]=1;for(var c=A.slice(0),l=A.slice(0),u=1;u<=n;++u){c[u]=t-i[e+1-u],l[u]=i[e+u]-t;for(var h=0,d=0;d<u;++d){var p=l[d+1],f=c[u-d];a[u][d]=p+f;var m=a[d][u-1]/a[u][d];a[d][u]=h+p*m,h=f*m}a[u][u]=h}for(u=0;u<=n;++u)s[0][u]=a[u][n];for(d=0;d<=n;++d){var g=0,w=1,v=[];for(o=0;o<=n;++o)v[o]=A.slice(0);v[0][0]=1;for(var x=1;x<=r;++x){var y=0,B=d-x,b=n-x;d>=x&&(v[w][0]=v[g][0]/a[b+1][B],y=v[w][0]*a[B][b]);var C=B>=-1?1:-B,M=d-1<=b?x-1:n-d;for(u=C;u<=M;++u)v[w][u]=(v[g][u]-v[g][u-1])/a[b+1][B+u],y+=v[w][u]*a[B+u][b];d<=b&&(v[w][x]=-v[g][x-1]/a[b+1][d],y+=v[w][x]*a[d][b]),s[x][d]=y;u=g;g=w,w=u}}for(d=n,x=1;x<=r;++x){for(u=0;u<=n;++u)s[x][u]*=d;d*=n-x}return s},calcBSplineDerivatives:function(e,t,n,r,i){for(var A=i<e?i:e,s=[],a=this.findSpan(e,r,t),c=this.calcBasisFunctionDerivatives(a,r,e,A,t),l=[],u=0;u<n.length;++u){var h=n[u].clone(),d=h.w;h.x*=d,h.y*=d,h.z*=d,l[u]=h}for(var p=0;p<=A;++p){h=l[a-e].clone().multiplyScalar(c[p][0]);for(var f=1;f<=e;++f)h.add(l[a-e+f].clone().multiplyScalar(c[p][f]));s[p]=h}for(p=A+1;p<=i+1;++p)s[p]=new o["Vector4"](0,0,0);return s},calcKoverI:function(e,t){for(var n=1,r=2;r<=e;++r)n*=r;var i=1;for(r=2;r<=t;++r)i*=r;for(r=2;r<=e-t;++r)i*=r;return n/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i){var A=e[i];n[i]=new o["Vector3"](A.x,A.y,A.z),r[i]=A.w}for(var s=[],a=0;a<t;++a){var c=n[a].clone();for(i=1;i<=a;++i)c.sub(s[a-i].clone().multiplyScalar(this.calcKoverI(a,i)*r[i]));s[a]=c.divideScalar(r[0])}return s},calcNURBSDerivatives:function(e,t,n,r,i){var A=this.calcBSplineDerivatives(e,t,n,r,i);return this.calcRationalCurveDerivatives(A)},calcSurfacePoint:function(e,t,n,r,i,A,s,a){for(var c=this.findSpan(e,A,n),l=this.findSpan(t,s,r),u=this.calcBasisFunctions(c,A,e,n),h=this.calcBasisFunctions(l,s,t,r),d=[],p=0;p<=t;++p){d[p]=new o["Vector4"](0,0,0,0);for(var f=0;f<=e;++f){var m=i[c-e+f][l-t+p].clone(),g=m.w;m.x*=g,m.y*=g,m.z*=g,d[p].add(m.multiplyScalar(u[f]))}}var w=new o["Vector4"](0,0,0,0);for(p=0;p<=t;++p)w.add(d[p].multiplyScalar(h[p]));w.divideScalar(w.w),a.set(w.x,w.y,w.z)}},ge=function(e,t,n,r,i){o["Curve"].call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(var A=0;A<n.length;++A){var s=n[A];this.controlPoints[A]=new o["Vector4"](s.x,s.y,s.z,s.w)}};ge.prototype=Object.create(o["Curve"].prototype),ge.prototype.constructor=ge,ge.prototype.getPoint=function(e,t){var n=t||new o["Vector3"],r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=me.calcBSplinePoint(this.degree,this.knots,this.controlPoints,r);return 1!=i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)},ge.prototype.getTangent=function(e,t){var n=t||new o["Vector3"],r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=me.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,r,1);return n.copy(i[1]).normalize(),n};var we=function(){var e,t,n;function r(e){o["Loader"].call(this,e)}function i(e,t){this.textureLoader=e,this.manager=t}function A(){}function s(){}function a(){}function c(){}function l(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function u(){}function h(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===b(e,0,t.length)}function d(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function r(t){var r=e[t-1];return e=e.slice(n+t),n++,r}for(var i=0;i<t.length;++i){var A=r(1);if(A===t[i])return!1}return!0}function p(e){var t=/FBXVersion: (\d+)/,n=e.match(t);if(n){var r=parseInt(n[1]);return r}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function f(e){return e/46186158e3}r.prototype=Object.assign(Object.create(o["Loader"].prototype),{constructor:r,load:function(e,t,n,r){var i=this,A=""===i.path?o["LoaderUtils"].extractUrlBase(e):i.path,s=new o["FileLoader"](this.manager);s.setPath(i.path),s.setResponseType("arraybuffer"),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(n,A))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)},parse:function(t,n){if(h(t))e=(new c).parse(t);else{var r=b(t);if(!d(r))throw new Error("THREE.FBXLoader: Unknown format.");if(p(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+p(r));e=(new a).parse(r)}var A=new o["TextureLoader"](this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new i(A,this.manager).parse(e)}}),i.prototype={constructor:i,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),i=this.parseMaterials(r),o=this.parseDeformers(),s=(new A).parse(o);return this.parseScene(o,s,i),n},parseConnections:function(){var t=new Map;if("Connections"in e){var n=e.Connections.connections;n.forEach((function(e){var n=e[0],r=e[1],i=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var A={ID:r,relationship:i};t.get(n).parents.push(A),t.has(r)||t.set(r,{parents:[],children:[]});var o={ID:n,relationship:i};t.get(r).children.push(o)}))}return t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var r=e.Objects.Video;for(var i in r){var A=r[i],o=parseInt(i);if(t[o]=A.RelativeFilename||A.Filename,"Content"in A){var s=A.Content instanceof ArrayBuffer&&A.Content.byteLength>0,a="string"===typeof A.Content&&""!==A.Content;if(s||a){var c=this.parseImage(r[i]);n[A.RelativeFilename||A.Filename]=c}}}}for(var o in t){var l=t[o];void 0!==n[l]?t[o]=n[l]:t[o]=t[o].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"===typeof n)return"data:"+t+";base64,"+n;var A=new Uint8Array(n);return window.URL.createObjectURL(new Blob([A],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var i in r){var A=this.parseTexture(r[i],t);n.set(parseInt(i),A)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var r=e.WrapModeU,i=e.WrapModeV,A=void 0!==r?r.value:0,s=void 0!==i?i.value:0;if(n.wrapS=0===A?o["RepeatWrapping"]:o["ClampToEdgeWrapping"],n.wrapT=0===s?o["RepeatWrapping"]:o["ClampToEdgeWrapping"],"Scaling"in e){var a=e.Scaling.value;n.repeat.x=a[0],n.repeat.y=a[1]}return n},loadTexture:function(e,n){var r,i,A=this.textureLoader.path,s=t.get(e.id).children;void 0!==s&&s.length>0&&void 0!==n[s[0].ID]&&(r=n[s[0].ID],0!==r.indexOf("blob:")&&0!==r.indexOf("data:")||this.textureLoader.setPath(void 0));var a=e.FileName.slice(-3).toLowerCase();if("tga"===a){var c=this.manager.getHandler(".tga");null===c?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),i=new o["Texture"]):i=c.load(r)}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),i=new o["Texture"]):i=this.textureLoader.load(r);return this.textureLoader.setPath(A),i},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var i in r){var A=this.parseMaterial(r[i],t);null!==A&&n.set(parseInt(i),A)}}return n},parseMaterial:function(e,n){var r=e.id,i=e.attrName,A=e.ShadingModel;if("object"===typeof A&&(A=A.value),!t.has(r))return null;var s,a=this.parseParameters(e,n,r);switch(A.toLowerCase()){case"phong":s=new o["MeshPhongMaterial"];break;case"lambert":s=new o["MeshLambertMaterial"];break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',A),s=new o["MeshPhongMaterial"];break}return s.setValues(a),s.name=i,s},parseParameters:function(e,n,r){var i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new o["Color"]).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(i.color=(new o["Color"]).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new o["Color"]).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(i.emissive=(new o["Color"]).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new o["Color"]).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new o["Color"]).fromArray(e.SpecularColor.value));var A=this;return t.get(r).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":i.bumpMap=A.getTexture(n,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=A.getTexture(n,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=A.getTexture(n,e.ID),i.map.encoding=o["sRGBEncoding"];break;case"DisplacementColor":i.displacementMap=A.getTexture(n,e.ID);break;case"EmissiveColor":i.emissiveMap=A.getTexture(n,e.ID),i.emissiveMap.encoding=o["sRGBEncoding"];break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=A.getTexture(n,e.ID);break;case"ReflectionColor":i.envMap=A.getTexture(n,e.ID),i.envMap.mapping=o["EquirectangularReflectionMapping"],i.envMap.encoding=o["sRGBEncoding"];break;case"SpecularColor":i.specularMap=A.getTexture(n,e.ID),i.specularMap.encoding=o["sRGBEncoding"];break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=A.getTexture(n,e.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t);break}})),i},getTexture:function(n,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var A in i){var o=i[A],s=t.get(parseInt(A));if("Skin"===o.attrType){var a=this.parseSkeleton(s,i);a.ID=A,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=s.parents[0].ID,n[A]=a}else if("BlendShape"===o.attrType){var c={id:A};c.rawTargets=this.parseMorphTargets(s,i),c.id=A,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[A]=c}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(e,t){var n=[];return e.children.forEach((function(e){var r=t[e.ID];if("Cluster"===r.attrType){var i={ID:e.ID,indices:[],weights:[],transformLink:(new o["Matrix4"]).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)}})),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){var A=e.children[i],o=n[A.ID],s={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;s.geoID=t.get(parseInt(A.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(s)}return r},parseScene:function(r,i,A){n=new o["Group"];var a=this.parseModels(r.skeletons,i,A),c=e.Objects.Model,l=this;a.forEach((function(e){var r=c[e.ID];l.setLookAtProperties(e,r);var i=t.get(e.ID).parents;i.forEach((function(t){var n=a.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&n.add(e)})),this.bindSkeleton(r.skeletons,i,a),this.createAmbientLight(),this.setupMorphMaterials(),n.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=x(e.userData.transformData);e.applyMatrix4(t)}}));var u=(new s).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=u,n=n.children[0]),n.animations=u},parseModels:function(n,r,i){var A=new Map,s=e.Objects.Model;for(var a in s){var c=parseInt(a),l=s[a],u=t.get(c),h=this.buildSkeleton(u,n,c,l.attrName);if(!h){switch(l.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,r,i);break;case"NurbsCurve":h=this.createCurve(u,r);break;case"LimbNode":case"Root":h=new o["Bone"];break;case"Null":default:h=new o["Group"];break}h.name=l.attrName?o["PropertyBinding"].sanitizeNodeName(l.attrName):"",h.ID=c}this.getTransformData(h,l),A.set(c,h)}return A},buildSkeleton:function(e,t,n,r){var i=null;return e.parents.forEach((function(e){for(var A in t){var s=t[A];s.rawBones.forEach((function(t,A){if(t.ID===e.ID){var a=i;i=new o["Bone"],i.matrixWorld.copy(t.transformLink),i.name=r?o["PropertyBinding"].sanitizeNodeName(r):"",i.ID=n,s.bones[A]=i,null!==a&&i.add(a)}}))}})),i},createCamera:function(t){var n,r;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(r=n)})),void 0===r)n=new o["Object3D"];else{var i=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(i=1);var A=1;void 0!==r.NearPlane&&(A=r.NearPlane.value/1e3);var s=1e3;void 0!==r.FarPlane&&(s=r.FarPlane.value/1e3);var a=window.innerWidth,c=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(a=r.AspectWidth.value,c=r.AspectHeight.value);var l=a/c,u=45;void 0!==r.FieldOfView&&(u=r.FieldOfView.value);var h=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new o["PerspectiveCamera"](u,l,A,s),null!==h&&n.setFocalLength(h);break;case 1:n=new o["OrthographicCamera"](-a/2,a/2,c/2,-c/2,A,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new o["Object3D"];break}}return n},createLight:function(t){var n,r;if(t.children.forEach((function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(r=n)})),void 0===r)n=new o["Object3D"];else{var i;i=void 0===r.LightType?0:r.LightType.value;var A=16777215;void 0!==r.Color&&(A=(new o["Color"]).fromArray(r.Color.value));var s=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(s=0);var a=0;void 0!==r.FarAttenuationEnd&&(a=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);var c=1;switch(i){case 0:n=new o["PointLight"](A,s,a,c);break;case 1:n=new o["DirectionalLight"](A,s);break;case 2:var l=Math.PI/3;void 0!==r.InnerAngle&&(l=o["MathUtils"].degToRad(r.InnerAngle.value));var u=0;void 0!==r.OuterAngle&&(u=o["MathUtils"].degToRad(r.OuterAngle.value),u=Math.max(u,1)),n=new o["SpotLight"](A,s,a,l,u,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new o["PointLight"](A,s);break}void 0!==r.CastShadows&&1===r.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var r,i=null,A=null,s=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?A=s:s.length>0?A=s[0]:(A=new o["MeshPhongMaterial"]({color:13421772}),s.push(A)),"color"in i.attributes&&s.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(s.forEach((function(e){e.skinning=!0})),r=new o["SkinnedMesh"](i,A),r.normalizeSkinWeights()):r=new o["Mesh"](i,A),r},createCurve:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new o["LineBasicMaterial"]({color:3342591,linewidth:1});return new o["Line"](n,r)},getTransformData:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?y(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n},setLookAtProperties:function(r,i){if("LookAtProperty"in i){var A=t.get(r.ID).children;A.forEach((function(t){if("LookAtProperty"===t.relationship){var i=e.Objects.Model[t.ID];if("Lcl_Translation"in i){var A=i.Lcl_Translation.value;void 0!==r.target?(r.target.position.fromArray(A),n.add(r.target)):r.lookAt((new o["Vector3"]).fromArray(A))}}}))}},bindSkeleton:function(e,n,r){var i=this.parsePoseNodes();for(var A in e){var s=e[A],a=t.get(parseInt(s.ID)).parents;a.forEach((function(e){if(n.has(e.ID)){var A=e.ID,a=t.get(A);a.parents.forEach((function(e){if(r.has(e.ID)){var t=r.get(e.ID);t.bind(new o["Skeleton"](s.bones),i[e.ID])}}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var r in n)if("BindPose"===n[r].attrType){var i=n[r].PoseNode;Array.isArray(i)?i.forEach((function(e){t[e.Node]=(new o["Matrix4"]).fromArray(e.Matrix.a)})):t[i.Node]=(new o["Matrix4"]).fromArray(i.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,r=t[0],i=t[1],A=t[2];if(0!==r||0!==i||0!==A){var s=new o["Color"](r,i,A);n.add(new o["AmbientLight"](s,1))}}},setupMorphMaterials:function(){var e=this;n.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(n,r){e.setupMorphMaterial(t,n,r)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,r){var i=e.uuid,A=t.uuid,o=!1;if(n.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===A&&e.uuid!==i&&(o=!0)})):e.material.uuid===A&&e.uuid!==i&&(o=!0))})),!0===o){var s=t.clone();s.morphTargets=!0,void 0===r?e.material=s:e.material[r]=s}else t.morphTargets=!0}},A.prototype={constructor:A,parse:function(n){var r=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var A in i){var o=t.get(parseInt(A)),s=this.parseGeometry(o,i[A],n);r.set(parseInt(A),s)}}return r},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,r){var i=r.skeletons,A=[],o=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==o.length){var s=t.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null);t.children.forEach((function(e){void 0!==r.morphTargets[e.ID]&&A.push(r.morphTargets[e.ID])}));var a=o[0],c={};"RotationOrder"in a&&(c.eulerOrder=y(a.RotationOrder.value)),"InheritType"in a&&(c.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(c.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(c.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(c.scale=a.GeometricScaling.value);var l=x(c);return this.genGeometry(n,s,A,l)}},genGeometry:function(e,t,n,r){var i=new o["BufferGeometry"];e.attrName&&(i.name=e.attrName);var A=this.parseGeoNode(e,t),s=this.genBuffers(A),a=new o["Float32BufferAttribute"](s.vertex,3);if(a.applyMatrix4(r),i.setAttribute("position",a),s.colors.length>0&&i.setAttribute("color",new o["Float32BufferAttribute"](s.colors,3)),t&&(i.setAttribute("skinIndex",new o["Uint16BufferAttribute"](s.weightsIndices,4)),i.setAttribute("skinWeight",new o["Float32BufferAttribute"](s.vertexWeights,4)),i.FBX_Deformer=t),s.normal.length>0){var c=(new o["Matrix3"]).getNormalMatrix(r),l=new o["Float32BufferAttribute"](s.normal,3);l.applyNormalMatrix(c),i.setAttribute("normal",l)}if(s.uvs.forEach((function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),i.setAttribute(n,new o["Float32BufferAttribute"](s.uvs[t],2))})),A.material&&"AllSame"!==A.material.mappingType){var u=s.materialIndex[0],h=0;if(s.materialIndex.forEach((function(e,t){e!==u&&(i.addGroup(h,t-h,u),u=e,h=t)})),i.groups.length>0){var d=i.groups[i.groups.length-1],p=d.start+d.count;p!==s.materialIndex.length&&i.addGroup(p,s.materialIndex.length-p,u)}0===i.groups.length&&i.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];var r=0;while(e.LayerElementUV[r])e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,A=[],o=[],s=[],a=[],c=[],l=[],u=this;return e.vertexIndices.forEach((function(h,d){var p=!1;h<0&&(h^=-1,p=!0);var f=[],m=[];if(A.push(3*h,3*h+1,3*h+2),e.color){var w=g(d,n,h,e.color);s.push(w[0],w[1],w[2])}if(e.skeleton){if(void 0!==e.weightTable[h]&&e.weightTable[h].forEach((function(e){m.push(e.weight),f.push(e.id)})),m.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var v=[0,0,0,0],x=[0,0,0,0];m.forEach((function(e,t){var n=e,r=f[t];x.forEach((function(e,t,i){if(n>e){i[t]=n,n=e;var A=v[t];v[t]=r,r=A}}))})),f=v,m=x}while(m.length<4)m.push(0),f.push(0);for(var y=0;y<4;++y)c.push(m[y]),l.push(f[y])}if(e.normal){w=g(d,n,h,e.normal);o.push(w[0],w[1],w[2])}if(e.material&&"AllSame"!==e.material.mappingType)var B=g(d,n,h,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var r=g(d,n,h,e);void 0===a[t]&&(a[t]=[]),a[t].push(r[0]),a[t].push(r[1])})),r++,p&&(u.genFace(t,e,A,B,o,s,a,c,l,r),n++,r=0,A=[],o=[],s=[],a=[],c=[],l=[])})),t},genFace:function(e,t,n,r,i,A,o,s,a,c){for(var l=2;l<c;l++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(l-1)]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[n[3*l]]),e.vertex.push(t.vertexPositions[n[3*l+1]]),e.vertex.push(t.vertexPositions[n[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(a[0]),e.weightsIndices.push(a[1]),e.weightsIndices.push(a[2]),e.weightsIndices.push(a[3]),e.weightsIndices.push(a[4*(l-1)]),e.weightsIndices.push(a[4*(l-1)+1]),e.weightsIndices.push(a[4*(l-1)+2]),e.weightsIndices.push(a[4*(l-1)+3]),e.weightsIndices.push(a[4*l]),e.weightsIndices.push(a[4*l+1]),e.weightsIndices.push(a[4*l+2]),e.weightsIndices.push(a[4*l+3])),t.color&&(e.colors.push(A[0]),e.colors.push(A[1]),e.colors.push(A[2]),e.colors.push(A[3*(l-1)]),e.colors.push(A[3*(l-1)+1]),e.colors.push(A[3*(l-1)+2]),e.colors.push(A[3*l]),e.colors.push(A[3*l+1]),e.colors.push(A[3*l+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(l-1)]),e.normal.push(i[3*(l-1)+1]),e.normal.push(i[3*(l-1)+2]),e.normal.push(i[3*l]),e.normal.push(i[3*l+1]),e.normal.push(i[3*l+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(o[n][0]),e.uvs[n].push(o[n][1]),e.uvs[n].push(o[n][2*(l-1)]),e.uvs[n].push(o[n][2*(l-1)+1]),e.uvs[n].push(o[n][2*l]),e.uvs[n].push(o[n][2*l+1])}))},addMorphTargets:function(t,n,r,i){if(0!==r.length){t.morphTargetsRelative=!0,t.morphAttributes.position=[];var A=this;r.forEach((function(r){r.rawTargets.forEach((function(r){var o=e.Objects.Geometry[r.geoID];void 0!==o&&A.genMorphGeometry(t,n,o,i,r.name)}))}))}},genMorphGeometry:function(e,t,n,r,i){for(var A=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],a=void 0!==n.Indexes?n.Indexes.a:[],c=3*e.attributes.position.count,l=new Float32Array(c),u=0;u<a.length;u++){var h=3*a[u];l[h]=s[3*u],l[h+1]=s[3*u+1],l[h+2]=s[3*u+2]}var d={vertexIndices:A,vertexPositions:l},p=this.genBuffers(d),f=new o["Float32BufferAttribute"](p.vertex,3);f.name=i||n.attrName,f.applyMatrix4(r),e.morphAttributes.position.push(f)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],A=0;A<r.length;++A)i.push(A);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===ge)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new o["BufferGeometry"];var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new o["BufferGeometry"];for(var n,r,i=t-1,A=e.KnotVector.a,s=[],a=e.Points.a,c=0,l=a.length;c<l;c+=4)s.push((new o["Vector4"]).fromArray(a,c));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){n=i,r=A.length-1-n;for(c=0;c<i;++c)s.push(s[c])}var u=new ge(i,A,s,n,r),h=u.getPoints(7*s.length),d=new Float32Array(3*h.length);h.forEach((function(e,t){e.toArray(d,3*t)}));var p=new o["BufferGeometry"];return p.setAttribute("position",new o["BufferAttribute"](d,3)),p}},s.prototype={constructor:s,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t),r=this.parseAnimStacks(n);return r}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var r in t){var i=t[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var A={id:i.id,attr:i.attrName,curves:{}};n.set(A.id,A)}}return n},parseAnimationCurves:function(n){var r=e.Objects.AnimationCurve;for(var i in r){var A={id:r[i].id,times:r[i].KeyTime.a.map(f),values:r[i].KeyValueFloat.a},o=t.get(A.id);if(void 0!==o){var s=o.parents[0].ID,a=o.parents[0].relationship;a.match(/X/)?n.get(s).curves["x"]=A:a.match(/Y/)?n.get(s).curves["y"]=A:a.match(/Z/)?n.get(s).curves["z"]=A:a.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves["morph"]=A)}}},parseAnimationLayers:function(r){var i=e.Objects.AnimationLayer,A=new Map;for(var s in i){var a=[],c=t.get(parseInt(s));if(void 0!==c){var l=c.children;l.forEach((function(i,A){if(r.has(i.ID)){var s=r.get(i.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===a[A]){var c=t.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==c){var l=e.Objects.Model[c.toString()];if(void 0===l)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",i);var u={modelName:l.attrName?o["PropertyBinding"].sanitizeNodeName(l.attrName):"",ID:l.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};n.traverse((function(e){e.ID===l.id&&(u.transform=e.matrix,e.userData.transformData&&(u.eulerOrder=e.userData.transformData.eulerOrder))})),u.transform||(u.transform=new o["Matrix4"]),"PreRotation"in l&&(u.preRotation=l.PreRotation.value),"PostRotation"in l&&(u.postRotation=l.PostRotation.value),a[A]=u}}a[A]&&(a[A][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===a[A]){var h=t.get(i.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,d=t.get(h).parents[0].ID,p=t.get(d).parents[0].ID;c=t.get(p).parents[0].ID,l=e.Objects.Model[c],u={modelName:l.attrName?o["PropertyBinding"].sanitizeNodeName(l.attrName):"",morphName:e.Objects.Deformer[h].attrName};a[A]=u}a[A][s.attr]=s}}})),A.set(parseInt(s),a)}}return A},parseAnimStacks:function(n){var r=e.Objects.AnimationStack,i={};for(var A in r){var o=t.get(parseInt(A)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(o[0].ID);i[A]={name:r[A].attrName,layer:s}}return i},addClip:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new o["AnimationClip"](e.name,-1,t)},generateTracks:function(e){var t=[],n=new o["Vector3"],r=new o["Quaternion"],i=new o["Vector3"];if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new o["Euler"]).setFromQuaternion(r,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var A=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==A&&t.push(A)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==s&&t.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==a&&t.push(a)}if(void 0!==e.DeformPercent){var c=this.generateMorphTrack(e);void 0!==c&&t.push(c)}return t},generateVectorTrack:function(e,t,n,r){var i=this.getTimesForAllAxes(t),A=this.getKeyframeTrackValues(i,t,n);return new o["VectorKeyframeTrack"](e+"."+r,i,A)},generateRotationTrack:function(e,t,n,r,i,A){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(o["MathUtils"].degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(o["MathUtils"].degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(o["MathUtils"].degToRad));var s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,n);void 0!==r&&(r=r.map(o["MathUtils"].degToRad),r.push(A),r=(new o["Euler"]).fromArray(r),r=(new o["Quaternion"]).setFromEuler(r)),void 0!==i&&(i=i.map(o["MathUtils"].degToRad),i.push(A),i=(new o["Euler"]).fromArray(i),i=(new o["Quaternion"]).setFromEuler(i).invert());for(var c=new o["Quaternion"],l=new o["Euler"],u=[],h=0;h<a.length;h+=3)l.set(a[h],a[h+1],a[h+2],A),c.setFromEuler(l),void 0!==r&&c.premultiply(r),void 0!==i&&c.multiply(i),c.toArray(u,h/3*4);return new o["QuaternionKeyframeTrack"](e+".quaternion",s,u)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,r=t.values.map((function(e){return e/100})),i=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new o["NumberKeyframeTrack"](e.modelName+".morphTargetInfluences["+i+"]",t.times,r)},getTimesForAllAxes:function(e){var t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){for(var n=1,r=t[0],i=1;i<t.length;i++){var A=t[i];A!==r&&(t[n]=A,r=A,n++)}t=t.slice(0,n)}return t},getKeyframeTrackValues:function(e,t,n){var r=n,i=[],A=-1,o=-1,s=-1;return e.forEach((function(e){if(t.x&&(A=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==A){var n=t.x.values[A];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==o){var a=t.y.values[o];i.push(a),r[1]=a}else i.push(r[1]);if(-1!==s){var c=t.z.values[s];i.push(c),r[2]=c}else i.push(r[2])})),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){var A=i/180,o=r/A,s=n+o,a=e.times[t-1],c=e.times[t]-a,l=c/A,u=a+l,h=[],d=[];while(u<e.times[t])h.push(u),u+=l,d.push(s),s+=o;e.times=E(e.times,t,h),e.values=E(e.values,t,d)}}}},a.prototype={constructor:a,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new u,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var i=e.match(/^[\s\t]*;/),A=e.match(/^[\s\t]*$/);if(!i&&!A){var o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),a=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):s?t.parseNodeProperty(e,s,n[++r]):a?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},A=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in o?("PoseNode"===n?o.PoseNode.push(i):void 0!==o[n].id&&(o[n]={},o[n][o[n].id]=o[n]),""!==A.id&&(o[n][A.id]=i)):"number"===typeof A.id?(o[n]={},o[n][A.id]=i):"Properties70"!==n&&(o[n]="PoseNode"===n?[i]:i),"number"===typeof A.id&&(i.id=A.id),""!==A.name&&(i.attrName=A.name),""!==A.type&&(i.attrType=A.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}},parseNodeProperty:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var A=this.getCurrentNode(),o=A.name;if("Properties70"!==o){if("C"===r){var s=i.split(",").slice(1),a=parseInt(s[0]),c=parseInt(s[1]),l=i.split(",").slice(3);l=l.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[a,c],C(i,l),void 0===A[r]&&(A[r]=[])}"Node"===r&&(A.id=i),r in A&&Array.isArray(A[r])?A[r].push(i):"a"!==r?A[r]=i:A.a=i,this.setCurrentProp(A,r),"a"===r&&","!==i.slice(-1)&&(A.a=B(i))}else this.parseNodeSpecialProperty(e,r,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=B(t.a))},parseNodeSpecialProperty:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],A=r[1],o=r[2],s=r[3],a=r[4];switch(A){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":a=parseFloat(a);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":a=B(a);break}this.getPrevNode()[i]={type:A,type2:o,flag:s,value:a},this.setCurrentProp(this.getPrevNode(),i)}},c.prototype={constructor:c,parse:function(e){var t=new l(e);t.skip(23);var n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);var r=new u;while(!this.endOfContent(t)){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var A=e.getUint8(),o=e.getString(A);if(0===r)return null;for(var s=[],a=0;a<i;a++)s.push(this.parseProperty(e));var c=s.length>0?s[0]:"",l=s.length>1?s[1]:"",u=s.length>2?s[2]:"";n.singleProperty=1===i&&e.getOffset()===r;while(r>e.getOffset()){var h=this.parseNode(e,t);null!==h&&this.parseSubNode(o,n,h)}return n.propertyList=s,"number"===typeof c&&(n.id=c),""!==l&&(n.attrName=l),""!==u&&(n.attrType=u),""!==o&&(n.name=o),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){var A=Object.keys(n);A.forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var o,s=n.propertyList[0],a=n.propertyList[1],c=n.propertyList[2],l=n.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),o="Color"===a||"ColorRGB"===a||"Vector"===a||"Vector3D"===a||0===a.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[s]={type:a,type2:c,flag:l,value:o}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),i=e.getUint32(),A=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}"undefined"===typeof fe&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var o=new fe(new Uint8Array(e.getArrayBuffer(A))),s=new l(o.decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},l.prototype={constructor:l,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1===(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),o["LoaderUtils"].decodeText(new Uint8Array(t))}},u.prototype={constructor:u,add:function(e,t){this[e]=t}};var m=[];function g(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var A=i*r.dataSize,o=A+r.dataSize;return M(m,r.buffer,A,o)}var w=new o["Euler"],v=new o["Vector3"];function x(e){var t=new o["Matrix4"],n=new o["Matrix4"],r=new o["Matrix4"],i=new o["Matrix4"],A=new o["Matrix4"],s=new o["Matrix4"],a=new o["Matrix4"],c=new o["Matrix4"],l=new o["Matrix4"],u=new o["Matrix4"],h=new o["Matrix4"],d=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(v.fromArray(e.translation)),e.preRotation){var p=e.preRotation.map(o["MathUtils"].degToRad);p.push(e.eulerOrder),n.makeRotationFromEuler(w.fromArray(p))}if(e.rotation){p=e.rotation.map(o["MathUtils"].degToRad);p.push(e.eulerOrder),r.makeRotationFromEuler(w.fromArray(p))}if(e.postRotation){p=e.postRotation.map(o["MathUtils"].degToRad);p.push(e.eulerOrder),i.makeRotationFromEuler(w.fromArray(p))}e.scale&&A.scale(v.fromArray(e.scale)),e.scalingOffset&&a.setPosition(v.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(v.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(v.fromArray(e.rotationOffset)),e.rotationPivot&&l.setPosition(v.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(u=e.parentMatrixWorld);var f=n.multiply(r).multiply(i),m=new o["Matrix4"];u.extractRotation(m);var g=new o["Matrix4"];g.copyPosition(u);var x=new o["Matrix4"];x.copy(m).invert().multiply(u);var y=new o["Matrix4"];if(0===d)y.copy(m).multiply(f).multiply(x).multiply(A);else if(1===d)y.copy(m).multiply(x).multiply(f).multiply(A);else{var B=new o["Matrix4"];B.copy(A).invert();var b=(new o["Matrix4"]).multiply(x).multiply(B);y.copy(m).multiply(f).multiply(b).multiply(A)}var C=new o["Matrix4"];C.copy(l).invert();var M=new o["Matrix4"];M.copy(s).invert();var E=new o["Matrix4"];E.copy(t).multiply(c).multiply(l).multiply(n).multiply(r).multiply(i).multiply(C).multiply(a).multiply(s).multiply(A).multiply(M);var F=(new o["Matrix4"]).copyPosition(E),_=(new o["Matrix4"]).copy(u).multiply(F);return h.copyPosition(_),E=(new o["Matrix4"]).multiply(h).multiply(y),E}function y(e){e=e||0;var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===e?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function B(e){var t=e.split(",").map((function(e){return parseFloat(e)}));return t}function b(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),o["LoaderUtils"].decodeText(new Uint8Array(e,t,n))}function C(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}function M(e,t,n,r){for(var i=n,A=0;i<r;i++,A++)e[A]=t[i];return e}function E(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return r}(),ve=function(e){o["Loader"].call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};ve.prototype=Object.assign(Object.create(o["Loader"].prototype),{constructor:ve,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,r){var i=new o["FileLoader"](this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,e=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)},decodeDracoFile:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)},decodeGeometry:function(e,t){for(var n in t.attributeTypes){var r=t.attributeTypes[n];void 0!==r.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=r.name)}var i,A=JSON.stringify(t);if(ve.taskCache.has(e)){var o=ve.taskCache.get(e);if(o.key===A)return o.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var s=this.workerNextTaskID++,a=e.byteLength,c=this._getWorker(s,a).then(n=>(i=n,new Promise((n,r)=>{i._callbacks[s]={resolve:n,reject:r},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return c.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),ve.taskCache.set(e,{key:A,promise:c}),c},_createGeometry:function(e){var t=new o["BufferGeometry"];e.index&&t.setIndex(new o["BufferAttribute"](e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,A=r.array,s=r.itemSize;t.setAttribute(i,new o["BufferAttribute"](A,s))}return t},_loadLibrary:function(e,t){var n=new o["FileLoader"](this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var r=ve.DRACOWorker.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),ve.DRACOWorker=function(){var e,t;function n(e,t,n,A){var o,s,a=A.attributeIDs,c=A.attributeTypes,l=t.GetEncodedGeometryType(n);if(l===e.TRIANGULAR_MESH)o=new e.Mesh,s=t.DecodeBufferToMesh(n,o);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,s=t.DecodeBufferToPointCloud(n,o)}if(!s.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+s.error_msg());var u={index:null,attributes:[]};for(var h in a){var d,p,f=self[c[h]];if(A.useUniqueIDs)p=a[h],d=t.GetAttributeByUniqueId(o,p);else{if(p=t.GetAttributeId(o,e[a[h]]),-1===p)continue;d=t.GetAttribute(o,p)}u.attributes.push(i(e,t,o,h,f,d))}return l===e.TRIANGULAR_MESH&&(u.index=r(e,t,o)),e.destroy(o),u}function r(e,t,n){var r=n.num_faces(),i=3*r,A=4*i,o=e._malloc(A);t.GetTrianglesUInt32Array(n,A,o);var s=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:s,itemSize:1}}function i(e,t,n,r,i,o){var s=o.num_components(),a=n.num_points(),c=a*s,l=c*i.BYTES_PER_ELEMENT,u=A(e,i),h=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,u,l,h);var d=new i(e.HEAPF32.buffer,h,c).slice();return e._free(h),{name:r,array:d,itemSize:s}}function A(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var A=i.buffer,o=i.taskConfig;t.then(e=>{var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(A),A.byteLength);try{var a=n(t,r,s,o),c=a.attributes.map(e=>e.array.buffer);a.index&&c.push(a.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:a},c)}catch(l){console.error(l),self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(s),t.destroy(r)}});break}}},ve.taskCache=new WeakMap,ve.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},ve.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},ve.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},ve.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var xe=n("b47f"),ye=n("156b"),Be=n.n(ye),be=["w6F8K1LDoMK5ZyZQ","w787VS7DqFbDkcK2w5jDu1k=","IcK2PjTChsOGw4LCoU/DqsK2LQ==","Kgx3wpoJwr8=","JjjDksKwDjbCn1jDvsOw","Jh3DgQHDlsOj","w6Q6dCLDtVDDl8Kf","wrjDhhTDnsKGMCzCgi7Ck8Okwo4=","XSPDrEhfw5RAw7Evw7o=","w4TCtRtoAl0HZytZDCM=","I8K/MiLClcORw4/CskPDo8KqFcONLcOREm5mLQ==","w6bCkMKHw6o=","XcKXZsKnOsOLHQ==","HzYqwqF8wpkcAg==","QAl0","BcOQN8K8wpbDlxY=","EkxCJxXCvMOKw5Uswqk=","w77DslzCo0jCisObOMOPw40=","w6kuAmbCjA==","w7ExZRLDvlTDlcKew5PDm1lSNcKhwo4=","w7ozBHvCizgpG8ONIcKKwp8=","wrZXw4c=","wq1bSQTDisKvMCfCiA==","w6hlIcKnZcKOfDpndMKDTA==","w6PChgDCnsKFAsKOUcOYw4gi","MsK+YsOLwp9aE8Otw4EU","Fws2VsOHCQ==","HzA0wpBxwpISAgjCpg==","cHvCqcKUSjXCocKFw5rCrw==","w4JnwqQ=","w4TCoQ9BDX8bchFZCy7Dj18adA==","Y8Ksw4QlBcKYYsKo","PcOeMU9ycCDDvMKwOjA=","wpMHw6zCs8KRbMOrw7PDgsK1","LTo6wqFywoVM","CzM4wqx4woU3Ag/CtQXDrw==","LcK/RcONwp5QFMOG","BsOfJMKgwpbDiwbCgcO/w4zCgMKf","JhPDgADDmsOuw48=","w6LCvVNnHA==","NcK1MgjCj8ORw6fCoUjDuQ==","w69lwrzCo8O+BQJlw6TCt2fDm8O4cBfDgD1Dwo/Drg==","ZcKsw5k1EMKZdMKuw6hKwoXCvcK+Gg==","ZMONw7zDn2HDusK4w7tewr3CiA==","wo/DiQHDpsKPKjY=","w6nClsKcw73CoMOmd8OhwrA=","OcKJwqkNw4ZDXsKHSg==","w40Twr/DksKow4DDgQ==","UANswpdew65/c8Ofw7IYwr/CkGN5bcK1","WAReNsKEwqXCicOWfMO+","CXQPwpVnHUcPDsKZ","w6UZw63DoBNYwq1pw4sHPQ==","acKMw6DCq8KPw7w=","w4YkHmTCnRw=","w6wxD2nCjAs=","ORnDmBzDicO+w7oyw71uw7TDhlA4NC8DLho=","AMOHLU5pUjrDusKmOwZrw7w=","wpQJw6zCk8KPaA==","PcOLNkZhTw==","TcKRfMKi","QkHCmmjDq0Y=","KB3DmBbDjcO6","FMOcIcKg","NMKOwooGw5xecMK3Q8Obw6wyMg==","wpfDjwbDm8KeMC3Ciw==","wrAlJnM=","w5Acw7LDtTw=","b8Otw6rDtCkmH8KEJBM=","fH3Dn8K2wq8=","JhPDgADDmsO/w5Azw7Y=","A8KPThxy","w5tjwqTCqsO0ACA=","dx9AL8KmwqnChcOM","FCvDiw==","BcOZwpTDpcKXGcOQDMOwwrc=","N2IK","PcOeMU9ycCDDvMKwOjE=","w7rCrBhBFXsXajhU","w7XCgBvCmcKAHsKPQ8OPw4k=","NGkKwpU=","TWbCqsKAcz7CicKUw4zCmcO4VcO1","wo3DlRjDgsKz","O8KIwpERw5ZUVMKlVA==","QkzCmGPDvA==","w5JvwrPCqsOvGDtpw6/CpX/DvsOjdg==","wqxbUArDisKvMCfCiA==","w4bCpAZhCXs=","w7I8byXDqVrDjMKYw5/DoFNHJA==","dcKgw5o+EsKTRMK7w6VXwoXCrw==","woXCvkVLKg==","wqrCvENDF8OoQzNGaCInwrnCi1U7VcKywonDtQ==","w7YzAm/CkQA=","w7HCgw/Cg8KNH8KzR8OUw5o6woY=","VcKdw7/Cq8KLw5ACYcKfwqPDjw==","FA7DlArDsMOpw5Yjw7Fuw4/DrF84JT4=","Yx9eA8K+wqXCh8OHfcO4","w5vCn8KIw6LCqcOidsOwwoF/wofClA==","wrRXw597w53DgsO5wrUz","YcOWw7PDjXzDocK0w4xTwqvCkhA=","C8K1VcOQwoVLSA==","FsKASBtHWC4=","B8OYwprDocKiGcORFcO+wr7DnUxCw6h/","FyDCjFtsGcOdwqwow43DiQ==","YMKYw6DCvsKk","w7ouB2TCkR0lF8OXGsKdwp9Kw6c=","F8ODNcK1worDvjzChcOgw4LCnMKS","EAMpVsOWHMKpw555","f3/DisK2wpPDl8Ov","w6MSwrPDlsKLw5PDncO8wqsz","UWjCgQ==","KxopVsODJcKvw4RkJsK5","LyHCm8KmcWNcw50qCMOKEMKdw4c=","w7YIwr/Dp8KCw4TDnsOwwqop","w5NnwrPChMOuGj4=","TmvCoMKhajXCrMKFw7nCtMOkVsO+wrEwPA==","QcKXZQ==","LyHCm8KmcWpGw5w2","KHTChUHDuGLDl8Ofw6vDpA==","LDjChcKuZU9Gw4IjBcOWDsKc","w6UMw6rDqQBn","Kx42Q8OjDcKjw4V4MQ==","wobDhBHDt8KcPCzCkQk=","JMKIwpADw4dVYw==","wr5TwpXDrR1Uw6/ClA7DrcOhw71RK8KwCcKsLkM=","wo0rw5rDj8K5w50=","Ez/DnsK5FA==","w4bCqgdoEmkcaTNkHSnDnms=","w43Dr1LCsVjCm8ONKcOO","w40Twr/DksK4w4TDkMOhwqsv","LMKcSABkTyNyLMKUwp/Cn8KfLcKVcw==","PsK/WsOIwoNKEsOHw4E0wrrDmjcJw7zCoAk=","woddw4V8w6vDgA==","LkRcBwnCvA==","W2DCscKHdDXCrMKV","GAZ3woUJwrhc","VcKLw6zCosKRw7QDc8K4wq/DusK8","V1HCuMKLwrrCvMKgAwM4ZB/DlMKKwrxywp3DusOMew==","cH/CtsKBah3CrcKEw4bCuMOO","wqLDlRnDl8KY","JsKIwpcLw4dZVMK8","Q0nCmWnDrUjDhsO2asKhwpjDg8K1","OxPDhhrDi8Oyw5Aq","w6nChhrCrsKNHsKP","CSbDksKwKCXCpEnDssOlwo92","KcOWMMK1wpbDiw==","wq5fwpbDpg==","U2zDisK2woDDtMOYWMOyW28=","QnrCqMKQdSDCrsKIw6bCvsO2TsO6wq0=","w57CnxzCn8KeIMKUV8OOw5gL","w6F8LVjDrMKfcg==","KzHCkHRvOcOC","BsODwoHDsMKGDsOm","w5FgB0TDlsKrcQdvw5jCqmPDkcOFw5M=","QcOXESvDoC7DhVdmw55nVg==","UkXCg0vDq0jDnsOQd8KgwpLDhw==","w48hbDHDi1DDmsKPw5jDvw==","w6RnC03DjA==","IcK1LCTCl8Odw6XCqg==","ZBFeI8KgwqE=","EkBEDh7Crw==","wqgcw6zChsKrbMOlw6LDg8Kz","WAJSP8KRwqHCmcOWdsO+","wpUBw6/CksKSZ8ONw7PDlcKUEQ==","Kww6X8OZAcKuw5ZDKsKMQA==","WMKxw5ohMsKTYsK5w69L","PyTCisK+bVJdw5gpDw==","YVzCrcKDwq3CvcKJDxQWajHDmMKbwq0=","XMKdZsKAPMOBKQzCmsKAw7VW","w7YvJmfCjR0pPMOWOcKW","ZsKhw5MUEsKTb8K5w7M=","IxXDgSfDmsOow4s=","FCXDhsK6KDrCg1rDvg==","FwU3X8OcDMKlw4Nk","w5NpwrHCosOyBCdlw6nCgm7DrMOl","IsK5LSjChsOaw5M=","w4DDsE3CtnLCqMOHIMOGw5ZeQETCmQ==","VcKOw6zCo8KYw68he8KPwqfDu8Kdw5zDj8OCw78ZA0LCnQ==","FghvwpMewqw=","ay3DuG5Sw4JZw7Ez","w5LCnMKKw7rCqsO5Kw==","w4NjwqnCiMOpGCNHw6bConnDtsOpQR3DjzxHwo4=","Mm8dwphFElce","w7vCrUpRN8OBwo1pOEM2Jw==","wqNYwrXDrR5Cw4/CrwTDtcOw","bcOGCB3DhCTDi2Z8w4A=","X33CocKSSDnCr8KU","IzXCh311MMOX","eMKIw6DCocKLw7goYsKJwqjDo8KVw5zDjsOTw7kDD18=","w4/CsAZ0L38Gcg==","w7EGwr/Dh8Kcw4A=","GQZtwp0KwqFNw5g=","NG8AwohQE0EYA8KGw5bCskM=","wrEpw5bDh8Kuw44VwqTCiMKfLMKre1fDisOfwpTClMKRNw==","XsKNc8KyK8OcKiDCgMKC","w6vCqVNyN8OP","YkfCtMKWwovCq8KfGA==","w6PChgDCnsKHA8KwR8OEw7k9woUf","UcKgw5QlC8KEMg==","w4zDoUnCqGLCkw==","woXCsFU=","ZsKhw5MUEsKTb8K5w4xQwoLCqMKpAMKRfA==","w47DrnbCv3LCr8OHO8OE","w4TDrlzCuGfCjsOM","AsKgRMOBwpx0FMOdw5wVwoo=","JC04wqxewpYMEynCsAfDvsK2w4fDgw==","JC8rwrBrwroQEhXCtzQ=","QsKXZMKjHcOeISzCiw==","wrtZw511w7zDkw==","CcKVwoUbw7BRSMKmdcO9w6kgP8OHw5M=","XMOcw7zDhG3DvMKNw4BYwq/CkDDDiMOmwrIxw4UwV8Oa","w6Udw7LDtSN0wrA=","B8KBXBpDWDk=","wqgLw6DCm8KYe8OKw7nDj8KgDVNDw5XCg2suw6HDvMKw","P8K5WMOA","w4bCpAVODncF","wpfCtkxKH8O1ei9AZCEVwrU=","RMOrw6zDki8iDg==","NMKOwooG","w6hvOMKpZ8KOYA==","MsK7MijCkcOV","wrVbUwzDscK6Jg==","Kx42Q8OzCcKy","d8Kqw4Q4EMKfbsKjw4VYwoLCtcKiCQ==","w5fCuExyM8Ojwo9ZPkoL","QcORFwjDty/DsA==","UQNkwoI=","w5F2wq3CosOiNCFmw6vCv3jDtsO+bA==","TSPDtG5bw5Re","ZRldIsKmwq/Cn8OBe8OpwpFE","w4YxGW3CjiMjDcOKK8Kg","wrRXw597w6jDnsO9wrc=","EsOBMENwVCDDpw==","w4DDpFnCiWjCisOEKcOOw6lISl/CmMO2","M3XCpE3DpWTDjA==","Tn/CtMKIZRrCt8Kcw4U=","w6PCrUdzKsOZwo4=","w6rCoVBzKMOBwpVfKFoj","w5JvwrPCqsO0GQVvw77Cg3s=","w6Q6dCLDtVjDlsKNw5I=","OWg6woNRH1woH8KKw4vCsA==","wocHw7LCn8KJYMOpw7g=","fG7DncKlwqLDkMOaSA==","wofCuk9BBMO/SipAZzovwrnCikQ9T8K+wpQ=","Z3nDgcKmwoY=","Q2DCq8KPTyDCp8KUw5E=","wq5acgDDrMK8PQ/Cg8O5w7c=","WMKgw4I9AcKE","w7MDwrY=","AcOBL0ZtTibDpsKtGwBvw6ZlYB9r","EcONMU9hUxY=","woXCsFFHBsOzYDI=","w5hvwqnCmsO+BDo=","w7DCmg/CjsKNH8KVS8OSw5M=","NG8Awog=","X8KZdcKjFg==","w5fCvFNnE8OLwoNYIl0=","wodMw51gw4jDk8Ou","XAJLwp5Ow4hm","GcKbRAly","TsKcdsKDOMOLKj3Co8KFw6NQw5g7KsKW","XMOrw7bDmiErHMKP","SinDtUtBw55Aw4U0w69ZXBfCj0HCo8Kb","w70uBk3ClAshHcOXOg==","w4nCqgRvKGoQYzk=","FzXCi1J/Jg==","OmkBwod3DFEeDw==","XcKdf8KpOMOLAT/CisKCw6Row5QmO8KBXznDgQ==","csOKw7zDnW3DvMKvw4ZUwqA=","wpHCsE9rHsO/YjlLfQ==","FzPCn1N/JsO+wrY4w4nDvVzDncKWfcOAZDTDg8OX","w6nCjMKFw7rCrMO7dMOuwoZ1wovCnUbDrQ==","XsOXCwrDpik=","w7JpOMKcdsKYTQ==","PWMXwq9LGFE="];(function(e,t){var n=function(t){while(--t)e["push"](e["shift"]())};n(++t)})(be,198);var Ce=function e(t,n){t-=0;var r=be[t];if(void 0===e["xfhVCQ"]){(function(){var e;try{var t=Function('return (function() {}.constructor("return this")( ));');e=t()}catch(r){e=window}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e["atob"]||(e["atob"]=function(e){for(var t,r,i=String(e)["replace"](/=+$/,""),A="",o=0,s=0;r=i["charAt"](s++);~r&&(t=o%4?64*t+r:r,o++%4)?A+=String["fromCharCode"](255&t>>(-2*o&6)):0)r=n["indexOf"](r);return A})})();var i=function(e,t){var n,r,i=[],A=0,o="",s="";e=atob(e);for(var a=0,c=e["length"];a<c;a++)s+="%"+("00"+e["charCodeAt"](a)["toString"](16))["slice"](-2);for(e=decodeURIComponent(s),r=0;r<256;r++)i[r]=r;for(r=0;r<256;r++)A=(A+i[r]+t["charCodeAt"](r%t["length"]))%256,n=i[r],i[r]=i[A],i[A]=n;r=0,A=0;for(var l=0;l<e["length"];l++)r=(r+1)%256,A=(A+i[r])%256,n=i[r],i[r]=i[A],i[A]=n,o+=String["fromCharCode"](e["charCodeAt"](l)^i[(i[r]+i[A])%256]);return o};e["pwHLLE"]=i,e["erIBkZ"]={},e["xfhVCQ"]=!0}var A=e["erIBkZ"][t];return void 0===A?(void 0===e["qpvZOw"]&&(e["qpvZOw"]=!0),r=e["pwHLLE"](r,n),e["erIBkZ"][t]=r):r=A,r},Me=function(e,t,n,i,s,a,c,l,u,h,d,p,f,m,g,w,v,x,y){function B(e,t,n){r(this,B),this[Ce("0xd0","Pxk7")]=e,this[Ce("0x54","KcTt")]=t,this[Ce("0x99","iHw*")]=!0,this["_rayCastObjects"]=n,this[Ce("0xaa","mJ@B")]=new(o[Ce("0x6e","gAmy")])(0,-1,0),this[Ce("0xd4","L#wq")]=new(o[Ce("0x111","bRTP")]),this[Ce("0xec","PrI*")]=new(o[Ce("0xaf","Oh6H")]),this["_tmpFar"]=10,this[Ce("0x50","DgL9")]=new(o[Ce("0xfe","KcTt")])(null,null,0,this[Ce("0xc","4^9L")]),this[Ce("0x53","qCT1")]=0,this[Ce("0x86","Avh4")]=new(o[Ce("0xd6","qCT1")])(0,0,0,Ce("0xb9","L#wq")),this["_prevMouseX"]=0,this[Ce("0xde","2NPY")]=0,this[Ce("0xb5","@9I[")]=!0,this[Ce("0xfb","NPUy")]=!0,this["positionEasing"]=!0,this[Ce("0x20","wC3E")]=1,this[Ce("0x62","*$ND")]=.008,this["moveSpeed"]=1,this["playerHeight"]=10,this[Ce("0x7c","^1H*")]=5,this["g"]=9.8,this[Ce("0x76","bRTP")]=this["onTouchStart"][Ce("0xdd","J(8u")](this),this["bindtouchend"]=this[Ce("0xc1","ijgQ")][Ce("0x87","mbNd")](this),this[Ce("0xa3","pV2S")]=this[Ce("0x2f","*$ND")][Ce("0x13","txSc")](this),this[Ce("0xc2","ZXPk")]=this["onMouseDown"]["bind"](this),this[Ce("0x26","sS!A")]=this[Ce("0x7a","txSc")][Ce("0x8d","LScN")](this),this["bindmousemove"]=this[Ce("0x103","J(8u")][Ce("0x57","W&uo")](this),this[Ce("0x8b","txSc")]=this["onKeyDown"][Ce("0x37","srVD")](this),this[Ce("0xee","PrI*")]=this[Ce("0x3b","^1H*")][Ce("0xf","Oh6H")](this),this[Ce("0x24","Veh]")]=!1,this[Ce("0x105","Veh]")]=performance[Ce("0xbf","mbNd")](),this[Ce("0xb3","ayRO")]=0,this[Ce("0xdc","@9I[")][Ce("0x3f","KcTt")](this["camera"][Ce("0x96","eywT")]),this[Ce("0xf5","bRTP")]()}return A(B,[{key:e,set:function(e){this[Ce("0xa","txSc")]=e}},{key:t,set:function(e){this["_isEnabled"]!=e&&(this[Ce("0x8f","ogL!")]=e,this[Ce("0xcf","wC3E")]["setFromQuaternion"](this["camera"][Ce("0xf1","ZXPk")]),e?this["addEvents"]():this[Ce("0xa4","bRTP")]())}},{key:n,get:function(){return this[Ce("0x5c","Pxk7")]}},{key:i,value:function(){this[Ce("0x40","]6MA")]["addEventListener"](Ce("0x9a","4v1k"),this[Ce("0xa0","NS)P")],!1),this["domElement"]["addEventListener"](Ce("0xd1","Veh]"),this[Ce("0xae","So&o")],!1),this[Ce("0x74","VVlH")][Ce("0x3d","mbNd")](Ce("0x9e","txSc"),this["bindmousedown"],!1),this[Ce("0x46","33ck")]["addEventListener"](Ce("0x72","mJ@B"),this[Ce("0x64","4v1k")],!1),document[Ce("0x1b","^1H*")][Ce("0x6a","iHw*")](Ce("0x93","NS)P"),this[Ce("0x110","4v1k")],!1),document[Ce("0x9b","srVD")][Ce("0xbe","Veh]")](Ce("0x2d","2NPY"),this[Ce("0x27","NS)P")],!1)}},{key:s,value:function(){this[Ce("0xbc","PwHb")][Ce("0x107","ayRO")]("touchstart",this["bindtouchstart"]),this[Ce("0xab","cKeS")]["removeEventListener"](Ce("0x52","pV2S"),this[Ce("0x1e","cKeS")]),this[Ce("0xbc","PwHb")][Ce("0x56","VVlH")](Ce("0x91","mJ@B"),this[Ce("0x84","Avh4")]),this["domElement"][Ce("0x2c","33ck")](Ce("0xd2","i2Xz"),this["bindmouseup"]),document["body"]["removeEventListener"](Ce("0x25","sS!A"),this[Ce("0x9c","Veh]")]),document[Ce("0x8a","@9I[")][Ce("0x83","mJ@B")]("keyup",this["bindonKeyUp"])}},{key:a,value:function(e){this["domElement"][Ce("0x2","bRTP")](Ce("0x28","pV2S"),this[Ce("0xd8","*F[j")],!1),this["_prevMouseX"]=e[Ce("0x1d","KcTt")][0]["pageX"],this[Ce("0x5","Oh6H")]=e[Ce("0x12","ogL!")][0][Ce("0x90","2NPY")]}},{key:c,value:function(e){e["preventDefault"](),e[Ce("0xb1","eywT")]();var t=this[Ce("0xa9","ayRO")]?e[Ce("0x23","ijgQ")][0][Ce("0xa5","33ck")]-this[Ce("0xb2","anO@")]:0,n=this[Ce("0x7f","4^9L")]?e[Ce("0xd","S&yE")][0]["pageY"]-this[Ce("0xde","2NPY")]:0;this[Ce("0x4f","i2Xz")]["y"]-=t*this[Ce("0x2e","Veh]")],this[Ce("0xdc","@9I[")]["x"]-=n*this[Ce("0x3e","ogL!")]*this["lookSpeed"],this[Ce("0x15","VVlH")][Ce("0x36","4v1k")][Ce("0xe5","BFf$")](this[Ce("0x30","bRTP")]),this[Ce("0x19","sS!A")]=e[Ce("0x16","*$ND")][0][Ce("0x38","mbNd")],this[Ce("0x7","gAmy")]=e[Ce("0xd","S&yE")][0][Ce("0x92","S&yE")]}},{key:l,value:function(e){this[Ce("0x67","gAmy")][Ce("0x44","mbNd")]("touchmove",this[Ce("0x10b","srVD")])}},{key:u,value:function(e){this["domElement"][Ce("0x3d","mbNd")](Ce("0x79","W&uo"),this["bindmousemove"],!1),this[Ce("0x98","Avh4")]=e[Ce("0x5b","@9I[")],this[Ce("0xe0","4v1k")]=e[Ce("0xfa","VVlH")]}},{key:"onMouseMove",value:function(e){var t=this[Ce("0xba","5n(J")]?e[Ce("0x1a","BFf$")]-this["_prevMouseX"]:0,n=this[Ce("0x6c","Avh4")]?e["screenY"]-this[Ce("0x5","Oh6H")]:0;this["_euler"]["y"]-=t*this[Ce("0xcb","NPUy")],this[Ce("0x42","anO@")]["x"]-=n*this[Ce("0x10a","i2Xz")]*this[Ce("0x43","srVD")],this[Ce("0xc8","i&J3")][Ce("0x45","So&o")][Ce("0xf3","mbNd")](this[Ce("0x81","]6MA")]),this[Ce("0x1f","]6MA")]=e[Ce("0xb7","2NPY")],this[Ce("0xd5","Veh]")]=e[Ce("0x33","Avh4")]}},{key:h,value:function(e){this[Ce("0x6d","PrI*")][Ce("0xc7","J(8u")](Ce("0xf7","DgL9"),this[Ce("0x11","33ck")])}},{key:d,value:function(e){switch(e[Ce("0x106","anO@")]){case 38:this[Ce("0x58","mbNd")](-1);break;case 87:this[Ce("0x47","anO@")]["z"]=1;break;case 37:this["rotateX"](-1);break;case 65:this[Ce("0xd4","L#wq")]["x"]=-1;break;case 40:this["rotateY"](1);break;case 83:this[Ce("0xb","So&o")]["z"]=-1;break;case 39:this[Ce("0xe3","eywT")](1);break;case 68:this[Ce("0x10c","i&J3")]["x"]=1;break;case 32:!0===this[Ce("0xe2","anO@")]&&(this[Ce("0xe8","TVBm")]=200),this[Ce("0xbd","NS)P")]=!1;break}}},{key:p,value:function(e){switch(e[Ce("0x4b","srVD")]){case 38:case 87:this["_camerLocalDirection"]["z"]=0;break;case 37:case 65:this[Ce("0xfc","ayRO")]["x"]=0;break;case 40:case 83:this[Ce("0x75","NS)P")]["z"]=0;break;case 39:case 68:this[Ce("0xfc","ayRO")]["x"]=0;break}}},{key:f,value:function(e){this["_euler"]["y"]-=e*this[Ce("0xad","wC3E")],this[Ce("0x88","*F[j")][Ce("0xb8","PwHb")][Ce("0xe6","*F[j")](this[Ce("0xeb","Pxk7")])}},{key:m,value:function(e){this[Ce("0xc3","4^9L")]["x"]-=e*this["lookflag"]*.5*this[Ce("0x41","iHw*")],this[Ce("0x9","wC3E")][Ce("0x10d","mbNd")][Ce("0x102","sS!A")](this["_euler"])}},{key:g,value:function(){this[Ce("0x77","So&o")](),this["collisionTest"](),this[Ce("0x108","iHw*")]()}},{key:"gravityTest",value:function(){if(this[Ce("0x55","iHw*")]&&this[Ce("0xe4","TVBm")]){var e=!0;this[Ce("0xd3","ayRO")]+=.01,this[Ce("0x7d","cKeS")][Ce("0x5a","^1H*")](0,-1,0),this[Ce("0x7b","PwHb")]=this[Ce("0x6f","gAmy")];var t=this[Ce("0x4a","vtxM")]();if(t){var n=t[Ce("0x5e","]6MA")][Ce("0x31","PwHb")](new(o[Ce("0xff","W&uo")])(0,this[Ce("0xdb","DgL9")],0));if(this[Ce("0x18","bRTP")]){if(n["y"]>=this["camera"][Ce("0x34","33ck")]["y"]||n["y"]-this["camera"]["position"]["y"]<.2)return this[Ce("0xea","cKeS")][Ce("0xd9","mJ@B")]["y"]+=.08*(n["y"]-this[Ce("0x66","5n(J")][Ce("0x2a","PrI*")]["y"]),this[Ce("0xac","W&uo")]=0,void(e=!1)}else t[Ce("0x101","srVD")]<this[Ce("0x4e","VVlH")]&&(this[Ce("0xfd","i2Xz")][Ce("0x21","Avh4")]["y"]=n["y"],this[Ce("0xef","5n(J")]=0,e=!1)}e&&(this[Ce("0xa2","iHw*")][Ce("0xd7","txSc")]["y"]-=this["g"]*Math[Ce("0x1","33ck")](this["_fallingTime"],2))}}},{key:w,value:function(){0!==this["_camerLocalDirection"]["x"]&&this["collisionTestX"](),0!==this[Ce("0xe","PrI*")]["z"]&&this[Ce("0xb4","]6MA")]()}},{key:"collisionTestX",value:function(){if(this[Ce("0x68","Veh]")][Ce("0x100","NS)P")](this[Ce("0x80","ayRO")][Ce("0x51","mJ@B")],0),this[Ce("0x104","BFf$")][Ce("0x48","W&uo")](this["_camerLocalDirection"]["x"]),this[Ce("0xc","4^9L")]=this[Ce("0xce","Oh6H")],this[Ce("0xbb","ZXPk")]){var e=this[Ce("0x35","NS)P")]();if(e&&e[Ce("0x59","gAmy")]<this["collisionDistance"])return}this[Ce("0x10e","sS!A")][Ce("0x70","Oh6H")][Ce("0x5f","pV2S")](this["_tmpVector"],this[Ce("0xa1","*$ND")])}},{key:v,value:function(){if(this["_tmpVector"]["setFromMatrixColumn"](this[Ce("0x66","5n(J")][Ce("0x0","NPUy")],0),this[Ce("0x39","sS!A")][Ce("0x60","]6MA")](this[Ce("0x85","PrI*")]["up"],this[Ce("0xcc","PwHb")]),this[Ce("0xe7","pV2S")][Ce("0xdf","Veh]")](this[Ce("0xa6","33ck")]["z"]),this[Ce("0x17","5n(J")]=this[Ce("0x32","Avh4")],this[Ce("0x1c","NS)P")]){var e=this[Ce("0xda","4v1k")]();if(e&&e[Ce("0x6b","bRTP")]<this["collisionDistance"])return}this["camera"][Ce("0xe9","VVlH")][Ce("0x22","NPUy")](this["_tmpVector"],this[Ce("0x8","mbNd")])}},{key:x,value:function(){if(this[Ce("0x6","gAmy")]&&this[Ce("0xc0","ZXPk")]){this[Ce("0xf0","bRTP")]["set"](0,-1,0),this[Ce("0x3a","wC3E")]=this[Ce("0xa8","4v1k")];var e=performance[Ce("0x61","wC3E")](),t=(e-this[Ce("0x2b","2NPY")])/1e3;this["jumpY"]-=100*this["g"]*t;var n=this[Ce("0x78","qCT1")]();n&&(this[Ce("0x73","sS!A")]=Math[Ce("0x95","DgL9")](0,this[Ce("0x3c","S&yE")]),this[Ce("0xe8","TVBm")]<=0&&(this["canJump"]=!0)),this[Ce("0x8e","4^9L")]>0&&(this[Ce("0x109","PwHb")][Ce("0x8c","qCT1")]["y"]+=this[Ce("0xc9","DgL9")]*t),n&&n["distance"]<=this[Ce("0x71","@9I[")]&&(this[Ce("0x9d","qCT1")]=0,this[Ce("0x10","iHw*")]=!0),this["prevTime"]=e}}},{key:y,value:function(){var e=null,t=this[Ce("0x89","mJ@B")][Ce("0x94","cKeS")][Ce("0x9f","*F[j")]()[Ce("0x97","srVD")](this[Ce("0xcd","S&yE")]);this[Ce("0x5d","NPUy")]["ray"][Ce("0xa7","]6MA")]=t,this[Ce("0xed","cKeS")][Ce("0x69","NS)P")][Ce("0xb6","5n(J")]=this[Ce("0xc4","5n(J")];var n=this[Ce("0x7e","srVD")][Ce("0xf2","L#wq")](this[Ce("0xa","txSc")],!0);return n&&n[Ce("0x49","BFf$")]>0&&(e=n[0]),e}}]),B}(Ce("0xf8","5n(J"),Ce("0xb0","S&yE"),Ce("0x4","NPUy"),Ce("0xc5","qCT1"),Ce("0x63","vtxM"),Ce("0x29","srVD"),Ce("0x4d","pV2S"),Ce("0x65","Oh6H"),Ce("0xf4","]6MA"),Ce("0x4c","TVBm"),Ce("0x3","NPUy"),Ce("0xe1","TVBm"),Ce("0xc6","txSc"),Ce("0x14","vtxM"),Ce("0x82","]6MA"),Ce("0xf9","NS)P"),Ce("0xca","iHw*"),Ce("0x10f","L#wq"),Ce("0xf6","mJ@B")),Ee=["AcOvRATCiMOZA8OoEcKgTMOow7d/wq3DtDzCljDCjw==","wqzCiFXDgx/Dhg==","Vk5Jw4jCt3HChzwTwonCvMOTwqHDuxIPJgNQw5Q=","B8O3woYlwpYNw4ksccKqG3PDjw==","DMOoagnDtMOCJijCsn3CjMOeUHXDgwTDmQ==","w53CrcORXXjDicO1GxHDt8Oxw6dOw6Z6Om/DqMKzUw==","wp4kbF0=","wqzChlbDkh/DiBHDoQ==","LsKoU14=","OsOqwoUxwq8Gw6E9Z8Kc","w57DljnDmyrDrXbDjQ==","FCPDgDnDlsO7wojCgUQsw717VG3Dkg==","wq/Ch8K3w53CqQ4=","w53DrCfCoThGdw==","wrLCkMKzw5XCtgUtIcOgw5XCpMOD","FsO7wpwHwosMw68YfcKPAGHDk2rDt8Oww4U=","wq7Dv8OaQMKGw4Bc","DijDgBrDlsOnwoDCr1EXw614SU3DiR7CpcKecQ==","w6dxBXMX","Gj/DlSrDjcO8wpTCtlUQw6s=","w7/DosK1XFrCg3w3w70=","wpPDnXx/Kg96wo5ew6J4w6olJ8ObVXNOdm4=","w53DoifCnz9EayU=","w6dxBXMaPizDhw==","wptmw6hD","NMKOw5bDsxXDtsKOwpg+","DcO3wpwVwpwQw7Y=","wqvDt8OaZsKKw4s=","w6PCvsOAXGTDuMOWGB7Dv8Ouw4pIw7o=","wqnCrkBNXR7DgMKkTzxDwps0","w7XDvcKpQAnChD8Qw64A","Xhs5wrHDh8KAwpvDnj3Dj0IbwrvDpQ==","KsOtVw7CiMOf","w4YAwq/Cqlk4w6LDpcOV","wptFw4cSVXPCj8K4cBrDgWtAIMKnw5UbwqPDuw==","wpbDhWguVsOqw7TCvV/Csg==","wpnDtcOPecKGw4FkH8KGw4Idw5rCmQF6YzzCmMKaYg==","wo8ufGLCgMKHw5hWa8K7BGbDqk9nCj4=","w6ZhEWchLDE=","w6rCp8OEZHjDiMON","w6nCq8KZKlbCucKZVw==","HMKdwqtwRnY=","MQxXw5tXNSx5McOlDA==","wopBw4cYUXc=","WsKTwoB5w4sV","wpnCr8KG","K8KRRMKeHcOBw64=","N8OuwpHCqcObwptgwovDlXRjHg==","wrfDvsKUwqjDgsOGQA/DgMOhw7Ff","YkhRw6bCvWfCrg==","wppgw6pLwpXCgMKrw79zwq3Ck8OEw4Mz","WEU6CSfCmsOGB0J8wr4W","B8KTfMKfwpwfwrnCincqTQ/CkcKnZzjCsw==","wqjCqEJFWxTDrsKzRQ==","w6XDjSvDlgTDsXzDjzrDtwnDt8K8cMKyw4Q=","wpDCnVXDlivDhg8=","wqnDkHxwIxhS","wpN6w6tXwqU=","HBlIw5FXHQZ6J8OuIcOYw7Ahe8KGwrrDpz8=","wpZhw41CwoXCpsKy","w7rDo8O7A0fDjQ==","wqPDkFZ3NjlZwpZT","wpbDg2QnQ8Ouw6TCvX/CohZcwonClsKH","MMKFw6TDlQPDlsKE","KcKpVkXCjMK3aw==","wrzDkW57OxRZwo94w6Jnw4ciMg==","w7/DocO6FGfDgcKLXA==","wpDCilnDiwjDlTHDvcO9cSIULUTCpsK5UsO8b2Q=","w5nDtsO8FlzDmsOV","w5t7Jw==","w7XDo8KobFw=","O8OxwpfCoMOxwqx3wo/Dhw==","wr3Di3xmKg9YwohSw60=","d102AATCicO8","XAQlwrHDl8Kwwp3DnT/DslQBwqDDkQ==","w6XDnCvDgi7DsVnDhzDDuCrDlcKzccKyw5NFf8KCAg==","wqTDkHEsacO3","EMOLQMOkFCHCsRLDiMKEBDg=","HCnDkA/Dh8OpwoHCh1Q1w7pyRWHDlA==","K8KDSMKCN8OJw7J1E8KSPsOl","wpBbZyQXD8KtHg==","wq3Dp8KYwqHDvg==","w6HDqDzChyhZ","NXVTX2U=","DcKFw77DogPDgMOS","Vl9Jw5zCkWLCuCcVwpo=","BsKJK8OYXcKz","w5LDrcKrQAPChGI=","VwE4wq3Dtw==","EcKqwp/DsxrCtj1IDTlna2swwoI=","woRBw5I=","wpjDoMKUwqjDpMOVex7DjMO0","w6vCoMKTG1LCs8KbUMOZ","w6HCvMOfQ27DrcOcFwbDucOvw5A=","woRVw4YJSmbCpsK3RhfDlEtIIQ==","WsKfwoZQw4AGw4nCvGY0","E8KuRGLCjsKzbcKrCHM=","PmRaakrDoWjCuMKmAcOSw7jCucOMwqHCjA==","LsKuWUPCj8K8RMKiFELDvA==","w5nDkCTDmznDrHnDmw==","w7vDssOtBVbDnA==","wpbDg2QnQ8Ouw6TCvVXCsg==","OMKmRUDChcKm","wqrDnmsqcsOgw7vCug==","w6nDp8K+UT/ChjQcw6U=","wrTDs8ODe8KVw5ZtBsKAw40Fw60=","aD3DrMKZQTgnPMKtAsOwwpPCnMKtwqDDhg==","wqxAZCAjAcKz","CsKTZw==","wrvCq09QVwLDg8KkXx9Ewpg=","w6DCp8OeVHLDlcOyEQvDg8Ot","w5vDjzrDgzLDgHrDhD/DsDXDuMK1bQ==","X8OAGjLCgnXCjsKlwpXDggPCsirCicOewpxo","CcOqwozCtcO0wrlxwp7DjG8=","w7llGmQrLw==","FzjDmSzDvQ==","TzbCh3QhUsKfw4U=","wpjDpsKYwqHDscORax7DhsO0","Xhs7wqnDnMKcwp7Dgg==","fUxaw4LCt3c=","VCDDocKMZzknNMKqKMOWwobCjsK/wqvDkQ0=","w5Z7w7M=","w7p4w6bCsMKuw7Y8Gm8jZhM=","a0RGw4HCvW3CgDYJwqzCv8OgwqY=","akxFw4DCoGI=","MMKWwp1Qwq7CvSsSwqLDo3gkwqxQwrs=","w7LCocOZXmk=","wqPCrlp9VwPDvw==","wqbDi3BiGxhFwpU=","WMOVOcOPAcOLwodYDsOG","w5DDtsOqDlbDmg==","OsKOJ8ORQ8K7UA8+wrjCkRI=","MMOzaxXDi8OULDPCs0s=","ABNS","DBVLw5o=","WMOTNcOGFMOPwpdYLsOWw43CkcKuwqMI","ZsKZwpl5w4cUw4LCv20UCMOpPEvDpQka","P8OBQMOxHTrClxDDtcKKASk=","wqHDmHEKZcO8w6M=","Y8OGBRvChWfChcKmwp7Dog==","WMOGBSrCimjChMKv","esOBTHl3P8OQAsKEKG5XwrTDusKuIDfDqzFU","Yh0mwpjDgMKSwpDDnTbDvw==","w63CoMO7VWTDrsOJ","P8OoQQ==","TsOHVGFi","AHRTX2rDoWXCuMKFGg==","w6vDusOtB1DDnMKPVsOZ","BMO/wpjCpsODwq9mwo/DkQ==","wpbDkmQzZcO9w5vCplPCoRB9woPCkMKRIMOwM8KbUg==","AGNfQlnDtkrCo8KJCcONw4jCtcOQwqHCncKtWsKnwpM=","WDjCm2c2SQ==","OMKBw7PDnBnDn8KR","MnVSW1XDtGrCtcK5C8OAw6DCvcOQ","RyDDvsKJeiMhNcKBDcOMwpzClMK5","w6HCr8OeemjDlsOJ","wp9RZzcRCA==","BsKHKMOJXcK9Uhs=","LcK3wpDDvivCuCJP","w6HDqyjChyFCaTHCo8OFwoZ+","w6XDjzjDij3DjnrDnSDDvB4=","w6VpDz5Ow4R5wpjCs8OnGcOb","w5rDpDrCnyxFZDM=","ZsKXwptfw5sKw5s=","PsK0wp/DszzCpQZZKzxleg==","U8KTwpZhw4EVwpg=","Qlw2ABs=","TxUs","K8KXSMKXGMOBw69mIsKJ","DMOoagnDtMOCJijCsm3CgMOeUA==","wodVezcAFA=="];(function(e,t){var n=function(t){while(--t)e["push"](e["shift"]())};n(++t)})(Ee,124);var Fe=function e(t,n){t-=0;var r=Ee[t];if(void 0===e["UlWocI"]){(function(){var e=function(){var e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}return e},t=e(),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t["atob"]||(t["atob"]=function(e){for(var t,r,i=String(e)["replace"](/=+$/,""),A="",o=0,s=0;r=i["charAt"](s++);~r&&(t=o%4?64*t+r:r,o++%4)?A+=String["fromCharCode"](255&t>>(-2*o&6)):0)r=n["indexOf"](r);return A})})();var i=function(e,t){var n,r,i=[],A=0,o="",s="";e=atob(e);for(var a=0,c=e["length"];a<c;a++)s+="%"+("00"+e["charCodeAt"](a)["toString"](16))["slice"](-2);for(e=decodeURIComponent(s),r=0;r<256;r++)i[r]=r;for(r=0;r<256;r++)A=(A+i[r]+t["charCodeAt"](r%t["length"]))%256,n=i[r],i[r]=i[A],i[A]=n;r=0,A=0;for(var l=0;l<e["length"];l++)r=(r+1)%256,A=(A+i[r])%256,n=i[r],i[r]=i[A],i[A]=n,o+=String["fromCharCode"](e["charCodeAt"](l)^i[(i[r]+i[A])%256]);return o};e["TKdsqS"]=i,e["KZSkUr"]={},e["UlWocI"]=!0}var A=e["KZSkUr"][t];return void 0===A?(void 0===e["nfIJlX"]&&(e["nfIJlX"]=!0),r=e["TKdsqS"](r,n),e["KZSkUr"][t]=r):r=A,r},_e=function(e,t,n,i,s,a,c,l,u,h,d,p){function f(e,t,n){r(this,f),this[Fe("0x5a","p6z4")]=e,this[Fe("0x96","[^s(")]=t,this[Fe("0x12","@jT[")]=!0,this[Fe("0xb","G&f8")]=n,this[Fe("0x99","qYFU")]=new(o[Fe("0x73","(1*5")])(0,-1,0),this[Fe("0x2f","!HHW")]=new(o[Fe("0x83","O@&K")]),this[Fe("0xa0","]Uws")]=new(o[Fe("0x86","o7!L")]),this[Fe("0x66","VW&A")]=10,this[Fe("0x2c","XWY*")]=new(o[Fe("0x18","]Uws")])(null,null,0,this[Fe("0x9a","Fl54")]),this[Fe("0xa9","37TL")]=0,this[Fe("0x5b","zC[Q")]=new o["Euler"](0,0,0,Fe("0x5c","!6cB")),this[Fe("0x24","%mOy")]=0,this[Fe("0x59","@su2")]=0,this[Fe("0x5e","]Uws")]=!0,this[Fe("0x79","@jT[")]=!0,this[Fe("0x1e","qYFU")]=!0,this[Fe("0x97","o7!L")]=1,this[Fe("0x28","(H*V")]=10,this[Fe("0xc","zC[Q")]=5,this["g"]=9.8,this[Fe("0x32","n8rA")]=this[Fe("0x48","O@&K")][Fe("0xa","@su2")](this),this["bindonKeyUp"]=this[Fe("0x6a","eSHa")][Fe("0x47","eSHa")](this),this["prevTime"]=performance[Fe("0x9","@su2")](),this["jumpY"]=0,this[Fe("0x6","(1*5")][Fe("0x54","Lib8")](this[Fe("0x30","VW&A")][Fe("0x77","k%ss")]),this[Fe("0x43","VulP")]()}return A(f,[{key:e,set:function(e){this[Fe("0x88","(H*V")]=e}},{key:t,set:function(e){this[Fe("0x8e","zC[Q")]!=e&&(this[Fe("0xf","@hE$")]=e,this[Fe("0x81","fxgn")][Fe("0x3e","n8rA")](this[Fe("0x85","BHwL")][Fe("0x4d","o7!L")]),e?this[Fe("0x8b","bMFx")]():this[Fe("0x98","[Q1O")]())}},{key:n,get:function(){return this[Fe("0x8f","FL6g")]}},{key:i,value:function(){document[Fe("0x35","Lib8")][Fe("0x90","tf8B")]("keydown",this[Fe("0xaa","[myT")],!1),document[Fe("0x35","Lib8")]["addEventListener"](Fe("0x15","N2[0"),this[Fe("0x91","FL6g")],!1)}},{key:s,value:function(){document[Fe("0x37","FL6g")][Fe("0x69","@su2")](Fe("0x55","*g(v"),this[Fe("0x4c","%Ekh")]),document["body"][Fe("0x51","p6z4")](Fe("0x75","VulP"),this[Fe("0x9d","og(8")])}},{key:a,value:function(e){switch(e[Fe("0x60","[myT")]){case 38:case 87:this[Fe("0x11","N2[0")]["z"]=1;break;case 37:case 65:this[Fe("0x7a","%mOy")]["x"]=-1;break;case 40:case 83:this[Fe("0x31","[myT")]["z"]=-1;break;case 39:case 68:this[Fe("0x1a","tf8B")]["x"]=1;break;case 32:!0===this[Fe("0x1f","og(8")]&&(this[Fe("0x87","@jT[")]=200),this[Fe("0x27","zC[Q")]=!1;break}}},{key:c,value:function(e){switch(e[Fe("0x6e","O@&K")]){case 38:case 87:this[Fe("0x1a","tf8B")]["z"]=0;break;case 37:case 65:this[Fe("0x34","og(8")]["x"]=0;break;case 40:case 83:this[Fe("0x44","k%ss")]["z"]=0;break;case 39:case 68:this[Fe("0x7a","%mOy")]["x"]=0;break}}},{key:l,value:function(){this[Fe("0x42","CFd8")](),this["collisionTest"](),this[Fe("0x4","k%ss")]()}},{key:"gravityTest",value:function(){if(this["applyGravity"]&&this["_rayCastObjects"]){var e=!0;this[Fe("0x7e","XWY*")]+=.01,this["_tmpVector"][Fe("0xa8","37TL")](0,-1,0),this[Fe("0x78","(W)O")]=this[Fe("0x62","(W)O")];var t=this[Fe("0xe","[^s(")]();if(t){var n=t[Fe("0x2","og(8")]["add"](new(o[Fe("0x29","zC[Q")])(0,this[Fe("0xd","[]3l")],0));if(this[Fe("0x70","k%ss")]){if(n["y"]>=this[Fe("0x45","fxgn")][Fe("0x2e","Fl54")]["y"]||n["y"]-this[Fe("0x96","[^s(")]["target"]["y"]<.2)return this[Fe("0x36","VW&A")]["target"]["y"]+=.08*(n["y"]-this[Fe("0x57","bMFx")][Fe("0x58","O%Ee")]["y"]),this[Fe("0x7","BHwL")]=0,void(e=!1)}else t[Fe("0x26","fxgn")]<this[Fe("0x5f","T$[i")]&&(this[Fe("0x7f","Fl54")][Fe("0x93","(1*5")]["y"]=n["y"],this[Fe("0x7c","[]3l")]=0,e=!1)}e&&(this[Fe("0x21","BHwL")][Fe("0x95","FL6g")]["y"]-=this["g"]*Math[Fe("0x74","LX$n")](this[Fe("0x23","fxgn")],2))}}},{key:u,value:function(){0!==this[Fe("0x53","[Q1O")]["x"]&&this["collisionTestX"](),0!==this[Fe("0x19","[^s(")]["z"]&&this[Fe("0x4e","@jT[")]()}},{key:"collisionTestX",value:function(){if(this[Fe("0x8","^nV8")]["setFromMatrixColumn"](this["camera"][Fe("0x7b","[^s(")],0),this[Fe("0xa4","T$[i")][Fe("0x8d","p6z4")](this[Fe("0x72","VW&A")]["x"]),this[Fe("0x66","VW&A")]=this[Fe("0x33","^nV8")],this[Fe("0x4b","og(8")]){var e=this[Fe("0x3","%Ekh")]();if(e&&e[Fe("0x39","%mOy")]<this[Fe("0xa7","qYFU")])return}this[Fe("0x22","(H*V")][Fe("0xa1","*g(v")][Fe("0x1","G8(f")](this[Fe("0x16","tf8B")],this["moveSpeed"])}},{key:h,value:function(){if(this[Fe("0x5","G&f8")][Fe("0x40","CFd8")](this[Fe("0x0","[myT")][Fe("0x4a","[Q1O")],0),this["_tmpVector"][Fe("0x8c","og(8")](this["camera"]["up"],this[Fe("0x52","[^s(")]),this["_tmpVector"][Fe("0x1d","tf8B")](this["_camerLocalDirection"]["z"]),this[Fe("0x5d","XWY*")]=this[Fe("0x63","qrfG")],this[Fe("0x9e","%mOy")]){var e=this[Fe("0x56","og(8")]();if(e&&e[Fe("0x10","@hE$")]<this[Fe("0x9f","@hE$")])return}this[Fe("0x92","%mOy")][Fe("0x1b","iy!&")][Fe("0x7d","CFd8")](this["_tmpVector"],this[Fe("0x76","]Uws")])}},{key:d,value:function(){if(this["_rayCastObjects"]){this[Fe("0x38","n8rA")]["set"](0,-1,0),this["_tmpFar"]=this[Fe("0x25","zgeV")];var e=performance[Fe("0x9b","qrfG")](),t=(e-this[Fe("0x71","(1*5")])/1e3;this[Fe("0x68","eSHa")]-=100*this["g"]*t;var n=this[Fe("0x3f","[Q1O")]();n&&(this[Fe("0x80","T$[i")]=Math[Fe("0x89","p6z4")](0,this[Fe("0xa2","CFd8")]),this["jumpY"]<=0&&(this[Fe("0x1c","O@&K")]=!0)),this[Fe("0x2a","(W)O")]>0&&(this[Fe("0xa5","@jT[")][Fe("0x4f","!HHW")]["y"]+=this[Fe("0x82","tf8B")]*t),n&&n["distance"]<=this[Fe("0x9c","%Ekh")]&&(this[Fe("0x41","*g(v")]=0,this[Fe("0x3c","fxgn")]=!0),this["prevTime"]=e}}},{key:p,value:function(){var e=null,t=this[Fe("0xa3","iy!&")][Fe("0xa6","[myT")]["clone"]()[Fe("0x14","!HHW")](this[Fe("0x65","%mOy")]);this[Fe("0x8a","T$[i")]["ray"][Fe("0x3b","!6cB")]=t,this[Fe("0x84","[myT")][Fe("0x2b","@jT[")][Fe("0x17","(1*5")]=this[Fe("0xa0","]Uws")];var n=this[Fe("0x94","[^s(")][Fe("0x3a","CFd8")](this[Fe("0x6d","[^s(")],!0);return n&&n[Fe("0x20","Fl54")]>0&&(e=n[0]),e}}]),f}(Fe("0x64","%Ekh"),Fe("0x6f","FL6g"),Fe("0x67","k%ss"),Fe("0x50","M09c"),Fe("0x3d","!6cB"),Fe("0x6c","k%ss"),Fe("0x13","og(8"),Fe("0x6b","(1*5"),Fe("0x2d","^nV8"),Fe("0x61","eSHa"),Fe("0x46","*g(v"),Fe("0x49","n8rA")),Te=["wrbCjijCkMOpGn9gw7LDtQdAw7bCpWlXKw==","w53DpmDCu3TDhTM=","w6zDpnfCjHTDmXQjVBw=","GMOsw7XCksOKwobDtQ==","VA03","wrnCiMO7HMKDcsOuwrVAwrE=","w7VqCcKDwrASGcKV","W8OFOg3Ct8Kb","CcKFHsKLwr7Dhz7CkmA=","wobDucO5w6lXYRItw5QwCA==","woN6GsO0w6Jt","D8K8PcKJBw==","G8Omw7LCqMOXwpXDv2Q=","wrdxw5t1dcKcw5EZRF4=","ZGVQBjER","NcKBwpLCqg==","wofDqcO5w51dYB4r","FsOXUUo=","wrV6w5FMccKBw5cTUg==","DcOteGA/wrnDkMK1wpc=","WMOdw6FgMMKhwo1jb8Kiw6bChSs=","L8K/w5pEwqfCmQ==","wpzCisO0MMKKecO3wpxHwqJAw70=","XcOGw6plBsK2wq1uYcKfw6zCgjEb","DcK0OMK1GhbDiMOPw5U=","bcKBSsO+QA==","w5F6DFjCqg==","w49wEVPCvQ==","wojDh8KXwrXCgX3DpiB3","C8OgZGEpwqPDmsKrwqPCqWRlAzo=","bWRd","QgEvw5jDosOoBAw=","w5EHw6U=","DcKMBcKqwrk=","wrEbwqxFecO3","A2nDgsKwEn/CnwLDgBMiw5w0w7Un","FsOswqrDnl3Dsg==","wrzCg8Oy","EMO/wqvDkUw=","DcOqZGABwrDDj8KpwprCpnFBFjnDuS/CmCvCsg==","bDzDpsKoOsK3D8Ks","dmnCvxNlw78hwqI5FErDiVw=","w63CvcKjw6Y6w5Y=","w77ChzrCtQ==","B8KTJMKhwqjDmjTCg38=","w6vCssKvw6Ekw5JWwopqFsKcw49L","aMKDQ8OlQA==","d18Ewo1IwrTDpGkLVsKiUcKS","UxYkw53Ds8O/MhYlSsKlw513woFgw6TDiA==","SMKHwoQGS8KDw6Nv","EW7Dh8KMFg==","wobDqcOj","w7nCkMOmWlk=","woHDocKww4DDksKuM2Bxw7dVSsOp","w7LDvBPCozo=","w7pxwpt4DcOtwrEMJkUy","acOOw71iJcK3wrxqeA==","OsK+w6YJfRU=","D8O5wqDDmF3Dvw==","wqwcwqfCg07ComPDlSFcJMOFUQ==","GMOrY2gtwqXDlsK2wp3Cuw==","IgPCiDV1GsOtw4Y=","w7twJcOGZA==","HMKFGcKtwqbDiA==","HSrDjMKhIxR1WRk0f8KbwqDCnsK1w4AY","wpnCgMOiBBrCnsOTw6kCIcOYHcOf","w7fDtxo=","wqPCgcOlPQ/CqcOIw6IEPcOjFMOUF04+woU=","w7zDjFRrCMK/","RsOGMhrCt8KdVlcMdMObw4s=","wrHCgsO4PsKbfw==","XQLCnjsiLBQV","CMOow6zCpMORwp0=","wrPCjCPCm8O4HEY=","woXDtsKhw6jDiMK/E35nw79TUMOSw74+LgLCvQ==","XcODw71VKw==","SsOPOh3CoMKGckE=","wrjCk8OtCA==","KSrDjcKmOh93WRktdA==","C8Kmw6UF","w4N9DXPCuXprFQ==","wqTCl8OuCQvCr8OZw7U=","wrnCksOkOMKbfsOswr4=","wrodwrpkdMOxw44=","Y2ZfEjwRw7HDm0zCoHfDsQ==","w5DDtBjCjz8=","w49tBQ==","URE1w5PDlcO1FR8+WMOEw6lewoVm","w4F1CEXCvFFkDMKK","w5g8TBxwA8ON","w7N25LqE6aGNKsOIw5ECVF3DicODwpUDwocsw6nDh3/CsCIiBSZbGMO0w5F0","wpXCkcOk","EmLDlcKJB2TClQI=","wqB0w5NNdQ==","w4d/D1PCrGtDOcKubw==","wrp9HcO3w6xtwofCvA==","wq4XwqZFcMOg","A2PDj8KNEnnCkwPDmjQ=","w5PCssOHwpDDgMOowoB5wrRkw7XCtsKOwog4bEVGCw==","NsKawo7Cs1Q/w6QP","KDvnrILkuK9pw7DmibbkuLTkuqTpnbTopZTnrrTkuLY=","w6zCl8OnWmPDrsOpDjTDpg==","JsKzw41UwqLCkhrDucKAw7fDpA==","GcOSWH/DgQHDu3vDvcKKwoPCok3DuMOg","woLChcOlCAA=","Xz3Dq8KKO8KxFcK8w70bwrtRwrBHVcOrw6Ncw4k=","CMKPGMKBwr3DjjM=","YXPCqBd0","Pg3CmTltQcOmwoXCuRshazPDtcOww4kCwrDDsg==","McKjw5BzwrvClB7Dv8KM","ThjClyU3LgkPwqY=","Ig3CiT1sAA==","w73Dom/Cun4=","f8KJUA==","HsOgfkouwrvDu8KwwoDCvHdqDSw=","wo4rwpDDoWvCg3U=","PsKD5Lqc5bWu5pmf6IKr5biy55aD5Yi25peZ5LiI5b+a","DcKMC8K3wq/DozrCnHE=","dnTCtAZww7MKwqsu","HsOfUEPDswfDp3nDrA==","wq/CgsO7NsKZcsOCwrxC","w7jCmzrCtMOtJsOZ","w6TCvhnDlsKxAjhA","fHVKCQ==","w6/CnCDCsMOuPsOVwpfCkMOu","w5pxwpt4O8Owwro0LEoiK2o=","w7LDvBPCvjHDkcOEwobDuDnDqw==","C8K5KsKvBz8=","WMODw6tiLw==","CMKPBMKwwo/DhCHClA==","w7YLw7N1woF9wr0=","AcKqO8KvHRvDhsOMw4TCgwJWwqU=","w63CnSfCqcOuI8OSwp3CjA==","w7XDsQXCnyDDr8OFwpHDuTPDtw7DrcOuw7zCmzHDtcK8","G8Oow7PCoMOOwo8=","TwTChzQeLB8=","WMKLwogaQQ==","wrV0w5JdYsKJ","WMOHw61tIMK2wq1h","wqB1EsOiw6ZrwqLCqh1CScO7","w6xWCCILw4ov","wq4JWSlYw5h4","ZMOASsOkw7zCjXvDkTTCmETCslXCtHt7wpZMwoHDtMOhOMKtf1rCosORw6oAOMKkGcKTfB3Co8KrHsOGaCrDuCzCs8KiwovDsUt4w4XChjQ6TsObw5lsKsKAwqfDqDk+w7V8EQTDkiEywq9mw4DComnCmS7Dg8OHaWsUVnE3wqtlYsOrw48tw7HDn2Eiw70/ecOiw4/DlFrDtsOew6vDs8KODjDDvybCgSzDs8OpdwlAwp/DocKXFnEDSmjCpsO8w6VOfcKFAksHU30YRMOAwqFIwpwdwrscwpDCqzIQwqlCPBXDkErDjw==","w796IMOeaQ==","w513woZiKw==","BcO1wrzDjF3Dh1kGaMKMwos=","w5IhVMKRUcKPwoNKw5dOXw/CpMOl","HMKww6Y=","w7InSMKGXMKDwqpKw4o=","w7XDjXVaBsKswqI=","wrnCnMOMBADCuA==","AMOzwqDDi1vDuFAH","Y37CqAZ4w7kFwqIREEE=","eTDDq8KWN8KAAsKqw5obwrs=","w7DDjWlrBsKmwqTDlTA=","w7zCucKgw6ctw4U=","CMOlw6DCssOQwrLDsWfDsA==","SsKMwo0=","EW7Dg8KOFg==","BsOkwr7DnkfDs34NVMKBwo/DsR3Dgw==","TcOJIg==","w7XCoRrDmsKrDxRGCRDDgA==","AMO0wq/DkU7DslggdMKWwobDvBvDhA==","w63DrHHCinrDlGg=","H8OTSGDDghnDiXrDu8KywojCplDDrsOsw5Ngw6zDjQ==","w4VRw6rCjMKzw4UUJjbDtFLCqw==","w5ENw65vwpE=","wpLCnMO5wrNFV8OzwrFTwo14","ZnjCvxx0","JcKawpPCrkE/w6UEKg==","fz3DrMKANsKi","wqZ6w4xRZMKBw5YY","GsKFEsKwwp/DgjXChXHDlhA=","bMOKw6ZGCMKWwq1hbsKqw7HCji0=","wrbCkD7ClMO8E3Btw6nDqANow4DCuWg=","w5ZSw6gBNcKywoZnCmgWwqTDg1kYw5bCp8KcwojCuktZJMOdwo7CiMOuw411w6Z/LcKsw5RPXSfDm08yw5o6wrcSwoHDs8Ohw5ZLH8OQT8K2RibDmcKMwoRjORl5w79AwoQqwoRDOSgww7FMUEx6wpDCr1p+FkDDhn52w7UYw77Ds8KTwp7CtTnDnm3DnT9jaHtNSxTCgsOgwpPDqMO6wpDDrFlfSg4iXcOvw4fDiAUHw4AXwq/DjwoQAxlQecONw6UTb8OGw4rDiT0yDiUBw7DChj3DqMKnw4PDpsKAw5Vywo3CtScP","RsOSNgDCpsKqcVwRYcOcw5PCqg==","PhnCljVvEsOsw4vCvw==","w4ZWw67CmsK6woI4bivDuk7CsxVcw6JDwpPClA==","YjrDqA==","w6EnVcKbScKDwqtB","Uwsvw4jDpsOzDxs4","w7vCtwzDjMKgHx9LCRvDjHA=","w7LDqAfCiTrDm8OjwovDozDDvQ==","XwInw4/DosOuNhcuScO/","w5MzQBs=","wonCksO2wrJEc8OewqZJwoV+Vw==","w57DvQTChA==","Q37CuQZ+w6hW","w5XCssOSwovDtcOiwqt7wrRkw7U=","w7zCn8OzWmHDtsOtOhrDiMOVdsOUDMO8","w6RgCcKTwrQJEsKCw40=","w4lYw6LCi8K3w5gyJi0=","w7fDsQE=","QMKsw7jDmRzDslg=","McK/w5A=","V34yw554woPDhGsKXsK1WsKU","R27mlZDplJRJLcOIXMKGdmDCuHU=","HsK7w7EvZgbClcOdb8OTw6bCicK5DQ==","wrXCk8OtCBzCvA==","woA9wpbDmH7Cs2nDlTFLOcOMUA==","ThvCljYCLA==","GMK6w6EudgbCjsObc8Odw6LCkcK6Gw==","wq3CnyHClA==","5LiA5Lm155uS5ZOj","w7zDqmfCu3M=","fGFLBDcRw7fDkUHCog==","E8Kww7QE","wqDCki3CgsOuMVNsw6M=","fz3DrMKANsKiAsKq","PMKMw4ZTVyDCnMOaZcOTw4TCjcK4","bCjDssKBPcK0JMKww4AYwrE=","wpDDqMOww5x/fhQu","w75MAD0e","JMK5w5BUwpjClQHDqA==","wo0vR8OHw7VAXMOHwp/DuUlRwo/DqMKuLVwRwq3DnsKUwpFewpspwqTCsBDCr8O5wpLDihbCmRMjwrFiHMOAwoPDnUw2amLDkMKgwrI7w7pxwqbCnMKCw5fDhSjDhxldwq1QJmU5w79NT8OyHwbDnjgBwrNGwrR4w6fCpz7CgcKMGsOTwpPCsMOtPMOlIMK9QmQjAMOID8OnO8OSUho2wrwVwqwsK8OiQcK/DmRaw5DDgSvDrMKPb8KrPMKqf8KsOMK9IsO3wrnDpUvDlUrDocOzwrl0wqLCmsKEUHzCq8OPw4bCoX5JcHvCtMOgwrnCr0TDsMK9w5jCgTjCkMOqGMOPw5PCkkbDqMODwopcWBnDr8OvfsKEEUd5XsK3M8KqwpQ=","w6/CvsK9w6wkw4Jmwo4=","wpjDncKXwpLCkHzDrTdg","w5fCtsOGworDkw==","wownwp3DnW7CgmPDlQ==","ZMOASsOkw7zCjXvDkTTCmETCslXCtHt7wpZMwoHDtMOhOMKtf0HCv8OTwqcSEsOqVsKeLljDs8OuX8KSaGbCvSbCrsOswo3CuU1pw4nCk2dEVMOIw4k8csKbwo3DqDk+w7V8U0XCkWp1w70pw5PCo2PDgHDDmcOUdjQdRjB3w7spacKRwpc2w5vDn2Eiw70/ecOiw4/DlBzCucKQw6/Cv8KdDzDDtinDmHrDtMOgb1dPwqXCscOPDVsDSmjCpsO8w6VOfcOGTQdITS5VEcOdwo0ZwrM8w5lIworCviJAw7FZFhXDkErDj2fDi8KEOFTDlsO1w4MDwr02SsK7AsO7F8OcwqdnOHfCrMOOUE/DqwcSw4dcwqRBAyJ6NsO3wrEDZidlw6XDpcO4a8KQMcKcwo9LcDjDicKZwovDhcOOC30ow4lQw6fClShBMwR6wqp1bD7ChcKDZMOHewAIABdERkIdBCzChMKWTEo=","WMOAw6p1JcKtwqZqeA==","NcKFwpzCtA==","wrxmFg==","w5AJw6lgw5w/w7TDgkrDtRQLMQlkw6AzJXBTNEM=","w7x2KMOceBDCplF0RgrCgMOsKMO2VyBDXQ==","w7UhUA==","W8KHwpofUMKZw6lz","w6fCssKnw7c=","GyrDncKmPAMl","w4TCtsOZwpbDmMOq","wonDk8KAworClHzDpDo=","w4ULw79Dwpt6wrbChhLCqURkfVEzwrlrVyUedw==","w77CpMOuwqTlv6bov5jpm5fpuLog","wp8gwp3Dn37ClXTDtypaPcOjTCRvw6vDkcOSEg==","w4tTw6jCr8K3w4Iv","wql8GsOlw5B2wpDCqg==","WMKzdcK5YQTDg8OFSQxXfBA=","w6NrI8ObeDbCu3NvVw7Cr8Ow","w7DDkGJ+E8Kqwo7DmTRba3rCkcK7J1xSf8OiwqA=","DMOlw6M=","wrrCncOu","HsKBGMKlwrHDng==","I8Klw45FwqjCiA==","SMOEMDnCs8KabQ==","w7jCtcK9w6oqw5t3wq5jAcKQw6JDXRgG","woXDtMK3wp7lvpbovb3pmr7puojCmg==","w6NsNcOeZRvCsU16VhI=","GsKxw7QCfxfCnQ==","w619JcOibQbCpw==","w54+TA1vKMOIw6U1","w7InVQ==","woXDo8Okw5BMexQ3","w7BmA8KTwr0=","w73CkSzCs8Oq","wpvDrcO6w5w=","w6fCtB7DrMKsETI=","w7XCtQ4=","D8OfWFvDiA==","w63CnSfCs8OqKcOIwpHCkcOz","C8OCRUPDhQ==","w73CiMOxWg==","w5N2I8OYaRbCoA==","w73CrMKvw60=","b29XFTgMw5fDm1c=","Wm7Crh54w7QBwp49Clw=","woIqwoDDmWXClHU=","wofDvcK0w4PDisKuEg==","wroewrF1esOdw5YzQydY","YjbDh8KSNsK+E8Kr","wrHCmyLClcO4DVdz","wqjDgsKLwo/ChXA=","fmVXBTwXw5zDjA==","w6HDvRnCiDHDjcO0wozDmT/DqyjDp8Ou","wokgwprDhVnCmXzDng==","VgrChjIEIA0N","wqV+w4Y=","b8KIQ8KrRCTDgcOeQAxLbRFSwrcuRMOdw6LDnDzCmsKRwrjDq2Q0L8K4wrVow7IRw4hmw5IRBAtgD8OYdcKbwoBtImE=","w6VuBMKMwrISE8KSw5HCvSoew4PDt8K9","UwUsw5nDtcO7","EwInwozCs8KqVQ==","D8Osw7LCtcOKwpLDsX7DvBHCpQ==","w5E9Sg==","GMOqw6TCr8OG","KCvDmcK3Bxl/Thssf8KrwrI=","wqPCnMOyCA/CscO+w6sZPMOaIcONEEg=","CsK3NA==","wrDCnSnCn8O4","w617wo14PMOtwrML","wpbDu8K8w5PDgsKbE35nw7Ve","bwsjw5bDosO5FQ==","wpvDo8ORw5VB","AWLDiMKUEmTClAnDhg==","AcKtLcKqADbDjMOyw5HCgh4=","wo4rwpDDsGTCmWvDmjFQOcOO","Y3rCtgd0","F8OQWlzDhQfDlnDDoMK5woTCgg==","EGjDiMKEFn8=","VwE1w7jDosO2FR8=","w4xYw6LCi8KFw5gmJg==","w7fCssOJwovDmcO/w7c=","GMO9w7PCpMONwpvDpGI=","w44nQy1sDsOMw7o1","w4cIw61kwpd7wp7CujrChg==","VQAmw5nDlMOuExskWsOjw7E=","w4tZw6XCksK3w4U1LDHDoA==","wp/Do8O+w5c=","MwjCnx9uHcO2w5rCtRg8","woHDtcOnw5w=","w5nCtBnDlw==","w44Bw6pl","NwjCnDlGH8Otw58=","NcKWwpjCtEU=","woXCm8O+wrVAbsO4wqZS","wobDpcO5","D8Kww6YJZxvClsOa","G8KoPcKnHT0=","WMKdwoclVMKYw6Nvw7w=","w79sI8OBeAc=","H8Omw6/CpMOuwp3DoHrDvBDCrA==","wrMUwq5ScMOmw7EuTjxe","wrp0w4s=","QWvDgMOQRz3Djg==","CMOOHAjlvI7ovJzpmZvpu4TCrg==","wr98B8Olw7NtwoXCrBFWUsOmwoxJ","WMODw6VyN8KKwqlibw==","w454C1PCoyxhTMKNQVU=","w63Dqm/Co0nDkmMy","a2VNLjsPw67DkVfCq3vDlUbCjC3DiMKvw7BU","wrB8w41LZMK4w5wEU0LCnQ==","w7tnwoZcL8O2wqsdMUUSK2BiM8O7OQ==","wqbCkC3Ck8OxGlY=","OSrDhsKmEh1/Sh4=","w7whQ8KxUsKPwqJJw5FAUx7CuMOo","5LqD5a6q5Z2h","XcKNwpsCTcKTw6dxw5RPDQ==","w7DDtBjCjz8=","AMKBB8Kh","WArCnzIEKA==","JcKawpHCtVI=","HcOgw7LCqMOBwpDDtQ==","TMKNwp0lTcKKw6M=","Wmkyw5t/wrPDsWMOR8K1","wrrDnMKQwovCkGHDqj18QmU/wqo4","w6fCoQvDkQ==","dH/Cvj9+w74BwqI=","VAss","w5lSw7jCrMK1w5AwIi0=","w4DCp8OawprDmMOpwoZnwrhmw6U=","HsKPGcKtwqjDhDTCnw==","J8KRwpnClU4=","w68Lw7hpwrZuwqvCixjCikJTdEo/wrZz","aMKLXw==","w65XDzsLw5ckJhA=","W8OFOg3Ct8Kbe0A=","w45ew7o=","w6jClcOlbGvDow==","VQAmw5nDk8OyCB0hU8Oyw6pI","RsOVIAXCu8KHe2IEYMOA","w6MpQsKbSMKZ","OyrDncKmPAM=","GcKxPcKyAQ==","wolRw6rCmQ==","wqzDvMK7w4Q=","w6PCs8K7w7Atw5p9wp1i","w7nCnsOyVnTDs8OAOA==","J8KRwpnCn1Yzw6UV","woHDssK4w4TDlMKq","w69rJMOTeBDCkXF+SATCrcO3","wqLCmijCocO8DEE=","w6PDg2B6Pg==","w79tIMOGaRjCsXNv","JxzCnz11Fg==","w6Ngwo8hIcOgwrU=","MsKAwo/CuEkyw6IVIQ==","w7IkT8KCfMKJwrBGw5dN","WQTCli4=","wofCl8OkwqhOacOl","wpzDl8KNwqTCnmDDrTZ7YWsEwqMjC0vCkwxofsKc","woLCncOjwrU=","w549QA5zFcOMw7o=","w6DDl2lMF8Knwq/Dgic=","DcOmw6/CtcOwwpXDqm8=","w49KEsKBSCfCsXN/QBPCpsOx","w6HClC/CrsOqPsOrwpHCmsOpwo0=","DcO9wqPDmg==","w757wpBlOsOrwrAW","D8KEDsKBwqrDiDXChQ==","woMgwpXDlQ==","V8OKw6pmMMKs","F8K2w7EEdhzCvMOQZsOTw7XCh8KmEcOM","esKEQsObRCXDlQ==","C8OgeWogwqTDi8KwwpzCpg==","w546TBB7A8ONw5w/XsOJJVXCuQ==","w6ZrA8K3wroTCMKXw43CtgoUw5zDq8KmJ18=","w6jDom7CqmnDlg==","U8OGw6BlIcKqwo1rbcKqw4DChDMAw5Y=","w7jDoGbCoX4=","dH/Cvjdnw78KwroQEFzDk01Bw4HCrw==","wrN7w55afMKNw50=","WMKLwowYQQ==","wqx8GsOlw6J2woTCqgY=","Qmk0w4tjwpTDlWg8UMKiUcKFw68=","wpwqwoA=","V8OOw6ZkKMO2wqwifsKmw7fChzpCw4bDjQQ=","woHDvMK4w5HDicK4E34=","dMKHwoscQcKTw7I=","woTDscKt","woPDvcK8w4zDh8K/H2N6w6k=","w6xcBQ==","PizDm8K8Ng==","w6XCkMOjWmzCqcOLexbDiMOWUsOQEcO7wrvCuSvDjQ==","w6rCtcK4","OSDDssK9JBRkbhExfw==","HcKtN8KVGTDDjMOQw5U=","E8Ozwr3Dll3DvlMa","wrDCnsO5OQHCksOew60=","wqZ0w41dfsKc","B8Ouwq/DnEbCulsYb8KF","AMOuwqvDnl3DsnkYfsKOwoDDugo=","w5pWw6vCmsKO","woXCm8O9wrFOdMOzwrE=","VQrCnzI=","w4dWw7jCmsKkw5g9Lw==","wrd3w4xXfMKdw40T","bjfDrMKQIcK/C8Kr","w4PCucK9w6sKw5ZhwoJkK8KUw5VJQx4VUw==","LcK6w7wOexPCi8OQVcOZw5jCjcKHH8OOfgZ7w4Y=","wowuwpnDlHjCkQ==","wqV2w5pWdQ==","w4d3CFTCo3ph","w443WQ==","MwjCnw==","wpXCocOTXirCj8OZw6kSNsOFFMOe","KyDDkMKmABhsSA==","w5B8B1LCqm1gEw==","PMOZSU3DjBbDjXzDrcK7","wpPChMO0wqBVYg==","SMObw71tIQ==","wpbDvMK7w4TDq8KqBnx9w7RXYcOlw6w7OBTCuyI=","VAXCtyETJxgS","w7ldGTspw5EkNwfCuXg=","LCvDmg==","YWFNAjE=","w5jClyrCqcOgOMKO","NMKQwpPCvkUkw64T","fj3DtsK3OsKqAg==","w6rCs8Kjw4Ykw5J/wo5pEg==","wpgmwpDDhWI=","HMKPH8Kqwrg=","HcKFHsKXwrXDlz4=","I8K1w4pJwqTCkgg=","SMOKw7A=","w77DtwHCiTnDmsOOwpfDmSzDvCjDpg==","wrbDl8KKwo4=","w7jCvcKiw7Yt","w65XDzsYw5EmMA==","wp8hwpsSUcOAw4MpTi1Ew6HCkQ==","w6XCnsOgWw==","FsOjbHYpwqXDqMKwwpfCvH4=","w798NQ==","w71hwoF/OsOw","w7XDi2l7JcK9wq/DkSlYdGHClsK7","wofCkMO0wpRPdcOzwqJMwqB6TDHCk1MxPzs=","Ymk0w4tjwpTCsw==","UjfDoMKONsKzEw==","w6R8KMOVZAE=","HcKDC8Kowrk=","w7/DonHCqH7Dgw==","wprDlsKd","wqt8GcOUw696wofCqhpR","w6bCl8OnTGXDrsOnMxzDgMOQUg==","R8OBOQw=","V2Q+w5NowpTDpGk=","w4TCucOLwp3DmsOowp9gwr5n","wqDCjCnCkMOpGndtw6PDqgtWw5U=","RsOOER/Ct8KHakE=","XsOBw6VjKMKhwqw=","CsOqw7XCqMOMwpLDow==","w5pPwqzDmOW9uOi/numamem6kng=","dg0zw4/Ds8OKBAw5UsO5w5pUwo52w7PDixkE","EMO/wq/Dk0w=","CMKPBMKw","IRnClQ9xG8Onw5rCvw==","woXCm8O8wq5T","V2A2w4x/wqjDoGoK","J8KFwo3Cv04yw4gJMcKIGg==","airDp8KBPQ==","d8KPR8Ov","wobDr8O2w5Vd","wrLCm8O2","w6tqCcKAwqEI","wpTDkMKT","GsKFEsKwwp7DjCjClHjDkQrDtw==","NMKUwpnCs1Ulw5kALMKNEQ==","wqN7w41dccKEw7saT0LCnsK8w5sHwpE=","w55Fw63CkcKlw4E9MTrDvU4=","w7wtUsKaUsKOwrc=","w7nCuAQ=","w7DDjWpvCMK8wq/Dgg==","wrbDn8OEwop8QB43w5k6FMOawp0=","LcKww5hTwq7CiCzDpMKNw6zDog==","eX7CvAY=","QMOTGQbCsMKAclc=","wonDl8KXwoLClGfDpiA=","V2M6w49jwpXDpHU=","UGM5w5o=","wqXCh8OiHhrCrw==","w6FmFcKUwqEwGcKVw4zCtgc=","w6rCg8OkXnTDv8OqOhDDisOdSMOB","EcOgY2IkwqU=","D8K8PQ==","AsK3OMKi","w7nChMOyVw==","wrfCliXCg8O5L1dzw7XDqAA=","w4F2B0LCrnZrBMKd","X8OGw6d1","w6hOBCEew40=","wobDqcOjw6lZZhM=","VAEyw4jDrsO0AAojUsO5w5tUwpJmw6TDllsHesOY","w7jDt2LCvW8=","w6JNFSMDw5AvEwPCpH8=","w5IBw7howoBmwrfCjA==","w71XEjsaw4wlIAfCpH89Z08=","b8KFXsO/ZjnDiMOfSAdR","wqxyGcO0w7F+","B3jCosOEc8OwR8O4wolUw7UUw50GVcO6w65Ww4c7CFUyIsKSYFXCssKOVmTDrMK5OcOOw5bCkMOsdmjCmUvCh3/CgsKdwr5Nw4MAGMKUw515wrXClTbDk8KnEEPCosKzwrhnwqbCkMKzAcOxw5DDii1Pe8KowoMgwp3Cm8Oww6jCrcKawrg1UMOIw5zChsO7B8OWEcO7wr5yXms4wq4GwrBQwpPDsH9fw7BAb8OewoXDngl9bcKUw7PCtcK2wozDpcKwwpozGBvDtcOew5HCvsK7wobCmsKpfCo2Ax9yB8K0wplbTMK2U8OwIsOFwrJZf1cOYcKJwo3CtMKNQD1RNMK+wrHCh344eMKbwq95E3XCjEXCssOUVMKxb8OUdWVDbg==","w48Lw79pwptrwqs=","w4ZWw67CmsK6woM4bj3DvEI=","WsOLw6BAKsKtwqVufsKmw6zChQ==","DcOgw63CrcO3wpnDqH4=","w7/Dg2V6C8O9wq7CnSFndXzCncKhNj1HeMO/wrg=","C8OTSA==","w6PDjXR2E8KmwqXDng==","woXClcO9wqRTZg==","NgPClg==","AsOswr7DmkfDs38ccsKPwoE=","wqDCkiXCksO2IFZkw7XDswdWw4DCvnJUIQ==","w4F4BFPCvX4=","w5DDsVQsI8Kdwq/DniZtaW3Cig==","w7rCucK2w7cLw5h8wp9iCMKB","w4/CtsOHwpo=","w7/CmMOyVmLDtsOK","w7ptwpNp","BMO5wrrDskbDs1kYT8KKwoDDpg==","wq5jBMO0w617wqnCpx1JRQ==","w6N/J8OBaQHCg3R/UQk=","KcKTwpvCqUUiw5wIPMKQFg==","w54zQBtuBw==","w4fCvsOGwpPDpcO5wrxjwrQ=","KsKawpzCvg==","w63CgCzCvMO7L8O5wpTCm8OwwoDCmG0=","w796JMOcaQ==","HMK9N8KiDCrDjMOQ","NgXCmCg=","w77Cs8K9w6o8w559woU=","w7zDjFRrBsK9wr4=","wpHDpsK7w7LDlsKjE35x","MQPClShgGsOsw43CqA==","wosgwpnDtGbClWvDnitN","w5pxwpt4O8Owwro=","wpPChsO8","w5J4G1fComw=","wrtww4tQf8KMw4o=","w54qTMKXXsKew7dr","w5s9QwpPD8OTw60=","w5FpG1/Cu3pJAMKNS0E3wocVfMO1w77Dh2nClMOHwr/DhA==","EMK5w7MTdgbCscORaMORw57CnA==","czcSwo/Dg8OIBBAuWMOlw7xJ","WcKJwo0fUcKD","TcOpYcKgWz7Cmw==","w7AmT8KfXMKewq1Aw5ZQ","w63CkyTCuMO9Kw==","w7/Dq3HCqmjDn28qSA==","wq53EA==","5bW55a+b5Zyr","w4QHw7lywoBfwr3CkAjCqE1kflYiwqVwaTM=","w6jClcOl","T8OPOh0=","fG9KCC0Mw5bDkA==","W2IAw5ZiwoLDrnA9VsKjXcKaw6Q=","SwTCgT4CIAMP","QgEiw4nDtcOpCAgv","w71KBCMFw58u","w6FwOcOXfg==","EGjDiMKEFn/Cnx4=","w6fCsg/DkcKg","Qw84","wqt6F8Ol","wrDCmzjCtcOPPnFOw4rDqA9cw4TCuA==","wrXCgMOlDBrCuMOvw7cEOsODFMO4BkM4","wpwswpHDn28=","dGvCqhd/w74nwqY1FUs=","AWHDh8KTAEPCmwHDkQ==","OsK3L8KBwpI=","w5IbdcOBecK4wqFBw5xGSB7CpA==","wqTCmzjCpsOyDV5lw5bDqB1Rw5XCo3RV","SMKJwocARcKD","w7vCgi3CvMO7Lw==","wq8XwrxlcMOxw4kjTzpmw6XCl1M=","w50hSMKXXMKY","w4XCssOZwovDn8OjwqR7wrhlw68=","HcKUE8Kowrk=","w7/DrHbCrHPDknM=","wrHCmyLClcO4DQ==","woHDv8K0w5LDlcKFF2Fx","w44Bw6Rqwqd/wr3Chx8=","w7/Dg2V6C8O9wq7CnTZhb2TCncOiNnVLaQ==","w63DqnHCvG/Dp2U0XwfCnA==","wqx/FcOiw7BRwovCohE=","X8KAwowY","wrDDrcOkw5BWdQ==","b8KPdcO/Vz/DiMOM","wofCgcOkwq5zaMOiwqJUwoc=","wrfClsOk","A8KBEg==","f8KPS8OOSTPDi8OOQx0=","IyrDm8K2ICRmSRE2fw==","PcOsw6LCtcOMwo7Cog==","MMOswqbDmlvDsn4BfcKFwoDDpjnDksONw6JWEMOeGQ==","w6jDrG3Cu3rDnm4jXg==","EcKQwp/CnWwEw64PPMKBDMK7woM=","DsO1wqvDu0DDpVkXb8KKworDuh/Dm8Ol","w5HCuMOZwpbDgsOkwqph","wobDvMK4w6TDisKuG2l6w64=","EMOswrzDll3DsnAVecKGwonCuRzDmMOa","w7l3M8OXbRnClnF0SgzCk8OiNcOx","DMKrw7QSZw==","DcKBB8Khwq7DjA==","LcK4w7tWwq7Ckg/Dvg==","WMOOw6lkNsKl","w4ECw6Jkwpp7woE=","w4kzXxl5Eg==","eMKPS8O7SiXDg8OZ","woTDv8Ksw7XDiQ==","wr7CiMO4LcKOfsOtwrVc","HMKzw7QTYDzCmMOZZA==","w5o3WT1zCMOdw60oXw==","wrDCnS3CncO4","w619JcOgaRvCsHhpQBM=","wrlzw5lLdcKcw64fRFnCmw==","wqVlw41RZMKNw7UXQkjCn8OBw44dwpYiw6vChiXCrz86","FMO1wqrDi0E=","wpHDsMKww4/Dgw==","BmTDlcKUEmPCmQnDoCg=","UxYkw53Ds8O/JBIvUMOyw7dP","PirDig==","w7fCvgTDi8K3BDtd","DMK8w7AOdg==","wq7ChMO3NcKK","wpbCm8OjwqhVbsO5wq0=","X8OKw7d1LcKqwql7Y8Kgw60=","wow9wpHDkH7ClUPDlyBUM8OOVw==","wqRww5FcdcKaw60Zc07CgcKJw58a","wqx2GsOlw6Zt","wrXChMOiwqhVYg==","TsOBw7ZkJcKowopjZcKgw67Cuz4cw5c=","OsOWWTcIwoPDmsK3wpfCrWRhHA==","wqXCp8ODw7NlVcOzwq1EwodkRiw=","w7zCu8Ksw6Jgwoc+w5o1UcOZwpAeBls=","FmXDlMKFFg==","w614woJ/PcOMwr4VJg==","wqDCkSHCgcOyDFdz","ZMOAw6ZrIcKnwrw=","w692L8OGfhrCuG4=","wqvCv+iCmuexuOaJmeS5myjDi+S4iuWGoOiCoeexmu+8oOS4sei/jueJmOWOhA==","wo7Cl8OkMMKbcsOOwrFawqBaw6DDvT4=","DhzDrcOhFyNzQxQnaMK9wrM=","SMOMw6FvIQ==","CMK2w7EUew==","w4oLw6Jmwpx7","J8Kgw5tOwr/Cjw==","F8Ogb2E/woTDj8K9wpLCvHM=","HMKFBMKgwrnDnz7Cgw==","wrXCncOtHQHCrsOZw7U=","wokmwpjDnVnChH/DlyA=","w75bBCEP","XQLCnjskLA8V","w5hSw6LCm8Kzw4M5MQ==","wprDlsKdwqrCmHLDqyY=","I8Kyw5ptwq7CiBPDosKNw6s=","eMKPVsOy","esKEQsOKSz/Di8OKWQBKdw==","OybDjcK7MR1z","w47CscOMwozDk8O5wo1qwrhtw6nCjg==","w7DDkGJ+E8Kqwo/DnCdlfmbCjA==","woPClcOjwqhPYA==","wr/ChsO1MsKIZcOswqVAwqFrw6bDsD06","w73CkSjCscOq","wqLCncO1DgbCuMOP","wq7ChMOzN8KK","HsKvw6UFfRbCusOcaMOaw5I=","fcKPSMO/dj/DnMOO","wqB8w4xRcsKEw5wzRErClsKvw5UYwo08","w4jDkFDDvV/DpWUoSA3CgMKqw74=","LCvDmsKRPB9iXx8uaQ==","wrgXwrtVfMO8w4czQydY","w6BqE8KuwrsUGcKVw4zCvAoFw6DDusKlLFsM","Zm/CuwZ4w7lLwqMzHUrDiwdGw4nCusOo","RRQlw53Ds8O/MQwlV8Oyw7pPwoltw6/DqRQDZsOWfA==","D8K+w6cBfgE=","wrDCmzg=","MsKdwo/Cv0U=","XG9QDy0Aw4vDskrCpHTDhkbCkTDDjsKpw7NJ","w5w8RBN9EsOAw6c+","wpbDo8O6w4lXYR4r","w6x2B1M=","w7rCksOkUWU=","VWgz","SsKGwoAbRcKEw6M=","AMK5NMKj","XwYrw5nDpMOuLRc5SQ==","wpfDo8Kxw4DDksKu","wqprBMOww617wqjCtjtHS8OqwoFa","w7fCow/DnsKxDhJCBRHDgWoP","w4NxwpBkDMOjwqwRIGYnOn1kL8OoMA==","w55Ow7zCmg==","b2FUBCsE","w4nCssODwpjDnsO5","AcKSCMKtwqjDrjTCn2DDigvDvgY=","w63CnsOvWg==","wrHDo8Oiw5tUdygww5k6","HMK3w7wMdwDCnMOa","w7LDhmNaEcKqwqTDhA5haHzCncKhJ2I=","DMKrw6wMdg==","AcKOL8KywrnDgy/Cgg==","w6HCqcK6w68hw5l3wrtmFcKG","woHCkcOkwo5DbcOBwqxSwo5yczHCjWokJSfCpw==","wrEXwqlSYMOgw4MTTzBC","G8OXUUrDkhI=","Y25sET0Ew43Dmw==","D8K8PcKUBjnDhA==","wpjDk8KUwoPCg3Q=","wovDvcKhw4TDlMK4E29gw5VSTsO4w78gOA==","IGLDnsOT","HMKtw7ABZxfCqsOEc8Ofw4LCjcKGH8OcawM=","LiDDkMKmMhh4SAI="];(function(e,t){var n=function(t){while(--t)e["push"](e["shift"]())};n(++t)})(Te,454);var Ue=function e(t,n){t-=0;var r=Te[t];if(void 0===e["UEFAek"]){(function(){var e;try{var t=Function('return (function() {}.constructor("return this")( ));');e=t()}catch(r){e=window}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e["atob"]||(e["atob"]=function(e){for(var t,r,i=String(e)["replace"](/=+$/,""),A="",o=0,s=0;r=i["charAt"](s++);~r&&(t=o%4?64*t+r:r,o++%4)?A+=String["fromCharCode"](255&t>>(-2*o&6)):0)r=n["indexOf"](r);return A})})();var i=function(e,t){var n,r,i=[],A=0,o="",s="";e=atob(e);for(var a=0,c=e["length"];a<c;a++)s+="%"+("00"+e["charCodeAt"](a)["toString"](16))["slice"](-2);for(e=decodeURIComponent(s),r=0;r<256;r++)i[r]=r;for(r=0;r<256;r++)A=(A+i[r]+t["charCodeAt"](r%t["length"]))%256,n=i[r],i[r]=i[A],i[A]=n;r=0,A=0;for(var l=0;l<e["length"];l++)r=(r+1)%256,A=(A+i[r])%256,n=i[r],i[r]=i[A],i[A]=n,o+=String["fromCharCode"](e["charCodeAt"](l)^i[(i[r]+i[A])%256]);return o};e["OIfxmk"]=i,e["UdngIx"]={},e["UEFAek"]=!0}var A=e["UdngIx"][t];return void 0===A?(void 0===e["cIvRwF"]&&(e["cIvRwF"]=!0),r=e["OIfxmk"](r,n),e["UdngIx"][t]=r):r=A,r},Se=function(e,t,n,i,l,d,g,w,x,y,b,M,Q,L,D,I,O,P,H,R,N,k,K,G,V,z,j,X,W,Y,q,J){function Z(){r(this,Z),this[Ue("0xf8","Nd)&")]={},this[Ue("0x6d","ZIU)")]={},this[Ue("0xd9","B)yN")]={},this[Ue("0x1a1","[p%P")]={},this["container"]="",this["scene"]="",this[Ue("0x145","on40")]="",this[Ue("0x121","j(er")]="",this[Ue("0x2d3","xq7D")]={},this[Ue("0x19b","RPS(")]=new(o[Ue("0x170","M0QK")])}return A(Z,[{key:e,value:function(e,t){this[Ue("0xce","o[fH")]=e[Ue("0x186","n4m9")],this[Ue("0x225","iLes")]=e["methods"],this["events"]=e["events"],this["params"]=e[Ue("0x20d","uQI1")],this[Ue("0x1d0","Ym]W")]=e[Ue("0xf6","c35T")]["container"];var n=this[Ue("0xa6","QYI9")][Ue("0x5d","Nd)&")],r=this["container"][Ue("0x1d1","E8lw")],i=n/r;this[Ue("0xd6","RPS(")]=new(o[Ue("0x1ab","sdC]")]),this["camera"]=new(o[Ue("0x15b","CyYV")])(45,i,1,25e3),this[Ue("0xe2","B)yN")](),this[Ue("0x29e","uQI1")](),t(this[Ue("0xbd","Hjzq")],this[Ue("0x54","2G4^")],this[Ue("0x2d8","Nd)&")])}},{key:t,value:function(){var e=this["methods"];e[Ue("0x229","fLXA")]&&this[Ue("0xb9","#TY@")](),e["event"]&&this[Ue("0x289","Nd)&")](),e["light"]&&this[Ue("0x143","NME*")](),e["controls"]&&this[Ue("0xf1","CyYV")](),e[Ue("0x85","Ym]W")]&&this["addSky"](),e[Ue("0xfa","Ljr*")]&&this[Ue("0xff","i(L&")](),e[Ue("0x45","PP(p")]&&this["addPostprocessing"](),e["statement"]&&this["statement"]()}},{key:n,value:function(e,t,n){var r=this;e=e||{};var i,A,o,s,a=e[Ue("0x6b","A$)h")],c=e[Ue("0x24f","DhUf")],l=e[Ue("0x100","EA(w")]||"",u=e[Ue("0x1c3","n4m9")]?e[Ue("0x84","E8lw")]:this[Ue("0x253","Nd)&")];if("gltf"===c||c===Ue("0x20b","[p%P"))(new S)[Ue("0x29f","iLes")](a,(function(n){if(i=n[Ue("0x149","Eg![")],A=n[Ue("0x75","$4DQ")],i[Ue("0x1e6","fLXA")]=l,u[Ue("0x140","mX(X")](i),e[Ue("0x2b3","Hjzq")]){var a=r[Ue("0x4b","RPS(")](i,A);o=a[Ue("0x82","#TY@")],s=a[Ue("0x294","A$)h")]}t(i,A,o,s)}),(function(e){n&&n(e)}));else if(c===Ue("0x2b2","Hjzq"))(new we)[Ue("0x3a","EA(w")](a,(function(n){if(i=n,A=n[Ue("0x17c","o[fH")],i["name"]=l,u[Ue("0x2b4","PP(p")](i),e[Ue("0x157","ZW0S")]){var a=r["addAnimation"](i,A);o=a["mixer"],s=a[Ue("0x18","[p%P")]}t(i,A,o,s)}),(function(e){n&&n(e)}));else if(c===Ue("0x2bd","1nu@")){var h=new ve;h[Ue("0x91","1Vkl")]("static/draco/gltf/"),h[Ue("0x81","PP(p")](),(new S)[Ue("0x87","fLXA")](h)[Ue("0x1ea","c35T")](a,(function(n){if(i=n[Ue("0xbd","Hjzq")],A=n[Ue("0x24c","6FlV")],i["name"]=l,u[Ue("0x78","4fFW")](i),e[Ue("0x197","j^qw")]){var a=r[Ue("0xe4","Eg![")](i,A);o=a[Ue("0x136","2G4^")],s=a[Ue("0x2de","B)yN")]}t(i,A,o,s)}),(function(e){n&&n(e)}))}else c===Ue("0x26","j4jY")?(new U)[Ue("0x22","Eg![")](a,(function(e){i=e,i[Ue("0x57","0%f)")]=l,t(i,A,o,s)}),(function(e){n&&n(e)})):c===Ue("0x290","sdC]")&&(new T)[Ue("0x60","Nd)&")](a[Ue("0x171","2G4^")],(function(e){e["preload"](),(new U)["setMaterials"](e)[Ue("0x4","GA!7")](a[Ue("0x1ce","NME*")],(function(e){i=e,i[Ue("0x168","Zwx$")]=l,t(i,A,o,s)}),(function(e){n&&n(e)}))}))}},{key:i,value:function(e,t,n,r,i,A){if(this[Ue("0x228","NME*")][t+"_"+r])throw Ue("0x1e7","QYI9")+t+"_"+r+Ue("0x79","QYI9");var o=this;e=e[Ue("0x1f6","iLes")][Ue("0x161","mX(X")]?e:{children:[e]},i=i||{};var s=i["dom"]?i[Ue("0x275","Ym]W")]:this["container"],a=i[Ue("0x80","Ym]W")]||!1;this["onEvents"][t+"_"+r]=function(t){var r=o[Ue("0x165","Hjzq")](t,e,a)[Ue("0x101","Ym]W")];r["length"]>0?n(r):A&&A()},s[Ue("0x10d","jNVA")](t,this["onEvents"][t+"_"+r])}},{key:"rmOn",value:function(e,t,n){if(!this[Ue("0x10f","uQI1")][e+"_"+t])throw"事件监听"+e+"_"+t+Ue("0x269","j^qw");n=n||{};var r=n[Ue("0x239","EA(w")]?n["dom"]:this[Ue("0x254","A$)h")];r[Ue("0x17d","0%f)")](e,this[Ue("0x16","1JM9")][e+"_"+t]),this[Ue("0xaf","B)yN")][e+"_"+t]=null}},{key:l,value:function(e,t){for(var n=new(o[Ue("0x272","j4jY")])(e),r={},i=0;i<t[Ue("0x161","mX(X")];i++){var A=t[i];r[A[Ue("0x2c1","xq7D")]]=n[Ue("0x292","$4DQ")](A)}return{mixer:n,actions:r}}},{key:d,value:function(){var e=this[Ue("0x3f","PP(p")];e["windowResize"]&&this["onWindowResize"]()}},{key:g,value:function(e,t){var n=this;t=t||{};var r=t[Ue("0x141","1nu@")]||this[Ue("0x236","[p%P")],i=t[Ue("0x1ec","NME*")]||this["renderer"],A=t[Ue("0x50","A$)h")]||this[Ue("0x163","[p%P")];this[Ue("0x297","Ljr*")]=new B(i);var s=new F(r,A);return this[Ue("0x14c","i(L&")][Ue("0x2a2","Eg![")](s),this[Ue("0x24a","A3Y!")]=new v(_),this[Ue("0x179","2G4^")]["uniforms"][Ue("0x2a3","ZW0S")][Ue("0x18b","QYI9")][Ue("0xc0","CyYV")](1/this[Ue("0x1af","$4DQ")][Ue("0x5c","#TY@")],1/this[Ue("0x1c4","Nd)&")][Ue("0x1c0","6FlV")]),this[Ue("0xfb","DhUf")][Ue("0x20f","1JM9")](this[Ue("0x180","GA!7")]),this[Ue("0xf6","c35T")][Ue("0x25f","4fFW")][Ue("0x16e","1Vkl")]((function(e){e===Ue("0x224","n4m9")?(n["outlinePass"]=new C(new o["Vector2"](n[Ue("0x1b5","jNVA")]["offsetWidth"],n[Ue("0x1c4","Nd)&")]["offsetHeight"]),r,A),n[Ue("0xd0","fLXA")]["addPass"](n[Ue("0x43","PP(p")]),n[Ue("0x110","on40")]["edgeStrength"]=5,n[Ue("0x212","#TY@")][Ue("0x252","D83N")]=.5,n[Ue("0x281","1JM9")][Ue("0x280","Ym]W")]=1,n["outlinePass"]["pulsePeriod"]=2,n[Ue("0x240","EA(w")][Ue("0x265","sdC]")]=!1,n["outlinePass"][Ue("0x210","on40")][Ue("0x2ca","Ljr*")](Ue("0x1a8","PP(p")),n["outlinePass"][Ue("0x2a7","RPS(")]["set"](Ue("0x25d","o[fH"))):"UnrealBloomPass"===e&&(i["toneMapping"]=o[Ue("0x2c6","c35T")],n[Ue("0x1d9","GA!7")]=new E(new o["Vector2"](n[Ue("0x223","sijT")][Ue("0x25b","1Vkl")],n[Ue("0x68","D83N")][Ue("0x1a6","4fFW")]),1.5,.4,.85),n[Ue("0x2c0","A$)h")][Ue("0x18e","iLes")](n[Ue("0x1c9","fLXA")]),n[Ue("0xca","RPS(")][Ue("0xc7","ZIU)")]=!0,i[Ue("0x142","ZW0S")]=1,n[Ue("0x238","Zwx$")][Ue("0x12e","ZW0S")]=0,n[Ue("0x29","ZIU)")][Ue("0x248","[p%P")]=1.5,n[Ue("0xac","#TY@")][Ue("0x73","i(L&")]=0)})),e&&e(),this[Ue("0xb3","Eg![")]}},{key:w,value:function(e,t){t=t||{};var n=t["scene"]||this[Ue("0x2a8","QYI9")],r=t["renderer"]||this["renderer"],i=t[Ue("0x76","j^qw")]||this[Ue("0x116","j4jY")],A=t["render"]||!1,s=t["composer"]||new B(r);if(A){var a=new F(n,i);s["addPass"](a)}var c=new C(new(o[Ue("0x1d7","n4m9")])(this[Ue("0x191","n4m9")][Ue("0x2f","B)yN")],this["container"][Ue("0x16f","sijT")]),n,i);return s[Ue("0x206","6FlV")](c),c[Ue("0x24b","Ym]W")]=5,c[Ue("0x1ef","DhUf")]=.5,c[Ue("0x237","CyYV")]=1,c["pulsePeriod"]=2,c[Ue("0x15e","Zwx$")]=!1,c[Ue("0xef","ZIU)")]["set"](Ue("0x74","EA(w")),c[Ue("0x2a1","c35T")][Ue("0x6","#TY@")](Ue("0x233","Ym]W")),e&&e(),{composer:s,outlinePass:c}}},{key:x,value:function(e,t){t=t||{};var n=t["scene"]||this[Ue("0xc2","c35T")],r=t[Ue("0x16c","Zwx$")]||this[Ue("0x27d","1JM9")],i=t["camera"]||this[Ue("0x1a4","ZIU)")],A=t[Ue("0x122","1JM9")]||!1;r[Ue("0x25a","[p%P")]=o[Ue("0x184","NME*")];var s=t[Ue("0x2d","jNVA")]||new B(r);if(A){var a=new F(n,i);s[Ue("0x28c","fLXA")](a)}var c=new E(new(o[Ue("0xa","IQ5S")])(this[Ue("0x1db","6FlV")]["offsetWidth"],this["container"][Ue("0x71","c35T")]),1.5,.4,.85);return s[Ue("0x214","#TY@")](c),c[Ue("0x22c","M0QK")]=!1,r[Ue("0x2d2","Hjzq")]=1,c[Ue("0x77","QYI9")]=0,c["strength"]=1.5,c[Ue("0x282","$4DQ")]=0,e&&e(),{composer:s,unrealBloomPass:c}}},{key:y,value:function(){var e=this;this["sky"]=new m,this[Ue("0x27b","Eg![")][Ue("0xc3","mX(X")][Ue("0x276","6FlV")](45e4),this[Ue("0x2ab","i(L&")]["add"](this["sky"]),this[Ue("0x1d","D83N")]=new(o[Ue("0x0","j4jY")])(new(o[Ue("0xa5","1nu@")])(2e4,16,8),new(o[Ue("0x105","sdC]")])({color:16777215})),this[Ue("0x137","j4jY")][Ue("0xa9","0%f)")]["y"]=-7e5,this["sunSphere"][Ue("0xe5","CyYV")]=!1,this[Ue("0x1b9","o[fH")][Ue("0x21c","E8lw")](this[Ue("0x249","Ljr*")]);var t=4e5,n=e[Ue("0x22f","ZIU)")]["material"]["uniforms"];n[Ue("0x291","Nd)&")]["value"]=10,n[Ue("0x202","j4jY")][Ue("0x134","Eg![")]=2,n[Ue("0x268","$4DQ")][Ue("0x178","ZIU)")]=.005,n[Ue("0xa8","1nu@")][Ue("0x242","n4m9")]=.8,n[Ue("0x1cc","D83N")]={value:1};var r=Math["PI"]*(.49-.5),i=2*Math["PI"]*-.25;e[Ue("0x188","B)yN")][Ue("0x44","A3Y!")]["x"]=t*Math[Ue("0x1ae","c35T")](i),e[Ue("0x298","jNVA")][Ue("0x177","o[fH")]["y"]=t*Math[Ue("0x255","DhUf")](i)*Math[Ue("0x1de","B)yN")](r),e[Ue("0x258","i(L&")][Ue("0x1fe","i(L&")]["z"]=t*Math[Ue("0x13b","A3Y!")](i)*Math[Ue("0x216","$4DQ")](r),e[Ue("0x2b9","EA(w")][Ue("0x194","j^qw")]=!1,n[Ue("0x124","DhUf")][Ue("0x1","on40")]["copy"](e[Ue("0x67","Hjzq")][Ue("0x1cf","$4DQ")])}},{key:b,value:function(e){var t=this;this[Ue("0x6c","2G4^")][Ue("0xdb","uQI1")][Ue("0x1be","QYI9")]((function(e){e===Ue("0xa7","Nd)&")?(t[Ue("0xe0","6FlV")]=new(o[Ue("0x1c8","RPS(")])(t["params"][Ue("0x138","ZW0S")]||null),t[Ue("0x32","j4jY")]["setSize"](t[Ue("0x191","n4m9")][Ue("0x1d3","Ym]W")],t[Ue("0x2ac","4fFW")][Ue("0x243","7O)1")]),t[Ue("0x19f","j^qw")][Ue("0xed","c35T")](t[Ue("0x63","EA(w")][Ue("0x120","mX(X")])):e===Ue("0xf0","QYI9")?(t[Ue("0xcc","A$)h")]=new a,t[Ue("0x208","Eg![")][Ue("0x2da","on40")]["style"][Ue("0x17e","Nd)&")]=Ue("0x2c3","ZIU)"),t["CSS2DRenderer"][Ue("0x69","iLes")][Ue("0x94","uQI1")]["top"]=0,t[Ue("0x14a","IQ5S")][Ue("0x11e","[p%P")](t["container"][Ue("0xba","ZIU)")],t[Ue("0x1da","j(er")][Ue("0xe6","0%f)")]),t["container"][Ue("0x52","1nu@")](t[Ue("0x156","iLes")][Ue("0xaa","Hjzq")])):e===Ue("0x8d","$4DQ")&&(t[Ue("0x2cc","Zwx$")]=new u,t[Ue("0x72","Ym]W")]["domElement"][Ue("0x10e","c35T")][Ue("0x278","uQI1")]=Ue("0x1f3","on40"),t[Ue("0xd5","CyYV")][Ue("0x10","4fFW")][Ue("0x2d1","RPS(")]["top"]=0,t[Ue("0x1ed","c35T")]["setSize"](t[Ue("0x27c","PP(p")][Ue("0x25b","1Vkl")],t[Ue("0x68","D83N")][Ue("0x160","1JM9")]),t["container"][Ue("0x1bc","E8lw")](t[Ue("0x3","1Vkl")][Ue("0xa2","Eg![")]))}))}},{key:M,value:function(e){var t=this,n=this;return this[Ue("0x18a","D83N")]["controls"]["forEach"]((function(e){if(e===Ue("0x15c","Zwx$")){var r=new h(t[Ue("0xb0","RPS(")],t["container"]);n[Ue("0x1cb","1JM9")]=r,r[Ue("0x148","on40")]=!0,r[Ue("0x14","0%f)")]=!0,r[Ue("0x9f","A$)h")]=!0,r[Ue("0x172","Ym]W")]=1,r["minDistance"]=1}else if(e===Ue("0x1a","Ym]W")){var i=new p(t[Ue("0x113","7O)1")]);n[Ue("0x7a","A3Y!")]=i,i[Ue("0x17","RPS(")]=!0,i[Ue("0x98","A3Y!")]=.02,i[Ue("0x2e0","M0QK")]=10,i[Ue("0x23e","DhUf")]=!1,i["constrainVertical"]=!0,i[Ue("0x1b3","n4m9")]=1,i[Ue("0x26a","i(L&")]=2,i[Ue("0x20c","Zwx$")]=0,i[Ue("0x25c","ZIU)")]=0}else if(e===Ue("0xf9","sijT")){var A=new f(t[Ue("0xae","uQI1")],t[Ue("0x11a","CyYV")]);n[Ue("0x205","iLes")]=A,t[Ue("0xec","mX(X")][Ue("0xf","j4jY")](A[Ue("0x123","uQI1")]())}else if(e===Ue("0x9a","QYI9")){var o=new Me(t[Ue("0x2a6","QYI9")],t[Ue("0x27c","PP(p")]);n[Ue("0x1ac","1nu@")]=o}else if(e===Ue("0x1c2","A$)h")){var s=new _e(t[Ue("0x1e2","Zwx$")],n["orbitControls"]);n[Ue("0x23c","Hjzq")]=s}})),e&&e(),this[Ue("0x1b2","1nu@")]}},{key:Q,value:function(e,t){t=t||{};var n=t["scene"]?t[Ue("0x23a","fLXA")]:this[Ue("0xde","PP(p")],r=new(o[Ue("0x131","mX(X")])(Ue("0x285","6FlV"),1);return n[Ue("0x7b","GA!7")](r),e&&e(),r}},{key:L,value:function(e){var t=this;window[Ue("0x2a9","n4m9")](Ue("0x15a","uQI1"),(function(n){var r=t[Ue("0x12d","ZIU)")]["offsetWidth"],i=t[Ue("0x1d0","Ym]W")]["offsetHeight"];t[Ue("0x1e2","Zwx$")][Ue("0x20e","B)yN")]=r/i,t[Ue("0x232","Ym]W")][Ue("0xf5","Ym]W")](),t[Ue("0x12b","DhUf")][Ue("0x2dd","uQI1")](r,i),t["methods"][Ue("0x14a","IQ5S")]&&t[Ue("0xf0","QYI9")][Ue("0x21b","E8lw")](r,i),t[Ue("0x2b","$4DQ")][Ue("0x29a","#TY@")]&&t[Ue("0x55","jNVA")][Ue("0x2d9","NME*")](r,i),t["composer"]&&(t[Ue("0xdc","Zwx$")]["setSize"](r,i),t["effectFXAA"][Ue("0x17a","4fFW")]["resolution"][Ue("0x1f5","0%f)")][Ue("0x14e","DhUf")](1/r,1/i)),e&&e()}),!1)}},{key:D,value:function(e){var t=this;requestAnimationFrame((function(){t["animate"](e)})),t[Ue("0x96","fLXA")](),t["methods"][Ue("0x8c","uQI1")]&&xe["a"][Ue("0x28f","D83N")](),t[Ue("0x49","A3Y!")][Ue("0x23b","sdC]")]&&(t[Ue("0x19e","EA(w")]&&!0===t["orbitControls"][Ue("0x266","fLXA")]&&t[Ue("0x1e3","iLes")][Ue("0x102","Hjzq")](),t["firstPersonControls"]&&!0===t["firstPersonControls"]["enabled"]&&t[Ue("0x1a0","M0QK")][Ue("0x257","EA(w")](t[Ue("0x26b","M0QK")][Ue("0x245","Ym]W")]()),t[Ue("0x1fc","#TY@")]&&t["pointerLockControls"][Ue("0x226","Hjzq")],t[Ue("0x9a","QYI9")]&&!0===t[Ue("0x36","j(er")]["enabled"]&&t[Ue("0x264","ZIU)")][Ue("0x1e4","xq7D")](),t[Ue("0x1b4","NME*")]&&!0===t[Ue("0x3c","fLXA")][Ue("0x2aa","ZIU)")]&&t["thirdPerson"][Ue("0x13f","1nu@")]()),e&&e()}},{key:I,value:function(e){this["methods"][Ue("0x13a","Ym]W")]&&(this[Ue("0xcb","ZW0S")]&&this[Ue("0x208","Eg![")][Ue("0x1c5","NME*")](this[Ue("0x135","2G4^")],this[Ue("0x76","j^qw")]),this["CSS3DRenderer"]&&this[Ue("0x2e","DhUf")][Ue("0x244","o[fH")](this[Ue("0x62","#TY@")],this[Ue("0x26d","xq7D")]),this[Ue("0x83","o[fH")]&&this[Ue("0x2ce","2G4^")][Ue("0x1c5","NME*")](this["scene"],this[Ue("0x2c7","iLes")])),this[Ue("0x33","IQ5S")]&&this[Ue("0x2b0","Hjzq")][Ue("0x17b","1Vkl")](),e&&e()}},{key:"getModelTier",value:function(e){var t=this;if("Group"===e[Ue("0x220","GA!7")]){var n=[];return e[Ue("0x1a5","RPS(")]["forEach"]((function(e){n[Ue("0x196","sijT")](t[Ue("0x5a","1nu@")](e))})),{name:e[Ue("0x1e6","fLXA")],type:e[Ue("0x59","sdC]")],ID:e["ID"],children:n}}if(e[Ue("0x106","6FlV")]===Ue("0x250","E8lw"))return{name:e[Ue("0x12","1JM9")],type:e["type"],ID:e["ID"]}}},{key:O,value:function(e,t){var n=this;return t=t||Ue("0x296","A$)h"),t===Ue("0x64","D83N")&&e["children"]?e[Ue("0x10c","c35T")][Ue("0x1b0","jNVA")]((function(t){t[Ue("0x2bc","ZIU)")]=e,n[Ue("0x182","7O)1")](t,Ue("0x3e","RPS("))})):"list"===t&&e["forEach"]((function(e){n["addParentToTree"](e,Ue("0x86","4fFW"))})),e}},{key:P,value:function(e,t){t||(t={}),t[Ue("0x2cd","CyYV")]=t["fontSize"]||12;var n=t[Ue("0x21a","DhUf")]||"",r=t[Ue("0x1b9","o[fH")]||this["scene"],i=t[Ue("0xb8","fLXA")]||[100,100,1],A=t[Ue("0x7d","sijT")]||[0,0,0],s=this[Ue("0x3d","2G4^")][Ue("0x29b","j^qw")]>this[Ue("0xb5","mX(X")][Ue("0x1a6","4fFW")]?this[Ue("0x23f","o[fH")][Ue("0x11","GA!7")]/180:this[Ue("0x1db","6FlV")][Ue("0x5d","Nd)&")]/360,a=document[Ue("0xc6","iLes")](Ue("0x8f","i(L&"));a[Ue("0x159","#TY@")]=e[Ue("0x2a0","RPS(")]*(t[Ue("0x19c","uQI1")]||18)*s,a[Ue("0xd8","A3Y!")]=t[Ue("0x246","6FlV")]*s;var c=a[Ue("0x11d","QYI9")]("2d");c["fillStyle"]=t[Ue("0x231","j(er")]||Ue("0x2a","6FlV"),c[Ue("0x262","QYI9")](0,0,a[Ue("0xd7","c35T")],a[Ue("0x129","sijT")]),c[Ue("0x1c","uQI1")]=a[Ue("0xc","#TY@")]+Ue("0x25e","7O)1"),c[Ue("0x267","CyYV")]=Ue("0xc8","4fFW"),c["textBaseline"]=Ue("0x130","B)yN"),c[Ue("0xdd","iLes")]=t[Ue("0x26e","Nd)&")],c["fillText"](e,a[Ue("0xbc","1nu@")]/2,a["height"]/2);var l=new(o[Ue("0x6a","sdC]")])(a);l[Ue("0xa3","CyYV")]=!0;var u=new(o[Ue("0x22a","j4jY")])(new o["SpriteMaterial"]({map:l}));return u["scale"][Ue("0x176","A$)h")](t["fontSize"]/s*e[Ue("0x155","1nu@")],t[Ue("0x207","4fFW")]/s,1),u[Ue("0x29c","1nu@")]=n,r[Ue("0xfe","IQ5S")](u),u[Ue("0xea","j^qw")][Ue("0xc0","CyYV")](i[0],i[1],i[2]),u[Ue("0x65","on40")]["set"](A[0],A[1],A[2]),u}},{key:H,value:function(e,t,n){n||(n={}),n[Ue("0x246","6FlV")]=n["fontSize"]||15,n["width"]=n["width"]||200;var r=n["name"]||"",i=n[Ue("0x89","iLes")]||this[Ue("0x2c8","ZIU)")],A=n[Ue("0x1b","1nu@")]||[100,100,1],s=n[Ue("0x7f","xq7D")]||[0,0,0],a=1.2,c=document[Ue("0x144","n4m9")]("canvas"),l=c[Ue("0xb7","Ljr*")]("2d");c[Ue("0x218","j(er")]=n[Ue("0xbc","1nu@")];var u=n[Ue("0x6f","Ljr*")]*a;l["font"]=u+Ue("0x204","on40");var h=this["breakLinesForCanvas"](t,l,n[Ue("0x21d","7O)1")]);c[Ue("0x108","0%f)")]=2*n[Ue("0x22d","iLes")]+(h[Ue("0x25","j(er")]+1)*u,l[Ue("0x192","7O)1")]=n[Ue("0xe9","mX(X")]||Ue("0x1fb","A3Y!"),l[Ue("0xdf","xq7D")](0,0,c[Ue("0x2db","iLes")],c["height"]),l[Ue("0x5f","0%f)")]=n[Ue("0x1e","A$)h")]||Ue("0x1dd","1nu@"),l["font"]=n[Ue("0xee","Eg![")]+3+Ue("0x19","6FlV"),l[Ue("0x27","uQI1")]=Ue("0x13d","1Vkl"),l[Ue("0x162","xq7D")](e,10,u),l[Ue("0x7c","1JM9")]=n[Ue("0x1f1","B)yN")]+Ue("0x211","DhUf"),h[Ue("0x185","uQI1")]((function(e,t){l[Ue("0x4c","[p%P")](e,20,u*(t+1)+2*n[Ue("0x299","[p%P")])}));var d=new o["Texture"](c);d[Ue("0x271","IQ5S")]=!0;var p=new(o[Ue("0xc9","A$)h")])(new o["SpriteMaterial"]({map:d}));return p[Ue("0x1d4","Ljr*")]=r,i[Ue("0xa0","Zwx$")](p),p[Ue("0x23","DhUf")][Ue("0x2df","RPS(")](A[0],A[1],A[2]),p["position"][Ue("0x4e","7O)1")](s[0],s[1],s[2]),p}},{key:R,value:function(e,t,n,r){r||(r={});var i=r[Ue("0x26c","uQI1")]||"",A=r[Ue("0x2c8","ZIU)")]?r["scene"]:this[Ue("0x1c1","A3Y!")],s=r[Ue("0xd","uQI1")]||[100,100,1],a=r["position"]||[0,0,0],c=r[Ue("0x15d","M0QK")]?r[Ue("0x51","D83N")]:document[Ue("0x293","xq7D")],l=document[Ue("0x37","GA!7")](Ue("0x11f","Ym]W"));l[Ue("0x1eb","fLXA")]=Ue("0xab","1nu@"),c[Ue("0x5b","4fFW")](l);var u=document[Ue("0x104","E8lw")](Ue("0x27e","6FlV"));u[Ue("0xb6","c35T")]="spriteLabel-title-box",l[Ue("0x8a","n4m9")](u);var h=document[Ue("0x61","j^qw")]("span");h[Ue("0x260","RPS(")]=Ue("0xbb","ZIU)"),h[Ue("0x152","sdC]")]=e,u[Ue("0x1ee","NME*")](h);var d=document[Ue("0x15","fLXA")](Ue("0x24","Zwx$"));d[Ue("0x9b","4fFW")]=Ue("0x70","2G4^"),l[Ue("0x20","Nd)&")](d);var p=document[Ue("0x28b","#TY@")]("span");p[Ue("0x173","2G4^")]="spriteLabel-content-text",p[Ue("0x56","on40")]=t,d[Ue("0x1d2","M0QK")](p),Be()(l,{})[Ue("0x9c","i(L&")]((function(e){var t=new(o[Ue("0x19d","A3Y!")])(e);t[Ue("0xda","ZW0S")]=!0;var r=new o["Sprite"](new(o[Ue("0xd4","mX(X")])({map:t}));r["name"]=i,A[Ue("0x2d5","CyYV")](r),r[Ue("0x1a3","i(L&")]["set"](s[0],s[1],s[2]),r[Ue("0x1c6","ZIU)")][Ue("0x176","A$)h")](a[0],a[1],a[2]),l[Ue("0x1e9","sijT")]["removeChild"](l),n&&n(r)}))}},{key:N,value:function(e,t){var n=document[Ue("0x61","j^qw")](Ue("0x2b7","on40"));n[Ue("0x133","EA(w")]=Ue("0x4a","6FlV");var r=document[Ue("0x150","Hjzq")](Ue("0x18c","Eg!["));r[Ue("0x190","uQI1")]=Ue("0x2af","RPS("),n[Ue("0x1d2","M0QK")](r);var i=document[Ue("0xe7","jNVA")](Ue("0x222","on40"));i[Ue("0x97","Hjzq")]=Ue("0x99","jNVA"),i[Ue("0x2d4","PP(p")]=e,r[Ue("0x1d2","M0QK")](i);var A=document[Ue("0x1df","IQ5S")](Ue("0x1bb","1JM9"));A[Ue("0xcf","sdC]")]=Ue("0x187","D83N"),n[Ue("0xed","c35T")](A);var o=document[Ue("0x2be","1nu@")](Ue("0x1f9","Nd)&"));o[Ue("0x1f","IQ5S")]=Ue("0x4d","jNVA"),o[Ue("0x46","Eg![")]=t,A[Ue("0x277","0%f)")](o);var a=new s(n);return this["scene"][Ue("0x1b8","i(L&")](a),a[Ue("0x1aa","#TY@")][Ue("0x2ae","iLes")](.1,.1,.1),a}},{key:"createShow3DLabel",value:function(e,t){var n=document[Ue("0x12f","RPS(")]("div");n[Ue("0x173","2G4^")]=Ue("0x261","2G4^"),n[Ue("0x21f","7O)1")]["backgroundColor"]=Ue("0xcd","on40")+(.5*Math["random"]()+.25)+")";var r=document["createElement"](Ue("0x1fd","$4DQ"));r["className"]="label3d-title-box",n["appendChild"](r);var i=document[Ue("0xbf","Ym]W")](Ue("0x222","on40"));i[Ue("0x8b","o[fH")]=Ue("0x1cd","6FlV"),i[Ue("0x1d8","0%f)")]=e,r[Ue("0x1ee","NME*")](i);var A=document["createElement"](Ue("0x1dc","M0QK"));A[Ue("0x215","Ljr*")]=Ue("0x2b6","GA!7"),n[Ue("0x20","Nd)&")](A);var o=document["createElement"](Ue("0x273","E8lw"));o[Ue("0x1b7","[p%P")]="label3d-content-text",o[Ue("0x1c7","uQI1")]=t,A["appendChild"](o);var s=new c(n);return this[Ue("0xec","mX(X")][Ue("0x39","EA(w")](s),s[Ue("0x14d","o[fH")]["set"](.1,.1,.1),s}},{key:k,value:function(e){var t;if(e instanceof o["Vector3"])t=e;else{if(!(e instanceof o[Ue("0x6e","$4DQ")]))throw Ue("0x230","Eg![");t=new(o[Ue("0x11c","QYI9")])(e[Ue("0x288","GA!7")]["x"],e[Ue("0xc4","A$)h")]["y"],e[Ue("0x29d","sdC]")]["z"])}var n=t[Ue("0x164","fLXA")](this[Ue("0x47","4fFW")]),r=this[Ue("0x229","fLXA")]["getSize"](new(o[Ue("0xa4","[p%P")]))[Ue("0x284","EA(w")]/2,i=this[Ue("0x22b","sijT")][Ue("0x270","i(L&")](new(o[Ue("0x2d7","j^qw")]))[Ue("0x38","ZW0S")]/2,A=Math[Ue("0x2dc","uQI1")](n["x"]*r+r),s=Math["round"](-n["y"]*i+i);return{x:A,y:s}}},{key:K,value:function(e,t,n){e["preventDefault"]();var r=new(o[Ue("0x247","0%f)")]),i=new(o[Ue("0x153","RPS(")]),A=[];try{r["x"]=((e["clientX"]||(e[Ue("0x1a2","xq7D")][0]?e[Ue("0x95","QYI9")][0]["pageX"]:e[Ue("0x2a4","Ljr*")][0][Ue("0x2bf","6FlV")]))-this[Ue("0x1f8","RPS(")][Ue("0x295","j4jY")]()[Ue("0x30","n4m9")])/this["container"][Ue("0x5","ZW0S")]*2-1,r["y"]=-((e[Ue("0xb1","A3Y!")]||(e[Ue("0xeb","Zwx$")][0]?e["touches"][0][Ue("0x28d","jNVA")]:e[Ue("0x1bd","1nu@")][0][Ue("0x14f","GA!7")]))-this["container"][Ue("0x203","A3Y!")]()["top"])/this[Ue("0x1f4","j4jY")][Ue("0x1d5","A$)h")]*2+1,i["setFromCamera"](r,this[Ue("0x145","on40")]),A=i[Ue("0x117","Hjzq")]((t||this[Ue("0xfd","GA!7")])[Ue("0x13","IQ5S")],n)}catch(s){}return{raycaster:i,objectList:A}}},{key:G,value:function(e){var t=this,n=this[Ue("0x109","uQI1")];e[Ue("0x17e","Nd)&")]=e[Ue("0x278","uQI1")]||[],e[Ue("0x2","PP(p")]=e[Ue("0x2c4","NME*")]||[],e["duration"]=e["duration"]||1e3,e[Ue("0xe8","A$)h")]=e[Ue("0x201","0%f)")]||xe["a"][Ue("0x154","c35T")][Ue("0x92","$4DQ")][Ue("0x286","Hjzq")],xe["a"][Ue("0x193","mX(X")]();var r=this["camera"][Ue("0x4f","jNVA")],i=n[Ue("0xe","QYI9")],A=new(xe["a"][Ue("0x183","Zwx$")])({x1:r["x"],y1:r["y"],z1:r["z"],x2:i["x"],y2:i["y"],z2:i["z"]})["to"]({x1:e[Ue("0x195","E8lw")][0],y1:e[Ue("0x127","[p%P")][1],z1:e["position"][2],x2:e[Ue("0xc1","E8lw")][0],y2:e[Ue("0x167","1JM9")][1],z2:e[Ue("0xd2","#TY@")][2]},e[Ue("0x16d","mX(X")])[Ue("0x19a","EA(w")](xe["a"][Ue("0x9d","DhUf")][Ue("0x125","4fFW")][Ue("0xfc","2G4^")]);return A[Ue("0x114","sijT")]((function(){n[Ue("0x2c9","2G4^")]=!1,t[Ue("0x107","sijT")][Ue("0x2ba","1nu@")]["set"](A[Ue("0xb","NME*")]["x1"],A[Ue("0xd1","RPS(")]["y1"],A[Ue("0x2b1","i(L&")]["z1"]),n[Ue("0xb2","Ljr*")][Ue("0xf7","fLXA")](A[Ue("0x221","#TY@")]["x2"],A["_object"]["y2"],A[Ue("0x23d","Ym]W")]["z2"]),n["update"](),e[Ue("0x2d0","A$)h")]instanceof Function&&e[Ue("0x90","j^qw")](A)})),A[Ue("0x66","jNVA")]((function(){n[Ue("0x174","Ljr*")]=!1,e[Ue("0x1f0","PP(p")]instanceof Function&&e[Ue("0xad","c35T")]()})),A["onComplete"]((function(){n[Ue("0x213","c35T")]=!0,e[Ue("0x34","IQ5S")]instanceof Function&&e[Ue("0x10a","GA!7")]()})),A[Ue("0x15f","jNVA")]((function(){return e[Ue("0x12a","Nd)&")]instanceof Function?e["stop"]():""})),A[Ue("0x42","QYI9")](),xe["a"][Ue("0x2cb","D83N")](A),A}},{key:V,value:function(e,t){t=t||{};var n=t[Ue("0x227","1Vkl")]||{position:[100,100,100],controls:[0,0,0],duration:3e3,start:function(){},update:function(){},done:function(){},stop:function(){}},r=t[Ue("0x283","CyYV")]||new o["Vector3"](1,0,0),i=t[Ue("0x28","Nd)&")]||3,A=this[Ue("0x263","sijT")](e);n["controls"]=[A["x"],A["y"],A["z"]];var s=new(o[Ue("0x118","o[fH")]),a=s[Ue("0x1ba","1nu@")](e)[Ue("0xa1","uQI1")]["distanceTo"](s[Ue("0x103","4fFW")](e)[Ue("0x2c","E8lw")])/2;n[Ue("0x217","DhUf")]=[r["x"]*a*i+A["x"],r["y"]*a*i+A["y"],r["z"]*a*i+A["z"]],this[Ue("0x166","RPS(")](n)}},{key:z,value:function(e,t){t=t||this[Ue("0x2b5","CyYV")],t[Ue("0x11b","fLXA")](!0);var n=new(o[Ue("0x200","CyYV")]);return e[Ue("0x8e","fLXA")](n),n}},{key:j,value:function(e,t,n){n=n||{};var r=n[Ue("0x135","2G4^")]||this["scene"];return this[Ue("0x111","A$)h")](e,r)[Ue("0xbe","o[fH")](this[Ue("0x263","sijT")](t,r))}},{key:X,value:function(e){var t=this,n=new o["Mesh"](new o["CircleGeometry"](2.5,50),new(o[Ue("0x2c5","on40")])({color:Ue("0x21","NME*"),transparent:!0,opacity:.2,side:o[Ue("0x2cf","7O)1")]}));n[Ue("0x58","GA!7")]=!1,n["rotateX"](-.5*Math["PI"]),n[Ue("0x12c","7O)1")]=Ue("0x234","[p%P"),this[Ue("0x219","j^qw")][Ue("0x139","sijT")](n);var r=(new(o[Ue("0x198","sdC]")]))[Ue("0x40","DhUf")](Ue("0xf4","n4m9"));r[Ue("0x251","A3Y!")](Ue("0x41","Ym]W"),(function(e){n[Ue("0x22e","xq7D")]=new(o[Ue("0x27a","A3Y!")])({map:e,transparent:!0,opacity:.9,side:o[Ue("0x10b","DhUf")],depthTest:!1});var t=new(o[Ue("0x1d6","M0QK")])(new(o[Ue("0x1ad","$4DQ")])(2.5,50),n[Ue("0x2c2","6FlV")]);n[Ue("0x2b4","PP(p")](t)})),this[Ue("0x169","CyYV")]=n,this[Ue("0x151","M0QK")](e,Ue("0x287","on40"),(function(e){t[Ue("0xc5","RPS(")][Ue("0x17e","Nd)&")][Ue("0xe3","Eg![")](e[0]["point"]),t[Ue("0x181","B)yN")][Ue("0x26f","[p%P")]=!0}),"mousemove_destination",null,(function(){t[Ue("0x169","CyYV")]["visible"]=!1})),t[Ue("0x279","Nd)&")](n,"click",(function(e){var n=t[Ue("0x93","0%f)")]["position"]["x"],r=t[Ue("0xf2","1Vkl")][Ue("0x256","c35T")]["z"],i=t[Ue("0x5e","Ljr*")][Ue("0x158","D83N")]["y"],A=t[Ue("0x28a","Hjzq")]["position"]["clone"]()[Ue("0x1fa","4fFW")](t[Ue("0x209","#TY@")]["target"][Ue("0x13c","uQI1")]());t["flyTo"]({position:[n,i,r],controls:[n-A["x"],i-A["y"],r-A["z"]],duration:500,done:function(){}})}),Ue("0x53","fLXA"))}},{key:W,value:function(){return null!=navigator[Ue("0x189","xq7D")][Ue("0x2b8","CyYV")]()[Ue("0x2d6","sijT")](/(ipod|ipad|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i)}},{key:"isNetwork",value:function(){return!!navigator[Ue("0x1b1","Zwx$")]}},{key:Y,value:function(){return this[Ue("0x147","uQI1")]()?navigator[Ue("0x21e","j^qw")][Ue("0x16a","c35T")]:null}},{key:q,value:function(e,t,n){var r=0,i=e["length"]-1;while(r<=i){var A=Math["floor"]((r+i)/2),o=n["measureText"](e[Ue("0x7","sdC]")](0,A))[Ue("0x1e8","QYI9")],s=n[Ue("0x112","1Vkl")](e[Ue("0x35","Zwx$")](0,A+1))["width"];if(o<=t&&s>t)return A;o<t?r=A+1:i=A-1}return-1}},{key:"breakLinesForCanvas",value:function(e,t,n){var r=[],i=0;while(-1!==(i=this[Ue("0x132","RPS(")](e,n,t)))r[Ue("0x146","j^qw")](e["substr"](0,i)),e=e[Ue("0x259","#TY@")](i);return e&&r[Ue("0x3b","GA!7")](e),r}},{key:J,value:function(){console[Ue("0x235","Ljr*")]([Ue("0x18f","Eg!["),Ue("0x1e0","o[fH"),Ue("0x175","ZIU)"),Ue("0xd3","on40"),Ue("0x17f","NME*")][Ue("0x24d","DhUf")]("\n")[Ue("0x9e","Eg![")](),Ue("0x1f7","uQI1"),Ue("0x1a9","uQI1"),Ue("0x48","NME*"),Ue("0x1ca","1Vkl"),Ue("0x1f2","j(er"))}}]),Z}(Ue("0x1ff","on40"),Ue("0x128","ZIU)"),Ue("0x274","n4m9"),Ue("0x126","EA(w"),Ue("0x241","iLes"),Ue("0x16b","2G4^"),Ue("0x2a5","j(er"),Ue("0x1e1","c35T"),Ue("0x9","A$)h"),Ue("0x27f","GA!7"),Ue("0x199","M0QK"),Ue("0x24e","D83N"),Ue("0xe1","j4jY"),Ue("0x7e","IQ5S"),Ue("0x1a7","PP(p"),Ue("0x1b6","on40"),Ue("0x13e","o[fH"),Ue("0x88","Zwx$"),Ue("0x119","c35T"),Ue("0x20a","jNVA"),Ue("0x14b","Ym]W"),Ue("0x2ad","IQ5S"),Ue("0xf3","j(er"),Ue("0xb4","Hjzq"),Ue("0x2bb","Zwx$"),Ue("0x1bf","7O)1"),Ue("0x18d","ZW0S"),Ue("0x115","EA(w"),Ue("0x31","1JM9"),Ue("0x1e5","c35T"),Ue("0x8","jNVA"),Ue("0x28e","#TY@"))},"79be":function(e,t){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={},i=0;i<66;i++)r[n.charAt(i)]=i;e.exports={itoc:n,ctoi:r}},"7aa2":function(e,t,n){var r=n("137b"),i=n("80cb");e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},"7b39":function(e,t,n){"use strict";var r=n("57ad"),i=n("ec0b"),A=n("7799"),o=n("8bc7"),s=n("2b51"),a=n("57f1"),c=n("bab3"),l=n("61d6"),u=n("5459"),h=n("be31"),d=n("7aa2"),p=n("6c4d");e.exports=function(e,t,n,f){var m=f?2:1,g=e.split("."),w=g[g.length-1],v=r.apply(null,g);if(v){var x=v.prototype;if(!p&&i(x,"cause")&&delete x.cause,!n)return v;var y=r("Error"),B=t((function(e,t){var n=l(f?t:e,void 0),r=f?new v(e):new v;return void 0!==n&&A(r,"message",n),d&&A(r,"stack",h(r.stack,2)),this&&o(x,this)&&c(r,this,B),arguments.length>m&&u(r,arguments[m]),r}));if(B.prototype=x,"Error"!==w&&(s?s(B,y):a(B,y,{name:!0})),a(B,v),!p)try{x.name!==w&&A(x,"name",w),x.constructor=B}catch(b){}return B}}},"7b53":function(e,t,n){"use strict";var r=n("434b").forEach,i=n("160a"),A=i("forEach");e.exports=A?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},8557:function(e,t,n){"use strict";var r=n("986c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"8cb5":function(e,t,n){"use strict";var r=n("add7"),i=n("f995").PROPER,A=n("0d5e"),o=n("986c"),s=n("8bc7"),a=n("9145"),c=n("137b"),l=n("8557"),u="toString",h=RegExp.prototype,d=h[u],p=r(l),f=c((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),m=i&&d.name!=u;(f||m)&&A(RegExp.prototype,u,(function(){var e=o(this),t=a(e.source),n=e.flags,r=a(void 0===n&&s(h,e)&&!("flags"in h)?p(e):n);return"/"+t+"/"+r}),{unsafe:!0})},9666:function(e,t,n){var r=n("137b"),i=n("71fe"),A=i.RegExp;e.exports=r((function(){var e=A(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},"9f5b3":function(e,t,n){"use strict";var r=n("6d92"),i=n("add7"),A=n("9145"),o=n("8557"),s=n("ef6c"),a=n("7792"),c=n("9927"),l=n("e132").get,u=n("9666"),h=n("570d"),d=a("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,f=p,m=i("".charAt),g=i("".indexOf),w=i("".replace),v=i("".slice),x=function(){var e=/a/,t=/b*/g;return r(p,e,"a"),r(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),y=s.BROKEN_CARET,B=void 0!==/()??/.exec("")[1],b=x||B||y||u||h;b&&(f=function(e){var t,n,i,s,a,u,h,b=this,C=l(b),M=A(e),E=C.raw;if(E)return E.lastIndex=b.lastIndex,t=r(f,E,M),b.lastIndex=E.lastIndex,t;var F=C.groups,_=y&&b.sticky,T=r(o,b),U=b.source,S=0,Q=M;if(_&&(T=w(T,"y",""),-1===g(T,"g")&&(T+="g"),Q=v(M,b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&"\n"!==m(M,b.lastIndex-1))&&(U="(?: "+U+")",Q=" "+Q,S++),n=new RegExp("^(?:"+U+")",T)),B&&(n=new RegExp("^"+U+"$(?!\\s)",T)),x&&(i=b.lastIndex),s=r(p,_?n:b,Q),_?s?(s.input=v(s.input,S),s[0]=v(s[0],S),s.index=b.lastIndex,b.lastIndex+=s[0].length):b.lastIndex=0:x&&s&&(b.lastIndex=b.global?s.index+s[0].length:i),B&&s&&s.length>1&&r(d,s[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(s[a]=void 0)})),s&&F)for(s.groups=u=c(null),a=0;a<F.length;a++)h=F[a],u[h[0]]=s[h[1]];return s}),e.exports=f},a0cb:function(e,t,n){var r=n("add7"),i=n("df65"),A=Math.floor,o=r("".charAt),s=r("".replace),a=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,u,h){var d=n+e.length,p=r.length,f=l;return void 0!==u&&(u=i(u),f=c),s(h,f,(function(i,s){var c;switch(o(s,0)){case"$":return"$";case"&":return e;case"`":return a(t,0,n);case"'":return a(t,d);case"<":c=u[a(s,1,-1)];break;default:var l=+s;if(0===l)return i;if(l>p){var h=A(l/10);return 0===h?i:h<=p?void 0===r[h-1]?o(s,1):r[h-1]+o(s,1):i}c=r[l-1]}return void 0===c?"":c}))}},af46:function(e,t,n){var r=n("71fe"),i=n("8497"),A=n("c90e"),o=n("7b53"),s=n("7799"),a=function(e){if(e&&e.forEach!==o)try{s(e,"forEach",o)}catch(t){e.forEach=o}};for(var c in i)i[c]&&a(r[c]&&r[c].prototype);a(A)},b47f:function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return A}));var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:A.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]];i&&!1===i.update(e)&&(i._isPlaying=!1,t||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var A=new i;A.Group=i,A._nextId=0,A.nextId=function(){return A._nextId++},"undefined"==typeof self&&"undefined"!=typeof e&&e.hrtime?A.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?A.now=self.performance.now.bind(self.performance):void 0!==Date.now?A.now=Date.now:A.now=function(){return(new Date).getTime()},A.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=A.Easing.Linear.None,this._interpolationFunction=A.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||A,this._id=A.nextId()},A.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?A.now()+parseFloat(e):e:A.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,r;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,r=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,A=this._valuesEnd[t];A instanceof Array?this._object[t]=this._interpolationFunction(A,r):("string"==typeof A&&(A="+"===A.charAt(0)||"-"===A.charAt(0)?i+parseFloat(A):parseFloat(A)),"number"==typeof A&&(this._object[t]=i+(A-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var o=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=o}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,a=this._chainedTweens.length;s<a;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},A.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-A.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*A.Easing.Bounce.In(2*e):.5*A.Easing.Bounce.Out(2*e-1)+.5}}},A.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=A.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],r):1<t?o(e[n],e[n-1],n-r):o(e[i],e[n<i+1?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,o=A.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*o(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=A.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):1<t?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=A.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;1<r;r--)n*=r;return e[t]=n}}(),CatmullRom:function(e,t,n,r,i){var A=.5*(n-e),o=.5*(r-t),s=i*i;return(2*t-2*n+A+o)*(i*s)+(-3*t+3*n-2*A-o)*s+A*i+t}}},function(e){"function"==typeof define&&n("f3fa")?define([],(function(){return A})):"object"==typeof exports?r.exports=A:void 0!==e&&(e.TWEEN=A)}(void 0)}).call(this,n("eef6"),n("2ffc")(e))},bab0:function(e,t,n){"use strict";var r=n("b5a9"),i=n("6d92"),A=n("add7"),o=n("eb21"),s=n("137b"),a=n("986c"),c=n("218a"),l=n("37d2"),u=n("e536"),h=n("9145"),d=n("0448"),p=n("c1fb"),f=n("08f0"),m=n("a0cb"),g=n("18d2"),w=n("4cd7"),v=w("replace"),x=Math.max,y=Math.min,B=A([].concat),b=A([].push),C=A("".indexOf),M=A("".slice),E=function(e){return void 0===e?e:String(e)},F=function(){return"$0"==="a".replace(/./,"$0")}(),_=function(){return!!/./[v]&&""===/./[v]("a","$0")}(),T=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));o("replace",(function(e,t,n){var A=_?"$":"$0";return[function(e,n){var r=d(this),A=void 0==e?void 0:f(e,v);return A?i(A,e,r,n):i(t,h(r),e,n)},function(e,i){var o=a(this),s=h(e);if("string"==typeof i&&-1===C(i,A)&&-1===C(i,"$<")){var d=n(t,o,s,i);if(d.done)return d.value}var f=c(i);f||(i=h(i));var w=o.global;if(w){var v=o.unicode;o.lastIndex=0}var F=[];while(1){var _=g(o,s);if(null===_)break;if(b(F,_),!w)break;var T=h(_[0]);""===T&&(o.lastIndex=p(s,u(o.lastIndex),v))}for(var U="",S=0,Q=0;Q<F.length;Q++){_=F[Q];for(var L=h(_[0]),D=x(y(l(_.index),s.length),0),I=[],O=1;O<_.length;O++)b(I,E(_[O]));var P=_.groups;if(f){var H=B([L],I,D,s);void 0!==P&&b(H,P);var R=h(r(i,void 0,H))}else R=m(L,s,D,I,P,i);D>=S&&(U+=M(s,S,D)+R,S=D+L.length)}return U+M(s,S)}]}),!T||!F||_)},bab3:function(e,t,n){var r=n("218a"),i=n("8c6b"),A=n("2b51");e.exports=function(e,t,n){var o,s;return A&&r(o=t.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&A(e,s),e}},be31:function(e,t,n){var r=n("add7"),i=r("".replace),A=function(e){return String(Error(e).stack)}("zxcasd"),o=/\n\s*at [^:]*:[^\n]*/,s=o.test(A);e.exports=function(e,t){if(s&&"string"==typeof e)while(t--)e=i(e,o,"");return e}},c1fb:function(e,t,n){"use strict";var r=n("13d0").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},c201:function(e,t,n){var r=n("d4ed");e.exports=function(e){try{if(r)return Function('return require("'+e+'")')()}catch(t){}}},c4ee:function(e,t,n){var r=n("71fe"),i=n("3db2"),A=n("1ef5"),o=n("8c6b"),s=n("4cd7"),a=s("species"),c=r.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,A(t)&&(t===c||i(t.prototype))?t=void 0:o(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?c:t}},cf33:function(e,t,n){"use strict";var r=n("7e70"),i=n("9f5b3");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},cf64:function(e,t,n){"use strict";n.r(t),n.d(t,"ACESFilmicToneMapping",(function(){return ne})),n.d(t,"AddEquation",(function(){return M})),n.d(t,"AddOperation",(function(){return J})),n.d(t,"AdditiveAnimationBlendMode",(function(){return jt})),n.d(t,"AdditiveBlending",(function(){return y})),n.d(t,"AlphaFormat",(function(){return Oe})),n.d(t,"AlwaysDepth",(function(){return K})),n.d(t,"AlwaysStencilFunc",(function(){return Cn})),n.d(t,"AmbientLight",(function(){return Pp})),n.d(t,"AmbientLightProbe",(function(){return sf})),n.d(t,"AnimationClip",(function(){return Od})),n.d(t,"AnimationLoader",(function(){return zd})),n.d(t,"AnimationMixer",(function(){return Nf})),n.d(t,"AnimationObjectGroup",(function(){return Hf})),n.d(t,"AnimationUtils",(function(){return bd})),n.d(t,"ArcCurve",(function(){return $d})),n.d(t,"ArrayCamera",(function(){return pl})),n.d(t,"ArrowHelper",(function(){return Um})),n.d(t,"Audio",(function(){return wf})),n.d(t,"AudioAnalyser",(function(){return Cf})),n.d(t,"AudioContext",(function(){return rf})),n.d(t,"AudioListener",(function(){return gf})),n.d(t,"AudioLoader",(function(){return Af})),n.d(t,"AxesHelper",(function(){return Sm})),n.d(t,"AxisHelper",(function(){return Ig})),n.d(t,"BackSide",(function(){return f})),n.d(t,"BasicDepthPacking",(function(){return An})),n.d(t,"BasicShadowMap",(function(){return l})),n.d(t,"BinaryTextureLoader",(function(){return Ng})),n.d(t,"Bone",(function(){return $l})),n.d(t,"BooleanKeyframeTrack",(function(){return Td})),n.d(t,"BoundingBoxHelper",(function(){return Og})),n.d(t,"Box2",(function(){return qf})),n.d(t,"Box3",(function(){return er})),n.d(t,"Box3Helper",(function(){return Mm})),n.d(t,"BoxBufferGeometry",(function(){return pA})),n.d(t,"BoxGeometry",(function(){return Iu})),n.d(t,"BoxHelper",(function(){return Cm})),n.d(t,"BufferAttribute",(function(){return Mi})),n.d(t,"BufferGeometry",(function(){return Xi})),n.d(t,"BufferGeometryLoader",(function(){return zp})),n.d(t,"ByteType",(function(){return Me})),n.d(t,"Cache",(function(){return Rd})),n.d(t,"Camera",(function(){return yA})),n.d(t,"CameraHelper",(function(){return ym})),n.d(t,"CanvasRenderer",(function(){return Gg})),n.d(t,"CanvasTexture",(function(){return _u})),n.d(t,"CatmullRomCurve3",(function(){return Ap})),n.d(t,"CineonToneMapping",(function(){return te})),n.d(t,"CircleBufferGeometry",(function(){return Ou})),n.d(t,"CircleGeometry",(function(){return Pu})),n.d(t,"ClampToEdgeWrapping",(function(){return he})),n.d(t,"Clock",(function(){return uf})),n.d(t,"ClosedSplineCurve3",(function(){return Qg})),n.d(t,"Color",(function(){return wi})),n.d(t,"ColorKeyframeTrack",(function(){return Ud})),n.d(t,"CompressedTexture",(function(){return Fu})),n.d(t,"CompressedTextureLoader",(function(){return jd})),n.d(t,"ConeBufferGeometry",(function(){return ku})),n.d(t,"ConeGeometry",(function(){return Nu})),n.d(t,"CubeCamera",(function(){return MA})),n.d(t,"CubeGeometry",(function(){return Iu})),n.d(t,"CubeReflectionMapping",(function(){return Ae})),n.d(t,"CubeRefractionMapping",(function(){return oe})),n.d(t,"CubeTexture",(function(){return EA})),n.d(t,"CubeTextureLoader",(function(){return Wd})),n.d(t,"CubeUVReflectionMapping",(function(){return ce})),n.d(t,"CubeUVRefractionMapping",(function(){return le})),n.d(t,"CubicBezierCurve",(function(){return mp})),n.d(t,"CubicBezierCurve3",(function(){return gp})),n.d(t,"CubicInterpolant",(function(){return Md})),n.d(t,"CullFaceBack",(function(){return s})),n.d(t,"CullFaceFront",(function(){return a})),n.d(t,"CullFaceFrontBack",(function(){return c})),n.d(t,"CullFaceNone",(function(){return o})),n.d(t,"Curve",(function(){return Jd})),n.d(t,"CurvePath",(function(){return Cp})),n.d(t,"CustomBlending",(function(){return C})),n.d(t,"CustomToneMapping",(function(){return re})),n.d(t,"CylinderBufferGeometry",(function(){return Hu})),n.d(t,"CylinderGeometry",(function(){return Ru})),n.d(t,"Cylindrical",(function(){return Wf})),n.d(t,"DataTexture",(function(){return _A})),n.d(t,"DataTexture2DArray",(function(){return xa})),n.d(t,"DataTexture3D",(function(){return ya})),n.d(t,"DataTextureLoader",(function(){return Yd})),n.d(t,"DataUtils",(function(){return Dm})),n.d(t,"DecrementStencilOp",(function(){return dn})),n.d(t,"DecrementWrapStencilOp",(function(){return fn})),n.d(t,"DefaultLoadingManager",(function(){return kd})),n.d(t,"DepthFormat",(function(){return Ke})),n.d(t,"DepthStencilFormat",(function(){return Ge})),n.d(t,"DepthTexture",(function(){return Tu})),n.d(t,"DirectionalLight",(function(){return Op})),n.d(t,"DirectionalLightHelper",(function(){return wm})),n.d(t,"DiscreteInterpolant",(function(){return Fd})),n.d(t,"DodecahedronBufferGeometry",(function(){return Gu})),n.d(t,"DodecahedronGeometry",(function(){return Vu})),n.d(t,"DoubleSide",(function(){return m})),n.d(t,"DstAlphaFactor",(function(){return O})),n.d(t,"DstColorFactor",(function(){return H})),n.d(t,"DynamicBufferAttribute",(function(){return Bg})),n.d(t,"DynamicCopyUsage",(function(){return Qn})),n.d(t,"DynamicDrawUsage",(function(){return En})),n.d(t,"DynamicReadUsage",(function(){return Tn})),n.d(t,"EdgesGeometry",(function(){return Yu})),n.d(t,"EdgesHelper",(function(){return Pg})),n.d(t,"EllipseCurve",(function(){return Zd})),n.d(t,"EqualDepth",(function(){return z})),n.d(t,"EqualStencilFunc",(function(){return vn})),n.d(t,"EquirectangularReflectionMapping",(function(){return se})),n.d(t,"EquirectangularRefractionMapping",(function(){return ae})),n.d(t,"Euler",(function(){return Lr})),n.d(t,"EventDispatcher",(function(){return On})),n.d(t,"ExtrudeBufferGeometry",(function(){return Sh})),n.d(t,"ExtrudeGeometry",(function(){return Dh})),n.d(t,"Face3",(function(){return vi})),n.d(t,"Face4",(function(){return sg})),n.d(t,"FaceColors",(function(){return ug})),n.d(t,"FileLoader",(function(){return Vd})),n.d(t,"FlatShading",(function(){return g})),n.d(t,"Float16BufferAttribute",(function(){return Li})),n.d(t,"Float32Attribute",(function(){return Ug})),n.d(t,"Float32BufferAttribute",(function(){return Di})),n.d(t,"Float64Attribute",(function(){return Sg})),n.d(t,"Float64BufferAttribute",(function(){return Ii})),n.d(t,"FloatType",(function(){return Ue})),n.d(t,"Fog",(function(){return bl})),n.d(t,"FogExp2",(function(){return Bl})),n.d(t,"Font",(function(){return Zp})),n.d(t,"FontLoader",(function(){return tf})),n.d(t,"FrontSide",(function(){return p})),n.d(t,"Frustum",(function(){return SA})),n.d(t,"GLBufferAttribute",(function(){return Gf})),n.d(t,"GLSL1",(function(){return Dn})),n.d(t,"GLSL3",(function(){return In})),n.d(t,"GammaEncoding",(function(){return Zt})),n.d(t,"Geometry",(function(){return Du})),n.d(t,"GeometryUtils",(function(){return Kg})),n.d(t,"GreaterDepth",(function(){return X})),n.d(t,"GreaterEqualDepth",(function(){return j})),n.d(t,"GreaterEqualStencilFunc",(function(){return bn})),n.d(t,"GreaterStencilFunc",(function(){return yn})),n.d(t,"GridHelper",(function(){return dm})),n.d(t,"Group",(function(){return fl})),n.d(t,"HalfFloatType",(function(){return Se})),n.d(t,"HemisphereLight",(function(){return _p})),n.d(t,"HemisphereLightHelper",(function(){return hm})),n.d(t,"HemisphereLightProbe",(function(){return of})),n.d(t,"IcosahedronBufferGeometry",(function(){return Oh})),n.d(t,"IcosahedronGeometry",(function(){return Ph})),n.d(t,"ImageBitmapLoader",(function(){return qp})),n.d(t,"ImageLoader",(function(){return Xd})),n.d(t,"ImageUtils",(function(){return Gn})),n.d(t,"ImmediateRenderObject",(function(){return em})),n.d(t,"IncrementStencilOp",(function(){return hn})),n.d(t,"IncrementWrapStencilOp",(function(){return pn})),n.d(t,"InstancedBufferAttribute",(function(){return Vp})),n.d(t,"InstancedBufferGeometry",(function(){return Gp})),n.d(t,"InstancedInterleavedBuffer",(function(){return Kf})),n.d(t,"InstancedMesh",(function(){return su})),n.d(t,"Int16Attribute",(function(){return Eg})),n.d(t,"Int16BufferAttribute",(function(){return Ti})),n.d(t,"Int32Attribute",(function(){return _g})),n.d(t,"Int32BufferAttribute",(function(){return Si})),n.d(t,"Int8Attribute",(function(){return bg})),n.d(t,"Int8BufferAttribute",(function(){return Ei})),n.d(t,"IntType",(function(){return _e})),n.d(t,"InterleavedBuffer",(function(){return Ml})),n.d(t,"InterleavedBufferAttribute",(function(){return Fl})),n.d(t,"Interpolant",(function(){return Cd})),n.d(t,"InterpolateDiscrete",(function(){return Rt})),n.d(t,"InterpolateLinear",(function(){return Nt})),n.d(t,"InterpolateSmooth",(function(){return kt})),n.d(t,"InvertStencilOp",(function(){return mn})),n.d(t,"JSONLoader",(function(){return Vg})),n.d(t,"KeepStencilOp",(function(){return ln})),n.d(t,"KeyframeTrack",(function(){return _d})),n.d(t,"LOD",(function(){return jl})),n.d(t,"LatheBufferGeometry",(function(){return Hh})),n.d(t,"LatheGeometry",(function(){return Rh})),n.d(t,"Layers",(function(){return Or})),n.d(t,"LensFlare",(function(){return jg})),n.d(t,"LessDepth",(function(){return G})),n.d(t,"LessEqualDepth",(function(){return V})),n.d(t,"LessEqualStencilFunc",(function(){return xn})),n.d(t,"LessStencilFunc",(function(){return wn})),n.d(t,"Light",(function(){return Fp})),n.d(t,"LightProbe",(function(){return Np})),n.d(t,"Line",(function(){return pu})),n.d(t,"Line3",(function(){return $f})),n.d(t,"LineBasicMaterial",(function(){return au})),n.d(t,"LineCurve",(function(){return wp})),n.d(t,"LineCurve3",(function(){return vp})),n.d(t,"LineDashedMaterial",(function(){return yd})),n.d(t,"LineLoop",(function(){return wu})),n.d(t,"LinePieces",(function(){return cg})),n.d(t,"LineSegments",(function(){return gu})),n.d(t,"LineStrip",(function(){return ag})),n.d(t,"LinearEncoding",(function(){return qt})),n.d(t,"LinearFilter",(function(){return ve})),n.d(t,"LinearInterpolant",(function(){return Ed})),n.d(t,"LinearMipMapLinearFilter",(function(){return be})),n.d(t,"LinearMipMapNearestFilter",(function(){return ye})),n.d(t,"LinearMipmapLinearFilter",(function(){return Be})),n.d(t,"LinearMipmapNearestFilter",(function(){return xe})),n.d(t,"LinearToneMapping",(function(){return $})),n.d(t,"Loader",(function(){return Kd})),n.d(t,"LoaderUtils",(function(){return Kp})),n.d(t,"LoadingManager",(function(){return Nd})),n.d(t,"LogLuvEncoding",(function(){return en})),n.d(t,"LoopOnce",(function(){return Ot})),n.d(t,"LoopPingPong",(function(){return Ht})),n.d(t,"LoopRepeat",(function(){return Pt})),n.d(t,"LuminanceAlphaFormat",(function(){return Ne})),n.d(t,"LuminanceFormat",(function(){return Re})),n.d(t,"MOUSE",(function(){return i})),n.d(t,"Material",(function(){return yi})),n.d(t,"MaterialLoader",(function(){return kp})),n.d(t,"Math",(function(){return Rn})),n.d(t,"MathUtils",(function(){return Rn})),n.d(t,"Matrix3",(function(){return kn})),n.d(t,"Matrix4",(function(){return Mr})),n.d(t,"MaxEquation",(function(){return T})),n.d(t,"Mesh",(function(){return uA})),n.d(t,"MeshBasicMaterial",(function(){return Bi})),n.d(t,"MeshDepthMaterial",(function(){return ol})),n.d(t,"MeshDistanceMaterial",(function(){return sl})),n.d(t,"MeshFaceMaterial",(function(){return dg})),n.d(t,"MeshLambertMaterial",(function(){return vd})),n.d(t,"MeshMatcapMaterial",(function(){return xd})),n.d(t,"MeshNormalMaterial",(function(){return wd})),n.d(t,"MeshPhongMaterial",(function(){return md})),n.d(t,"MeshPhysicalMaterial",(function(){return fd})),n.d(t,"MeshStandardMaterial",(function(){return pd})),n.d(t,"MeshToonMaterial",(function(){return gd})),n.d(t,"MinEquation",(function(){return _})),n.d(t,"MirroredRepeatWrapping",(function(){return de})),n.d(t,"MixOperation",(function(){return q})),n.d(t,"MultiMaterial",(function(){return pg})),n.d(t,"MultiplyBlending",(function(){return b})),n.d(t,"MultiplyOperation",(function(){return Y})),n.d(t,"NearestFilter",(function(){return pe})),n.d(t,"NearestMipMapLinearFilter",(function(){return we})),n.d(t,"NearestMipMapNearestFilter",(function(){return me})),n.d(t,"NearestMipmapLinearFilter",(function(){return ge})),n.d(t,"NearestMipmapNearestFilter",(function(){return fe})),n.d(t,"NeverDepth",(function(){return k})),n.d(t,"NeverStencilFunc",(function(){return gn})),n.d(t,"NoBlending",(function(){return v})),n.d(t,"NoColors",(function(){return lg})),n.d(t,"NoToneMapping",(function(){return Z})),n.d(t,"NormalAnimationBlendMode",(function(){return zt})),n.d(t,"NormalBlending",(function(){return x})),n.d(t,"NotEqualDepth",(function(){return W})),n.d(t,"NotEqualStencilFunc",(function(){return Bn})),n.d(t,"NumberKeyframeTrack",(function(){return Sd})),n.d(t,"Object3D",(function(){return qr})),n.d(t,"ObjectLoader",(function(){return jp})),n.d(t,"ObjectSpaceNormalMap",(function(){return an})),n.d(t,"OctahedronBufferGeometry",(function(){return Nh})),n.d(t,"OctahedronGeometry",(function(){return kh})),n.d(t,"OneFactor",(function(){return S})),n.d(t,"OneMinusDstAlphaFactor",(function(){return P})),n.d(t,"OneMinusDstColorFactor",(function(){return R})),n.d(t,"OneMinusSrcAlphaFactor",(function(){return I})),n.d(t,"OneMinusSrcColorFactor",(function(){return L})),n.d(t,"OrthographicCamera",(function(){return Dp})),n.d(t,"PCFShadowMap",(function(){return u})),n.d(t,"PCFSoftShadowMap",(function(){return h})),n.d(t,"PMREMGenerator",(function(){return Jm})),n.d(t,"ParametricBufferGeometry",(function(){return Kh})),n.d(t,"ParametricGeometry",(function(){return Gh})),n.d(t,"Particle",(function(){return mg})),n.d(t,"ParticleBasicMaterial",(function(){return vg})),n.d(t,"ParticleSystem",(function(){return gg})),n.d(t,"ParticleSystemMaterial",(function(){return xg})),n.d(t,"Path",(function(){return Mp})),n.d(t,"PerspectiveCamera",(function(){return BA})),n.d(t,"Plane",(function(){return ei})),n.d(t,"PlaneBufferGeometry",(function(){return DA})),n.d(t,"PlaneGeometry",(function(){return Vh})),n.d(t,"PlaneHelper",(function(){return Em})),n.d(t,"PointCloud",(function(){return fg})),n.d(t,"PointCloudMaterial",(function(){return wg})),n.d(t,"PointLight",(function(){return Lp})),n.d(t,"PointLightHelper",(function(){return am})),n.d(t,"Points",(function(){return Cu})),n.d(t,"PointsMaterial",(function(){return vu})),n.d(t,"PolarGridHelper",(function(){return pm})),n.d(t,"PolyhedronBufferGeometry",(function(){return Ku})),n.d(t,"PolyhedronGeometry",(function(){return zh})),n.d(t,"PositionalAudio",(function(){return bf})),n.d(t,"PropertyBinding",(function(){return Pf})),n.d(t,"PropertyMixer",(function(){return Mf})),n.d(t,"QuadraticBezierCurve",(function(){return xp})),n.d(t,"QuadraticBezierCurve3",(function(){return yp})),n.d(t,"Quaternion",(function(){return qn})),n.d(t,"QuaternionKeyframeTrack",(function(){return Ld})),n.d(t,"QuaternionLinearInterpolant",(function(){return Qd})),n.d(t,"REVISION",(function(){return r})),n.d(t,"RGBADepthPacking",(function(){return on})),n.d(t,"RGBAFormat",(function(){return He})),n.d(t,"RGBAIntegerFormat",(function(){return Ye})),n.d(t,"RGBA_ASTC_10x10_Format",(function(){return wt})),n.d(t,"RGBA_ASTC_10x5_Format",(function(){return ft})),n.d(t,"RGBA_ASTC_10x6_Format",(function(){return mt})),n.d(t,"RGBA_ASTC_10x8_Format",(function(){return gt})),n.d(t,"RGBA_ASTC_12x10_Format",(function(){return vt})),n.d(t,"RGBA_ASTC_12x12_Format",(function(){return xt})),n.d(t,"RGBA_ASTC_4x4_Format",(function(){return st})),n.d(t,"RGBA_ASTC_5x4_Format",(function(){return at})),n.d(t,"RGBA_ASTC_5x5_Format",(function(){return ct})),n.d(t,"RGBA_ASTC_6x5_Format",(function(){return lt})),n.d(t,"RGBA_ASTC_6x6_Format",(function(){return ut})),n.d(t,"RGBA_ASTC_8x5_Format",(function(){return ht})),n.d(t,"RGBA_ASTC_8x6_Format",(function(){return dt})),n.d(t,"RGBA_ASTC_8x8_Format",(function(){return pt})),n.d(t,"RGBA_BPTC_Format",(function(){return yt})),n.d(t,"RGBA_ETC2_EAC_Format",(function(){return ot})),n.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return rt})),n.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return nt})),n.d(t,"RGBA_S3TC_DXT1_Format",(function(){return Je})),n.d(t,"RGBA_S3TC_DXT3_Format",(function(){return Ze})),n.d(t,"RGBA_S3TC_DXT5_Format",(function(){return $e})),n.d(t,"RGBDEncoding",(function(){return rn})),n.d(t,"RGBEEncoding",(function(){return $t})),n.d(t,"RGBEFormat",(function(){return ke})),n.d(t,"RGBFormat",(function(){return Pe})),n.d(t,"RGBIntegerFormat",(function(){return We})),n.d(t,"RGBM16Encoding",(function(){return nn})),n.d(t,"RGBM7Encoding",(function(){return tn})),n.d(t,"RGB_ETC1_Format",(function(){return it})),n.d(t,"RGB_ETC2_Format",(function(){return At})),n.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return tt})),n.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return et})),n.d(t,"RGB_S3TC_DXT1_Format",(function(){return qe})),n.d(t,"RGFormat",(function(){return je})),n.d(t,"RGIntegerFormat",(function(){return Xe})),n.d(t,"RawShaderMaterial",(function(){return dd})),n.d(t,"Ray",(function(){return Cr})),n.d(t,"Raycaster",(function(){return Vf})),n.d(t,"RectAreaLight",(function(){return Hp})),n.d(t,"RedFormat",(function(){return Ve})),n.d(t,"RedIntegerFormat",(function(){return ze})),n.d(t,"ReinhardToneMapping",(function(){return ee})),n.d(t,"RepeatWrapping",(function(){return ue})),n.d(t,"ReplaceStencilOp",(function(){return un})),n.d(t,"ReverseSubtractEquation",(function(){return F})),n.d(t,"RingBufferGeometry",(function(){return jh})),n.d(t,"RingGeometry",(function(){return Xh})),n.d(t,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return Lt})),n.d(t,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return Ut})),n.d(t,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return St})),n.d(t,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return Qt})),n.d(t,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Dt})),n.d(t,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return It})),n.d(t,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return Bt})),n.d(t,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return bt})),n.d(t,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Ct})),n.d(t,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Mt})),n.d(t,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return Et})),n.d(t,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return Ft})),n.d(t,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return _t})),n.d(t,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Tt})),n.d(t,"Scene",(function(){return Cl})),n.d(t,"SceneUtils",(function(){return zg})),n.d(t,"ShaderChunk",(function(){return ra})),n.d(t,"ShaderLib",(function(){return Aa})),n.d(t,"ShaderMaterial",(function(){return xA})),n.d(t,"ShadowMaterial",(function(){return hd})),n.d(t,"Shape",(function(){return Ep})),n.d(t,"ShapeBufferGeometry",(function(){return Wh})),n.d(t,"ShapeGeometry",(function(){return qh})),n.d(t,"ShapePath",(function(){return Jp})),n.d(t,"ShapeUtils",(function(){return _h})),n.d(t,"ShortType",(function(){return Ee})),n.d(t,"Skeleton",(function(){return nu})),n.d(t,"SkeletonHelper",(function(){return om})),n.d(t,"SkinnedMesh",(function(){return Zl})),n.d(t,"SmoothShading",(function(){return w})),n.d(t,"Sphere",(function(){return mr})),n.d(t,"SphereBufferGeometry",(function(){return Zh})),n.d(t,"SphereGeometry",(function(){return $h})),n.d(t,"Spherical",(function(){return Xf})),n.d(t,"SphericalHarmonics3",(function(){return Rp})),n.d(t,"Spline",(function(){return Dg})),n.d(t,"SplineCurve",(function(){return Bp})),n.d(t,"SplineCurve3",(function(){return Lg})),n.d(t,"SpotLight",(function(){return Sp})),n.d(t,"SpotLightHelper",(function(){return nm})),n.d(t,"Sprite",(function(){return Kl})),n.d(t,"SpriteMaterial",(function(){return _l})),n.d(t,"SrcAlphaFactor",(function(){return D})),n.d(t,"SrcAlphaSaturateFactor",(function(){return N})),n.d(t,"SrcColorFactor",(function(){return Q})),n.d(t,"StaticCopyUsage",(function(){return Sn})),n.d(t,"StaticDrawUsage",(function(){return Mn})),n.d(t,"StaticReadUsage",(function(){return _n})),n.d(t,"StereoCamera",(function(){return lf})),n.d(t,"StreamCopyUsage",(function(){return Ln})),n.d(t,"StreamDrawUsage",(function(){return Fn})),n.d(t,"StreamReadUsage",(function(){return Un})),n.d(t,"StringKeyframeTrack",(function(){return Dd})),n.d(t,"SubtractEquation",(function(){return E})),n.d(t,"SubtractiveBlending",(function(){return B})),n.d(t,"TOUCH",(function(){return A})),n.d(t,"TangentSpaceNormalMap",(function(){return sn})),n.d(t,"TetrahedronBufferGeometry",(function(){return ed})),n.d(t,"TetrahedronGeometry",(function(){return td})),n.d(t,"TextBufferGeometry",(function(){return nd})),n.d(t,"TextGeometry",(function(){return rd})),n.d(t,"Texture",(function(){return zn})),n.d(t,"TextureLoader",(function(){return qd})),n.d(t,"TorusBufferGeometry",(function(){return id})),n.d(t,"TorusGeometry",(function(){return Ad})),n.d(t,"TorusKnotBufferGeometry",(function(){return od})),n.d(t,"TorusKnotGeometry",(function(){return sd})),n.d(t,"Triangle",(function(){return ui})),n.d(t,"TriangleFanDrawMode",(function(){return Yt})),n.d(t,"TriangleStripDrawMode",(function(){return Wt})),n.d(t,"TrianglesDrawMode",(function(){return Xt})),n.d(t,"TubeBufferGeometry",(function(){return ad})),n.d(t,"TubeGeometry",(function(){return cd})),n.d(t,"UVMapping",(function(){return ie})),n.d(t,"Uint16Attribute",(function(){return Fg})),n.d(t,"Uint16BufferAttribute",(function(){return Ui})),n.d(t,"Uint32Attribute",(function(){return Tg})),n.d(t,"Uint32BufferAttribute",(function(){return Qi})),n.d(t,"Uint8Attribute",(function(){return Cg})),n.d(t,"Uint8BufferAttribute",(function(){return Fi})),n.d(t,"Uint8ClampedAttribute",(function(){return Mg})),n.d(t,"Uint8ClampedBufferAttribute",(function(){return _i})),n.d(t,"Uniform",(function(){return kf})),n.d(t,"UniformsLib",(function(){return ia})),n.d(t,"UniformsUtils",(function(){return gA})),n.d(t,"UnsignedByteType",(function(){return Ce})),n.d(t,"UnsignedInt248Type",(function(){return Ie})),n.d(t,"UnsignedIntType",(function(){return Te})),n.d(t,"UnsignedShort4444Type",(function(){return Qe})),n.d(t,"UnsignedShort5551Type",(function(){return Le})),n.d(t,"UnsignedShort565Type",(function(){return De})),n.d(t,"UnsignedShortType",(function(){return Fe})),n.d(t,"VSMShadowMap",(function(){return d})),n.d(t,"Vector2",(function(){return Nn})),n.d(t,"Vector3",(function(){return Jn})),n.d(t,"Vector4",(function(){return Xn})),n.d(t,"VectorKeyframeTrack",(function(){return Id})),n.d(t,"Vertex",(function(){return yg})),n.d(t,"VertexColors",(function(){return hg})),n.d(t,"VideoTexture",(function(){return Eu})),n.d(t,"WebGL1Renderer",(function(){return yl})),n.d(t,"WebGLCubeRenderTarget",(function(){return FA})),n.d(t,"WebGLMultisampleRenderTarget",(function(){return Yn})),n.d(t,"WebGLRenderTarget",(function(){return Wn})),n.d(t,"WebGLRenderTargetCube",(function(){return kg})),n.d(t,"WebGLRenderer",(function(){return xl})),n.d(t,"WebGLUtils",(function(){return dl})),n.d(t,"WireframeGeometry",(function(){return ld})),n.d(t,"WireframeHelper",(function(){return Hg})),n.d(t,"WrapAroundEnding",(function(){return Vt})),n.d(t,"XHRLoader",(function(){return Rg})),n.d(t,"ZeroCurvatureEnding",(function(){return Kt})),n.d(t,"ZeroFactor",(function(){return U})),n.d(t,"ZeroSlopeEnding",(function(){return Gt})),n.d(t,"ZeroStencilOp",(function(){return cn})),n.d(t,"sRGBEncoding",(function(){return Jt}));const r="124",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},A={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,s=1,a=2,c=3,l=0,u=1,h=2,d=3,p=0,f=1,m=2,g=1,w=2,v=0,x=1,y=2,B=3,b=4,C=5,M=100,E=101,F=102,_=103,T=104,U=200,S=201,Q=202,L=203,D=204,I=205,O=206,P=207,H=208,R=209,N=210,k=0,K=1,G=2,V=3,z=4,j=5,X=6,W=7,Y=0,q=1,J=2,Z=0,$=1,ee=2,te=3,ne=4,re=5,ie=300,Ae=301,oe=302,se=303,ae=304,ce=306,le=307,ue=1e3,he=1001,de=1002,pe=1003,fe=1004,me=1004,ge=1005,we=1005,ve=1006,xe=1007,ye=1007,Be=1008,be=1008,Ce=1009,Me=1010,Ee=1011,Fe=1012,_e=1013,Te=1014,Ue=1015,Se=1016,Qe=1017,Le=1018,De=1019,Ie=1020,Oe=1021,Pe=1022,He=1023,Re=1024,Ne=1025,ke=He,Ke=1026,Ge=1027,Ve=1028,ze=1029,je=1030,Xe=1031,We=1032,Ye=1033,qe=33776,Je=33777,Ze=33778,$e=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,At=37492,ot=37496,st=37808,at=37809,ct=37810,lt=37811,ut=37812,ht=37813,dt=37814,pt=37815,ft=37816,mt=37817,gt=37818,wt=37819,vt=37820,xt=37821,yt=36492,Bt=37840,bt=37841,Ct=37842,Mt=37843,Et=37844,Ft=37845,_t=37846,Tt=37847,Ut=37848,St=37849,Qt=37850,Lt=37851,Dt=37852,It=37853,Ot=2200,Pt=2201,Ht=2202,Rt=2300,Nt=2301,kt=2302,Kt=2400,Gt=2401,Vt=2402,zt=2500,jt=2501,Xt=0,Wt=1,Yt=2,qt=3e3,Jt=3001,Zt=3007,$t=3002,en=3003,tn=3004,nn=3005,rn=3006,An=3200,on=3201,sn=0,an=1,cn=0,ln=7680,un=7681,hn=7682,dn=7683,pn=34055,fn=34056,mn=5386,gn=512,wn=513,vn=514,xn=515,yn=516,Bn=517,bn=518,Cn=519,Mn=35044,En=35048,Fn=35040,_n=35045,Tn=35049,Un=35041,Sn=35046,Qn=35050,Ln=35042,Dn="100",In="300 es";function On(){}Object.assign(On.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners,r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e)}}});const Pn=[];for(let Xg=0;Xg<256;Xg++)Pn[Xg]=(Xg<16?"0":"")+Xg.toString(16);let Hn=1234567;const Rn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=Pn[255&e]+Pn[e>>8&255]+Pn[e>>16&255]+Pn[e>>24&255]+"-"+Pn[255&t]+Pn[t>>8&255]+"-"+Pn[t>>16&15|64]+Pn[t>>24&255]+"-"+Pn[63&n|128]+Pn[n>>8&255]+"-"+Pn[n>>16&255]+Pn[n>>24&255]+Pn[255&r]+Pn[r>>8&255]+Pn[r>>16&255]+Pn[r>>24&255];return i.toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Hn=e%2147483647),Hn=16807*Hn%2147483647,(Hn-1)/2147483646},degToRad:function(e){return e*Rn.DEG2RAD},radToDeg:function(e){return e*Rn.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const A=Math.cos,o=Math.sin,s=A(n/2),a=o(n/2),c=A((t+r)/2),l=o((t+r)/2),u=A((t-r)/2),h=o((t-r)/2),d=A((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*l,a*u,a*h,s*c);break;case"YZY":e.set(a*h,s*l,a*u,s*c);break;case"ZXZ":e.set(a*u,a*h,s*l,s*c);break;case"XZX":e.set(s*l,a*p,a*d,s*c);break;case"YXY":e.set(a*d,s*l,a*p,s*c);break;case"ZYZ":e.set(a*p,a*d,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Nn{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const e=Math.atan2(-this.y,-this.x)+Math.PI;return e}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,A=this.y-e.y;return this.x=i*n-A*r+e.x,this.y=i*r+A*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class kn{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,A,o,s,a){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=A,c[8]=a,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,A=n[0],o=n[3],s=n[6],a=n[1],c=n[4],l=n[7],u=n[2],h=n[5],d=n[8],p=r[0],f=r[3],m=r[6],g=r[1],w=r[4],v=r[7],x=r[2],y=r[5],B=r[8];return i[0]=A*p+o*g+s*x,i[3]=A*f+o*w+s*y,i[6]=A*m+o*v+s*B,i[1]=a*p+c*g+l*x,i[4]=a*f+c*w+l*y,i[7]=a*m+c*v+l*B,i[2]=u*p+h*g+d*x,i[5]=u*f+h*w+d*y,i[8]=u*m+h*v+d*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],A=e[4],o=e[5],s=e[6],a=e[7],c=e[8];return t*A*c-t*o*a-n*i*c+n*o*s+r*i*a-r*A*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],A=e[4],o=e[5],s=e[6],a=e[7],c=e[8],l=c*A-o*a,u=o*s-c*i,h=a*i-A*s,d=t*l+n*u+r*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return e[0]=l*p,e[1]=(r*a-c*n)*p,e[2]=(o*n-r*A)*p,e[3]=u*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-a*t)*p,e[8]=(A*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,A,o){const s=Math.cos(i),a=Math.sin(i);return this.set(n*s,n*a,-n*(s*A+a*o)+A+e,-r*a,r*s,-r*(-a*A+s*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],A=r[3],o=r[6],s=r[1],a=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*A+n*a,r[6]=t*o+n*c,r[1]=-n*i+t*s,r[4]=-n*A+t*a,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}let Kn;const Gn={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Kn&&(Kn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Kn.width=e.width,Kn.height=e.height;const n=Kn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Kn}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Vn=0;function zn(e=zn.DEFAULT_IMAGE,t=zn.DEFAULT_MAPPING,n=he,r=he,i=ve,A=Be,o=He,s=Ce,a=1,c=qt){Object.defineProperty(this,"id",{value:Vn++}),this.uuid=Rn.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=A,this.anisotropy=a,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Nn(0,0),this.repeat=new Nn(1,1),this.center=new Nn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}function jn(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Gn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}zn.DEFAULT_IMAGE=void 0,zn.DEFAULT_MAPPING=ie,zn.prototype=Object.assign(Object.create(On.prototype),{constructor:zn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Rn.generateUUID()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(jn(r[e].image)):t.push(jn(r[e]))}else t=jn(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ue:e.x=e.x-Math.floor(e.x);break;case he:e.x=e.x<0?0:1;break;case de:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ue:e.y=e.y-Math.floor(e.y);break;case he:e.y=e.y<0?0:1;break;case de:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(zn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});class Xn{constructor(e=0,t=0,n=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,A=e.elements;return this.x=A[0]*t+A[4]*n+A[8]*r+A[12]*i,this.y=A[1]*t+A[5]*n+A[9]*r+A[13]*i,this.z=A[2]*t+A[6]*n+A[10]*r+A[14]*i,this.w=A[3]*t+A[7]*n+A[11]*r+A[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const A=.01,o=.1,s=e.elements,a=s[0],c=s[4],l=s[8],u=s[1],h=s[5],d=s[9],p=s[2],f=s[6],m=s[10];if(Math.abs(c-u)<A&&Math.abs(l-p)<A&&Math.abs(d-f)<A){if(Math.abs(c+u)<o&&Math.abs(l+p)<o&&Math.abs(d+f)<o&&Math.abs(a+h+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(a+1)/2,s=(h+1)/2,g=(m+1)/2,w=(c+u)/4,v=(l+p)/4,x=(d+f)/4;return e>s&&e>g?e<A?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=w/n,i=v/n):s>g?s<A?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=w/r,i=x/r):g<A?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=v/i,r=x/i),this.set(n,r,i,t),this}let g=Math.sqrt((f-d)*(f-d)+(l-p)*(l-p)+(u-c)*(u-c));return Math.abs(g)<.001&&(g=1),this.x=(f-d)/g,this.y=(l-p)/g,this.z=(u-c)/g,this.w=Math.acos((a+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Wn(e,t,n){this.width=e,this.height=t,this.scissor=new Xn(0,0,e,t),this.scissorTest=!1,this.viewport=new Xn(0,0,e,t),n=n||{},this.texture=new zn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ve,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Yn(e,t,n){Wn.call(this,e,t,n),this.samples=4}Wn.prototype=Object.assign(Object.create(On.prototype),{constructor:Wn,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Yn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Yn,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Wn.prototype.copy.call(this,e),this.samples=e.samples,this}});class qn{constructor(e=0,t=0,n=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return n.copy(e).slerp(t,r)}static slerpFlat(e,t,n,r,i,A,o){let s=n[r+0],a=n[r+1],c=n[r+2],l=n[r+3];const u=i[A+0],h=i[A+1],d=i[A+2],p=i[A+3];if(l!==p||s!==u||a!==h||c!==d){let e=1-o;const t=s*u+a*h+c*d+l*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),A=Math.atan2(i,t*n);e=Math.sin(e*A)/i,o=Math.sin(o*A)/i}const i=o*n;if(s=s*e+u*i,a=a*e+h*i,c=c*e+d*i,l=l*e+p*i,e===1-o){const e=1/Math.sqrt(s*s+a*a+c*c+l*l);s*=e,a*=e,c*=e,l*=e}}e[t]=s,e[t+1]=a,e[t+2]=c,e[t+3]=l}static multiplyQuaternionsFlat(e,t,n,r,i,A){const o=n[r],s=n[r+1],a=n[r+2],c=n[r+3],l=i[A],u=i[A+1],h=i[A+2],d=i[A+3];return e[t]=o*d+c*l+s*h-a*u,e[t+1]=s*d+c*u+a*l-o*h,e[t+2]=a*d+c*h+o*u-s*l,e[t+3]=c*d-o*l-s*u-a*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,A=e._order,o=Math.cos,s=Math.sin,a=o(n/2),c=o(r/2),l=o(i/2),u=s(n/2),h=s(r/2),d=s(i/2);switch(A){case"XYZ":this._x=u*c*l+a*h*d,this._y=a*h*l-u*c*d,this._z=a*c*d+u*h*l,this._w=a*c*l-u*h*d;break;case"YXZ":this._x=u*c*l+a*h*d,this._y=a*h*l-u*c*d,this._z=a*c*d-u*h*l,this._w=a*c*l+u*h*d;break;case"ZXY":this._x=u*c*l-a*h*d,this._y=a*h*l+u*c*d,this._z=a*c*d+u*h*l,this._w=a*c*l-u*h*d;break;case"ZYX":this._x=u*c*l-a*h*d,this._y=a*h*l+u*c*d,this._z=a*c*d-u*h*l,this._w=a*c*l+u*h*d;break;case"YZX":this._x=u*c*l+a*h*d,this._y=a*h*l+u*c*d,this._z=a*c*d-u*h*l,this._w=a*c*l-u*h*d;break;case"XZY":this._x=u*c*l-a*h*d,this._y=a*h*l-u*c*d,this._z=a*c*d+u*h*l,this._w=a*c*l+u*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+A)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],A=t[1],o=t[5],s=t[9],a=t[2],c=t[6],l=t[10],u=n+o+l;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-a)*e,this._z=(A-r)*e}else if(n>o&&n>l){const e=2*Math.sqrt(1+n-o-l);this._w=(c-s)/e,this._x=.25*e,this._y=(r+A)/e,this._z=(i+a)/e}else if(o>l){const e=2*Math.sqrt(1+o-n-l);this._w=(i-a)/e,this._x=(r+A)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+l-n-o);this._w=(A-r)/e,this._x=(i+a)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){const n=1e-6;let r=e.dot(t)+1;return r<n?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rn.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,A=e._w,o=t._x,s=t._y,a=t._z,c=t._w;return this._x=n*c+A*o+r*a-i*s,this._y=r*c+A*s+i*o-n*a,this._z=i*c+A*a+n*s-r*o,this._w=A*c-n*o-r*s-i*a,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,A=this._w;let o=A*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=A,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*A+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const a=Math.sqrt(s),c=Math.atan2(a,o),l=Math.sin((1-t)*c)/a,u=Math.sin(t*c)/a;return this._w=A*l+this._w*u,this._x=n*l+this._x*u,this._y=r*l+this._y*u,this._z=i*l+this._z*u,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class Jn{constructor(e=0,t=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($n.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($n.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,A=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*A,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*A,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*A,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,A=e.y,o=e.z,s=e.w,a=s*t+A*r-o*n,c=s*n+o*t-i*r,l=s*r+i*n-A*t,u=-i*t-A*n-o*r;return this.x=a*s+u*-i+c*-o-l*-A,this.y=c*s+u*-A+l*-i-a*-o,this.z=l*s+u*-o+a*-A-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,A=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*A-n*s,this.z=n*o-r*A,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Zn.copy(this).projectOnVector(e),this.sub(Zn)}reflect(e){return this.sub(Zn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Rn.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Zn=new Jn,$n=new qn;class er{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==e?e:new Jn(1/0,1/0,1/0),this.max=void 0!==t?t:new Jn(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,A=-1/0,o=-1/0;for(let s=0,a=e.length;s<a;s+=3){const a=e[s],c=e[s+1],l=e[s+2];a<t&&(t=a),c<n&&(n=c),l<r&&(r=l),a>i&&(i=a),c>A&&(A=c),l>o&&(o=l)}return this.min.set(t,n,r),this.max.set(i,A,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,A=-1/0,o=-1/0;for(let s=0,a=e.count;s<a;s++){const a=e.getX(s),c=e.getY(s),l=e.getZ(s);a<t&&(t=a),c<n&&(n=c),l<r&&(r=l),a>i&&(i=a),c>A&&(A=c),l>o&&(o=l)}return this.min.set(t,n,r),this.max.set(i,A,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=rr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Jn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Jn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),ir.copy(t.boundingBox),ir.applyMatrix4(e.matrixWorld),this.union(ir));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Jn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,rr),rr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ur),hr.subVectors(this.max,ur),Ar.subVectors(e.a,ur),or.subVectors(e.b,ur),sr.subVectors(e.c,ur),ar.subVectors(or,Ar),cr.subVectors(sr,or),lr.subVectors(Ar,sr);let t=[0,-ar.z,ar.y,0,-cr.z,cr.y,0,-lr.z,lr.y,ar.z,0,-ar.x,cr.z,0,-cr.x,lr.z,0,-lr.x,-ar.y,ar.x,0,-cr.y,cr.x,0,-lr.y,lr.x,0];return!!tr(t,Ar,or,sr,hr)&&(t=[1,0,0,0,1,0,0,0,1],!!tr(t,Ar,or,sr,hr)&&(dr.crossVectors(ar,cr),t=[dr.x,dr.y,dr.z],tr(t,Ar,or,sr,hr)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Jn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){const t=rr.copy(e).clamp(this.min,this.max);return t.sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(rr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(nr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function tr(e,t,n,r,i){for(let A=0,o=e.length-3;A<=o;A+=3){pr.fromArray(e,A);const o=i.x*Math.abs(pr.x)+i.y*Math.abs(pr.y)+i.z*Math.abs(pr.z),s=t.dot(pr),a=n.dot(pr),c=r.dot(pr);if(Math.max(-Math.max(s,a,c),Math.min(s,a,c))>o)return!1}return!0}const nr=[new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn],rr=new Jn,ir=new er,Ar=new Jn,or=new Jn,sr=new Jn,ar=new Jn,cr=new Jn,lr=new Jn,ur=new Jn,hr=new Jn,dr=new Jn,pr=new Jn,fr=new er;class mr{constructor(e,t){this.center=void 0!==e?e:new Jn,this.radius=void 0!==t?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):fr.setFromPoints(e).getCenter(n);let r=0;for(let i=0,A=e.length;i<A;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Jn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new er),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const gr=new Jn,wr=new Jn,vr=new Jn,xr=new Jn,yr=new Jn,Br=new Jn,br=new Jn;class Cr{constructor(e,t){this.origin=void 0!==e?e:new Jn,this.direction=void 0!==t?t:new Jn(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Jn),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,gr)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Jn),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=gr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(gr.copy(this.direction).multiplyScalar(t).add(this.origin),gr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){wr.copy(e).add(t).multiplyScalar(.5),vr.copy(t).sub(e).normalize(),xr.copy(this.origin).sub(wr);const i=.5*e.distanceTo(t),A=-this.direction.dot(vr),o=xr.dot(this.direction),s=-xr.dot(vr),a=xr.lengthSq(),c=Math.abs(1-A*A);let l,u,h,d;if(c>0)if(l=A*s-o,u=A*o-s,d=i*c,l>=0)if(u>=-d)if(u<=d){const e=1/c;l*=e,u*=e,h=l*(l+A*u+2*o)+u*(A*l+u+2*s)+a}else u=i,l=Math.max(0,-(A*u+o)),h=-l*l+u*(u+2*s)+a;else u=-i,l=Math.max(0,-(A*u+o)),h=-l*l+u*(u+2*s)+a;else u<=-d?(l=Math.max(0,-(-A*i+o)),u=l>0?-i:Math.min(Math.max(-i,-s),i),h=-l*l+u*(u+2*s)+a):u<=d?(l=0,u=Math.min(Math.max(-i,-s),i),h=u*(u+2*s)+a):(l=Math.max(0,-(A*i+o)),u=l>0?i:Math.min(Math.max(-i,-s),i),h=-l*l+u*(u+2*s)+a);else u=A>0?-i:i,l=Math.max(0,-(A*u+o)),h=-l*l+u*(u+2*s)+a;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(vr).multiplyScalar(u).add(wr),h}intersectSphere(e,t){gr.subVectors(e.center,this.origin);const n=gr.dot(this.direction),r=gr.dot(gr)-n*n,i=e.radius*e.radius;if(r>i)return null;const A=Math.sqrt(i-r),o=n-A,s=n+A;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;const n=e.normal.dot(this.direction);return n*t<0}intersectBox(e,t){let n,r,i,A,o,s;const a=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,u=this.origin;return a>=0?(n=(e.min.x-u.x)*a,r=(e.max.x-u.x)*a):(n=(e.max.x-u.x)*a,r=(e.min.x-u.x)*a),c>=0?(i=(e.min.y-u.y)*c,A=(e.max.y-u.y)*c):(i=(e.max.y-u.y)*c,A=(e.min.y-u.y)*c),n>A||i>r?null:((i>n||n!==n)&&(n=i),(A<r||r!==r)&&(r=A),l>=0?(o=(e.min.z-u.z)*l,s=(e.max.z-u.z)*l):(o=(e.max.z-u.z)*l,s=(e.min.z-u.z)*l),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,gr)}intersectTriangle(e,t,n,r,i){yr.subVectors(t,e),Br.subVectors(n,e),br.crossVectors(yr,Br);let A,o=this.direction.dot(br);if(o>0){if(r)return null;A=1}else{if(!(o<0))return null;A=-1,o=-o}xr.subVectors(this.origin,e);const s=A*this.direction.dot(Br.crossVectors(xr,Br));if(s<0)return null;const a=A*this.direction.dot(yr.cross(xr));if(a<0)return null;if(s+a>o)return null;const c=-A*xr.dot(br);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class Mr{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,A,o,s,a,c,l,u,h,d,p,f){const m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=A,m[9]=o,m[13]=s,m[2]=a,m[6]=c,m[10]=l,m[14]=u,m[3]=h,m[7]=d,m[11]=p,m[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Er.setFromMatrixColumn(e,0).length(),i=1/Er.setFromMatrixColumn(e,1).length(),A=1/Er.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*A,t[9]=n[9]*A,t[10]=n[10]*A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,A=Math.cos(n),o=Math.sin(n),s=Math.cos(r),a=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){const e=A*c,n=A*l,r=o*c,i=o*l;t[0]=s*c,t[4]=-s*l,t[8]=a,t[1]=n+r*a,t[5]=e-i*a,t[9]=-o*s,t[2]=i-e*a,t[6]=r+n*a,t[10]=A*s}else if("YXZ"===e.order){const e=s*c,n=s*l,r=a*c,i=a*l;t[0]=e+i*o,t[4]=r*o-n,t[8]=A*a,t[1]=A*l,t[5]=A*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=A*s}else if("ZXY"===e.order){const e=s*c,n=s*l,r=a*c,i=a*l;t[0]=e-i*o,t[4]=-A*l,t[8]=r+n*o,t[1]=n+r*o,t[5]=A*c,t[9]=i-e*o,t[2]=-A*a,t[6]=o,t[10]=A*s}else if("ZYX"===e.order){const e=A*c,n=A*l,r=o*c,i=o*l;t[0]=s*c,t[4]=r*a-n,t[8]=e*a+i,t[1]=s*l,t[5]=i*a+e,t[9]=n*a-r,t[2]=-a,t[6]=o*s,t[10]=A*s}else if("YZX"===e.order){const e=A*s,n=A*a,r=o*s,i=o*a;t[0]=s*c,t[4]=i-e*l,t[8]=r*l+n,t[1]=l,t[5]=A*c,t[9]=-o*c,t[2]=-a*c,t[6]=n*l+r,t[10]=e-i*l}else if("XZY"===e.order){const e=A*s,n=A*a,r=o*s,i=o*a;t[0]=s*c,t[4]=-l,t[8]=a*c,t[1]=e*l+i,t[5]=A*c,t[9]=n*l-r,t[2]=r*l-n,t[6]=o*c,t[10]=i*l+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_r,e,Tr)}lookAt(e,t,n){const r=this.elements;return Qr.subVectors(e,t),0===Qr.lengthSq()&&(Qr.z=1),Qr.normalize(),Ur.crossVectors(n,Qr),0===Ur.lengthSq()&&(1===Math.abs(n.z)?Qr.x+=1e-4:Qr.z+=1e-4,Qr.normalize(),Ur.crossVectors(n,Qr)),Ur.normalize(),Sr.crossVectors(Qr,Ur),r[0]=Ur.x,r[4]=Sr.x,r[8]=Qr.x,r[1]=Ur.y,r[5]=Sr.y,r[9]=Qr.y,r[2]=Ur.z,r[6]=Sr.z,r[10]=Qr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,A=n[0],o=n[4],s=n[8],a=n[12],c=n[1],l=n[5],u=n[9],h=n[13],d=n[2],p=n[6],f=n[10],m=n[14],g=n[3],w=n[7],v=n[11],x=n[15],y=r[0],B=r[4],b=r[8],C=r[12],M=r[1],E=r[5],F=r[9],_=r[13],T=r[2],U=r[6],S=r[10],Q=r[14],L=r[3],D=r[7],I=r[11],O=r[15];return i[0]=A*y+o*M+s*T+a*L,i[4]=A*B+o*E+s*U+a*D,i[8]=A*b+o*F+s*S+a*I,i[12]=A*C+o*_+s*Q+a*O,i[1]=c*y+l*M+u*T+h*L,i[5]=c*B+l*E+u*U+h*D,i[9]=c*b+l*F+u*S+h*I,i[13]=c*C+l*_+u*Q+h*O,i[2]=d*y+p*M+f*T+m*L,i[6]=d*B+p*E+f*U+m*D,i[10]=d*b+p*F+f*S+m*I,i[14]=d*C+p*_+f*Q+m*O,i[3]=g*y+w*M+v*T+x*L,i[7]=g*B+w*E+v*U+x*D,i[11]=g*b+w*F+v*S+x*I,i[15]=g*C+w*_+v*Q+x*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],A=e[1],o=e[5],s=e[9],a=e[13],c=e[2],l=e[6],u=e[10],h=e[14],d=e[3],p=e[7],f=e[11],m=e[15];return d*(+i*s*l-r*a*l-i*o*u+n*a*u+r*o*h-n*s*h)+p*(+t*s*h-t*a*u+i*A*u-r*A*h+r*a*c-i*s*c)+f*(+t*a*l-t*o*h-i*A*l+n*A*h+i*o*c-n*a*c)+m*(-r*o*c-t*s*l+t*o*u+r*A*l-n*A*u+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],A=e[4],o=e[5],s=e[6],a=e[7],c=e[8],l=e[9],u=e[10],h=e[11],d=e[12],p=e[13],f=e[14],m=e[15],g=l*f*a-p*u*a+p*s*h-o*f*h-l*s*m+o*u*m,w=d*u*a-c*f*a-d*s*h+A*f*h+c*s*m-A*u*m,v=c*p*a-d*l*a+d*o*h-A*p*h-c*o*m+A*l*m,x=d*l*s-c*p*s-d*o*u+A*p*u+c*o*f-A*l*f,y=t*g+n*w+r*v+i*x;if(0===y)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/y;return e[0]=g*B,e[1]=(p*u*i-l*f*i-p*r*h+n*f*h+l*r*m-n*u*m)*B,e[2]=(o*f*i-p*s*i+p*r*a-n*f*a-o*r*m+n*s*m)*B,e[3]=(l*s*i-o*u*i-l*r*a+n*u*a+o*r*h-n*s*h)*B,e[4]=w*B,e[5]=(c*f*i-d*u*i+d*r*h-t*f*h-c*r*m+t*u*m)*B,e[6]=(d*s*i-A*f*i-d*r*a+t*f*a+A*r*m-t*s*m)*B,e[7]=(A*u*i-c*s*i+c*r*a-t*u*a-A*r*h+t*s*h)*B,e[8]=v*B,e[9]=(d*l*i-c*p*i-d*n*h+t*p*h+c*n*m-t*l*m)*B,e[10]=(A*p*i-d*o*i+d*n*a-t*p*a-A*n*m+t*o*m)*B,e[11]=(c*o*i-A*l*i-c*n*a+t*l*a+A*n*h-t*o*h)*B,e[12]=x*B,e[13]=(c*p*r-d*l*r+d*n*u-t*p*u-c*n*f+t*l*f)*B,e[14]=(d*o*r-A*p*r-d*n*s+t*p*s+A*n*f-t*o*f)*B,e[15]=(A*l*r-c*o*r+c*n*s-t*l*s-A*n*u+t*o*u)*B,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,A=e.x,o=e.y,s=e.z,a=i*A,c=i*o;return this.set(a*A+n,a*o-r*s,a*s+r*o,0,a*o+r*s,c*o+n,c*s-r*A,0,a*s-r*o,c*s+r*A,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,A=t._y,o=t._z,s=t._w,a=i+i,c=A+A,l=o+o,u=i*a,h=i*c,d=i*l,p=A*c,f=A*l,m=o*l,g=s*a,w=s*c,v=s*l,x=n.x,y=n.y,B=n.z;return r[0]=(1-(p+m))*x,r[1]=(h+v)*x,r[2]=(d-w)*x,r[3]=0,r[4]=(h-v)*y,r[5]=(1-(u+m))*y,r[6]=(f+g)*y,r[7]=0,r[8]=(d+w)*B,r[9]=(f-g)*B,r[10]=(1-(u+p))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Er.set(r[0],r[1],r[2]).length();const A=Er.set(r[4],r[5],r[6]).length(),o=Er.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Fr.copy(this);const a=1/i,c=1/A,l=1/o;return Fr.elements[0]*=a,Fr.elements[1]*=a,Fr.elements[2]*=a,Fr.elements[4]*=c,Fr.elements[5]*=c,Fr.elements[6]*=c,Fr.elements[8]*=l,Fr.elements[9]*=l,Fr.elements[10]*=l,t.setFromRotationMatrix(Fr),n.x=i,n.y=A,n.z=o,this}makePerspective(e,t,n,r,i,A){void 0===A&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,s=2*i/(t-e),a=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),u=-(A+i)/(A-i),h=-2*A*i/(A-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=a,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,A){const o=this.elements,s=1/(t-e),a=1/(n-r),c=1/(A-i),l=(t+e)*s,u=(n+r)*a,h=(A+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*a,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Er=new Jn,Fr=new Mr,_r=new Jn(0,0,0),Tr=new Jn(1,1,1),Ur=new Jn,Sr=new Jn,Qr=new Jn;class Lr{constructor(e=0,t=0,n=0,r=Lr.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=Rn.clamp,i=e.elements,A=i[0],o=i[4],s=i[8],a=i[1],c=i[5],l=i[9],u=i[2],h=i[6],d=i[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-o,A)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-u,A),this._z=0);break;case"ZXY":this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(a,A));break;case"ZYX":this._y=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,A)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,A)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(s,A)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Dr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Dr,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Ir.setFromEuler(this),this.setFromQuaternion(Ir,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Jn(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Lr.DefaultOrder="XYZ",Lr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Dr=new Mr,Ir=new qn;class Or{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}}let Pr=0;const Hr=new Jn,Rr=new qn,Nr=new Mr,kr=new Jn,Kr=new Jn,Gr=new Jn,Vr=new qn,zr=new Jn(1,0,0),jr=new Jn(0,1,0),Xr=new Jn(0,0,1),Wr={type:"added"},Yr={type:"removed"};function qr(){Object.defineProperty(this,"id",{value:Pr++}),this.uuid=Rn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qr.DefaultUp.clone();const e=new Jn,t=new Lr,n=new qn,r=new Jn(1,1,1);function i(){n.setFromEuler(t,!1)}function A(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(A),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Mr},normalMatrix:{value:new kn}}),this.matrix=new Mr,this.matrixWorld=new Mr,this.matrixAutoUpdate=qr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Or,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}qr.DefaultUp=new Jn(0,1,0),qr.DefaultMatrixAutoUpdate=!0,qr.prototype=Object.assign(Object.create(On.prototype),{constructor:qr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Rr.setFromAxisAngle(e,t),this.quaternion.multiply(Rr),this},rotateOnWorldAxis:function(e,t){return Rr.setFromAxisAngle(e,t),this.quaternion.premultiply(Rr),this},rotateX:function(e){return this.rotateOnAxis(zr,e)},rotateY:function(e){return this.rotateOnAxis(jr,e)},rotateZ:function(e){return this.rotateOnAxis(Xr,e)},translateOnAxis:function(e,t){return Hr.copy(e).applyQuaternion(this.quaternion),this.position.add(Hr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(zr,e)},translateY:function(e){return this.translateOnAxis(jr,e)},translateZ:function(e){return this.translateOnAxis(Xr,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Nr.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?kr.copy(e):kr.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Kr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Nr.lookAt(Kr,kr,this.up):Nr.lookAt(kr,Kr,this.up),this.quaternion.setFromRotationMatrix(Nr),r&&(Nr.extractRotation(r.matrixWorld),Rr.setFromRotationMatrix(Nr),this.quaternion.premultiply(Rr.invert()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Wr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Yr)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Yr)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Nr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Nr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Nr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new qn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kr,e,Gr),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kr,Vr,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=A(e.geometries),r=A(e.materials),i=A(e.textures),o=A(e.images),s=A(e.shapes),a=A(e.skeletons),c=A(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),a.length>0&&(n.skeletons=a),c.length>0&&(n.animations=c)}return n.object=r,n;function A(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}});const Jr=new Jn,Zr=new Jn,$r=new kn;class ei{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==e?e:new Jn(1,0,0),this.constant=void 0!==t?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Jr.subVectors(n,t).cross(Zr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Jn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Jn);const n=e.delta(Jr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Jn),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||$r.getNormalMatrix(e),r=this.coplanarPoint(Jr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const ti=new Jn,ni=new Jn,ri=new Jn,ii=new Jn,Ai=new Jn,oi=new Jn,si=new Jn,ai=new Jn,ci=new Jn,li=new Jn;class ui{constructor(e,t,n){this.a=void 0!==e?e:new Jn,this.b=void 0!==t?t:new Jn,this.c=void 0!==n?n:new Jn}static getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Jn),r.subVectors(n,t),ti.subVectors(e,t),r.cross(ti);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ti.subVectors(r,t),ni.subVectors(n,t),ri.subVectors(e,t);const A=ti.dot(ti),o=ti.dot(ni),s=ti.dot(ri),a=ni.dot(ni),c=ni.dot(ri),l=A*a-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Jn),0===l)return i.set(-2,-1,-1);const u=1/l,h=(a*s-o*c)*u,d=(A*c-o*s)*u;return i.set(1-h-d,d,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(e,t,n,r,i,A,o,s){return this.getBarycoord(e,t,n,r,ii),s.set(0,0),s.addScaledVector(i,ii.x),s.addScaledVector(A,ii.y),s.addScaledVector(o,ii.z),s}static isFrontFacing(e,t,n,r){return ti.subVectors(n,t),ni.subVectors(e,t),ti.cross(ni).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ti.subVectors(this.c,this.b),ni.subVectors(this.a,this.b),.5*ti.cross(ni).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Jn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ui.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ei),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ui.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return ui.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return ui.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ui.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Jn);const n=this.a,r=this.b,i=this.c;let A,o;Ai.subVectors(r,n),oi.subVectors(i,n),ai.subVectors(e,n);const s=Ai.dot(ai),a=oi.dot(ai);if(s<=0&&a<=0)return t.copy(n);ci.subVectors(e,r);const c=Ai.dot(ci),l=oi.dot(ci);if(c>=0&&l<=c)return t.copy(r);const u=s*l-c*a;if(u<=0&&s>=0&&c<=0)return A=s/(s-c),t.copy(n).addScaledVector(Ai,A);li.subVectors(e,i);const h=Ai.dot(li),d=oi.dot(li);if(d>=0&&h<=d)return t.copy(i);const p=h*a-s*d;if(p<=0&&a>=0&&d<=0)return o=a/(a-d),t.copy(n).addScaledVector(oi,o);const f=c*d-h*l;if(f<=0&&l-c>=0&&h-d>=0)return si.subVectors(i,r),o=(l-c)/(l-c+(h-d)),t.copy(r).addScaledVector(si,o);const m=1/(f+p+u);return A=p*m,o=u*m,t.copy(n).addScaledVector(Ai,A).addScaledVector(oi,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},di={h:0,s:0,l:0},pi={h:0,s:0,l:0};function fi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function mi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function gi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class wi{constructor(e,t,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Rn.euclideanModulo(e,1),t=Rn.clamp(t,0,1),n=Rn.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=fi(i,r,e+1/3),this.g=fi(i,r,e),this.b=fi(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=hi[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=mi(e.r),this.g=mi(e.g),this.b=mi(e.b),this}copyLinearToSRGB(e){return this.r=gi(e.r),this.g=gi(e.g),this.b=gi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),A=Math.min(t,n,r);let o,s;const a=(A+i)/2;if(A===i)o=0,s=0;else{const e=i-A;switch(s=a<=.5?e/(i+A):e/(2-i-A),i){case t:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-t)/e+2;break;case r:o=(t-n)/e+4;break}o/=6}return e.h=o,e.s=s,e.l=a,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(di),di.h+=e,di.s+=t,di.l+=n,this.setHSL(di.h,di.s,di.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(di),e.getHSL(pi);const n=Rn.lerp(di.h,pi.h,t),r=Rn.lerp(di.s,pi.s,t),i=Rn.lerp(di.l,pi.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}wi.NAMES=hi,wi.prototype.r=1,wi.prototype.g=1,wi.prototype.b=1;class vi{constructor(e,t,n,r,i,A=0){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Jn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new wi,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=A}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let xi=0;function yi(){Object.defineProperty(this,"id",{value:xi++}),this.uuid=Rn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=x,this.side=p,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=D,this.blendDst=I,this.blendEquation=M,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Cn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ln,this.stencilZFail=ln,this.stencilZPass=ln,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Bi(e){yi.call(this),this.type="MeshBasicMaterial",this.color=new wi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}yi.prototype=Object.assign(Object.create(On.prototype),{constructor:yi,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===g;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(yi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Bi.prototype=Object.create(yi.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isMeshBasicMaterial=!0,Bi.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const bi=new Jn,Ci=new Nn;function Mi(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Mn,this.updateRange={offset:0,count:-1},this.version=0}function Ei(e,t,n){Mi.call(this,new Int8Array(e),t,n)}function Fi(e,t,n){Mi.call(this,new Uint8Array(e),t,n)}function _i(e,t,n){Mi.call(this,new Uint8ClampedArray(e),t,n)}function Ti(e,t,n){Mi.call(this,new Int16Array(e),t,n)}function Ui(e,t,n){Mi.call(this,new Uint16Array(e),t,n)}function Si(e,t,n){Mi.call(this,new Int32Array(e),t,n)}function Qi(e,t,n){Mi.call(this,new Uint32Array(e),t,n)}function Li(e,t,n){Mi.call(this,new Uint16Array(e),t,n)}function Di(e,t,n){Mi.call(this,new Float32Array(e),t,n)}function Ii(e,t,n){Mi.call(this,new Float64Array(e),t,n)}Object.defineProperty(Mi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Mi.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new wi),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Nn),t[n++]=i.x,t[n++]=i.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Jn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Xn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix3(e),this.setXY(t,Ci.x,Ci.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)bi.fromBufferAttribute(this,t),bi.applyMatrix3(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)bi.x=this.getX(t),bi.y=this.getY(t),bi.z=this.getZ(t),bi.applyMatrix4(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)bi.x=this.getX(t),bi.y=this.getY(t),bi.z=this.getZ(t),bi.applyNormalMatrix(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)bi.x=this.getX(t),bi.y=this.getY(t),bi.z=this.getZ(t),bi.transformDirection(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ei.prototype=Object.create(Mi.prototype),Ei.prototype.constructor=Ei,Fi.prototype=Object.create(Mi.prototype),Fi.prototype.constructor=Fi,_i.prototype=Object.create(Mi.prototype),_i.prototype.constructor=_i,Ti.prototype=Object.create(Mi.prototype),Ti.prototype.constructor=Ti,Ui.prototype=Object.create(Mi.prototype),Ui.prototype.constructor=Ui,Si.prototype=Object.create(Mi.prototype),Si.prototype.constructor=Si,Qi.prototype=Object.create(Mi.prototype),Qi.prototype.constructor=Qi,Li.prototype=Object.create(Mi.prototype),Li.prototype.constructor=Li,Li.prototype.isFloat16BufferAttribute=!0,Di.prototype=Object.create(Mi.prototype),Di.prototype.constructor=Di,Ii.prototype=Object.create(Mi.prototype),Ii.prototype.constructor=Ii;class Oi{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let n,r,i=void 0;const A=e.faces;for(r=0;r<A.length;r++){const e=A[r];e.materialIndex!==i&&(i=e.materialIndex,void 0!==n&&(n.count=3*r-n.start,t.push(n)),n={start:3*r,materialIndex:i})}void 0!==n&&(n.count=3*r-n.start,t.push(n)),this.groups=t}fromGeometry(e){const t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,A=r[1]&&r[1].length>0,o=e.morphTargets,s=o.length;let a;if(s>0){a=[];for(let e=0;e<s;e++)a[e]={name:o[e].name,data:[]};this.morphTargets.position=a}const c=e.morphNormals,l=c.length;let u;if(l>0){u=[];for(let e=0;e<l;e++)u[e]={name:c[e].name,data:[]};this.morphTargets.normal=u}const h=e.skinIndices,d=e.skinWeights,p=h.length===n.length,f=d.length===n.length;n.length>0&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let m=0;m<t.length;m++){const e=t[m];this.vertices.push(n[e.a],n[e.b],n[e.c]);const g=e.vertexNormals;if(3===g.length)this.normals.push(g[0],g[1],g[2]);else{const t=e.normal;this.normals.push(t,t,t)}const w=e.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{const t=e.color;this.colors.push(t,t,t)}if(!0===i){const e=r[0][m];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new Nn,new Nn,new Nn))}if(!0===A){const e=r[1][m];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new Nn,new Nn,new Nn))}for(let t=0;t<s;t++){const n=o[t].vertices;a[t].data.push(n[e.a],n[e.b],n[e.c])}for(let t=0;t<l;t++){const e=c[t].vertexNormals[m];u[t].data.push(e.a,e.b,e.c)}p&&this.skinIndices.push(h[e.a],h[e.b],h[e.c]),f&&this.skinWeights.push(d[e.a],d[e.b],d[e.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}}function Pi(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}const Hi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ri(e,t){return new Hi[e](t)}let Ni=1;const ki=new Mr,Ki=new qr,Gi=new Jn,Vi=new er,zi=new er,ji=new Jn;function Xi(){Object.defineProperty(this,"id",{value:Ni+=2}),this.uuid=Rn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Xi.prototype=Object.assign(Object.create(On.prototype),{constructor:Xi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(Pi(e)>65535?Qi:Ui)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new kn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return ki.makeRotationX(e),this.applyMatrix4(ki),this},rotateY:function(e){return ki.makeRotationY(e),this.applyMatrix4(ki),this},rotateZ:function(e){return ki.makeRotationZ(e),this.applyMatrix4(ki),this},translate:function(e,t,n){return ki.makeTranslation(e,t,n),this.applyMatrix4(ki),this},scale:function(e,t,n){return ki.makeScale(e,t,n),this.applyMatrix4(ki),this},lookAt:function(e){return Ki.lookAt(e),Ki.updateMatrix(),this.applyMatrix4(Ki.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gi).negate(),this.translate(Gi.x,Gi.y,Gi.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const e=new Di(3*t.vertices.length,3),n=new Di(3*t.colors.length,3);if(this.setAttribute("position",e.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const e=new Di(t.lineDistances.length,1);this.setAttribute("lineDistance",e.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Di(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let e=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(e=void 0,t.elementsNeedUpdate=!1),void 0===e)return this.fromGeometry(t);e.verticesNeedUpdate=t.verticesNeedUpdate,e.normalsNeedUpdate=t.normalsNeedUpdate,e.colorsNeedUpdate=t.colorsNeedUpdate,e.uvsNeedUpdate=t.uvsNeedUpdate,e.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=e}if(!0===t.verticesNeedUpdate){const e=this.attributes.position;void 0!==e&&(e.copyVector3sArray(t.vertices),e.needsUpdate=!0),t.verticesNeedUpdate=!1}if(!0===t.normalsNeedUpdate){const e=this.attributes.normal;void 0!==e&&(e.copyVector3sArray(t.normals),e.needsUpdate=!0),t.normalsNeedUpdate=!1}if(!0===t.colorsNeedUpdate){const e=this.attributes.color;void 0!==e&&(e.copyColorsArray(t.colors),e.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const e=this.attributes.uv;void 0!==e&&(e.copyVector2sArray(t.uvs),e.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const e=this.attributes.lineDistance;void 0!==e&&(e.copyArray(t.lineDistances),e.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Oi).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new Mi(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const t=new Float32Array(3*e.normals.length);this.setAttribute("normal",new Mi(t,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const t=new Float32Array(3*e.colors.length);this.setAttribute("color",new Mi(t,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const t=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new Mi(t,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const t=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new Mi(t,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const n in e.morphTargets){const t=[],r=e.morphTargets[n];for(let e=0,n=r.length;e<n;e++){const n=r[e],i=new Di(3*n.data.length,3);i.name=n.name,t.push(i.copyVector3sArray(n.data))}this.morphAttributes[n]=t}if(e.skinIndices.length>0){const t=new Di(4*e.skinIndices.length,4);this.setAttribute("skinIndex",t.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const t=new Di(4*e.skinWeights.length,4);this.setAttribute("skinWeight",t.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new er);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Jn(-1/0,-1/0,-1/0),new Jn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];Vi.setFromBufferAttribute(e),this.morphTargetsRelative?(ji.addVectors(this.boundingBox.min,Vi.min),this.boundingBox.expandByPoint(ji),ji.addVectors(this.boundingBox.max,Vi.max),this.boundingBox.expandByPoint(ji)):(this.boundingBox.expandByPoint(Vi.min),this.boundingBox.expandByPoint(Vi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Jn,1/0);if(e){const n=this.boundingSphere.center;if(Vi.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];zi.setFromBufferAttribute(n),this.morphTargetsRelative?(ji.addVectors(Vi.min,zi.min),Vi.expandByPoint(ji),ji.addVectors(Vi.max,zi.max),Vi.expandByPoint(ji)):(Vi.expandByPoint(zi.min),Vi.expandByPoint(zi.max))}Vi.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)ji.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(ji));if(t)for(let i=0,A=t.length;i<A;i++){const A=t[i],o=this.morphTargetsRelative;for(let t=0,i=A.count;t<i;t++)ji.fromBufferAttribute(A,t),o&&(Gi.fromBufferAttribute(e,t),ji.add(Gi)),r=Math.max(r,n.distanceToSquared(ji))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Mi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Jn,i=new Jn,A=new Jn,o=new Jn,s=new Jn,a=new Jn,c=new Jn,l=new Jn;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),d=e.getX(u+1),p=e.getX(u+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,d),A.fromBufferAttribute(t,p),c.subVectors(A,i),l.subVectors(r,i),c.cross(l),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),o.add(c),s.add(c),a.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z)}else for(let e=0,u=t.count;e<u;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),A.fromBufferAttribute(t,e+2),c.subVectors(A,i),l.subVectors(r,i),c.cross(l),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r],A=i.array,o=e.attributes[r],s=o.array,a=o.itemSize*t,c=Math.min(s.length,A.length-a);for(let e=0,t=a;e<c;e++,t++)A[t]=s[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ji.fromBufferAttribute(e,t),ji.normalize(),e.setXYZ(t,ji.x,ji.y,ji.z)},toNonIndexed:function(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,A=new n.constructor(t.length*r);let o=0,s=0;for(let a=0,c=t.length;a<c;a++){o=t[a]*r;for(let e=0;e<r;e++)A[s++]=n[o++]}return new Mi(A,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Xi,n=this.index.array,r=this.attributes;for(const o in r){const i=r[o],A=e(i,n);t.setAttribute(o,A)}const i=this.morphAttributes;for(const o in i){const r=[],A=i[o];for(let t=0,i=A.length;t<i;t++){const i=A[t],o=e(i,n);r.push(o)}t.morphAttributes[o]=r}t.morphTargetsRelative=this.morphTargetsRelative;const A=this.groups;for(let o=0,s=A.length;o<s;o++){const e=A[o];t.addGroup(e.start,e.count,e.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s],r=t.toJSON(e.data);""!==t.name&&(r.name=t.name),e.data.attributes[s]=r}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r],A=i.toJSON(e.data);""!==i.name&&(A.name=i.name),n.push(A)}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const A=this.groups;A.length>0&&(e.data.groups=JSON.parse(JSON.stringify(A)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e},clone:function(){return(new Xi).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const a in r){const e=r[a];this.setAttribute(a,e.clone(t))}const i=e.morphAttributes;for(const a in i){const e=[],n=i[a];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[a]=e}this.morphTargetsRelative=e.morphTargetsRelative;const A=e.groups;for(let a=0,c=A.length;a<c;a++){const e=A[a];this.addGroup(e.start,e.count,e.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Wi=new Mr,Yi=new Cr,qi=new mr,Ji=new Jn,Zi=new Jn,$i=new Jn,eA=new Jn,tA=new Jn,nA=new Jn,rA=new Jn,iA=new Jn,AA=new Jn,oA=new Nn,sA=new Nn,aA=new Nn,cA=new Jn,lA=new Jn;function uA(e=new Xi,t=new Bi){qr.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}function hA(e,t,n,r,i,A,o,s){let a;if(a=t.side===f?r.intersectTriangle(o,A,i,!0,s):r.intersectTriangle(i,A,o,t.side!==m,s),null===a)return null;lA.copy(s),lA.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(lA);return c<n.near||c>n.far?null:{distance:c,point:lA.clone(),object:e}}function dA(e,t,n,r,i,A,o,s,a,c,l,u){Ji.fromBufferAttribute(i,c),Zi.fromBufferAttribute(i,l),$i.fromBufferAttribute(i,u);const h=e.morphTargetInfluences;if(t.morphTargets&&A&&h){rA.set(0,0,0),iA.set(0,0,0),AA.set(0,0,0);for(let e=0,t=A.length;e<t;e++){const t=h[e],n=A[e];0!==t&&(eA.fromBufferAttribute(n,c),tA.fromBufferAttribute(n,l),nA.fromBufferAttribute(n,u),o?(rA.addScaledVector(eA,t),iA.addScaledVector(tA,t),AA.addScaledVector(nA,t)):(rA.addScaledVector(eA.sub(Ji),t),iA.addScaledVector(tA.sub(Zi),t),AA.addScaledVector(nA.sub($i),t)))}Ji.add(rA),Zi.add(iA),$i.add(AA)}e.isSkinnedMesh&&(e.boneTransform(c,Ji),e.boneTransform(l,Zi),e.boneTransform(u,$i));const d=hA(e,t,n,r,Ji,Zi,$i,cA);if(d){s&&(oA.fromBufferAttribute(s,c),sA.fromBufferAttribute(s,l),aA.fromBufferAttribute(s,u),d.uv=ui.getUV(cA,Ji,Zi,$i,oA,sA,aA,new Nn)),a&&(oA.fromBufferAttribute(a,c),sA.fromBufferAttribute(a,l),aA.fromBufferAttribute(a,u),d.uv2=ui.getUV(cA,Ji,Zi,$i,oA,sA,aA,new Nn));const e=new vi(c,l,u);ui.getNormal(Ji,Zi,$i,e.normal),d.face=e}return d}uA.prototype=Object.assign(Object.create(qr.prototype),{constructor:uA,isMesh:!0,copy:function(e){return qr.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),qi.copy(n.boundingSphere),qi.applyMatrix4(i),!1===e.ray.intersectsSphere(qi))return;if(Wi.copy(i).invert(),Yi.copy(e.ray).applyMatrix4(Wi),null!==n.boundingBox&&!1===Yi.intersectsBox(n.boundingBox))return;let A;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative,c=n.attributes.uv,l=n.attributes.uv2,u=n.groups,h=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,d=u.length;n<d;n++){const d=u[n],p=r[d.materialIndex],f=Math.max(d.start,h.start),m=Math.min(d.start+d.count,h.start+h.count);for(let n=f,r=m;n<r;n+=3){const r=i.getX(n),u=i.getX(n+1),h=i.getX(n+2);A=dA(this,p,e,Yi,o,s,a,c,l,r,u,h),A&&(A.faceIndex=Math.floor(n/3),A.face.materialIndex=d.materialIndex,t.push(A))}}else{const n=Math.max(0,h.start),u=Math.min(i.count,h.start+h.count);for(let h=n,d=u;h<d;h+=3){const n=i.getX(h),u=i.getX(h+1),d=i.getX(h+2);A=dA(this,r,e,Yi,o,s,a,c,l,n,u,d),A&&(A.faceIndex=Math.floor(h/3),t.push(A))}}else if(void 0!==o)if(Array.isArray(r))for(let n=0,d=u.length;n<d;n++){const i=u[n],d=r[i.materialIndex],p=Math.max(i.start,h.start),f=Math.min(i.start+i.count,h.start+h.count);for(let n=p,r=f;n<r;n+=3){const r=n,u=n+1,h=n+2;A=dA(this,d,e,Yi,o,s,a,c,l,r,u,h),A&&(A.faceIndex=Math.floor(n/3),A.face.materialIndex=i.materialIndex,t.push(A))}}else{const n=Math.max(0,h.start),i=Math.min(o.count,h.start+h.count);for(let u=n,h=i;u<h;u+=3){const n=u,i=u+1,h=u+2;A=dA(this,r,e,Yi,o,s,a,c,l,n,i,h),A&&(A.faceIndex=Math.floor(u/3),t.push(A))}}}else if(n.isGeometry){const i=Array.isArray(r),o=n.vertices,s=n.faces;let a;const c=n.faceVertexUvs[0];c.length>0&&(a=c);for(let n=0,l=s.length;n<l;n++){const c=s[n],l=i?r[c.materialIndex]:r;if(void 0===l)continue;const u=o[c.a],h=o[c.b],d=o[c.c];if(A=hA(this,l,e,Yi,u,h,d,cA),A){if(a&&a[n]){const e=a[n];oA.copy(e[0]),sA.copy(e[1]),aA.copy(e[2]),A.uv=ui.getUV(cA,u,h,d,oA,sA,aA,new Nn)}A.face=c,A.faceIndex=n,t.push(A)}}}}});class pA extends Xi{constructor(e=1,t=1,n=1,r=1,i=1,A=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:A};const o=this;r=Math.floor(r),i=Math.floor(i),A=Math.floor(A);const s=[],a=[],c=[],l=[];let u=0,h=0;function d(e,t,n,r,i,A,d,p,f,m,g){const w=A/f,v=d/m,x=A/2,y=d/2,B=p/2,b=f+1,C=m+1;let M=0,E=0;const F=new Jn;for(let o=0;o<C;o++){const A=o*v-y;for(let s=0;s<b;s++){const u=s*w-x;F[e]=u*r,F[t]=A*i,F[n]=B,a.push(F.x,F.y,F.z),F[e]=0,F[t]=0,F[n]=p>0?1:-1,c.push(F.x,F.y,F.z),l.push(s/f),l.push(1-o/m),M+=1}}for(let o=0;o<m;o++)for(let e=0;e<f;e++){const t=u+e+b*o,n=u+e+b*(o+1),r=u+(e+1)+b*(o+1),i=u+(e+1)+b*o;s.push(t,n,i),s.push(n,r,i),E+=6}o.addGroup(h,E,g),h+=E,u+=M}d("z","y","x",-1,-1,n,t,e,A,i,0),d("z","y","x",1,-1,n,t,-e,A,i,1),d("x","z","y",1,1,e,n,t,r,A,2),d("x","z","y",1,-1,e,n,-t,r,A,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Di(a,3)),this.setAttribute("normal",new Di(c,3)),this.setAttribute("uv",new Di(l,2))}}function fA(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function mA(e){const t={};for(let n=0;n<e.length;n++){const r=fA(e[n]);for(const e in r)t[e]=r[e]}return t}const gA={clone:fA,merge:mA};var wA="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",vA="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function xA(e){yi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=wA,this.fragmentShader=vA,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function yA(){qr.call(this),this.type="Camera",this.matrixWorldInverse=new Mr,this.projectionMatrix=new Mr,this.projectionMatrixInverse=new Mr}function BA(e=50,t=1,n=.1,r=2e3){yA.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}xA.prototype=Object.create(yi.prototype),xA.prototype.constructor=xA,xA.prototype.isShaderMaterial=!0,xA.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fA(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},xA.prototype.toJSON=function(e){const t=yi.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},yA.prototype=Object.assign(Object.create(qr.prototype),{constructor:yA,isCamera:!0,copy:function(e,t){return qr.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){qr.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){qr.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),BA.prototype=Object.assign(Object.create(yA.prototype),{constructor:BA,isPerspectiveCamera:!0,copy:function(e,t){return yA.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Rn.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*Rn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Rn.RAD2DEG*Math.atan(Math.tan(.5*Rn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,A){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=A,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*Rn.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const A=this.view;if(null!==this.view&&this.view.enabled){const e=A.fullWidth,o=A.fullHeight;i+=A.offsetX*r/e,t-=A.offsetY*n/o,r*=A.width/e,n*=A.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=qr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const bA=90,CA=1;function MA(e,t,n){if(qr.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new BA(bA,CA,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Jn(1,0,0)),this.add(r);const i=new BA(bA,CA,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Jn(-1,0,0)),this.add(i);const A=new BA(bA,CA,e,t);A.layers=this.layers,A.up.set(0,0,1),A.lookAt(new Jn(0,1,0)),this.add(A);const o=new BA(bA,CA,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Jn(0,-1,0)),this.add(o);const s=new BA(bA,CA,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Jn(0,0,1)),this.add(s);const a=new BA(bA,CA,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Jn(0,0,-1)),this.add(a),this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();const c=e.xr.enabled,l=e.getRenderTarget();e.xr.enabled=!1;const u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,A),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=u,e.setRenderTarget(n,5),e.render(t,a),e.setRenderTarget(l),e.xr.enabled=c}}function EA(e,t,n,r,i,A,o,s,a,c){e=void 0!==e?e:[],t=void 0!==t?t:Ae,o=void 0!==o?o:Pe,zn.call(this,e,t,n,r,i,A,o,s,a,c),this.flipY=!1,this._needsFlipEnvMap=!0}function FA(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),Wn.call(this,e,e,t),t=t||{},this.texture=new EA(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}function _A(e,t,n,r,i,A,o,s,a,c,l,u){zn.call(this,null,A,o,s,a,c,r,i,l,u),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==a?a:pe,this.minFilter=void 0!==c?c:pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}MA.prototype=Object.create(qr.prototype),MA.prototype.constructor=MA,EA.prototype=Object.create(zn.prototype),EA.prototype.constructor=EA,EA.prototype.isCubeTexture=!0,Object.defineProperty(EA.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),FA.prototype=Object.create(Wn.prototype),FA.prototype.constructor=FA,FA.prototype.isWebGLCubeRenderTarget=!0,FA.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=He,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},r=new pA(5,5,5),i=new xA({name:"CubemapFromEquirect",uniforms:fA(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:v});i.uniforms.tEquirect.value=t;const A=new uA(r,i),o=t.minFilter;t.minFilter===Be&&(t.minFilter=ve);const s=new MA(1,10,this);return s.update(e,A),t.minFilter=o,A.geometry.dispose(),A.material.dispose(),this},FA.prototype.clear=function(e,t,n,r){const i=e.getRenderTarget();for(let A=0;A<6;A++)e.setRenderTarget(this,A),e.clear(t,n,r);e.setRenderTarget(i)},_A.prototype=Object.create(zn.prototype),_A.prototype.constructor=_A,_A.prototype.isDataTexture=!0;const TA=new mr,UA=new Jn;class SA{constructor(e,t,n,r,i,A){this.planes=[void 0!==e?e:new ei,void 0!==t?t:new ei,void 0!==n?n:new ei,void 0!==r?r:new ei,void 0!==i?i:new ei,void 0!==A?A:new ei]}set(e,t,n,r,i,A){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(A),this}clone(){return(new this.constructor).copy(this)}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],A=n[2],o=n[3],s=n[4],a=n[5],c=n[6],l=n[7],u=n[8],h=n[9],d=n[10],p=n[11],f=n[12],m=n[13],g=n[14],w=n[15];return t[0].setComponents(o-r,l-s,p-u,w-f).normalize(),t[1].setComponents(o+r,l+s,p+u,w+f).normalize(),t[2].setComponents(o+i,l+a,p+h,w+m).normalize(),t[3].setComponents(o-i,l-a,p-h,w-m).normalize(),t[4].setComponents(o-A,l-c,p-d,w-g).normalize(),t[5].setComponents(o+A,l+c,p+d,w+g).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),TA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(TA)}intersectsSprite(e){return TA.center.set(0,0,0),TA.radius=.7071067811865476,TA.applyMatrix4(e.matrixWorld),this.intersectsSphere(TA)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){const e=t[i].distanceToPoint(n);if(e<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(UA.x=r.normal.x>0?e.max.x:e.min.x,UA.y=r.normal.y>0?e.max.y:e.min.y,UA.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(UA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}function QA(){let e=null,t=!1,n=null,r=null;function i(t,A){n(t,A),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function LA(e,t){const n=t.isWebGL2,r=new WeakMap;function i(t,r){const i=t.array,A=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,A),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function A(t,r,i){const A=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,A):(n?e.bufferSubData(i,o.offset*A.BYTES_PER_ELEMENT,A,o.offset,o.count):e.bufferSubData(i,o.offset*A.BYTES_PER_ELEMENT,A.subarray(o.offset,o.offset+o.count)),o.count=-1)}function o(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)}function s(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))}function a(e,t){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);void 0===n?r.set(e,i(e,t)):n.version<e.version&&(A(n.buffer,e,t),n.version=e.version)}return{get:o,remove:s,update:a}}class DA extends Xi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,A=t/2,o=Math.floor(n),s=Math.floor(r),a=o+1,c=s+1,l=e/o,u=t/s,h=[],d=[],p=[],f=[];for(let m=0;m<c;m++){const e=m*u-A;for(let t=0;t<a;t++){const n=t*l-i;d.push(n,-e,0),p.push(0,0,1),f.push(t/o),f.push(1-m/s)}}for(let m=0;m<s;m++)for(let e=0;e<o;e++){const t=e+a*m,n=e+a*(m+1),r=e+1+a*(m+1),i=e+1+a*m;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new Di(d,3)),this.setAttribute("normal",new Di(p,3)),this.setAttribute("uv",new Di(f,2))}}var IA="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",OA="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",PA="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",HA="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",RA="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",NA="vec3 transformed = vec3( position );",kA="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",KA="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",GA="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",VA="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",zA="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",jA="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",XA="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",WA="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",YA="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",qA="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",JA="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",ZA="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",$A="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",eo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",to="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",no="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",ro="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",io="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Ao="gl_FragColor = linearToOutputTexel( gl_FragColor );",oo="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",so="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",ao="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",co="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",lo="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",uo="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ho="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",po="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fo="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",mo="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",go="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",wo="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",vo="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",xo="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",yo="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",Bo="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",bo="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Co="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Mo="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Eo="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Fo="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",_o="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",To="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",Uo="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",So="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Qo="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Lo="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",Do="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Io="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Oo="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",Po="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Ho="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Ro="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",No="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ko="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ko="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",Go="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Vo="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",zo="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",jo="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",Xo="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",Wo="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Yo="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",qo="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Jo="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Zo="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",$o="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",es="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",ts="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",ns="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",rs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",is="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",As="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",os="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",ss="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",as="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",cs="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",ls="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",us="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",hs="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ds="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ps="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",fs="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ms="#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",gs="#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",ws="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",vs="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",xs="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",ys="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Bs="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",bs="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Cs="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Ms="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Es="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Fs="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",_s="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Ts="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Us="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Ss="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Qs="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Ls="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ds="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Is="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Os="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ps="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Hs="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Rs="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ns="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ks="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ks="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Gs="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Vs="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",zs="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",js="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Xs="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ws="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ys="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",qs="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Js="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Zs="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",$s="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",ea="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",ta="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",na="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";const ra={alphamap_fragment:IA,alphamap_pars_fragment:OA,alphatest_fragment:PA,aomap_fragment:HA,aomap_pars_fragment:RA,begin_vertex:NA,beginnormal_vertex:kA,bsdfs:KA,bumpmap_pars_fragment:GA,clipping_planes_fragment:VA,clipping_planes_pars_fragment:zA,clipping_planes_pars_vertex:jA,clipping_planes_vertex:XA,color_fragment:WA,color_pars_fragment:YA,color_pars_vertex:qA,color_vertex:JA,common:ZA,cube_uv_reflection_fragment:$A,defaultnormal_vertex:eo,displacementmap_pars_vertex:to,displacementmap_vertex:no,emissivemap_fragment:ro,emissivemap_pars_fragment:io,encodings_fragment:Ao,encodings_pars_fragment:oo,envmap_fragment:so,envmap_common_pars_fragment:ao,envmap_pars_fragment:co,envmap_pars_vertex:lo,envmap_physical_pars_fragment:Bo,envmap_vertex:uo,fog_vertex:ho,fog_pars_vertex:po,fog_fragment:fo,fog_pars_fragment:mo,gradientmap_pars_fragment:go,lightmap_fragment:wo,lightmap_pars_fragment:vo,lights_lambert_vertex:xo,lights_pars_begin:yo,lights_toon_fragment:bo,lights_toon_pars_fragment:Co,lights_phong_fragment:Mo,lights_phong_pars_fragment:Eo,lights_physical_fragment:Fo,lights_physical_pars_fragment:_o,lights_fragment_begin:To,lights_fragment_maps:Uo,lights_fragment_end:So,logdepthbuf_fragment:Qo,logdepthbuf_pars_fragment:Lo,logdepthbuf_pars_vertex:Do,logdepthbuf_vertex:Io,map_fragment:Oo,map_pars_fragment:Po,map_particle_fragment:Ho,map_particle_pars_fragment:Ro,metalnessmap_fragment:No,metalnessmap_pars_fragment:ko,morphnormal_vertex:Ko,morphtarget_pars_vertex:Go,morphtarget_vertex:Vo,normal_fragment_begin:zo,normal_fragment_maps:jo,normalmap_pars_fragment:Xo,clearcoat_normal_fragment_begin:Wo,clearcoat_normal_fragment_maps:Yo,clearcoat_pars_fragment:qo,packing:Jo,premultiplied_alpha_fragment:Zo,project_vertex:$o,dithering_fragment:es,dithering_pars_fragment:ts,roughnessmap_fragment:ns,roughnessmap_pars_fragment:rs,shadowmap_pars_fragment:is,shadowmap_pars_vertex:As,shadowmap_vertex:os,shadowmask_pars_fragment:ss,skinbase_vertex:as,skinning_pars_vertex:cs,skinning_vertex:ls,skinnormal_vertex:us,specularmap_fragment:hs,specularmap_pars_fragment:ds,tonemapping_fragment:ps,tonemapping_pars_fragment:fs,transmissionmap_fragment:ms,transmissionmap_pars_fragment:gs,uv_pars_fragment:ws,uv_pars_vertex:vs,uv_vertex:xs,uv2_pars_fragment:ys,uv2_pars_vertex:Bs,uv2_vertex:bs,worldpos_vertex:Cs,background_frag:Ms,background_vert:Es,cube_frag:Fs,cube_vert:_s,depth_frag:Ts,depth_vert:Us,distanceRGBA_frag:Ss,distanceRGBA_vert:Qs,equirect_frag:Ls,equirect_vert:Ds,linedashed_frag:Is,linedashed_vert:Os,meshbasic_frag:Ps,meshbasic_vert:Hs,meshlambert_frag:Rs,meshlambert_vert:Ns,meshmatcap_frag:ks,meshmatcap_vert:Ks,meshtoon_frag:Gs,meshtoon_vert:Vs,meshphong_frag:zs,meshphong_vert:js,meshphysical_frag:Xs,meshphysical_vert:Ws,normal_frag:Ys,normal_vert:qs,points_frag:Js,points_vert:Zs,shadow_frag:$s,shadow_vert:ea,sprite_frag:ta,sprite_vert:na},ia={common:{diffuse:{value:new wi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new kn},uv2Transform:{value:new kn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Nn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new kn}},sprite:{diffuse:{value:new wi(15658734)},opacity:{value:1},center:{value:new Nn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new kn}}},Aa={basic:{uniforms:mA([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.fog]),vertexShader:ra.meshbasic_vert,fragmentShader:ra.meshbasic_frag},lambert:{uniforms:mA([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.fog,ia.lights,{emissive:{value:new wi(0)}}]),vertexShader:ra.meshlambert_vert,fragmentShader:ra.meshlambert_frag},phong:{uniforms:mA([ia.common,ia.specularmap,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.fog,ia.lights,{emissive:{value:new wi(0)},specular:{value:new wi(1118481)},shininess:{value:30}}]),vertexShader:ra.meshphong_vert,fragmentShader:ra.meshphong_frag},standard:{uniforms:mA([ia.common,ia.envmap,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.roughnessmap,ia.metalnessmap,ia.fog,ia.lights,{emissive:{value:new wi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ra.meshphysical_vert,fragmentShader:ra.meshphysical_frag},toon:{uniforms:mA([ia.common,ia.aomap,ia.lightmap,ia.emissivemap,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.gradientmap,ia.fog,ia.lights,{emissive:{value:new wi(0)}}]),vertexShader:ra.meshtoon_vert,fragmentShader:ra.meshtoon_frag},matcap:{uniforms:mA([ia.common,ia.bumpmap,ia.normalmap,ia.displacementmap,ia.fog,{matcap:{value:null}}]),vertexShader:ra.meshmatcap_vert,fragmentShader:ra.meshmatcap_frag},points:{uniforms:mA([ia.points,ia.fog]),vertexShader:ra.points_vert,fragmentShader:ra.points_frag},dashed:{uniforms:mA([ia.common,ia.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ra.linedashed_vert,fragmentShader:ra.linedashed_frag},depth:{uniforms:mA([ia.common,ia.displacementmap]),vertexShader:ra.depth_vert,fragmentShader:ra.depth_frag},normal:{uniforms:mA([ia.common,ia.bumpmap,ia.normalmap,ia.displacementmap,{opacity:{value:1}}]),vertexShader:ra.normal_vert,fragmentShader:ra.normal_frag},sprite:{uniforms:mA([ia.sprite,ia.fog]),vertexShader:ra.sprite_vert,fragmentShader:ra.sprite_frag},background:{uniforms:{uvTransform:{value:new kn},t2D:{value:null}},vertexShader:ra.background_vert,fragmentShader:ra.background_frag},cube:{uniforms:mA([ia.envmap,{opacity:{value:1}}]),vertexShader:ra.cube_vert,fragmentShader:ra.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ra.equirect_vert,fragmentShader:ra.equirect_frag},distanceRGBA:{uniforms:mA([ia.common,ia.displacementmap,{referencePosition:{value:new Jn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ra.distanceRGBA_vert,fragmentShader:ra.distanceRGBA_frag},shadow:{uniforms:mA([ia.lights,ia.fog,{color:{value:new wi(0)},opacity:{value:1}}]),vertexShader:ra.shadow_vert,fragmentShader:ra.shadow_frag}};function oa(e,t,n,r,i){const A=new wi(0);let o,s,a=0,c=null,l=0,u=null;function h(n,i,h,m){let g=!0===i.isScene?i.background:null;g&&g.isTexture&&(g=t.get(g));const w=e.xr,v=w.getSession&&w.getSession();v&&"additive"===v.environmentBlendMode&&(g=null),null===g?d(A,a):g&&g.isColor&&(d(g,1),m=!0),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.mapping===ce)?(void 0===s&&(s=new uA(new pA(1,1,1),new xA({name:"BackgroundCubeMaterial",uniforms:fA(Aa.cube.uniforms),vertexShader:Aa.cube.vertexShader,fragmentShader:Aa.cube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),g.isWebGLCubeRenderTarget&&(g=g.texture),s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,c===g&&l===g.version&&u===e.toneMapping||(s.material.needsUpdate=!0,c=g,l=g.version,u=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):g&&g.isTexture&&(void 0===o&&(o=new uA(new DA(2,2),new xA({name:"BackgroundMaterial",uniforms:fA(Aa.background.uniforms),vertexShader:Aa.background.vertexShader,fragmentShader:Aa.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),o.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&l===g.version&&u===e.toneMapping||(o.material.needsUpdate=!0,c=g,l=g.version,u=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return A},setClearColor:function(e,t=1){A.set(e),a=t,d(A,a)},getClearAlpha:function(){return a},setClearAlpha:function(e){a=e,d(A,a)},render:h}}function sa(e,t,n,r){const i=e.getParameter(34921),A=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==A,s={},a=f(null);let c=a;function l(t,r,i,A,s){let a=!1;if(o){const e=p(A,i,r);c!==e&&(c=e,h(c.object)),a=m(A,s),a&&g(A,s)}else{const e=!0===r.wireframe;c.geometry===A.id&&c.program===i.id&&c.wireframe===e||(c.geometry=A.id,c.program=i.id,c.wireframe=e,a=!0)}!0===t.isInstancedMesh&&(a=!0),null!==s&&n.update(s,34963),a&&(b(t,r,i,A),null!==s&&e.bindBuffer(34963,n.get(s).buffer))}function u(){return r.isWebGL2?e.createVertexArray():A.createVertexArrayOES()}function h(t){return r.isWebGL2?e.bindVertexArray(t):A.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):A.deleteVertexArrayOES(t)}function p(e,t,n){const r=!0===n.wireframe;let i=s[e.id];void 0===i&&(i={},s[e.id]=i);let A=i[t.id];void 0===A&&(A={},i[t.id]=A);let o=A[r];return void 0===o&&(o=f(u()),A[r]=o),o}function f(e){const t=[],n=[],r=[];for(let A=0;A<i;A++)t[A]=0,n[A]=0,r[A]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function m(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const A in r){const e=n[A],t=r[A];if(void 0===e)return!0;if(e.attribute!==t)return!0;if(e.data!==t.data)return!0;i++}return c.attributesNum!==i||c.index!==t}function g(e,t){const n={},r=e.attributes;let i=0;for(const A in r){const e=r[A],t={};t.attribute=e,e.data&&(t.data=e.data),n[A]=t,i++}c.attributes=n,c.attributesNum=i,c.index=t}function w(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function v(e){x(e,0)}function x(n,i){const A=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;if(A[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i){const A=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");A[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function y(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function B(t,n,i,A,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,A,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function b(i,A,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;w();const a=s.attributes,c=o.getAttributes(),l=A.defaultAttributeValues;for(const t in c){const r=c[t];if(r>=0){const A=a[t];if(void 0!==A){const t=A.normalized,i=A.itemSize,o=n.get(A);if(void 0===o)continue;const a=o.buffer,c=o.type,l=o.bytesPerElement;if(A.isInterleavedBufferAttribute){const n=A.data,o=n.stride,u=A.offset;n&&n.isInstancedInterleavedBuffer?(x(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):v(r),e.bindBuffer(34962,a),B(r,i,c,t,o*l,u*l)}else A.isInstancedBufferAttribute?(x(r,A.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)):v(r),e.bindBuffer(34962,a),B(r,i,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const A=t.buffer,o=t.type;x(r+0,1),x(r+1,1),x(r+2,1),x(r+3,1),e.bindBuffer(34962,A),e.vertexAttribPointer(r+0,4,o,!1,64,0),e.vertexAttribPointer(r+1,4,o,!1,64,16),e.vertexAttribPointer(r+2,4,o,!1,64,32),e.vertexAttribPointer(r+3,4,o,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const A=t.buffer,o=t.type;x(r,1),e.bindBuffer(34962,A),e.vertexAttribPointer(r,3,o,!1,12,0)}else if(void 0!==l){const n=l[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}y()}function C(){F();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e]}}function M(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)d(e[t].object),delete e[t];delete t[n]}delete s[e.id]}function E(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}}function F(){_(),c!==a&&(c=a,h(c.object))}function _(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:l,reset:F,resetDefaultState:_,dispose:C,releaseStatesOfGeometry:M,releaseStatesOfProgram:E,initAttributes:w,enableAttribute:v,disableUnusedAttributes:y}}function aa(e,t,n,r){const i=r.isWebGL2;let A;function o(e){A=e}function s(t,r){e.drawArrays(A,t,r),n.update(r,A,1)}function a(r,o,s){if(0===s)return;let a,c;if(i)a=e,c="drawArraysInstanced";else if(a=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===a)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");a[c](A,r,o,s),n.update(o,A,s)}this.setMode=o,this.render=s,this.renderInstances=a}function ca(e,t,n){let r;function i(){if(void 0!==r)return r;const n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,r}function A(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const a=A(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),w=u>0,v=o||!!t.get("OES_texture_float"),x=w&&v,y=o?e.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:i,getMaxPrecision:A,precision:s,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:w,floatFragmentTextures:v,floatVertexTextures:x,maxSamples:y}}function la(e){const t=this;let n=null,r=0,i=!1,A=!1;const o=new ei,s=new kn,a={value:null,needsUpdate:!1};function c(){a.value!==n&&(a.value=n,a.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function l(e,n,r,i){const A=null!==e?e.length:0;let c=null;if(0!==A){if(c=a.value,!0!==i||null===c){const t=r+4*A,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,a=r;n!==A;++n,a+=4)o.copy(e[n]).applyMatrix4(i,s),o.normal.toArray(c,a),c[a+3]=o.constant}a.value=c,a.needsUpdate=!0}return t.numPlanes=A,t.numIntersection=0,c}this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,A){const o=0!==e.length||t||0!==r||i;return i=t,n=l(e,A,0),r=e.length,o},this.beginShadows=function(){A=!0,l(null)},this.endShadows=function(){A=!1,c()},this.setState=function(t,o,s){const u=t.clippingPlanes,h=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===u||0===u.length||A&&!d)A?l(null):c();else{const e=A?0:r,t=4*e;let i=p.clippingState||null;a.value=i,i=l(u,o,t,s);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function ua(e){let t=new WeakMap;function n(e,t){return t===se?e.mapping=Ae:t===ae&&(e.mapping=oe),e}function r(r){if(r&&r.isTexture){const A=r.mapping;if(A===se||A===ae){if(t.has(r)){const e=t.get(r).texture;return n(e,r.mapping)}{const A=r.image;if(A&&A.height>0){const o=e.getRenderList(),s=e.getRenderTarget(),a=new FA(A.height/2);return a.fromEquirectangularTexture(e,r),t.set(r,a),e.setRenderTarget(s),e.setRenderList(o),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}function A(){t=new WeakMap}return{get:r,dispose:A}}function ha(e){const t={};return{has:function(n){if(void 0!==t[n])return null!==t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,null!==r},get:function(e){return this.has(e)||console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t[e]}}}function da(e,t,n,r){const i=new WeakMap,A=new WeakMap;function o(e){const s=e.target,a=i.get(s);null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);s.removeEventListener("dispose",o),i.delete(s);const c=A.get(a);c&&(t.remove(c),A.delete(a)),r.releaseStatesOfGeometry(a),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e,t){let r=i.get(t);return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Xi).setFromObject(e)),r=t._bufferGeometry),i.set(t,r),n.memory.geometries++,r)}function a(e){const n=e.attributes;for(const i in n)t.update(n[i],34962);const r=e.morphAttributes;for(const i in r){const e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}}function c(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],A=e[t+2];n.push(r,i,i,A,A,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Pi(n)>65535?Qi:Ui)(n,1);s.version=o;const a=A.get(e);a&&t.remove(a),A.set(e,s)}function l(e){const t=A.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&c(e)}else c(e);return A.get(e)}return{get:s,update:a,getWireframeAttribute:l}}function pa(e,t,n,r){const i=r.isWebGL2;let A,o,s;function a(e){A=e}function c(e){o=e.type,s=e.bytesPerElement}function l(t,r){e.drawElements(A,r,o,t*s),n.update(r,A,1)}function u(r,a,c){if(0===c)return;let l,u;if(i)l=e,u="drawElementsInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](A,a,o,r*s,c),n.update(a,A,c)}this.setMode=a,this.setIndex=c,this.render=l,this.renderInstances=u}function fa(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,t,r){switch(n.calls++,t){case 4:n.triangles+=r*(e/3);break;case 1:n.lines+=r*(e/2);break;case 3:n.lines+=r*(e-1);break;case 2:n.lines+=r*e;break;case 0:n.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function ma(e,t){return e[0]-t[0]}function ga(e,t){return Math.abs(t[1])-Math.abs(e[1])}function wa(e){const t={},n=new Float32Array(8),r=[];for(let A=0;A<8;A++)r[A]=[A,0];function i(i,A,o,s){const a=i.morphTargetInfluences,c=void 0===a?0:a.length;let l=t[A.id];if(void 0===l){l=[];for(let e=0;e<c;e++)l[e]=[e,0];t[A.id]=l}for(let e=0;e<c;e++){const t=l[e];t[0]=e,t[1]=a[e]}l.sort(ga);for(let e=0;e<8;e++)e<c&&l[e][1]?(r[e][0]=l[e][0],r[e][1]=l[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(ma);const u=o.morphTargets&&A.morphAttributes.position,h=o.morphNormals&&A.morphAttributes.normal;let d=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],o=t[1];i!==Number.MAX_SAFE_INTEGER&&o?(u&&A.getAttribute("morphTarget"+e)!==u[i]&&A.setAttribute("morphTarget"+e,u[i]),h&&A.getAttribute("morphNormal"+e)!==h[i]&&A.setAttribute("morphNormal"+e,h[i]),n[e]=o,d+=o):(u&&!0===A.hasAttribute("morphTarget"+e)&&A.deleteAttribute("morphTarget"+e),h&&!0===A.hasAttribute("morphNormal"+e)&&A.deleteAttribute("morphNormal"+e),n[e]=0)}const p=A.morphTargetsRelative?1:1-d;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:i}}function va(e,t,n,r){let i=new WeakMap;function A(e){const A=r.render.frame,o=e.geometry,a=t.get(e,o);return i.get(a)!==A&&(o.isGeometry&&a.updateFromObject(e),t.update(a),i.set(a,A)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),a}function o(){i=new WeakMap}function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:A,dispose:o}}function xa(e=null,t=1,n=1,r=1){zn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pe,this.minFilter=pe,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function ya(e=null,t=1,n=1,r=1){zn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=pe,this.minFilter=pe,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Aa.physical={uniforms:mA([Aa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Nn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new wi(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ra.meshphysical_vert,fragmentShader:ra.meshphysical_frag},xa.prototype=Object.create(zn.prototype),xa.prototype.constructor=xa,xa.prototype.isDataTexture2DArray=!0,ya.prototype=Object.create(zn.prototype),ya.prototype.constructor=ya,ya.prototype.isDataTexture3D=!0;const Ba=new zn,ba=new xa,Ca=new ya,Ma=new EA,Ea=[],Fa=[],_a=new Float32Array(16),Ta=new Float32Array(9),Ua=new Float32Array(4);function Sa(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let A=Ea[i];if(void 0===A&&(A=new Float32Array(i),Ea[i]=A),0!==t){r.toArray(A,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(A,i)}return A}function Qa(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function La(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Da(e,t){let n=Fa[t];void 0===n&&(n=new Int32Array(t),Fa[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ia(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Oa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Qa(n,t))return;e.uniform2fv(this.addr,t),La(n,t)}}function Pa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Qa(n,t))return;e.uniform3fv(this.addr,t),La(n,t)}}function Ha(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Qa(n,t))return;e.uniform4fv(this.addr,t),La(n,t)}}function Ra(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Qa(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),La(n,t)}else{if(Qa(n,r))return;Ua.set(r),e.uniformMatrix2fv(this.addr,!1,Ua),La(n,r)}}function Na(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Qa(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),La(n,t)}else{if(Qa(n,r))return;Ta.set(r),e.uniformMatrix3fv(this.addr,!1,Ta),La(n,r)}}function ka(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Qa(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),La(n,t)}else{if(Qa(n,r))return;_a.set(r),e.uniformMatrix4fv(this.addr,!1,_a),La(n,r)}}function Ka(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Ba,i)}function Ga(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ba,i)}function Va(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ca,i)}function za(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Ma,i)}function ja(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Xa(e,t){const n=this.cache;Qa(n,t)||(e.uniform2iv(this.addr,t),La(n,t))}function Wa(e,t){const n=this.cache;Qa(n,t)||(e.uniform3iv(this.addr,t),La(n,t))}function Ya(e,t){const n=this.cache;Qa(n,t)||(e.uniform4iv(this.addr,t),La(n,t))}function qa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ja(e){switch(e){case 5126:return Ia;case 35664:return Oa;case 35665:return Pa;case 35666:return Ha;case 35674:return Ra;case 35675:return Na;case 35676:return ka;case 5124:case 35670:return ja;case 35667:case 35671:return Xa;case 35668:case 35672:return Wa;case 35669:case 35673:return Ya;case 5125:return qa;case 35678:case 36198:case 36298:case 36306:case 35682:return Ka;case 35679:case 36299:case 36307:return Va;case 35680:case 36300:case 36308:case 36293:return za;case 36289:case 36303:case 36311:case 36292:return Ga}}function Za(e,t){e.uniform1fv(this.addr,t)}function $a(e,t){e.uniform1iv(this.addr,t)}function ec(e,t){e.uniform2iv(this.addr,t)}function tc(e,t){e.uniform3iv(this.addr,t)}function nc(e,t){e.uniform4iv(this.addr,t)}function rc(e,t){const n=Sa(t,this.size,2);e.uniform2fv(this.addr,n)}function ic(e,t){const n=Sa(t,this.size,3);e.uniform3fv(this.addr,n)}function Ac(e,t){const n=Sa(t,this.size,4);e.uniform4fv(this.addr,n)}function oc(e,t){const n=Sa(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function sc(e,t){const n=Sa(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ac(e,t){const n=Sa(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function cc(e,t,n){const r=t.length,i=Da(n,r);e.uniform1iv(this.addr,i);for(let A=0;A!==r;++A)n.safeSetTexture2D(t[A]||Ba,i[A])}function lc(e,t,n){const r=t.length,i=Da(n,r);e.uniform1iv(this.addr,i);for(let A=0;A!==r;++A)n.safeSetTextureCube(t[A]||Ma,i[A])}function uc(e){switch(e){case 5126:return Za;case 35664:return rc;case 35665:return ic;case 35666:return Ac;case 35674:return oc;case 35675:return sc;case 35676:return ac;case 5124:case 35670:return $a;case 35667:case 35671:return ec;case 35668:case 35672:return tc;case 35669:case 35673:return nc;case 35678:case 36198:case 36298:case 36306:case 35682:return cc;case 35680:case 36300:case 36308:case 36293:return lc}}function hc(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Ja(t.type)}function dc(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=uc(t.type)}function pc(e){this.id=e,this.seq=[],this.map={}}dc.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),La(t,e)},pc.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,A=r.length;i!==A;++i){const A=r[i];A.setValue(e,t[A.id],n)}};const fc=/(\w+)(\])?(\[|\.)?/g;function mc(e,t){e.seq.push(t),e.map[t.id]=t}function gc(e,t,n){const r=e.name,i=r.length;fc.lastIndex=0;while(1){const A=fc.exec(r),o=fc.lastIndex;let s=A[1];const a="]"===A[2],c=A[3];if(a&&(s|=0),void 0===c||"["===c&&o+2===i){mc(n,void 0===c?new hc(s,e,t):new dc(s,e,t));break}{const e=n.map;let t=e[s];void 0===t&&(t=new pc(s),mc(n,t)),n=t}}}function wc(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);gc(n,i,this)}}function vc(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}wc.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},wc.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},wc.upload=function(e,t,n,r){for(let i=0,A=t.length;i!==A;++i){const A=t[i],o=n[A.id];!1!==o.needsUpdate&&A.setValue(e,o.value,r)}},wc.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let xc=0;function yc(e){const t=e.split("\n");for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}function Bc(e){switch(e){case qt:return["Linear","( value )"];case Jt:return["sRGB","( value )"];case $t:return["RGBE","( value )"];case tn:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Zt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case en:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function bc(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const A=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+yc(A)}function Cc(e,t){const n=Bc(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Mc(e,t){const n=Bc(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ec(e,t){let n;switch(t){case $:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Fc(e){const t=[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(Uc).join("\n")}function _c(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}function Tc(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),A=r.name;n[A]=e.getAttribLocation(t,A)}return n}function Uc(e){return""!==e}function Sc(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Qc(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Lc=/^[ \t]*#include +<([\w\d./]+)>/gm;function Dc(e){return e.replace(Lc,Ic)}function Ic(e,t){const n=ra[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Dc(n)}const Oc=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Pc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hc(e){return e.replace(Pc,Nc).replace(Oc,Rc)}function Rc(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Nc(e,t,n,r)}function Nc(e,t,n,r){let i="";for(let A=parseInt(t);A<parseInt(n);A++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+A+" ]").replace(/UNROLLED_LOOP_INDEX/g,A);return i}function kc(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Kc(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===d&&(t="SHADOWMAP_TYPE_VSM"),t}function Gc(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Ae:case oe:t="ENVMAP_TYPE_CUBE";break;case ce:case le:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Vc(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case oe:case le:t="ENVMAP_MODE_REFRACTION";break}return t}function zc(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Y:t="ENVMAP_BLENDING_MULTIPLY";break;case q:t="ENVMAP_BLENDING_MIX";break;case J:t="ENVMAP_BLENDING_ADD";break}return t}function jc(e,t,n,r){const i=e.getContext(),A=n.defines;let o=n.vertexShader,s=n.fragmentShader;const a=Kc(n),c=Gc(n),l=Vc(n),u=zc(n),h=e.gammaFactor>0?e.gammaFactor:1,d=n.isWebGL2?"":Fc(n),p=_c(A),f=i.createProgram();let m,g,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(m=[p].filter(Uc).join("\n"),m.length>0&&(m+="\n"),g=[d,p].filter(Uc).join("\n"),g.length>0&&(g+="\n")):(m=[kc(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+a:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Uc).join("\n"),g=[d,kc(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+a:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Z?"#define TONE_MAPPING":"",n.toneMapping!==Z?ra["tonemapping_pars_fragment"]:"",n.toneMapping!==Z?Ec("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",ra["encodings_pars_fragment"],n.map?Cc("mapTexelToLinear",n.mapEncoding):"",n.matcap?Cc("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Cc("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Cc("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Cc("lightMapTexelToLinear",n.lightMapEncoding):"",Mc("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Uc).join("\n")),o=Dc(o),o=Sc(o,n),o=Qc(o,n),s=Dc(s),s=Sc(s,n),s=Qc(s,n),o=Hc(o),s=Hc(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",m=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#define varying in",n.glslVersion===In?"":"out highp vec4 pc_fragColor;",n.glslVersion===In?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const v=w+m+o,x=w+g+s,y=vc(i,35633,v),B=vc(i,35632,x);if(i.attachShader(f,y),i.attachShader(f,B),void 0!==n.index0AttributeName?i.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(f,0,"position"),i.linkProgram(f),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(f).trim(),t=i.getShaderInfoLog(y).trim(),n=i.getShaderInfoLog(B).trim();let r=!0,A=!0;if(!1===i.getProgramParameter(f,35714)){r=!1;const t=bc(i,y,"vertex"),n=bc(i,B,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(f,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(A=!1);A&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:m},fragmentShader:{log:n,prefix:g}})}let b,C;return i.deleteShader(y),i.deleteShader(B),this.getUniforms=function(){return void 0===b&&(b=new wc(i,f)),b},this.getAttributes=function(){return void 0===C&&(C=Tc(i,f)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(f),this.program=void 0},this.name=n.shaderName,this.id=xc++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=y,this.fragmentShader=B,this}function Xc(e,t,n,r,i,A){const o=[],s=r.isWebGL2,a=r.logarithmicDepthBuffer,c=r.floatVertexTextures,l=r.maxVertexUniforms,u=r.vertexTextures;let h=r.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function g(e){const t=e.skeleton,n=t.bones;if(c)return 1024;{const e=l,t=Math.floor((e-20)/4),r=Math.min(t,n.length);return r<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+r+"."),0):r}}function w(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=qt,t}function v(i,o,l,p,v){const x=p.fog,y=i.isMeshStandardMaterial?p.environment:null,B=t.get(i.envMap||y),b=d[i.type],C=v.isSkinnedMesh?g(v):0;let M,E;if(null!==i.precision&&(h=r.getMaxPrecision(i.precision),h!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",h,"instead.")),b){const e=Aa[b];M=e.vertexShader,E=e.fragmentShader}else M=i.vertexShader,E=i.fragmentShader;const F=e.getRenderTarget(),_={isWebGL2:s,shaderID:b,shaderName:i.type,vertexShader:M,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:h,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:u,outputEncoding:null!==F?w(F.texture):e.outputEncoding,map:!!i.map,mapEncoding:w(i.map),matcap:!!i.matcap,matcapEncoding:w(i.matcap),envMap:!!B,envMapMode:B&&B.mapping,envMapEncoding:w(B),envMapCubeUV:!!B&&(B.mapping===ce||B.mapping===le),lightMap:!!i.lightMap,lightMapEncoding:w(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:w(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===an,tangentSpaceNormalMap:i.normalMapType===sn,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!i.map||!!i.bumpMap||!!i.normalMap||!!i.specularMap||!!i.alphaMap||!!i.emissiveMap||!!i.roughnessMap||!!i.metalnessMap||!!i.clearcoatMap||!!i.clearcoatRoughnessMap||!!i.clearcoatNormalMap||!!i.displacementMap||!!i.transmissionMap,uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap)&&!!i.displacementMap,fog:!!x,useFog:i.fog,fogExp2:x&&x.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:a,skinning:i.skinning&&C>0,maxBones:C,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:A.numPlanes,numClipIntersection:A.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:Z,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===m,flipSided:i.side===f,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()};return _}function x(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()}function y(e){const t=d[e.type];let n;if(t){const e=Aa[t];n=gA.clone(e.uniforms)}else n=e.uniforms;return n}function B(t,n){let r;for(let e=0,i=o.length;e<i;e++){const t=o[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new jc(e,n,t,i),o.push(r)),r}function b(e){if(0===--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}}return{getParameters:v,getProgramCacheKey:x,getUniforms:y,acquireProgram:B,releaseProgram:b,programs:o}}function Wc(){let e=new WeakMap;function t(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n}function n(t){e.delete(t)}function r(t,n,r){e.get(t)[n]=r}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function Yc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function qc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Jc(e){const t=[];let n=0;const r=[],i=[],A={id:-1};function o(){n=0,r.length=0,i.length=0}function s(r,i,o,s,a,c){let l=t[n];const u=e.get(o);return void 0===l?(l={id:r.id,object:r,geometry:i,material:o,program:u.program||A,groupOrder:s,renderOrder:r.renderOrder,z:a,group:c},t[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=o,l.program=u.program||A,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=a,l.group=c),n++,l}function a(e,t,n,A,o,a){const c=s(e,t,n,A,o,a);(!0===n.transparent?i:r).push(c)}function c(e,t,n,A,o,a){const c=s(e,t,n,A,o,a);(!0===n.transparent?i:r).unshift(c)}function l(e,t){r.length>1&&r.sort(e||Yc),i.length>1&&i.sort(t||qc)}function u(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}}return{opaque:r,transparent:i,init:o,push:a,unshift:c,finish:u,sort:l}}function Zc(e){let t=new WeakMap;function n(n,r){const i=t.get(n);let A;return void 0===i?(A=new Jc(e),t.set(n,new WeakMap),t.get(n).set(r,A)):(A=i.get(r),void 0===A&&(A=new Jc(e),i.set(r,A))),A}function r(){t=new WeakMap}return{get:n,dispose:r}}function $c(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Jn,color:new wi};break;case"SpotLight":n={position:new Jn,direction:new Jn,color:new wi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Jn,color:new wi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Jn,skyColor:new wi,groundColor:new wi};break;case"RectAreaLight":n={color:new wi,position:new Jn,halfWidth:new Jn,halfHeight:new Jn};break}return e[t.id]=n,n}}}function el(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nn,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let tl=0;function nl(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function rl(e,t){const n=new $c,r=el(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new Jn);const A=new Jn,o=new Mr,s=new Mr;function a(A){let o=0,s=0,a=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,l=0,u=0,h=0,d=0,p=0,f=0,m=0;A.sort(nl);for(let e=0,t=A.length;e<t;e++){const t=A[e],g=t.color,w=t.intensity,v=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=g.r*w,s+=g.g*w,a+=g.b*w;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=x,i.directionalShadowMatrix[c]=t.shadow.matrix,p++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(g).multiplyScalar(w),e.distance=v,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[u]=n,i.spotShadowMap[u]=x,i.spotShadowMatrix[u]=t.shadow.matrix,m++}i.spot[u]=e,u++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(g).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[h]=e,h++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[l]=n,i.pointShadowMap[l]=x,i.pointShadowMatrix[l]=t.shadow.matrix,f++}i.point[l]=e,l++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w),e.groundColor.copy(t.groundColor).multiplyScalar(w),i.hemi[d]=e,d++}}h>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=ia.LTC_FLOAT_1,i.rectAreaLTC2=ia.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=ia.LTC_HALF_1,i.rectAreaLTC2=ia.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=s,i.ambient[2]=a;const g=i.hash;g.directionalLength===c&&g.pointLength===l&&g.spotLength===u&&g.rectAreaLength===h&&g.hemiLength===d&&g.numDirectionalShadows===p&&g.numPointShadows===f&&g.numSpotShadows===m||(i.directional.length=c,i.spot.length=u,i.rectArea.length=h,i.point.length=l,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=f,i.pointShadowMap.length=f,i.spotShadow.length=m,i.spotShadowMap.length=m,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=f,i.spotShadowMatrix.length=m,g.directionalLength=c,g.pointLength=l,g.spotLength=u,g.rectAreaLength=h,g.hemiLength=d,g.numDirectionalShadows=p,g.numPointShadows=f,g.numSpotShadows=m,i.version=tl++)}function c(e,t){let n=0,r=0,a=0,c=0,l=0;const u=t.matrixWorldInverse;for(let h=0,d=e.length;h<d;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(A),e.direction.transformDirection(u),n++}else if(t.isSpotLight){const e=i.spot[a];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(A),e.direction.transformDirection(u),a++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),s.identity(),o.copy(t.matrixWorld),o.premultiply(u),s.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),r++}else if(t.isHemisphereLight){const e=i.hemi[l];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(u),e.direction.normalize(),l++}}}return{setup:a,setupView:c,state:i}}function il(e,t){const n=new rl(e,t),r=[],i=[];function A(){r.length=0,i.length=0}function o(e){r.push(e)}function s(e){i.push(e)}function a(){n.setup(r)}function c(e){n.setupView(r,e)}const l={lightsArray:r,shadowsArray:i,lights:n};return{init:A,state:l,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function Al(e,t){let n=new WeakMap;function r(r,i=0){let A;return!1===n.has(r)?(A=new il(e,t),n.set(r,[]),n.get(r).push(A)):i>=n.get(r).length?(A=new il(e,t),n.get(r).push(A)):A=n.get(r)[i],A}function i(){n=new WeakMap}return{get:r,dispose:i}}function ol(e){yi.call(this),this.type="MeshDepthMaterial",this.depthPacking=An,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function sl(e){yi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Jn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}ol.prototype=Object.create(yi.prototype),ol.prototype.constructor=ol,ol.prototype.isMeshDepthMaterial=!0,ol.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},sl.prototype=Object.create(yi.prototype),sl.prototype.constructor=sl,sl.prototype.isMeshDistanceMaterial=!0,sl.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var al="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",cl="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function ll(e,t,n){let r=new SA;const i=new Nn,A=new Nn,o=new Xn,s=[],a=[],c={},l={0:f,1:p,2:m},h=new xA({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Nn},radius:{value:4}},vertexShader:cl,fragmentShader:al}),g=h.clone();g.defines.HORIZONTAL_PASS=1;const w=new Xi;w.setAttribute("position",new Mi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new uA(w,h),y=this;function B(n,r){const i=t.update(x);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,x,null),g.uniforms.shadow_pass.value=n.mapPass.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,g,x,null)}function b(e,t,n){const r=e<<0|t<<1|n<<2;let i=s[r];return void 0===i&&(i=new ol({depthPacking:on,morphTargets:e,skinning:t}),s[r]=i),i}function C(e,t,n){const r=e<<0|t<<1|n<<2;let i=a[r];return void 0===i&&(i=new sl({morphTargets:e,skinning:t}),a[r]=i),i}function M(t,n,r,i,A,o,s){let a=null,u=b,h=t.customDepthMaterial;if(!0===i.isPointLight&&(u=C,h=t.customDistanceMaterial),void 0===h){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));const A=!0===t.isInstancedMesh;a=u(e,i,A)}else a=h;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=a.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=a.clone(),n[t]=i),a=i}return a.visible=r.visible,a.wireframe=r.wireframe,a.side=s===d?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:l[r.side],a.clipShadows=r.clipShadows,a.clippingPlanes=r.clippingPlanes,a.clipIntersection=r.clipIntersection,a.wireframeLinewidth=r.wireframeLinewidth,a.linewidth=r.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial&&(a.referencePosition.setFromMatrixPosition(i.matrixWorld),a.nearDistance=A,a.farDistance=o),a}function E(n,i,A,o,s){if(!1===n.visible)return;const a=n.layers.test(i.layers);if(a&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===d)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let a=0,c=t.length;a<c;a++){const c=t[a],l=i[c.materialIndex];if(l&&l.visible){const t=M(n,r,l,o,A.near,A.far,s);e.renderBufferDirect(A,null,r,t,n,c)}}}else if(i.visible){const t=M(n,r,i,o,A.near,A.far,s);e.renderBufferDirect(A,null,r,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)E(c[e],i,A,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u,this.render=function(t,s,a){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),l=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(v),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let p=0,f=t.length;p<f;p++){const c=t[p],l=c.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;i.copy(l.mapSize);const u=l.getFrameExtents();if(i.multiply(u),A.copy(l.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(A.x=Math.floor(n/u.x),i.x=A.x*u.x,l.mapSize.x=A.x),i.y>n&&(A.y=Math.floor(n/u.y),i.y=A.y*u.y,l.mapSize.y=A.y)),null===l.map&&!l.isPointLightShadow&&this.type===d){const e={minFilter:ve,magFilter:ve,format:He};l.map=new Wn(i.x,i.y,e),l.map.texture.name=c.name+".shadowMap",l.mapPass=new Wn(i.x,i.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:pe,magFilter:pe,format:He};l.map=new Wn(i.x,i.y,e),l.map.texture.name=c.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const f=l.getViewportCount();for(let e=0;e<f;e++){const t=l.getViewport(e);o.set(A.x*t.x,A.y*t.y,A.x*t.z,A.y*t.w),h.viewport(o),l.updateMatrices(c,e),r=l.getFrustum(),E(s,a,l.camera,c,this.type)}l.isPointLightShadow||this.type!==d||B(l,a),l.needsUpdate=!1}y.needsUpdate=!1,e.setRenderTarget(c,l,u)}}function ul(e,t,n){const r=n.isWebGL2;function i(){let t=!1;const n=new Xn;let r=null;const i=new Xn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,A,o,s){!0===s&&(t*=o,r*=o,A*=o),n.set(t,r,A,o),!1===i.equals(n)&&(e.clearColor(t,r,A,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}}function A(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?ge(2929):we(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case k:e.depthFunc(512);break;case K:e.depthFunc(519);break;case G:e.depthFunc(513);break;case V:e.depthFunc(515);break;case z:e.depthFunc(514);break;case j:e.depthFunc(518);break;case X:e.depthFunc(516);break;case W:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}}function c(){let t=!1,n=null,r=null,i=null,A=null,o=null,s=null,a=null,c=null;return{setTest:function(e){t||(e?ge(2960):we(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&A===o||(e.stencilFunc(t,n,o),r=t,i=n,A=o)},setOp:function(t,n,r){o===t&&s===n&&a===r||(e.stencilOp(t,n,r),o=t,s=n,a=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,A=null,o=null,s=null,a=null,c=null}}}const l=new i,u=new A,h=new c;let d={},p=null,g=null,w=null,Y=null,q=null,J=null,Z=null,$=null,ee=null,te=!1,ne=null,re=null,ie=null,Ae=null,oe=null;const se=e.getParameter(35661);let ae=!1,ce=0;const le=e.getParameter(7938);-1!==le.indexOf("WebGL")?(ce=parseFloat(/^WebGL (\d)/.exec(le)[1]),ae=ce>=1):-1!==le.indexOf("OpenGL ES")&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),ae=ce>=2);let ue=null,he={};const de=new Xn,pe=new Xn;function fe(t,n,r){const i=new Uint8Array(4),A=e.createTexture();e.bindTexture(t,A),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return A}const me={};function ge(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function we(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function ve(t){return p!==t&&(e.useProgram(t),p=t,!0)}me[3553]=fe(3553,3553,1),me[34067]=fe(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),h.setClear(0),ge(2929),u.setFunc(V),Ce(!1),Me(s),ge(2884),Be(v);const xe={[M]:32774,[E]:32778,[F]:32779};if(r)xe[_]=32775,xe[T]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(xe[_]=e.MIN_EXT,xe[T]=e.MAX_EXT)}const ye={[U]:0,[S]:1,[Q]:768,[D]:770,[N]:776,[H]:774,[O]:772,[L]:769,[I]:771,[R]:775,[P]:773};function Be(t,n,r,i,A,o,s,a){if(t!==v){if(g||(ge(3042),g=!0),t===C)A=A||n,o=o||r,s=s||i,n===Y&&A===Z||(e.blendEquationSeparate(xe[n],xe[A]),Y=n,Z=A),r===q&&i===J&&o===$&&s===ee||(e.blendFuncSeparate(ye[r],ye[i],ye[o],ye[s]),q=r,J=i,$=o,ee=s),w=t,te=null;else if(t!==w||a!==te){if(Y===M&&Z===M||(e.blendEquation(32774),Y=M,Z=M),a)switch(t){case x:e.blendFuncSeparate(1,771,1,771);break;case y:e.blendFunc(1,1);break;case B:e.blendFuncSeparate(0,0,769,771);break;case b:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}else switch(t){case x:e.blendFuncSeparate(770,771,1,771);break;case y:e.blendFunc(770,1);break;case B:e.blendFunc(0,769);break;case b:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t);break}q=null,J=null,$=null,ee=null,w=t,te=a}}else g&&(we(3042),g=!1)}function be(e,t){e.side===m?we(2884):ge(2884);let n=e.side===f;t&&(n=!n),Ce(n),e.blending===x&&!1===e.transparent?Be(v):Be(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),u.setFunc(e.depthFunc),u.setTest(e.depthTest),u.setMask(e.depthWrite),l.setMask(e.colorWrite);const r=e.stencilWrite;h.setTest(r),r&&(h.setMask(e.stencilWriteMask),h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Fe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function Ce(t){ne!==t&&(t?e.frontFace(2304):e.frontFace(2305),ne=t)}function Me(t){t!==o?(ge(2884),t!==re&&(t===s?e.cullFace(1029):t===a?e.cullFace(1028):e.cullFace(1032))):we(2884),re=t}function Ee(t){t!==ie&&(ae&&e.lineWidth(t),ie=t)}function Fe(t,n,r){t?(ge(32823),Ae===n&&oe===r||(e.polygonOffset(n,r),Ae=n,oe=r)):we(32823)}function _e(e){e?ge(3089):we(3089)}function Te(t){void 0===t&&(t=33984+se-1),ue!==t&&(e.activeTexture(t),ue=t)}function Ue(t,n){null===ue&&Te();let r=he[ue];void 0===r&&(r={type:void 0,texture:void 0},he[ue]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||me[t]),r.type=t,r.texture=n)}function Se(){const t=he[ue];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)}function Qe(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Le(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function De(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Ie(t){!1===de.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),de.copy(t))}function Oe(t){!1===pe.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),pe.copy(t))}function Pe(){d={},ue=null,he={},p=null,g=null,w=null,Y=null,q=null,J=null,Z=null,$=null,ee=null,te=!1,ne=null,re=null,ie=null,Ae=null,oe=null,l.reset(),u.reset(),h.reset()}return{buffers:{color:l,depth:u,stencil:h},enable:ge,disable:we,useProgram:ve,setBlending:Be,setMaterial:be,setFlipSided:Ce,setCullFace:Me,setLineWidth:Ee,setPolygonOffset:Fe,setScissorTest:_e,activeTexture:Te,bindTexture:Ue,unbindTexture:Se,compressedTexImage2D:Qe,texImage2D:Le,texImage3D:De,scissor:Ie,viewport:Oe,reset:Pe}}function hl(e,t,n,r,i,A,o){const s=i.isWebGL2,a=i.maxTextures,c=i.maxCubemapSize,l=i.maxTextureSize,u=i.maxSamples,h=new WeakMap;let d,p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch($){}function f(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function m(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Rn.floorPowerOfTwo:Math.floor,A=r(i*e.width),o=r(i*e.height);void 0===d&&(d=f(A,o));const s=n?f(A,o):d;s.width=A,s.height=o;const a=s.getContext("2d");return a.drawImage(e,0,0,A,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+A+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return Rn.isPowerOfTwo(e.width)&&Rn.isPowerOfTwo(e.height)}function w(e){return!s&&(e.wrapS!==he||e.wrapT!==he||e.minFilter!==pe&&e.minFilter!==ve)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==pe&&e.minFilter!==ve}function x(t,n,i,A){e.generateMipmap(t);const o=r.get(n);o.__maxMipLevel=Math.log(Math.max(i,A))*Math.LOG2E}function y(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let A=r;return 6403===r&&(5126===i&&(A=33326),5131===i&&(A=33325),5121===i&&(A=33321)),6407===r&&(5126===i&&(A=34837),5131===i&&(A=34843),5121===i&&(A=32849)),6408===r&&(5126===i&&(A=34836),5131===i&&(A=34842),5121===i&&(A=32856)),33325!==A&&33326!==A&&34842!==A&&34836!==A||t.get("EXT_color_buffer_float"),A}function B(e){return e===pe||e===fe||e===ge?9728:9729}function b(e){const t=e.target;t.removeEventListener("dispose",b),M(t),t.isVideoTexture&&h.delete(t),o.memory.textures--}function C(e){const t=e.target;t.removeEventListener("dispose",C),E(t),o.memory.textures--}function M(t){const n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}function E(t){const n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&e.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(t.texture),r.remove(t)}}let F=0;function _(){F=0}function T(){const e=F;return e>=a&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+a),F+=1,e}function U(e,t){const i=r.get(e);if(e.isVideoTexture&&W(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void H(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function S(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?H(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))}function Q(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?H(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))}function L(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(34067,i.__webglTexture))}const D={[ue]:10497,[he]:33071,[de]:33648},I={[pe]:9728,[fe]:9984,[ge]:9986,[ve]:9729,[xe]:9985,[Be]:9987};function O(n,A,o){o?(e.texParameteri(n,10242,D[A.wrapS]),e.texParameteri(n,10243,D[A.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,D[A.wrapR]),e.texParameteri(n,10240,I[A.magFilter]),e.texParameteri(n,10241,I[A.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),A.wrapS===he&&A.wrapT===he||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,B(A.magFilter)),e.texParameteri(n,10241,B(A.minFilter)),A.minFilter!==pe&&A.minFilter!==ve&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const a=t.get("EXT_texture_filter_anisotropic");if(a){if(A.type===Ue&&null===t.get("OES_texture_float_linear"))return;if(A.type===Se&&null===(s||t.get("OES_texture_half_float_linear")))return;(A.anisotropy>1||r.get(A).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,i.getMaxAnisotropy())),r.get(A).__currentAnisotropy=A.anisotropy)}}function P(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",b),t.__webglTexture=e.createTexture(),o.memory.textures++)}function H(t,r,i){let o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),P(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);const a=w(r)&&!1===g(r.image),c=m(r.image,a,!1,l),u=g(c)||s,h=A.convert(r.format);let d,p=A.convert(r.type),f=y(r.internalFormat,h,p);O(o,r,u);const B=r.mipmaps;if(r.isDepthTexture)f=6402,s?f=r.type===Ue?36012:r.type===Te?33190:r.type===Ie?35056:33189:r.type===Ue&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ke&&6402===f&&r.type!==Fe&&r.type!==Te&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Fe,p=A.convert(r.type)),r.format===Ge&&6402===f&&(f=34041,r.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ie,p=A.convert(r.type))),n.texImage2D(3553,0,f,c.width,c.height,0,h,p,null);else if(r.isDataTexture)if(B.length>0&&u){for(let e=0,t=B.length;e<t;e++)d=B[e],n.texImage2D(3553,e,f,d.width,d.height,0,h,p,d.data);r.generateMipmaps=!1,t.__maxMipLevel=B.length-1}else n.texImage2D(3553,0,f,c.width,c.height,0,h,p,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=B.length;e<t;e++)d=B[e],r.format!==He&&r.format!==Pe?null!==h?n.compressedTexImage2D(3553,e,f,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,f,d.width,d.height,0,h,p,d.data);t.__maxMipLevel=B.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,f,c.width,c.height,c.depth,0,h,p,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,f,c.width,c.height,c.depth,0,h,p,c.data),t.__maxMipLevel=0;else if(B.length>0&&u){for(let e=0,t=B.length;e<t;e++)d=B[e],n.texImage2D(3553,e,f,h,p,d);r.generateMipmaps=!1,t.__maxMipLevel=B.length-1}else n.texImage2D(3553,0,f,h,p,c),t.__maxMipLevel=0;v(r,u)&&x(o,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,r,i){if(6!==r.image.length)return;P(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY);const o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),a=r.image[0]&&r.image[0].isDataTexture,l=[];for(let e=0;e<6;e++)l[e]=o||a?a?r.image[e].image:r.image[e]:m(r.image[e],!1,!0,c);const u=l[0],h=g(u)||s,d=A.convert(r.format),p=A.convert(r.type),f=y(r.internalFormat,d,p);let w;if(O(34067,r,h),o){for(let e=0;e<6;e++){w=l[e].mipmaps;for(let t=0;t<w.length;t++){const i=w[t];r.format!==He&&r.format!==Pe?null!==d?n.compressedTexImage2D(34069+e,t,f,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,f,i.width,i.height,0,d,p,i.data)}}t.__maxMipLevel=w.length-1}else{w=r.mipmaps;for(let e=0;e<6;e++)if(a){n.texImage2D(34069+e,0,f,l[e].width,l[e].height,0,d,p,l[e].data);for(let t=0;t<w.length;t++){const r=w[t],i=r.image[e].image;n.texImage2D(34069+e,t+1,f,i.width,i.height,0,d,p,i.data)}}else{n.texImage2D(34069+e,0,f,d,p,l[e]);for(let t=0;t<w.length;t++){const r=w[t];n.texImage2D(34069+e,t+1,f,d,p,r.image[e])}}t.__maxMipLevel=w.length}v(r,h)&&x(34067,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function N(t,i,o,s){const a=A.convert(i.texture.format),c=A.convert(i.texture.type),l=y(i.texture.internalFormat,a,c);n.texImage2D(s,0,l,i.width,i.height,0,a,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function k(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Ue?i=36012:t.type===Te&&(i=33190));const r=X(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=X(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=A.convert(n.texture.format),i=A.convert(n.texture.type),o=y(n.texture.internalFormat,t,i);if(r){const t=X(n);e.renderbufferStorageMultisample(36161,t,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function K(t,n){const i=n&&n.isWebGLCubeRenderTarget;if(i)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),U(n.depthTexture,0);const A=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ke)e.framebufferTexture2D(36160,36096,3553,A,0);else{if(n.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,A,0)}}function G(t){const n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");K(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)e.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),k(n.__webglDepthbuffer[r],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),k(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function V(t){const i=r.get(t),a=r.get(t.texture);t.addEventListener("dispose",C),a.__webglTexture=e.createTexture(),o.memory.textures++;const c=!0===t.isWebGLCubeRenderTarget,l=!0===t.isWebGLMultisampleRenderTarget,u=g(t)||s;if(!s||t.texture.format!==Pe||t.texture.type!==Ue&&t.texture.type!==Se||(t.texture.format=He,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){i.__webglFramebuffer=[];for(let t=0;t<6;t++)i.__webglFramebuffer[t]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),l)if(s){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const n=A.convert(t.texture.format),r=A.convert(t.texture.type),o=y(t.texture.internalFormat,n,r),s=X(t);e.renderbufferStorageMultisample(36161,s,o,t.width,t.height),e.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),k(i.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,a.__webglTexture),O(34067,t.texture,u);for(let e=0;e<6;e++)N(i.__webglFramebuffer[e],t,36064,34069+e);v(t.texture,u)&&x(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,a.__webglTexture),O(3553,t.texture,u),N(i.__webglFramebuffer,t,36064,3553),v(t.texture,u)&&x(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&G(t)}function z(e){const t=e.texture,i=g(e)||s;if(v(t,i)){const i=e.isWebGLCubeRenderTarget?34067:3553,A=r.get(t).__webglTexture;n.bindTexture(i,A),x(i,t,e.width,e.height),n.bindTexture(i,null)}}function j(t){if(t.isWebGLMultisampleRenderTarget)if(s){const n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const i=t.width,A=t.height;let o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,i,A,0,0,i,A,o,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function X(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(u,e.samples):0}function W(e){const t=o.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}let Y=!1,q=!1;function J(e,t){e&&e.isWebGLRenderTarget&&(!1===Y&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Y=!0),e=e.texture),U(e,t)}function Z(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===q&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),q=!0),e=e.texture),L(e,t)}this.allocateTextureUnit=T,this.resetTextureUnits=_,this.setTexture2D=U,this.setTexture2DArray=S,this.setTexture3D=Q,this.setTextureCube=L,this.setupRenderTarget=V,this.updateRenderTargetMipmap=z,this.updateMultisampleRenderTarget=j,this.safeSetTexture2D=J,this.safeSetTextureCube=Z}function dl(e,t,n){const r=n.isWebGL2;function i(e){let n;if(e===Ce)return 5121;if(e===Qe)return 32819;if(e===Le)return 32820;if(e===De)return 33635;if(e===Me)return 5120;if(e===Ee)return 5122;if(e===Fe)return 5123;if(e===_e)return 5124;if(e===Te)return 5125;if(e===Ue)return 5126;if(e===Se)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===Oe)return 6406;if(e===Pe)return 6407;if(e===He)return 6408;if(e===Re)return 6409;if(e===Ne)return 6410;if(e===Ke)return 6402;if(e===Ge)return 34041;if(e===Ve)return 6403;if(e===ze)return 36244;if(e===je)return 33319;if(e===Xe)return 33320;if(e===We)return 36248;if(e===Ye)return 36249;if(e===qe||e===Je||e===Ze||e===$e){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===qe)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Je)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Ze)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===$e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===nt||e===rt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===et)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===rt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===it)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===At||e===ot)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===At)return n.COMPRESSED_RGB8_ETC2;if(e===ot)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===st||e===at||e===ct||e===lt||e===ut||e===ht||e===dt||e===pt||e===ft||e===mt||e===gt||e===wt||e===vt||e===xt||e===Bt||e===bt||e===Ct||e===Mt||e===Et||e===Ft||e===_t||e===Tt||e===Ut||e===St||e===Qt||e===Lt||e===Dt||e===It?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===yt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Ie?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:i}}function pl(e=[]){BA.call(this),this.cameras=e}function fl(){qr.call(this),this.type="Group"}function ml(){this._targetRay=null,this._grip=null,this._hand=null}function gl(e,t){const n=this;let r=null,i=1,A=null,o="local-floor",s=null;const a=[],c=new Map,l=new BA;l.layers.enable(1),l.viewport=new Xn;const u=new BA;u.layers.enable(2),u.viewport=new Xn;const h=[l,u],d=new pl;d.layers.enable(1),d.layers.enable(2);let p=null,f=null;function m(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function g(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),E.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function w(e){A=e,E.setContext(r),E.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function v(e){const t=r.inputSources;for(let n=0;n<a.length;n++)c.set(t[n],a[n]);for(let n=0;n<e.removed.length;n++){const t=e.removed[n],r=c.get(t);r&&(r.dispatchEvent({type:"disconnected",data:t}),c.delete(t))}for(let n=0;n<e.added.length;n++){const t=e.added[n],r=c.get(t);r&&r.dispatchEvent({type:"connected",data:t})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=a[e];return void 0===t&&(t=new ml,a[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=a[e];return void 0===t&&(t=new ml,a[e]=t),t.getGripSpace()},this.getHand=function(e){let t=a[e];return void 0===t&&(t=new ml,a[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return A},this.getSession=function(){return r},this.setSession=function(e){if(r=e,null!==r){r.addEventListener("select",m),r.addEventListener("selectstart",m),r.addEventListener("selectend",m),r.addEventListener("squeeze",m),r.addEventListener("squeezestart",m),r.addEventListener("squeezeend",m),r.addEventListener("end",g);const e=t.getContextAttributes();!0!==e.xrCompatible&&t.makeXRCompatible();const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:i},A=new XRWebGLLayer(r,t,n);r.updateRenderState({baseLayer:A}),r.requestReferenceSpace(o).then(w),r.addEventListener("inputsourceschange",v)}};const x=new Jn,y=new Jn;function B(e,t,n){x.setFromMatrixPosition(t.matrixWorld),y.setFromMatrixPosition(n.matrixWorld);const r=x.distanceTo(y),i=t.projectionMatrix.elements,A=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),a=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],u=(A[8]+1)/A[0],h=o*l,d=o*u,p=r/(-l+u),f=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const m=o+p,g=s+p,w=h-f,v=d+(r-f),B=a*s/g*m,b=c*s/g*m;e.projectionMatrix.makePerspective(w,v,B,b,m,g)}function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.getCamera=function(e){d.near=u.near=l.near=e.near,d.far=u.far=l.far=e.far,p===d.near&&f===d.far||(r.updateRenderState({depthNear:d.near,depthFar:d.far}),p=d.near,f=d.far);const t=e.parent,n=d.cameras;b(d,t);for(let r=0;r<n.length;r++)b(n[r],t);e.matrixWorld.copy(d.matrixWorld);const i=e.children;for(let r=0,A=i.length;r<A;r++)i[r].updateMatrixWorld(!0);return 2===n.length?B(d,l,u):d.projectionMatrix.copy(l.projectionMatrix),d};let C=null;function M(t,n){if(s=n.getViewerPose(A),null!==s){const t=s.views,n=r.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let i=!1;t.length!==d.cameras.length&&(d.cameras.length=0,i=!0);for(let e=0;e<t.length;e++){const r=t[e],A=n.getViewport(r),o=h[e];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(A.x,A.y,A.width,A.height),0===e&&d.matrix.copy(o.matrix),!0===i&&d.cameras.push(o)}}const i=r.inputSources;for(let e=0;e<a.length;e++){const t=a[e],r=i[e];t.update(r,n,A)}C&&C(t,n)}const E=new QA;E.setAnimationLoop(M),this.setAnimationLoop=function(e){C=e},this.dispose=function(){}}function wl(e){function t(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function n(e,t,n,f){t.isMeshBasicMaterial?r(e,t):t.isMeshLambertMaterial?(r(e,t),a(e,t)):t.isMeshToonMaterial?(r(e,t),l(e,t)):t.isMeshPhongMaterial?(r(e,t),c(e,t)):t.isMeshStandardMaterial?(r(e,t),t.isMeshPhysicalMaterial?h(e,t):u(e,t)):t.isMeshMatcapMaterial?(r(e,t),d(e,t)):t.isMeshDepthMaterial?(r(e,t),p(e,t)):t.isMeshDistanceMaterial?(r(e,t),m(e,t)):t.isMeshNormalMaterial?(r(e,t),g(e,t)):t.isLineBasicMaterial?(i(e,t),t.isLineDashedMaterial&&A(e,t)):t.isPointsMaterial?o(e,t,n,f):t.isSpriteMaterial?s(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}function r(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,A;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?A=n.aoMap:n.lightMap&&(A=n.lightMap),void 0!==A&&(A.isWebGLRenderTarget&&(A=A.texture),!0===A.matrixAutoUpdate&&A.updateMatrix(),t.uv2Transform.value.copy(A.matrix))}function i(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function A(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function o(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function s(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function a(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function c(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function l(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function u(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===f&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===f&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);const r=e.get(n).envMap;r&&(t.envMapIntensity.value=n.envMapIntensity)}function h(e,t){u(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===f&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}function d(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function p(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function m(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function g(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===f&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===f&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function vl(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function xl(e){e=e||{};const t=void 0!==e.canvas?e.canvas:vl(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,A=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,a=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u=null,h=null;const d=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=qt,this.physicallyCorrectLights=!1,this.toneMapping=Z,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let f=!1,m=null,g=0,w=0,v=null,x=null,y=-1,B=null;const b=new Xn,C=new Xn;let M=null,E=t.width,F=t.height,_=1,T=null,U=null;const S=new Xn(0,0,E,F),Q=new Xn(0,0,E,F);let L=!1;const D=new SA;let I=!1,O=!1;const P=new Mr,H=new Jn,R={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function N(){return null===v?_:1}let k,K,G,V,z,j,X,W,Y,q,J,$,ee,te,ne,re,ie,Ae,oe,se,ae,ce=n;function le(e,n){for(let r=0;r<e.length;r++){const i=e[r],A=t.getContext(i,n);if(null!==A)return A}return null}try{const e={alpha:r,depth:i,stencil:A,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:c,failIfMajorPerformanceCaveat:l};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",fe,!1),null===ce){const t=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&t.shift(),ce=le(t,e),null===ce)throw le(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ce.getShaderPrecisionFormat&&(ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Le){throw console.error("THREE.WebGLRenderer: "+Le.message),Le}function ue(){k=new ha(ce),K=new ca(ce,k,e),!1===K.isWebGL2&&(k.get("WEBGL_depth_texture"),k.get("OES_texture_float"),k.get("OES_texture_half_float"),k.get("OES_texture_half_float_linear"),k.get("OES_standard_derivatives"),k.get("OES_element_index_uint"),k.get("OES_vertex_array_object"),k.get("ANGLE_instanced_arrays")),k.get("OES_texture_float_linear"),se=new dl(ce,k,K),G=new ul(ce,k,K),G.scissor(C.copy(Q).multiplyScalar(_).floor()),G.viewport(b.copy(S).multiplyScalar(_).floor()),V=new fa(ce),z=new Wc,j=new hl(ce,k,G,z,K,se,V),X=new ua(p),W=new LA(ce,K),ae=new sa(ce,k,W,K),Y=new da(ce,W,V,ae),q=new va(ce,Y,W,V),ie=new wa(ce),ne=new la(z),J=new Xc(p,X,k,K,ae,ne),$=new wl(z),ee=new Zc(z),te=new Al(k,K),re=new oa(p,X,G,q,s),Ae=new aa(ce,k,V,K),oe=new pa(ce,k,V,K),V.programs=J.programs,p.capabilities=K,p.extensions=k,p.properties=z,p.renderLists=ee,p.state=G,p.info=V}ue();const he=new gl(p,ce);this.xr=he;const de=new ll(p,q,K.maxTextureSize);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),f=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),f=!1,ue()}function me(e){const t=e.target;t.removeEventListener("dispose",me),ge(t)}function ge(e){we(e),z.remove(e)}function we(e){const t=z.get(e).program;void 0!==t&&J.releaseProgram(t)}function ve(e,t){e.render((function(e){p.renderBufferImmediate(e,t)}))}this.shadowMap=de,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const e=k.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=k.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return _},this.setPixelRatio=function(e){void 0!==e&&(_=e,this.setSize(E,F,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Nn),e.set(E,F)},this.setSize=function(e,n,r){he.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,F=n,t.width=Math.floor(e*_),t.height=Math.floor(n*_),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Nn),e.set(E*_,F*_).floor()},this.setDrawingBufferSize=function(e,n,r){E=e,F=n,_=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Xn),e.copy(b)},this.getViewport=function(e){return e.copy(S)},this.setViewport=function(e,t,n,r){e.isVector4?S.set(e.x,e.y,e.z,e.w):S.set(e,t,n,r),G.viewport(b.copy(S).multiplyScalar(_).floor())},this.getScissor=function(e){return e.copy(Q)},this.setScissor=function(e,t,n,r){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,r),G.scissor(C.copy(Q).multiplyScalar(_).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){G.setScissorTest(L=e)},this.setOpaqueSort=function(e){T=e},this.setTransparentSort=function(e){U=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new wi),e.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ce.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",fe,!1),ee.dispose(),te.dispose(),z.dispose(),X.dispose(),q.dispose(),ae.dispose(),he.dispose(),Be.stop()},this.renderBufferImmediate=function(e,t){ae.initAttributes();const n=z.get(e);e.hasPositions&&!n.position&&(n.position=ce.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ce.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ce.createBuffer()),e.hasColors&&!n.color&&(n.color=ce.createBuffer());const r=t.getAttributes();e.hasPositions&&(ce.bindBuffer(34962,n.position),ce.bufferData(34962,e.positionArray,35048),ae.enableAttribute(r.position),ce.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ce.bindBuffer(34962,n.normal),ce.bufferData(34962,e.normalArray,35048),ae.enableAttribute(r.normal),ce.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ce.bindBuffer(34962,n.uv),ce.bufferData(34962,e.uvArray,35048),ae.enableAttribute(r.uv),ce.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ce.bindBuffer(34962,n.color),ce.bufferData(34962,e.colorArray,35048),ae.enableAttribute(r.color),ce.vertexAttribPointer(r.color,3,5126,!1,0,0)),ae.disableUnusedAttributes(),ce.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,A){null===t&&(t=R);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=_e(e,t,r,i);G.setMaterial(r,o);let a=n.index;const c=n.attributes.position;if(null===a){if(void 0===c||0===c.count)return}else if(0===a.count)return;let l,u=1;!0===r.wireframe&&(a=Y.getWireframeAttribute(n),u=2),(r.morphTargets||r.morphNormals)&&ie.update(i,n,r,s),ae.setup(i,r,s,n,a);let h=Ae;null!==a&&(l=W.get(a),h=oe,h.setIndex(l));const d=null!==a?a.count:c.count,p=n.drawRange.start*u,f=n.drawRange.count*u,m=null!==A?A.start*u:0,g=null!==A?A.count*u:1/0,w=Math.max(p,m),v=Math.min(d,p+f,m+g)-1,x=Math.max(0,v-w+1);if(0!==x){if(i.isMesh)!0===r.wireframe?(G.setLineWidth(r.wireframeLinewidth*N()),h.setMode(1)):h.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),G.setLineWidth(e*N()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(w,x,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(w,x,e)}else h.render(w,x)}},this.compile=function(e,t){h=te.get(e),h.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights();const n=new WeakMap;e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const A=r[i];!1===n.has(A)&&(Fe(A,e,t),n.set(A))}else!1===n.has(r)&&(Fe(r,e,t),n.set(r))}))};let xe=null;function ye(e){he.isPresenting||xe&&xe(e)}const Be=new QA;function be(e,t,n,r){if(!1===e.visible)return;const i=e.layers.test(t.layers);if(i)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||D.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(P);const t=q.update(e),i=e.material;i.visible&&u.push(e,t,i,n,H.z,null)}}else if(e.isImmediateRenderObject)r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(P),u.push(e,null,e.material,n,H.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==V.render.frame&&(e.skeleton.update(),e.skeleton.frame=V.render.frame),!e.frustumCulled||D.intersectsObject(e))){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(P);const t=q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let A=0,o=r.length;A<o;A++){const o=r[A],s=i[o.materialIndex];s&&s.visible&&u.push(e,t,s,n,H.z,o)}}else i.visible&&u.push(e,t,i,n,H.z,null)}const A=e.children;for(let o=0,s=A.length;o<s;o++)be(A[o],t,n,r)}function Me(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,A=e.length;i<A;i++){const A=e[i],o=A.object,s=A.geometry,a=null===r?A.material:r,c=A.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];o.layers.test(r.layers)&&(G.viewport(b.copy(r.viewport)),h.setupLightsView(r),Ee(o,t,r,s,a,c))}}else Ee(o,t,n,s,a,c)}}function Ee(e,t,n,r,i,A){if(e.onBeforeRender(p,t,n,r,i,A),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=_e(n,t,i,e);G.setMaterial(i),ae.reset(),ve(e,r)}else p.renderBufferDirect(n,t,r,i,e,A);e.onAfterRender(p,t,n,r,i,A)}function Fe(e,t,n){!0!==t.isScene&&(t=R);const r=z.get(e),i=h.state.lights,A=h.state.shadowsArray,o=i.state.version,s=J.getParameters(e,i.state,A,t,n),a=J.getProgramCacheKey(s);let c=r.program,l=!0;if(void 0===c)e.addEventListener("dispose",me);else if(c.cacheKey!==a)we(e);else if(r.lightsStateVersion!==o)l=!1;else{if(void 0!==s.shaderID){const n=e.isMeshStandardMaterial?t.environment:null;return void(r.envMap=X.get(e.envMap||n))}l=!1}l&&(s.uniforms=J.getUniforms(e),e.onBeforeCompile(s,p),c=J.acquireProgram(s,a),r.program=c,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);const u=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ne.numPlanes,r.numIntersection=ne.numIntersection,u.clippingPlanes=ne.uniform),r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=X.get(e.envMap||r.environment),r.needsLights=Qe(e),r.lightsStateVersion=o,r.needsLights&&(u.ambientLightColor.value=i.state.ambient,u.lightProbe.value=i.state.probe,u.directionalLights.value=i.state.directional,u.directionalLightShadows.value=i.state.directionalShadow,u.spotLights.value=i.state.spot,u.spotLightShadows.value=i.state.spotShadow,u.rectAreaLights.value=i.state.rectArea,u.ltc_1.value=i.state.rectAreaLTC1,u.ltc_2.value=i.state.rectAreaLTC2,u.pointLights.value=i.state.point,u.pointLightShadows.value=i.state.pointShadow,u.hemisphereLights.value=i.state.hemi,u.directionalShadowMap.value=i.state.directionalShadowMap,u.directionalShadowMatrix.value=i.state.directionalShadowMatrix,u.spotShadowMap.value=i.state.spotShadowMap,u.spotShadowMatrix.value=i.state.spotShadowMatrix,u.pointShadowMap.value=i.state.pointShadowMap,u.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=r.program.getUniforms(),f=wc.seqWithValue(d.seq,u);r.uniformsList=f}function _e(e,t,n,r){!0!==t.isScene&&(t=R),j.resetTextureUnits();const i=t.fog,A=n.isMeshStandardMaterial?t.environment:null,o=null===v?p.outputEncoding:v.texture.encoding,s=X.get(n.envMap||A),a=z.get(n),c=h.state.lights;if(!0===I&&(!0===O||e!==B)){const t=e===B&&n.id===y;ne.setState(n,e,t)}n.version===a.__version?n.fog&&a.fog!==i||a.environment!==A||a.needsLights&&a.lightsStateVersion!==c.state.version?Fe(n,t,r):void 0===a.numClippingPlanes||a.numClippingPlanes===ne.numPlanes&&a.numIntersection===ne.numIntersection?(a.outputEncoding!==o||a.envMap!==s)&&Fe(n,t,r):Fe(n,t,r):(Fe(n,t,r),a.__version=n.version);let l=!1,u=!1,d=!1;const f=a.program,m=f.getUniforms(),g=a.uniforms;if(G.useProgram(f.program)&&(l=!0,u=!0,d=!0),n.id!==y&&(y=n.id,u=!0),l||B!==e){if(m.setValue(ce,"projectionMatrix",e.projectionMatrix),K.logarithmicDepthBuffer&&m.setValue(ce,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),B!==e&&(B=e,u=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=m.map.cameraPosition;void 0!==t&&t.setValue(ce,H.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&m.setValue(ce,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&m.setValue(ce,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){m.setOptional(ce,r,"bindMatrix"),m.setOptional(ce,r,"bindMatrixInverse");const e=r.skeleton;if(e){const t=e.bones;if(K.floatVertexTextures){if(null===e.boneTexture){let n=Math.sqrt(4*t.length);n=Rn.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(e.boneMatrices);const i=new _A(r,n,n,He,Ue);e.boneMatrices=r,e.boneTexture=i,e.boneTextureSize=n}m.setValue(ce,"boneTexture",e.boneTexture,j),m.setValue(ce,"boneTextureSize",e.boneTextureSize)}else m.setOptional(ce,e,"boneMatrices")}}return(u||a.receiveShadow!==r.receiveShadow)&&(a.receiveShadow=r.receiveShadow,m.setValue(ce,"receiveShadow",r.receiveShadow)),u&&(m.setValue(ce,"toneMappingExposure",p.toneMappingExposure),a.needsLights&&Te(g,d),i&&n.fog&&$.refreshFogUniforms(g,i),$.refreshMaterialUniforms(g,n,_,F),wc.upload(ce,a.uniformsList,g,j)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(wc.upload(ce,a.uniformsList,g,j),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&m.setValue(ce,"center",r.center),m.setValue(ce,"modelViewMatrix",r.modelViewMatrix),m.setValue(ce,"normalMatrix",r.normalMatrix),m.setValue(ce,"modelMatrix",r.matrixWorld),f}function Te(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Qe(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Be.setAnimationLoop(ye),"undefined"!==typeof window&&Be.setContext(window),this.setAnimationLoop=function(e){xe=e,he.setAnimationLoop(e),null===e?Be.stop():Be.start()},this.render=function(e,t){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===f)return;ae.resetDefaultState(),y=-1,B=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===he.enabled&&!0===he.isPresenting&&(t=he.getCamera(t)),!0===e.isScene&&e.onBeforeRender(p,e,t,n||v),h=te.get(e,d.length),h.init(),d.push(h),P.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),D.setFromProjectionMatrix(P),O=this.localClippingEnabled,I=ne.init(this.clippingPlanes,O,t),u=ee.get(e,t),u.init(),be(e,t,0,p.sortObjects),u.finish(),!0===p.sortObjects&&u.sort(T,U),!0===I&&ne.beginShadows();const i=h.state.shadowsArray;de.render(i,e,t),h.setupLights(),h.setupLightsView(t),!0===I&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),re.render(u,e,t,r);const A=u.opaque,o=u.transparent;A.length>0&&Me(A,e,t),o.length>0&&Me(o,e,t),!0===e.isScene&&e.onAfterRender(p,e,t),null!==v&&(j.updateRenderTargetMipmap(v),j.updateMultisampleRenderTarget(v)),G.buffers.depth.setTest(!0),G.buffers.depth.setMask(!0),G.buffers.color.setMask(!0),G.setPolygonOffset(!1),d.pop(),h=d.length>0?d[d.length-1]:null,u=null},this.setFramebuffer=function(e){m!==e&&null===v&&ce.bindFramebuffer(36160,e),m=e},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return w},this.getRenderList=function(){return u},this.setRenderList=function(e){u=e},this.getRenderTarget=function(){return v},this.setRenderTarget=function(e,t=0,n=0){v=e,g=t,w=n,e&&void 0===z.get(e).__webglFramebuffer&&j.setupRenderTarget(e);let r=m,i=!1;if(e){const n=z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=n[t],i=!0):r=e.isWebGLMultisampleRenderTarget?z.get(e).__webglMultisampledFramebuffer:n,b.copy(e.viewport),C.copy(e.scissor),M=e.scissorTest}else b.copy(S).multiplyScalar(_).floor(),C.copy(Q).multiplyScalar(_).floor(),M=L;if(x!==r&&(ce.bindFramebuffer(36160,r),x=r),G.viewport(b),G.scissor(C),G.setScissorTest(M),i){const r=z.get(e.texture);ce.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}},this.readRenderTargetPixels=function(e,t,n,r,i,A,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){let o=!1;s!==x&&(ce.bindFramebuffer(36160,s),o=!0);try{const s=e.texture,a=s.format,c=s.type;if(a!==He&&se.convert(a)!==ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(c!==Ce&&se.convert(c)!==ce.getParameter(35738)&&(c!==Ue||!(K.isWebGL2||k.get("OES_texture_float")||k.get("WEBGL_color_buffer_float")))&&(c!==Se||!(K.isWebGL2?k.get("EXT_color_buffer_float"):k.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ce.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ce.readPixels(t,n,r,i,se.convert(a),se.convert(c),A):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&ce.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),A=Math.floor(t.image.height*r),o=se.convert(t.format);j.setTexture2D(t,0),ce.copyTexImage2D(3553,n,o,e.x,e.y,i,A,0),G.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,A=t.image.height,o=se.convert(n.format),s=se.convert(n.type);j.setTexture2D(n,0),ce.pixelStorei(37440,n.flipY),ce.pixelStorei(37441,n.premultiplyAlpha),ce.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ce.texSubImage2D(3553,r,e.x,e.y,i,A,o,s,t.image.data):t.isCompressedTexture?ce.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ce.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ce.generateMipmap(3553),G.unbindTexture()},this.initTexture=function(e){j.setTexture2D(e,0),G.unbindTexture()},this.resetState=function(){G.reset(),ae.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function yl(e){xl.call(this,e)}pl.prototype=Object.assign(Object.create(BA.prototype),{constructor:pl,isArrayCamera:!0}),fl.prototype=Object.assign(Object.create(qr.prototype),{constructor:fl,isGroup:!0}),Object.assign(ml.prototype,{constructor:ml,getHandSpace:function(){if(null===this._hand&&(this._hand=new fl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const e=new fl;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new fl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new fl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let r=null,i=null,A=null;const o=this._targetRay,s=this._grip,a=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(a&&e.hand){A=!0;for(let r=0;r<=window.XRHand.LITTLE_PHALANX_TIP;r++)if(e.hand[r]){const i=t.getJointPose(e.hand[r],n),A=a.joints[r];null!==i&&(A.matrix.fromArray(i.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.jointRadius=i.radius),A.visible=null!==i;const o=a.joints[window.XRHand.INDEX_PHALANX_TIP],s=a.joints[window.XRHand.THUMB_PHALANX_TIP],c=o.position.distanceTo(s.position),l=.02,u=.005;a.inputState.pinching&&c>l+u?(a.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!a.inputState.pinching&&c<=l-u&&(a.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else null!==o&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==A),this}}),Object.assign(gl.prototype,On.prototype),yl.prototype=Object.assign(Object.create(xl.prototype),{constructor:yl,isWebGL1Renderer:!0});class Bl{constructor(e,t){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new wi(e),this.density=void 0!==t?t:25e-5}clone(){return new Bl(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class bl{constructor(e,t,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new wi(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}clone(){return new bl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Cl extends qr{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function Ml(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Mn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Rn.generateUUID()}Object.defineProperty(Ml.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ml.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Rn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new Ml(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Rn.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const El=new Jn;function Fl(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function _l(e){yi.call(this),this.type="SpriteMaterial",this.color=new wi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}let Tl;Object.defineProperties(Fl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Fl.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)El.x=this.getX(t),El.y=this.getY(t),El.z=this.getZ(t),El.applyMatrix4(e),this.setXYZ(t,El.x,El.y,El.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Mi(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),_l.prototype=Object.create(yi.prototype),_l.prototype.constructor=_l,_l.prototype.isSpriteMaterial=!0,_l.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};const Ul=new Jn,Sl=new Jn,Ql=new Jn,Ll=new Nn,Dl=new Nn,Il=new Mr,Ol=new Jn,Pl=new Jn,Hl=new Jn,Rl=new Nn,Nl=new Nn,kl=new Nn;function Kl(e){if(qr.call(this),this.type="Sprite",void 0===Tl){Tl=new Xi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Ml(e,5);Tl.setIndex([0,1,2,0,2,3]),Tl.setAttribute("position",new Fl(t,3,0,!1)),Tl.setAttribute("uv",new Fl(t,2,3,!1))}this.geometry=Tl,this.material=void 0!==e?e:new _l,this.center=new Nn(.5,.5)}function Gl(e,t,n,r,i,A){Ll.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Dl.x=A*Ll.x-i*Ll.y,Dl.y=i*Ll.x+A*Ll.y):Dl.copy(Ll),e.copy(t),e.x+=Dl.x,e.y+=Dl.y,e.applyMatrix4(Il)}Kl.prototype=Object.assign(Object.create(qr.prototype),{constructor:Kl,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Sl.setFromMatrixScale(this.matrixWorld),Il.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ql.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Sl.multiplyScalar(-Ql.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const A=this.center;Gl(Ol.set(-.5,-.5,0),Ql,A,Sl,r,i),Gl(Pl.set(.5,-.5,0),Ql,A,Sl,r,i),Gl(Hl.set(.5,.5,0),Ql,A,Sl,r,i),Rl.set(0,0),Nl.set(1,0),kl.set(1,1);let o=e.ray.intersectTriangle(Ol,Pl,Hl,!1,Ul);if(null===o&&(Gl(Pl.set(-.5,.5,0),Ql,A,Sl,r,i),Nl.set(0,1),o=e.ray.intersectTriangle(Ol,Hl,Pl,!1,Ul),null===o))return;const s=e.ray.origin.distanceTo(Ul);s<e.near||s>e.far||t.push({distance:s,point:Ul.clone(),uv:ui.getUV(Ul,Ol,Pl,Hl,Rl,Nl,kl,new Nn),face:null,object:this})},copy:function(e){return qr.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}});const Vl=new Jn,zl=new Jn;function jl(){qr.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}jl.prototype=Object.assign(Object.create(qr.prototype),{constructor:jl,isLOD:!0,copy:function(e){qr.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length;r++)if(t<n[r].distance)break;return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++)if(e<t[n].distance)break;return t[n-1].object}return null},raycast:function(e,t){const n=this.levels;if(n.length>0){Vl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Vl);this.getObjectForDistance(n).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){Vl.setFromMatrixPosition(e.matrixWorld),zl.setFromMatrixPosition(this.matrixWorld);const n=Vl.distanceTo(zl)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){if(!(n>=t[r].distance))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){const t=qr.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance})}return t}});const Xl=new Jn,Wl=new Xn,Yl=new Xn,ql=new Jn,Jl=new Mr;function Zl(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),uA.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Mr,this.bindMatrixInverse=new Mr}function $l(){qr.call(this),this.type="Bone"}Zl.prototype=Object.assign(Object.create(uA.prototype),{constructor:Zl,isSkinnedMesh:!0,copy:function(e){return uA.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Xn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){uA.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(e,t){const n=this.skeleton,r=this.geometry;Wl.fromBufferAttribute(r.attributes.skinIndex,e),Yl.fromBufferAttribute(r.attributes.skinWeight,e),Xl.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=Yl.getComponent(i);if(0!==e){const r=Wl.getComponent(i);Jl.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(ql.copy(Xl).applyMatrix4(Jl),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}),$l.prototype=Object.assign(Object.create(qr.prototype),{constructor:$l,isBone:!0});const eu=new Mr,tu=new Mr;function nu(e=[],t=[]){this.uuid=Rn.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(nu.prototype,{init:function(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Mr)}},calculateInverses:function(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Mr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,A=e.length;i<A;i++){const r=e[i]?e[i].matrixWorld:tu;eu.multiplyMatrices(r,t[i]),eu.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)},clone:function(){return new nu(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new $l),this.bones.push(i),this.boneInverses.push((new Mr).fromArray(e.boneInverses[n]))}return this.init(),this},toJSON:function(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const A=n[r];e.boneInverses.push(A.toArray())}return e}});const ru=new Mr,iu=new Mr,Au=[],ou=new uA;function su(e,t,n){uA.call(this,e,t),this.instanceMatrix=new Mi(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function au(e){yi.call(this),this.type="LineBasicMaterial",this.color=new wi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}su.prototype=Object.assign(Object.create(uA.prototype),{constructor:su,isInstancedMesh:!0,copy:function(e){return uA.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,r=this.count;if(ou.geometry=this.geometry,ou.material=this.material,void 0!==ou.material)for(let i=0;i<r;i++){this.getMatrixAt(i,ru),iu.multiplyMatrices(n,ru),ou.matrixWorld=iu,ou.raycast(e,Au);for(let e=0,n=Au.length;e<n;e++){const n=Au[e];n.instanceId=i,n.object=this,t.push(n)}Au.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new Mi(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}}),au.prototype=Object.create(yi.prototype),au.prototype.constructor=au,au.prototype.isLineBasicMaterial=!0,au.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const cu=new Jn,lu=new Jn,uu=new Mr,hu=new Cr,du=new mr;function pu(e=new Xi,t=new au){qr.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}pu.prototype=Object.assign(Object.create(qr.prototype),{constructor:pu,isLine:!0,copy:function(e){return qr.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)cu.fromBufferAttribute(t,e-1),lu.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=cu.distanceTo(lu);e.setAttribute("lineDistance",new Di(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let e=1,r=t.length;e<r;e++)n[e]=n[e-1],n[e]+=t[e-1].distanceTo(t[e])}return this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),du.copy(n.boundingSphere),du.applyMatrix4(r),du.radius+=i,!1===e.ray.intersectsSphere(du))return;uu.copy(r).invert(),hu.copy(e.ray).applyMatrix4(uu);const A=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=A*A,s=new Jn,a=new Jn,c=new Jn,l=new Jn,u=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes,A=i.position;if(null!==r){const n=r.array;for(let r=0,i=n.length-1;r<i;r+=u){const i=n[r],u=n[r+1];s.fromBufferAttribute(A,i),a.fromBufferAttribute(A,u);const h=hu.distanceSqToSegment(s,a,l,c);if(h>o)continue;l.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(l);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,h=A.count-1;n<h;n+=u){s.fromBufferAttribute(A,n),a.fromBufferAttribute(A,n+1);const r=hu.distanceSqToSegment(s,a,l,c);if(r>o)continue;l.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(l);i<e.near||i>e.far||t.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const r=n.vertices,i=r.length;for(let n=0;n<i-1;n+=u){const i=hu.distanceSqToSegment(r[n],r[n+1],l,c);if(i>o)continue;l.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(l);A<e.near||A>e.far||t.push({distance:A,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const fu=new Jn,mu=new Jn;function gu(e,t){pu.call(this,e,t),this.type="LineSegments"}function wu(e,t){pu.call(this,e,t),this.type="LineLoop"}function vu(e){yi.call(this),this.type="PointsMaterial",this.color=new wi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}gu.prototype=Object.assign(Object.create(pu.prototype),{constructor:gu,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)fu.fromBufferAttribute(t,e),mu.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+fu.distanceTo(mu);e.setAttribute("lineDistance",new Di(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let e=0,r=t.length;e<r;e+=2)fu.copy(t[e]),mu.copy(t[e+1]),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+fu.distanceTo(mu)}return this}}),wu.prototype=Object.assign(Object.create(pu.prototype),{constructor:wu,isLineLoop:!0}),vu.prototype=Object.create(yi.prototype),vu.prototype.constructor=vu,vu.prototype.isPointsMaterial=!0,vu.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const xu=new Mr,yu=new Cr,Bu=new mr,bu=new Jn;function Cu(e=new Xi,t=new vu){qr.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}function Mu(e,t,n,r,i,A,o){const s=yu.distanceSqToPoint(e);if(s<n){const n=new Jn;yu.closestPointToPoint(e,n),n.applyMatrix4(r);const a=i.ray.origin.distanceTo(n);if(a<i.near||a>i.far)return;A.push({distance:a,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}function Eu(e,t,n,r,i,A,o,s,a){zn.call(this,e,t,n,r,i,A,o,s,a),this.format=void 0!==o?o:Pe,this.minFilter=void 0!==A?A:ve,this.magFilter=void 0!==i?i:ve,this.generateMipmaps=!1;const c=this;function l(){c.needsUpdate=!0,e.requestVideoFrameCallback(l)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(l)}function Fu(e,t,n,r,i,A,o,s,a,c,l,u){zn.call(this,null,A,o,s,a,c,r,i,l,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function _u(e,t,n,r,i,A,o,s,a){zn.call(this,e,t,n,r,i,A,o,s,a),this.needsUpdate=!0}function Tu(e,t,n,r,i,A,o,s,a,c){if(c=void 0!==c?c:Ke,c!==Ke&&c!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ke&&(n=Fe),void 0===n&&c===Ge&&(n=Ie),zn.call(this,null,r,i,A,o,s,c,n,a),this.image={width:e,height:t},this.magFilter=void 0!==o?o:pe,this.minFilter=void 0!==s?s:pe,this.flipY=!1,this.generateMipmaps=!1}Cu.prototype=Object.assign(Object.create(qr.prototype),{constructor:Cu,isPoints:!0,copy:function(e){return qr.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Bu.copy(n.boundingSphere),Bu.applyMatrix4(r),Bu.radius+=i,!1===e.ray.intersectsSphere(Bu))return;xu.copy(r).invert(),yu.copy(e.ray).applyMatrix4(xu);const A=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=A*A;if(n.isBufferGeometry){const i=n.index,A=n.attributes,s=A.position;if(null!==i){const n=i.array;for(let i=0,A=n.length;i<A;i++){const A=n[i];bu.fromBufferAttribute(s,A),Mu(bu,A,o,r,e,t,this)}}else for(let n=0,a=s.count;n<a;n++)bu.fromBufferAttribute(s,n),Mu(bu,n,o,r,e,t,this)}else{const i=n.vertices;for(let n=0,A=i.length;n<A;n++)Mu(i[n],n,o,r,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Eu.prototype=Object.assign(Object.create(zn.prototype),{constructor:Eu,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image,t="requestVideoFrameCallback"in e;!1===t&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Fu.prototype=Object.create(zn.prototype),Fu.prototype.constructor=Fu,Fu.prototype.isCompressedTexture=!0,_u.prototype=Object.create(zn.prototype),_u.prototype.constructor=_u,_u.prototype.isCanvasTexture=!0,Tu.prototype=Object.create(zn.prototype),Tu.prototype.constructor=Tu,Tu.prototype.isDepthTexture=!0;let Uu=0;const Su=new Mr,Qu=new qr,Lu=new Jn;function Du(){Object.defineProperty(this,"id",{value:Uu+=2}),this.uuid=Rn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Du.prototype=Object.assign(Object.create(On.prototype),{constructor:Du,isGeometry:!0,applyMatrix4:function(e){const t=(new kn).getNormalMatrix(e);for(let n=0,r=this.vertices.length;n<r;n++){const t=this.vertices[n];t.applyMatrix4(e)}for(let n=0,r=this.faces.length;n<r;n++){const e=this.faces[n];e.normal.applyMatrix3(t).normalize();for(let n=0,r=e.vertexNormals.length;n<r;n++)e.vertexNormals[n].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Su.makeRotationX(e),this.applyMatrix4(Su),this},rotateY:function(e){return Su.makeRotationY(e),this.applyMatrix4(Su),this},rotateZ:function(e){return Su.makeRotationZ(e),this.applyMatrix4(Su),this},translate:function(e,t,n){return Su.makeTranslation(e,t,n),this.applyMatrix4(Su),this},scale:function(e,t,n){return Su.makeScale(e,t,n),this.applyMatrix4(Su),this},lookAt:function(e){return Qu.lookAt(e),Qu.updateMatrix(),this.applyMatrix4(Qu.matrix),this},fromBufferGeometry:function(e){const t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,A=r.normal,o=r.color,s=r.uv,a=r.uv2;void 0!==a&&(this.faceVertexUvs[1]=[]);for(let u=0;u<i.count;u++)t.vertices.push((new Jn).fromBufferAttribute(i,u)),void 0!==o&&t.colors.push((new wi).fromBufferAttribute(o,u));function c(e,n,r,i){const c=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],l=void 0===A?[]:[(new Jn).fromBufferAttribute(A,e),(new Jn).fromBufferAttribute(A,n),(new Jn).fromBufferAttribute(A,r)],u=new vi(e,n,r,l,c,i);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new Nn).fromBufferAttribute(s,e),(new Nn).fromBufferAttribute(s,n),(new Nn).fromBufferAttribute(s,r)]),void 0!==a&&t.faceVertexUvs[1].push([(new Nn).fromBufferAttribute(a,e),(new Nn).fromBufferAttribute(a,n),(new Nn).fromBufferAttribute(a,r)])}const l=e.groups;if(l.length>0)for(let u=0;u<l.length;u++){const e=l[u],t=e.start,r=e.count;for(let i=t,A=t+r;i<A;i+=3)void 0!==n?c(n.getX(i),n.getX(i+1),n.getX(i+2),e.materialIndex):c(i,i+1,i+2,e.materialIndex)}else if(void 0!==n)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<i.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lu).negate(),this.translate(Lu.x,Lu.y,Lu.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Mr;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const e=new Jn,t=new Jn;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],i=this.vertices[r.a],A=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,A),t.subVectors(i,A),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e=!0){const t=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)t[n]=new Jn;if(e){const e=new Jn,n=new Jn;for(let r=0,i=this.faces.length;r<i;r++){const i=this.faces[r],A=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),n.subVectors(A,o),e.cross(n),t[i.a].add(e),t[i.b].add(e),t[i.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){const n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)t[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){const e=this.faces[n],r=e.vertexNormals;3===r.length?(r[0].copy(t[e.a]),r[1].copy(t[e.b]),r[2].copy(t[e.c])):(r[0]=t[e.a].clone(),r[1]=t[e.b].clone(),r[2]=t[e.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,n=this.faces.length;t<n;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const e=new Du;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,r=this.faces.length;t<r;t++){const t=new Jn,r={a:new Jn,b:new Jn,c:new Jn};e.push(t),n.push(r)}}const n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){const t=this.faces[e],r=n.faceNormals[e],i=n.vertexNormals[e];r.copy(t.normal),i.a.copy(t.vertexNormals[0]),i.b.copy(t.vertexNormals[1]),i.c.copy(t.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new er),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n=0){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let r;const i=this.vertices.length,A=this.vertices,o=e.vertices,s=this.faces,a=e.faces,c=this.colors,l=e.colors;void 0!==t&&(r=(new kn).getNormalMatrix(t));for(let u=0,h=o.length;u<h;u++){const e=o[u],n=e.clone();void 0!==t&&n.applyMatrix4(t),A.push(n)}for(let u=0,h=l.length;u<h;u++)c.push(l[u].clone());for(let u=0,h=a.length;u<h;u++){const e=a[u];let t,A;const o=e.vertexNormals,c=e.vertexColors,l=new vi(e.a+i,e.b+i,e.c+i);l.normal.copy(e.normal),void 0!==r&&l.normal.applyMatrix3(r).normalize();for(let n=0,i=o.length;n<i;n++)t=o[n].clone(),void 0!==r&&t.applyMatrix3(r).normalize(),l.vertexNormals.push(t);l.color.copy(e.color);for(let n=0,r=c.length;n<r;n++)A=c[n],l.vertexColors.push(A.clone());l.materialIndex=e.materialIndex+n,s.push(l)}for(let u=0,h=e.faceVertexUvs.length;u<h;u++){const t=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=[];for(let e=0,t=n.length;e<t;e++)r.push(n[e].clone());this.faceVertexUvs[u].push(r)}}},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(e=4){const t={},n=[],r=[],i=Math.pow(10,e);for(let s=0,a=this.vertices.length;s<a;s++){const e=this.vertices[s],A=Math.round(e.x*i)+"_"+Math.round(e.y*i)+"_"+Math.round(e.z*i);void 0===t[A]?(t[A]=s,n.push(this.vertices[s]),r[s]=n.length-1):r[s]=r[t[A]]}const A=[];for(let s=0,a=this.faces.length;s<a;s++){const e=this.faces[s];e.a=r[e.a],e.b=r[e.b],e.c=r[e.c];const t=[e.a,e.b,e.c];for(let n=0;n<3;n++)if(t[n]===t[(n+1)%3]){A.push(s);break}}for(let s=A.length-1;s>=0;s--){const e=A[s];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}const o=this.vertices.length-n.length;return this.vertices=n,o},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];this.vertices.push(new Jn(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function n(e,t){return e.materialIndex-t.materialIndex}e.sort(n);const r=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let A,o;r&&r.length===t&&(A=[]),i&&i.length===t&&(o=[]);for(let s=0;s<t;s++){const t=e[s]._id;A&&A.push(r[t]),o&&o.push(i[t])}A&&(this.faceVertexUvs[0]=A),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}const t=[];for(let d=0;d<this.vertices.length;d++){const e=this.vertices[d];t.push(e.x,e.y,e.z)}const n=[],r=[],i={},A=[],o={},s=[],a={};for(let d=0;d<this.faces.length;d++){const e=this.faces[d],t=!0,r=!1,i=void 0!==this.faceVertexUvs[0][d],A=e.normal.length()>0,o=e.vertexNormals.length>0,s=1!==e.color.r||1!==e.color.g||1!==e.color.b,a=e.vertexColors.length>0;let p=0;if(p=c(p,0,0),p=c(p,1,t),p=c(p,2,r),p=c(p,3,i),p=c(p,4,A),p=c(p,5,o),p=c(p,6,s),p=c(p,7,a),n.push(p),n.push(e.a,e.b,e.c),n.push(e.materialIndex),i){const e=this.faceVertexUvs[0][d];n.push(h(e[0]),h(e[1]),h(e[2]))}if(A&&n.push(l(e.normal)),o){const t=e.vertexNormals;n.push(l(t[0]),l(t[1]),l(t[2]))}if(s&&n.push(u(e.color)),a){const t=e.vertexColors;n.push(u(t[0]),u(t[1]),u(t[2]))}}function c(e,t,n){return n?e|1<<t:e&~(1<<t)}function l(e){const t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==i[t]||(i[t]=r.length/3,r.push(e.x,e.y,e.z)),i[t]}function u(e){const t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==o[t]||(o[t]=A.length,A.push(e.getHex())),o[t]}function h(e){const t=e.x.toString()+e.y.toString();return void 0!==a[t]||(a[t]=s.length/2,s.push(e.x,e.y)),a[t]}return e.data={},e.data.vertices=t,e.data.normals=r,A.length>0&&(e.data.colors=A),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e},clone:function(){return(new Du).copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let u=0,h=t.length;u<h;u++)this.vertices.push(t[u].clone());const n=e.colors;for(let u=0,h=n.length;u<h;u++)this.colors.push(n[u].clone());const r=e.faces;for(let u=0,h=r.length;u<h;u++)this.faces.push(r[u].clone());for(let u=0,h=e.faceVertexUvs.length;u<h;u++){const t=e.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];r.push(t.clone())}this.faceVertexUvs[u].push(r)}}const i=e.morphTargets;for(let u=0,h=i.length;u<h;u++){const e={};if(e.name=i[u].name,void 0!==i[u].vertices){e.vertices=[];for(let t=0,n=i[u].vertices.length;t<n;t++)e.vertices.push(i[u].vertices[t].clone())}if(void 0!==i[u].normals){e.normals=[];for(let t=0,n=i[u].normals.length;t<n;t++)e.normals.push(i[u].normals[t].clone())}this.morphTargets.push(e)}const A=e.morphNormals;for(let u=0,h=A.length;u<h;u++){const e={};if(void 0!==A[u].vertexNormals){e.vertexNormals=[];for(let t=0,n=A[u].vertexNormals.length;t<n;t++){const n=A[u].vertexNormals[t],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),e.vertexNormals.push(r)}}if(void 0!==A[u].faceNormals){e.faceNormals=[];for(let t=0,n=A[u].faceNormals.length;t<n;t++)e.faceNormals.push(A[u].faceNormals[t].clone())}this.morphNormals.push(e)}const o=e.skinWeights;for(let u=0,h=o.length;u<h;u++)this.skinWeights.push(o[u].clone());const s=e.skinIndices;for(let u=0,h=s.length;u<h;u++)this.skinIndices.push(s[u].clone());const a=e.lineDistances;for(let u=0,h=a.length;u<h;u++)this.lineDistances.push(a[u]);const c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Iu extends Du{constructor(e,t,n,r,i,A){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:A},this.fromBufferGeometry(new pA(e,t,n,r,i,A)),this.mergeVertices()}}class Ou extends Xi{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],A=[],o=[],s=[],a=new Jn,c=new Nn;A.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let l=0,u=3;l<=t;l++,u+=3){const i=n+l/t*r;a.x=e*Math.cos(i),a.y=e*Math.sin(i),A.push(a.x,a.y,a.z),o.push(0,0,1),c.x=(A[u]/e+1)/2,c.y=(A[u+1]/e+1)/2,s.push(c.x,c.y)}for(let l=1;l<=t;l++)i.push(l,l+1,0);this.setIndex(i),this.setAttribute("position",new Di(A,3)),this.setAttribute("normal",new Di(o,3)),this.setAttribute("uv",new Di(s,2))}}class Pu extends Du{constructor(e,t,n,r){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Ou(e,t,n,r)),this.mergeVertices()}}class Hu extends Xi{constructor(e=1,t=1,n=1,r=8,i=1,A=!1,o=0,s=2*Math.PI){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:A,thetaStart:o,thetaLength:s};const a=this;r=Math.floor(r),i=Math.floor(i);const c=[],l=[],u=[],h=[];let d=0;const p=[],f=n/2;let m=0;function g(){const A=new Jn,g=new Jn;let w=0;const v=(t-e)/n;for(let a=0;a<=i;a++){const c=[],m=a/i,w=m*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+o,a=Math.sin(i),p=Math.cos(i);g.x=w*a,g.y=-m*n+f,g.z=w*p,l.push(g.x,g.y,g.z),A.set(a,v,p).normalize(),u.push(A.x,A.y,A.z),h.push(t,1-m),c.push(d++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],A=p[t][e+1];c.push(n,r,A),c.push(r,i,A),w+=6}a.addGroup(m,w,0),m+=w}function w(n){const i=d,A=new Nn,p=new Jn;let g=0;const w=!0===n?e:t,v=!0===n?1:-1;for(let e=1;e<=r;e++)l.push(0,f*v,0),u.push(0,v,0),h.push(.5,.5),d++;const x=d;for(let e=0;e<=r;e++){const t=e/r,n=t*s+o,i=Math.cos(n),a=Math.sin(n);p.x=w*a,p.y=f*v,p.z=w*i,l.push(p.x,p.y,p.z),u.push(0,v,0),A.x=.5*i+.5,A.y=.5*a*v+.5,h.push(A.x,A.y),d++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),g+=3}a.addGroup(m,g,!0===n?1:2),m+=g}g(),!1===A&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new Di(l,3)),this.setAttribute("normal",new Di(u,3)),this.setAttribute("uv",new Di(h,2))}}class Ru extends Du{constructor(e,t,n,r,i,A,o,s){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:A,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Hu(e,t,n,r,i,A,o,s)),this.mergeVertices()}}class Nu extends Ru{constructor(e,t,n,r,i,A,o){super(0,e,t,n,r,i,A,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:A,thetaLength:o}}}class ku extends Hu{constructor(e=1,t=1,n=8,r=1,i=!1,A=0,o=2*Math.PI){super(0,e,t,n,r,i,A,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:A,thetaLength:o}}}class Ku extends Xi{constructor(e,t,n=1,r=0){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],A=[];function o(e){const n=new Jn,r=new Jn,i=new Jn;for(let A=0;A<t.length;A+=3)h(t[A+0],n),h(t[A+1],r),h(t[A+2],i),s(n,r,i,e)}function s(e,t,n,r){const i=r+1,A=[];for(let o=0;o<=i;o++){A[o]=[];const r=e.clone().lerp(n,o/i),s=t.clone().lerp(n,o/i),a=i-o;for(let e=0;e<=a;e++)A[o][e]=0===e&&o===i?r:r.clone().lerp(s,e/a)}for(let o=0;o<i;o++)for(let e=0;e<2*(i-o)-1;e++){const t=Math.floor(e/2);e%2===0?(u(A[o][t+1]),u(A[o+1][t]),u(A[o][t])):(u(A[o][t+1]),u(A[o+1][t+1]),u(A[o+1][t]))}}function a(e){const t=new Jn;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}function c(){const e=new Jn;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];const n=f(e)/2/Math.PI+.5,r=m(e)/Math.PI+.5;A.push(n,1-r)}d(),l()}function l(){for(let e=0;e<A.length;e+=6){const t=A[e+0],n=A[e+2],r=A[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(A[e+0]+=1),n<.2&&(A[e+2]+=1),r<.2&&(A[e+4]+=1))}}function u(e){i.push(e.x,e.y,e.z)}function h(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function d(){const e=new Jn,t=new Jn,n=new Jn,r=new Jn,o=new Nn,s=new Nn,a=new Nn;for(let c=0,l=0;c<i.length;c+=9,l+=6){e.set(i[c+0],i[c+1],i[c+2]),t.set(i[c+3],i[c+4],i[c+5]),n.set(i[c+6],i[c+7],i[c+8]),o.set(A[l+0],A[l+1]),s.set(A[l+2],A[l+3]),a.set(A[l+4],A[l+5]),r.copy(e).add(t).add(n).divideScalar(3);const u=f(r);p(o,l+0,e,u),p(s,l+2,t,u),p(a,l+4,n,u)}}function p(e,t,n,r){r<0&&1===e.x&&(A[t]=e.x-1),0===n.x&&0===n.z&&(A[t]=r/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}function m(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}o(r),a(n),c(),this.setAttribute("position",new Di(i,3)),this.setAttribute("normal",new Di(i.slice(),3)),this.setAttribute("uv",new Di(A,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class Gu extends Ku{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],A=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(i,A,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class Vu extends Du{constructor(e,t){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Gu(e,t)),this.mergeVertices()}}const zu=new Jn,ju=new Jn,Xu=new Jn,Wu=new ui;class Yu extends Xi{constructor(e,t){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,e.isGeometry&&(e=(new Xi).fromGeometry(e));const n=4,r=Math.pow(10,n),i=Math.cos(Rn.DEG2RAD*t),A=e.getIndex(),o=e.getAttribute("position"),s=A?A.count:o.count,a=[0,0,0],c=["a","b","c"],l=new Array(3),u={},h=[];for(let d=0;d<s;d+=3){A?(a[0]=A.getX(d),a[1]=A.getX(d+1),a[2]=A.getX(d+2)):(a[0]=d,a[1]=d+1,a[2]=d+2);const{a:e,b:t,c:n}=Wu;if(e.fromBufferAttribute(o,a[0]),t.fromBufferAttribute(o,a[1]),n.fromBufferAttribute(o,a[2]),Wu.getNormal(Xu),l[0]=`${Math.round(e.x*r)},${Math.round(e.y*r)},${Math.round(e.z*r)}`,l[1]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,l[2]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let r=0;r<3;r++){const e=(r+1)%3,t=l[r],n=l[e],A=Wu[c[r]],o=Wu[c[e]],s=`${t}_${n}`,d=`${n}_${t}`;d in u&&u[d]?(Xu.dot(u[d].normal)<=i&&(h.push(A.x,A.y,A.z),h.push(o.x,o.y,o.z)),u[d]=null):s in u||(u[s]={index0:a[r],index1:a[e],normal:Xu.clone()})}}for(const d in u)if(u[d]){const{index0:e,index1:t}=u[d];zu.fromBufferAttribute(o,e),ju.fromBufferAttribute(o,t),h.push(zu.x,zu.y,zu.z),h.push(ju.x,ju.y,ju.z)}this.setAttribute("position",new Di(h,3))}}const qu={triangulate:function(e,t,n){n=n||2;const r=t&&t.length,i=r?t[0]*n:e.length;let A=Ju(e,0,i,n,!0);const o=[];if(!A||A.next===A.prev)return o;let s,a,c,l,u,h,d;if(r&&(A=ih(e,t,A,n)),e.length>80*n){s=c=e[0],a=l=e[1];for(let t=n;t<i;t+=n)u=e[t],h=e[t+1],u<s&&(s=u),h<a&&(a=h),u>c&&(c=u),h>l&&(l=h);d=Math.max(c-s,l-a),d=0!==d?1/d:0}return $u(A,o,n,s,a,d),o}};function Ju(e,t,n,r,i){let A,o;if(i===Fh(e,t,n,r)>0)for(A=t;A<n;A+=r)o=Ch(A,e[A],e[A+1],o);else for(A=n-r;A>=t;A-=r)o=Ch(A,e[A],e[A+1],o);return o&&mh(o,o.next)&&(Mh(o),o=o.next),o}function Zu(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!mh(r,r.next)&&0!==fh(r.prev,r,r.next))r=r.next;else{if(Mh(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function $u(e,t,n,r,i,A,o){if(!e)return;!o&&A&&ch(e,r,i,A);let s,a,c=e;while(e.prev!==e.next)if(s=e.prev,a=e.next,A?th(e,r,i,A):eh(e))t.push(s.i/n),t.push(e.i/n),t.push(a.i/n),Mh(e),e=a.next,c=a.next;else if(e=a,e===c){o?1===o?(e=nh(Zu(e),t,n),$u(e,t,n,r,i,A,2)):2===o&&rh(e,t,n,r,i,A):$u(Zu(e),t,n,r,i,A,1);break}}function eh(e){const t=e.prev,n=e,r=e.next;if(fh(t,n,r)>=0)return!1;let i=e.next.next;while(i!==e.prev){if(dh(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&fh(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function th(e,t,n,r){const i=e.prev,A=e,o=e.next;if(fh(i,A,o)>=0)return!1;const s=i.x<A.x?i.x<o.x?i.x:o.x:A.x<o.x?A.x:o.x,a=i.y<A.y?i.y<o.y?i.y:o.y:A.y<o.y?A.y:o.y,c=i.x>A.x?i.x>o.x?i.x:o.x:A.x>o.x?A.x:o.x,l=i.y>A.y?i.y>o.y?i.y:o.y:A.y>o.y?A.y:o.y,u=uh(s,a,t,n,r),h=uh(c,l,t,n,r);let d=e.prevZ,p=e.nextZ;while(d&&d.z>=u&&p&&p.z<=h){if(d!==e.prev&&d!==e.next&&dh(i.x,i.y,A.x,A.y,o.x,o.y,d.x,d.y)&&fh(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&dh(i.x,i.y,A.x,A.y,o.x,o.y,p.x,p.y)&&fh(p.prev,p,p.next)>=0)return!1;p=p.nextZ}while(d&&d.z>=u){if(d!==e.prev&&d!==e.next&&dh(i.x,i.y,A.x,A.y,o.x,o.y,d.x,d.y)&&fh(d.prev,d,d.next)>=0)return!1;d=d.prevZ}while(p&&p.z<=h){if(p!==e.prev&&p!==e.next&&dh(i.x,i.y,A.x,A.y,o.x,o.y,p.x,p.y)&&fh(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function nh(e,t,n){let r=e;do{const i=r.prev,A=r.next.next;!mh(i,A)&&gh(i,r,r.next,A)&&yh(i,A)&&yh(A,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(A.i/n),Mh(r),Mh(r.next),r=e=A),r=r.next}while(r!==e);return Zu(r)}function rh(e,t,n,r,i,A){let o=e;do{let e=o.next.next;while(e!==o.prev){if(o.i!==e.i&&ph(o,e)){let s=bh(o,e);return o=Zu(o,o.next),s=Zu(s,s.next),$u(o,t,n,r,i,A),void $u(s,t,n,r,i,A)}e=e.next}o=o.next}while(o!==e)}function ih(e,t,n,r){const i=[];let A,o,s,a,c;for(A=0,o=t.length;A<o;A++)s=t[A]*r,a=A<o-1?t[A+1]*r:e.length,c=Ju(e,s,a,r,!1),c===c.next&&(c.steiner=!0),i.push(hh(c));for(i.sort(Ah),A=0;A<i.length;A++)oh(i[A],n),n=Zu(n,n.next);return n}function Ah(e,t){return e.x-t.x}function oh(e,t){if(t=sh(e,t),t){const n=bh(t,e);Zu(t,t.next),Zu(n,n.next)}}function sh(e,t){let n=t;const r=e.x,i=e.y;let A,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o){if(o=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}A=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!A)return null;if(r===o)return A;const s=A,a=A.x,c=A.y;let l,u=1/0;n=A;do{r>=n.x&&n.x>=a&&r!==n.x&&dh(i<c?r:o,i,a,c,i<c?o:r,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(r-n.x),yh(n,e)&&(l<u||l===u&&(n.x>A.x||n.x===A.x&&ah(A,n)))&&(A=n,u=l)),n=n.next}while(n!==s);return A}function ah(e,t){return fh(e.prev,e,t.prev)<0&&fh(t.next,e,e.next)<0}function ch(e,t,n,r){let i=e;do{null===i.z&&(i.z=uh(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,lh(i)}function lh(e){let t,n,r,i,A,o,s,a,c=1;do{n=e,e=null,A=null,o=0;while(n){for(o++,r=n,s=0,t=0;t<c;t++)if(s++,r=r.nextZ,!r)break;a=c;while(s>0||a>0&&r)0!==s&&(0===a||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,a--),A?A.nextZ=i:e=i,i.prevZ=A,A=i;n=r}A.nextZ=null,c*=2}while(o>1);return e}function uh(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function hh(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function dh(e,t,n,r,i,A,o,s){return(i-o)*(t-s)-(e-o)*(A-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(A-s)-(i-o)*(r-s)>=0}function ph(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!xh(e,t)&&(yh(e,t)&&yh(t,e)&&Bh(e,t)&&(fh(e.prev,e,t.prev)||fh(e,t.prev,t))||mh(e,t)&&fh(e.prev,e,e.next)>0&&fh(t.prev,t,t.next)>0)}function fh(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function mh(e,t){return e.x===t.x&&e.y===t.y}function gh(e,t,n,r){const i=vh(fh(e,t,n)),A=vh(fh(e,t,r)),o=vh(fh(n,r,e)),s=vh(fh(n,r,t));return i!==A&&o!==s||(!(0!==i||!wh(e,n,t))||(!(0!==A||!wh(e,r,t))||(!(0!==o||!wh(n,e,r))||!(0!==s||!wh(n,t,r)))))}function wh(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function vh(e){return e>0?1:e<0?-1:0}function xh(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&gh(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function yh(e,t){return fh(e.prev,e,e.next)<0?fh(e,t,e.next)>=0&&fh(e,e.prev,t)>=0:fh(e,t,e.prev)<0||fh(e,e.next,t)<0}function Bh(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,A=(e.y+t.y)/2;do{n.y>A!==n.next.y>A&&n.next.y!==n.y&&i<(n.next.x-n.x)*(A-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function bh(e,t){const n=new Eh(e.i,e.x,e.y),r=new Eh(t.i,t.x,t.y),i=e.next,A=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,A.next=r,r.prev=A,r}function Ch(e,t,n,r){const i=new Eh(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Mh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Eh(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fh(e,t,n,r){let i=0;for(let A=t,o=n-r;A<n;A+=r)i+=(e[o]-e[A])*(e[A+1]+e[o+1]),o=A;return i}const _h={area:function(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return _h.area(e)<0},triangulateShape:function(e,t){const n=[],r=[],i=[];Th(e),Uh(n,e);let A=e.length;t.forEach(Th);for(let s=0;s<t.length;s++)r.push(A),A+=t[s].length,Uh(n,t[s]);const o=qu.triangulate(n,r);for(let s=0;s<o.length;s+=3)i.push(o.slice(s,s+3));return i}};function Th(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Uh(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Sh extends Xi{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let o=0,s=e.length;o<s;o++){const t=e[o];A(t)}function A(e){const A=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let a=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,u=void 0!==t.bevelSize?t.bevelSize:l-2,h=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:Qh;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),a=t.amount);let m,g,w,v,x,y=!1;p&&(m=p.getSpacedPoints(s),y=!0,c=!1,g=p.computeFrenetFrames(s,!1),w=new Jn,v=new Jn,x=new Jn),c||(d=0,l=0,u=0,h=0);const B=e.extractPoints(o);let b=B.shape;const C=B.holes,M=!_h.isClockWise(b);if(M){b=b.reverse();for(let e=0,t=C.length;e<t;e++){const t=C[e];_h.isClockWise(t)&&(C[e]=t.reverse())}}const E=_h.triangulateShape(b,C),F=b;for(let t=0,n=C.length;t<n;t++){const e=C[t];b=b.concat(e)}function _(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const T=b.length,U=E.length;function S(e,t,n){let r,i,A;const o=e.x-t.x,s=e.y-t.y,a=n.x-e.x,c=n.y-e.y,l=o*o+s*s,u=o*c-s*a;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(l),h=Math.sqrt(a*a+c*c),d=t.x-s/u,p=t.y+o/u,f=n.x-c/h,m=n.y+a/h,g=((f-d)*c-(m-p)*a)/(o*c-s*a);r=d+o*g-e.x,i=p+s*g-e.y;const w=r*r+i*i;if(w<=2)return new Nn(r,i);A=Math.sqrt(w/2)}else{let e=!1;o>Number.EPSILON?a>Number.EPSILON&&(e=!0):o<-Number.EPSILON?a<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=o,A=Math.sqrt(l)):(r=o,i=s,A=Math.sqrt(l/2))}return new Nn(r/A,i/A)}const Q=[];for(let t=0,n=F.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),Q[t]=S(F[t],F[r],F[i]);const L=[];let D,I=Q.concat();for(let t=0,n=C.length;t<n;t++){const e=C[t];D=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[t]=S(e[t],e[r],e[i]);L.push(D),I=I.concat(D)}for(let t=0;t<d;t++){const e=t/d,n=l*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+h;for(let t=0,i=F.length;t<i;t++){const e=_(F[t],Q[t],r);N(e.x,e.y,-n)}for(let t=0,i=C.length;t<i;t++){const e=C[t];D=L[t];for(let t=0,i=e.length;t<i;t++){const i=_(e[t],D[t],r);N(i.x,i.y,-n)}}}const O=u+h;for(let t=0;t<T;t++){const e=c?_(b[t],I[t],O):b[t];y?(v.copy(g.normals[0]).multiplyScalar(e.x),w.copy(g.binormals[0]).multiplyScalar(e.y),x.copy(m[0]).add(v).add(w),N(x.x,x.y,x.z)):N(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<T;e++){const n=c?_(b[e],I[e],O):b[e];y?(v.copy(g.normals[t]).multiplyScalar(n.x),w.copy(g.binormals[t]).multiplyScalar(n.y),x.copy(m[t]).add(v).add(w),N(x.x,x.y,x.z)):N(n.x,n.y,a/s*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=l*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+h;for(let t=0,i=F.length;t<i;t++){const e=_(F[t],Q[t],r);N(e.x,e.y,a+n)}for(let t=0,i=C.length;t<i;t++){const e=C[t];D=L[t];for(let t=0,i=e.length;t<i;t++){const i=_(e[t],D[t],r);y?N(i.x,i.y+m[s-1].y,m[s-1].x+n):N(i.x,i.y,a+n)}}}function P(){const e=r.length/3;if(c){let e=0,t=T*e;for(let n=0;n<U;n++){const e=E[n];k(e[2]+t,e[1]+t,e[0]+t)}e=s+2*d,t=T*e;for(let n=0;n<U;n++){const e=E[n];k(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<U;e++){const t=E[e];k(t[2],t[1],t[0])}for(let e=0;e<U;e++){const t=E[e];k(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,r.length/3-e,0)}function H(){const e=r.length/3;let t=0;R(F,t),t+=F.length;for(let n=0,r=C.length;n<r;n++){const e=C[n];R(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}function R(e,t){let n=e.length;while(--n>=0){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*d;e<n;e++){const n=T*e,A=T*(e+1),o=t+r+n,s=t+i+n,a=t+i+A,c=t+r+A;K(o,s,a,c)}}}function N(e,t,n){A.push(e),A.push(t),A.push(n)}function k(e,t,i){G(e),G(t),G(i);const A=r.length/3,o=f.generateTopUV(n,r,A-3,A-2,A-1);V(o[0]),V(o[1]),V(o[2])}function K(e,t,i,A){G(e),G(t),G(A),G(t),G(i),G(A);const o=r.length/3,s=f.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);V(s[0]),V(s[1]),V(s[3]),V(s[1]),V(s[2]),V(s[3])}function G(e){r.push(A[3*e+0]),r.push(A[3*e+1]),r.push(A[3*e+2])}function V(e){i.push(e.x),i.push(e.y)}P(),H()}this.setAttribute("position",new Di(r,3)),this.setAttribute("uv",new Di(i,2)),this.computeVertexNormals()}toJSON(){const e=Xi.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Lh(t,n,e)}}const Qh={generateTopUV:function(e,t,n,r,i){const A=t[3*n],o=t[3*n+1],s=t[3*r],a=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new Nn(A,o),new Nn(s,a),new Nn(c,l)]},generateSideWallUV:function(e,t,n,r,i,A){const o=t[3*n],s=t[3*n+1],a=t[3*n+2],c=t[3*r],l=t[3*r+1],u=t[3*r+2],h=t[3*i],d=t[3*i+1],p=t[3*i+2],f=t[3*A],m=t[3*A+1],g=t[3*A+2];return Math.abs(s-l)<.01?[new Nn(o,1-a),new Nn(c,1-u),new Nn(h,1-p),new Nn(f,1-g)]:[new Nn(s,1-a),new Nn(l,1-u),new Nn(d,1-p),new Nn(m,1-g)]}};function Lh(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class Dh extends Du{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Sh(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Ih(t,n,e)}}function Ih(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class Oh extends Ku{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class Ph extends Du{constructor(e,t){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Oh(e,t)),this.mergeVertices()}}class Hh extends Xi{constructor(e,t=12,n=0,r=2*Math.PI){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Rn.clamp(r,0,2*Math.PI);const i=[],A=[],o=[],s=1/t,a=new Jn,c=new Nn;for(let l=0;l<=t;l++){const i=n+l*s*r,u=Math.sin(i),h=Math.cos(i);for(let n=0;n<=e.length-1;n++)a.x=e[n].x*u,a.y=e[n].y,a.z=e[n].x*h,A.push(a.x,a.y,a.z),c.x=l/t,c.y=n/(e.length-1),o.push(c.x,c.y)}for(let l=0;l<t;l++)for(let t=0;t<e.length-1;t++){const n=t+l*e.length,r=n,A=n+e.length,o=n+e.length+1,s=n+1;i.push(r,A,s),i.push(A,o,s)}if(this.setIndex(i),this.setAttribute("position",new Di(A,3)),this.setAttribute("uv",new Di(o,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new Jn,i=new Jn,A=new Jn,o=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[o+s+0],i.y=n[o+s+1],i.z=n[o+s+2],A.addVectors(r,i).normalize(),n[s+0]=n[o+s+0]=A.x,n[s+1]=n[o+s+1]=A.y,n[s+2]=n[o+s+2]=A.z}}}class Rh extends Du{constructor(e,t,n,r){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Hh(e,t,n,r)),this.mergeVertices()}}class Nh extends Ku{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class kh extends Du{constructor(e,t){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nh(e,t)),this.mergeVertices()}}function Kh(e,t,n){Xi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],A=[],o=[],s=1e-5,a=new Jn,c=new Jn,l=new Jn,u=new Jn,h=new Jn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=t+1;for(let p=0;p<=n;p++){const r=p/n;for(let n=0;n<=t;n++){const d=n/t;e(d,r,c),i.push(c.x,c.y,c.z),d-s>=0?(e(d-s,r,l),u.subVectors(c,l)):(e(d+s,r,l),u.subVectors(l,c)),r-s>=0?(e(d,r-s,l),h.subVectors(c,l)):(e(d,r+s,l),h.subVectors(l,c)),a.crossVectors(u,h).normalize(),A.push(a.x,a.y,a.z),o.push(d,r)}}for(let p=0;p<n;p++)for(let e=0;e<t;e++){const t=p*d+e,n=p*d+e+1,i=(p+1)*d+e+1,A=(p+1)*d+e;r.push(t,n,A),r.push(n,i,A)}this.setIndex(r),this.setAttribute("position",new Di(i,3)),this.setAttribute("normal",new Di(A,3)),this.setAttribute("uv",new Di(o,2))}function Gh(e,t,n){Du.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Kh(e,t,n)),this.mergeVertices()}Kh.prototype=Object.create(Xi.prototype),Kh.prototype.constructor=Kh,Gh.prototype=Object.create(Du.prototype),Gh.prototype.constructor=Gh;class Vh extends Du{constructor(e,t,n,r){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new DA(e,t,n,r)),this.mergeVertices()}}class zh extends Du{constructor(e,t,n,r){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Ku(e,t,n,r)),this.mergeVertices()}}class jh extends Xi{constructor(e=.5,t=1,n=8,r=1,i=0,A=2*Math.PI){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:A},n=Math.max(3,n),r=Math.max(1,r);const o=[],s=[],a=[],c=[];let l=e;const u=(t-e)/r,h=new Jn,d=new Nn;for(let p=0;p<=r;p++){for(let e=0;e<=n;e++){const r=i+e/n*A;h.x=l*Math.cos(r),h.y=l*Math.sin(r),s.push(h.x,h.y,h.z),a.push(0,0,1),d.x=(h.x/t+1)/2,d.y=(h.y/t+1)/2,c.push(d.x,d.y)}l+=u}for(let p=0;p<r;p++){const e=p*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,A=r+n+1,s=r+n+2,a=r+1;o.push(i,A,a),o.push(A,s,a)}}this.setIndex(o),this.setAttribute("position",new Di(s,3)),this.setAttribute("normal",new Di(a,3)),this.setAttribute("uv",new Di(c,2))}}class Xh extends Du{constructor(e,t,n,r,i,A){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:A},this.fromBufferGeometry(new jh(e,t,n,r,i,A)),this.mergeVertices()}}class Wh extends Xi{constructor(e,t=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],A=[];let o=0,s=0;if(!1===Array.isArray(e))a(e);else for(let c=0;c<e.length;c++)a(e[c]),this.addGroup(o,s,c),o+=s,s=0;function a(e){const o=r.length/3,a=e.extractPoints(t);let c=a.shape;const l=a.holes;!1===_h.isClockWise(c)&&(c=c.reverse());for(let t=0,n=l.length;t<n;t++){const e=l[t];!0===_h.isClockWise(e)&&(l[t]=e.reverse())}const u=_h.triangulateShape(c,l);for(let t=0,n=l.length;t<n;t++){const e=l[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),A.push(e.x,e.y)}for(let t=0,r=u.length;t<r;t++){const e=u[t],r=e[0]+o,i=e[1]+o,A=e[2]+o;n.push(r,i,A),s+=3}}this.setIndex(n),this.setAttribute("position",new Di(r,3)),this.setAttribute("normal",new Di(i,3)),this.setAttribute("uv",new Di(A,2))}toJSON(){const e=Xi.prototype.toJSON.call(this),t=this.parameters.shapes;return Yh(t,e)}}function Yh(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class qh extends Du{constructor(e,t){super(),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Wh(e,t)),this.mergeVertices()}toJSON(){const e=Du.prototype.toJSON.call(this),t=this.parameters.shapes;return Jh(t,e)}}function Jh(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class Zh extends Xi{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,A=0,o=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:A,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(A+o,Math.PI);let a=0;const c=[],l=new Jn,u=new Jn,h=[],d=[],p=[],f=[];for(let m=0;m<=n;m++){const h=[],g=m/n;let w=0;0==m&&0==A?w=.5/t:m==n&&s==Math.PI&&(w=-.5/t);for(let n=0;n<=t;n++){const s=n/t;l.x=-e*Math.cos(r+s*i)*Math.sin(A+g*o),l.y=e*Math.cos(A+g*o),l.z=e*Math.sin(r+s*i)*Math.sin(A+g*o),d.push(l.x,l.y,l.z),u.copy(l).normalize(),p.push(u.x,u.y,u.z),f.push(s+w,1-g),h.push(a++)}c.push(h)}for(let m=0;m<n;m++)for(let e=0;e<t;e++){const t=c[m][e+1],r=c[m][e],i=c[m+1][e],o=c[m+1][e+1];(0!==m||A>0)&&h.push(t,r,o),(m!==n-1||s<Math.PI)&&h.push(r,i,o)}this.setIndex(h),this.setAttribute("position",new Di(d,3)),this.setAttribute("normal",new Di(p,3)),this.setAttribute("uv",new Di(f,2))}}class $h extends Du{constructor(e,t,n,r,i,A,o){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:A,thetaLength:o},this.fromBufferGeometry(new Zh(e,t,n,r,i,A,o)),this.mergeVertices()}}class ed extends Ku{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}}class td extends Du{constructor(e,t){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ed(e,t)),this.mergeVertices()}}class nd extends Sh{constructor(e,t={}){const n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Xi;const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextBufferGeometry"}}class rd extends Du{constructor(e,t){super(),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new nd(e,t)),this.mergeVertices()}}class id extends Xi{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const A=[],o=[],s=[],a=[],c=new Jn,l=new Jn,u=new Jn;for(let h=0;h<=n;h++)for(let A=0;A<=r;A++){const d=A/r*i,p=h/n*Math.PI*2;l.x=(e+t*Math.cos(p))*Math.cos(d),l.y=(e+t*Math.cos(p))*Math.sin(d),l.z=t*Math.sin(p),o.push(l.x,l.y,l.z),c.x=e*Math.cos(d),c.y=e*Math.sin(d),u.subVectors(l,c).normalize(),s.push(u.x,u.y,u.z),a.push(A/r),a.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,i=(r+1)*(h-1)+e,o=(r+1)*h+e;A.push(t,n,o),A.push(n,i,o)}this.setIndex(A),this.setAttribute("position",new Di(o,3)),this.setAttribute("normal",new Di(s,3)),this.setAttribute("uv",new Di(a,2))}}class Ad extends Du{constructor(e,t,n,r,i){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new id(e,t,n,r,i)),this.mergeVertices()}}class od extends Xi{constructor(e=1,t=.4,n=64,r=8,i=2,A=3){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:A},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],a=[],c=[],l=new Jn,u=new Jn,h=new Jn,d=new Jn,p=new Jn,f=new Jn,m=new Jn;for(let w=0;w<=n;++w){const o=w/n*i*Math.PI*2;g(o,i,A,e,h),g(o+.01,i,A,e,d),f.subVectors(d,h),m.addVectors(d,h),p.crossVectors(f,m),m.crossVectors(p,f),p.normalize(),m.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,A=-t*Math.cos(i),o=t*Math.sin(i);l.x=h.x+(A*m.x+o*p.x),l.y=h.y+(A*m.y+o*p.y),l.z=h.z+(A*m.z+o*p.z),s.push(l.x,l.y,l.z),u.subVectors(l,h).normalize(),a.push(u.x,u.y,u.z),c.push(w/n),c.push(e/r)}}for(let w=1;w<=n;w++)for(let e=1;e<=r;e++){const t=(r+1)*(w-1)+(e-1),n=(r+1)*w+(e-1),i=(r+1)*w+e,A=(r+1)*(w-1)+e;o.push(t,n,A),o.push(n,i,A)}function g(e,t,n,r,i){const A=Math.cos(e),o=Math.sin(e),s=n/t*e,a=Math.cos(s);i.x=r*(2+a)*.5*A,i.y=r*(2+a)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new Di(s,3)),this.setAttribute("normal",new Di(a,3)),this.setAttribute("uv",new Di(c,2))}}class sd extends Du{constructor(e,t,n,r,i,A,o){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:A},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new od(e,t,n,r,i,A)),this.mergeVertices()}}class ad extends Xi{constructor(e,t=64,n=1,r=8,i=!1){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const A=e.computeFrenetFrames(t,i);this.tangents=A.tangents,this.normals=A.normals,this.binormals=A.binormals;const o=new Jn,s=new Jn,a=new Nn;let c=new Jn;const l=[],u=[],h=[],d=[];function p(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),g(),m()}function f(i){c=e.getPointAt(i/t,c);const a=A.normals[i],h=A.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),A=-Math.cos(t);s.x=A*a.x+i*h.x,s.y=A*a.y+i*h.y,s.z=A*a.z+i*h.z,s.normalize(),u.push(s.x,s.y,s.z),o.x=c.x+n*s.x,o.y=c.y+n*s.y,o.z=c.z+n*s.z,l.push(o.x,o.y,o.z)}}function m(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),A=(r+1)*e+t,o=(r+1)*(e-1)+t;d.push(n,i,o),d.push(i,A,o)}}function g(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)a.x=e/t,a.y=n/r,h.push(a.x,a.y)}p(),this.setIndex(d),this.setAttribute("position",new Di(l,3)),this.setAttribute("normal",new Di(u,3)),this.setAttribute("uv",new Di(h,2))}toJSON(){const e=Xi.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class cd extends Du{constructor(e,t,n,r,i,A){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==A&&console.warn("THREE.TubeGeometry: taper has been removed.");const o=new ad(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}}class ld extends Xi{constructor(e){super(),this.type="WireframeGeometry";const t=[],n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){const A=e.faces;for(let e=0,t=A.length;e<t;e++){const t=A[e];for(let e=0;e<3;e++){const A=t[i[e]],o=t[i[(e+1)%3]];n[0]=Math.min(A,o),n[1]=Math.max(A,o);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const n in r){const i=r[n];let A=e.vertices[i.index1];t.push(A.x,A.y,A.z),A=e.vertices[i.index2],t.push(A.x,A.y,A.z)}}else if(e&&e.isBufferGeometry){const i=new Jn;if(null!==e.index){const A=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],i=t.start,A=t.count;for(let e=i,s=i+A;e<s;e+=3)for(let t=0;t<3;t++){const i=o.getX(e+t),A=o.getX(e+(t+1)%3);n[0]=Math.min(i,A),n[1]=Math.max(i,A);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const e in r){const n=r[e];i.fromBufferAttribute(A,n.index1),t.push(i.x,i.y,i.z),i.fromBufferAttribute(A,n.index2),t.push(i.x,i.y,i.z)}}else{const n=e.attributes.position;for(let e=0,r=n.count/3;e<r;e++)for(let A=0;A<3;A++){const r=3*e+A;i.fromBufferAttribute(n,r),t.push(i.x,i.y,i.z);const o=3*e+(A+1)%3;i.fromBufferAttribute(n,o),t.push(i.x,i.y,i.z)}}}this.setAttribute("position",new Di(t,3))}}var ud=Object.freeze({__proto__:null,BoxGeometry:Iu,BoxBufferGeometry:pA,CircleGeometry:Pu,CircleBufferGeometry:Ou,ConeGeometry:Nu,ConeBufferGeometry:ku,CylinderGeometry:Ru,CylinderBufferGeometry:Hu,DodecahedronGeometry:Vu,DodecahedronBufferGeometry:Gu,EdgesGeometry:Yu,ExtrudeGeometry:Dh,ExtrudeBufferGeometry:Sh,IcosahedronGeometry:Ph,IcosahedronBufferGeometry:Oh,LatheGeometry:Rh,LatheBufferGeometry:Hh,OctahedronGeometry:kh,OctahedronBufferGeometry:Nh,ParametricGeometry:Gh,ParametricBufferGeometry:Kh,PlaneGeometry:Vh,PlaneBufferGeometry:DA,PolyhedronGeometry:zh,PolyhedronBufferGeometry:Ku,RingGeometry:Xh,RingBufferGeometry:jh,ShapeGeometry:qh,ShapeBufferGeometry:Wh,SphereGeometry:$h,SphereBufferGeometry:Zh,TetrahedronGeometry:td,TetrahedronBufferGeometry:ed,TextGeometry:rd,TextBufferGeometry:nd,TorusGeometry:Ad,TorusBufferGeometry:id,TorusKnotGeometry:sd,TorusKnotBufferGeometry:od,TubeGeometry:cd,TubeBufferGeometry:ad,WireframeGeometry:ld});function hd(e){yi.call(this),this.type="ShadowMaterial",this.color=new wi(0),this.transparent=!0,this.setValues(e)}function dd(e){xA.call(this,e),this.type="RawShaderMaterial"}function pd(e){yi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}function fd(e){pd.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Nn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Rn.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}function md(e){yi.call(this),this.type="MeshPhongMaterial",this.color=new wi(16777215),this.specular=new wi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gd(e){yi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function wd(e){yi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vd(e){yi.call(this),this.type="MeshLambertMaterial",this.color=new wi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xd(e){yi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new Nn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yd(e){au.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}hd.prototype=Object.create(yi.prototype),hd.prototype.constructor=hd,hd.prototype.isShadowMaterial=!0,hd.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this},dd.prototype=Object.create(xA.prototype),dd.prototype.constructor=dd,dd.prototype.isRawShaderMaterial=!0,pd.prototype=Object.create(yi.prototype),pd.prototype.constructor=pd,pd.prototype.isMeshStandardMaterial=!0,pd.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this},fd.prototype=Object.create(pd.prototype),fd.prototype.constructor=fd,fd.prototype.isMeshPhysicalMaterial=!0,fd.prototype.copy=function(e){return pd.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new wi).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this},md.prototype=Object.create(yi.prototype),md.prototype.constructor=md,md.prototype.isMeshPhongMaterial=!0,md.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gd.prototype=Object.create(yi.prototype),gd.prototype.constructor=gd,gd.prototype.isMeshToonMaterial=!0,gd.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},wd.prototype=Object.create(yi.prototype),wd.prototype.constructor=wd,wd.prototype.isMeshNormalMaterial=!0,wd.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},vd.prototype=Object.create(yi.prototype),vd.prototype.constructor=vd,vd.prototype.isMeshLambertMaterial=!0,vd.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xd.prototype=Object.create(yi.prototype),xd.prototype.constructor=xd,xd.prototype.isMeshMatcapMaterial=!0,xd.prototype.copy=function(e){return yi.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yd.prototype=Object.create(au.prototype),yd.prototype.constructor=yd,yd.prototype.isLineDashedMaterial=!0,yd.prototype.copy=function(e){return au.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Bd=Object.freeze({__proto__:null,ShadowMaterial:hd,SpriteMaterial:_l,RawShaderMaterial:dd,ShaderMaterial:xA,PointsMaterial:vu,MeshPhysicalMaterial:fd,MeshStandardMaterial:pd,MeshPhongMaterial:md,MeshToonMaterial:gd,MeshNormalMaterial:wd,MeshLambertMaterial:vd,MeshDepthMaterial:ol,MeshDistanceMaterial:sl,MeshBasicMaterial:Bi,MeshMatcapMaterial:xd,LineDashedMaterial:yd,LineBasicMaterial:au,Material:yi});const bd={arraySlice:function(e,t,n){return bd.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}const n=e.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let A=0,o=0;o!==r;++A){const r=n[A]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,A=e[0];while(void 0!==A&&void 0===A[r])A=e[i++];if(void 0===A)return;let o=A[r];if(void 0!==o)if(Array.isArray(o))do{o=A[r],void 0!==o&&(t.push(A.time),n.push.apply(n,o)),A=e[i++]}while(void 0!==A);else if(void 0!==o.toArray)do{o=A[r],void 0!==o&&(t.push(A.time),o.toArray(n,n.length)),A=e[i++]}while(void 0!==A);else do{o=A[r],void 0!==o&&(t.push(A.time),n.push(o)),A=e[i++]}while(void 0!==A)},subclip:function(e,t,n,r,i=30){const A=e.clone();A.name=t;const o=[];for(let a=0;a<A.tracks.length;++a){const e=A.tracks[a],t=e.getValueSize(),s=[],c=[];for(let A=0;A<e.times.length;++A){const o=e.times[A]*i;if(!(o<n||o>=r)){s.push(e.times[A]);for(let n=0;n<t;++n)c.push(e.values[A*t+n])}}0!==s.length&&(e.times=bd.convertArray(s,e.times.constructor),e.values=bd.convertArray(c,e.values.constructor),o.push(e))}A.tracks=o;let s=1/0;for(let a=0;a<A.tracks.length;++a)s>A.tracks[a].times[0]&&(s=A.tracks[a].times[0]);for(let a=0;a<A.tracks.length;++a)A.tracks[a].shift(-1*s);return A.resetDuration(),A},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,A=t/r;for(let o=0;o<i;++o){const t=n.tracks[o],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const a=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=a/3);let c=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);const u=t.times.length-1;let h;if(A<=t.times[0]){const e=s,n=a-s;h=bd.arraySlice(t.values,e,n)}else if(A>=t.times[u]){const e=u*a+s,n=e+a-s;h=bd.arraySlice(t.values,e,n)}else{const e=t.createInterpolant(),n=s,r=a-s;e.evaluate(A),h=bd.arraySlice(e.resultBuffer,n,r)}if("quaternion"===r){const e=(new qn).fromArray(h).normalize().conjugate();e.toArray(h)}const d=i.times.length;for(let e=0;e<d;++e){const t=e*l+c;if("quaternion"===r)qn.multiplyQuaternionsFlat(i.values,t,h,0,i.values,t);else{const e=l-2*c;for(let n=0;n<e;++n)i.values[t+n]-=h[n]}}}return e.blendMode=jt,e}};function Cd(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Md(e,t,n,r){Cd.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Ed(e,t,n,r){Cd.call(this,e,t,n,r)}function Fd(e,t,n,r){Cd.call(this,e,t,n,r)}function _d(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bd.convertArray(t,this.TimeBufferType),this.values=bd.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function Td(e,t,n){_d.call(this,e,t,n)}function Ud(e,t,n,r){_d.call(this,e,t,n,r)}function Sd(e,t,n,r){_d.call(this,e,t,n,r)}function Qd(e,t,n,r){Cd.call(this,e,t,n,r)}function Ld(e,t,n,r){_d.call(this,e,t,n,r)}function Dd(e,t,n,r){_d.call(this,e,t,n,r)}function Id(e,t,n,r){_d.call(this,e,t,n,r)}function Od(e,t=-1,n,r=zt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Rn.generateUUID(),this.duration<0&&this.resetDuration()}function Pd(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sd;case"vector":case"vector2":case"vector3":case"vector4":return Id;case"color":return Ud;case"quaternion":return Ld;case"bool":case"boolean":return Td;case"string":return Dd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function Hd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Pd(e.type);if(void 0===e.times){const t=[],n=[];bd.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Cd.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let A;n:{r:if(!(e<r)){for(let A=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===A)break;if(i=r,r=t[++n],e<r)break t}A=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let A=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===A)break;if(r=i,i=t[--n-1],e>=i)break t}A=n,n=0}}while(n<A){const r=n+A>>>1;e<t[r]?A=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let A=0;A!==r;++A)t[A]=n[i+A];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Cd.prototype,{beforeStart_:Cd.prototype.copySampleValue_,afterEnd_:Cd.prototype.copySampleValue_}),Md.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Md,DefaultSettings_:{endingStart:Kt,endingEnd:Kt},intervalChanged_:function(e,t,n){const r=this.parameterPositions;let i=e-2,A=e+1,o=r[i],s=r[A];if(void 0===o)switch(this.getSettings_().endingStart){case Gt:i=e,o=2*t-n;break;case Vt:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Gt:A=e,s=2*n-t;break;case Vt:A=1,s=n+r[1]-r[0];break;default:A=e-1,s=t}const a=.5*(n-t),c=this.valueSize;this._weightPrev=a/(t-o),this._weightNext=a/(s-n),this._offsetPrev=i*c,this._offsetNext=A*c},interpolate_:function(e,t,n,r){const i=this.resultBuffer,A=this.sampleValues,o=this.valueSize,s=e*o,a=s-o,c=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,h=this._weightNext,d=(n-t)/(r-t),p=d*d,f=p*d,m=-u*f+2*u*p-u*d,g=(1+u)*f+(-1.5-2*u)*p+(-.5+u)*d+1,w=(-1-h)*f+(1.5+h)*p+.5*d,v=h*f-h*p;for(let x=0;x!==o;++x)i[x]=m*A[c+x]+g*A[a+x]+w*A[s+x]+v*A[l+x];return i}}),Ed.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Ed,interpolate_:function(e,t,n,r){const i=this.resultBuffer,A=this.sampleValues,o=this.valueSize,s=e*o,a=s-o,c=(n-t)/(r-t),l=1-c;for(let u=0;u!==o;++u)i[u]=A[a+u]*l+A[s+u]*c;return i}}),Fd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Fd,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(_d,{toJSON:function(e){const t=e.constructor;let n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:bd.convertArray(e.times,Array),values:bd.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}}),Object.assign(_d.prototype,{constructor:_d,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Nt,InterpolantFactoryMethodDiscrete:function(e){return new Fd(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Ed(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Md(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case Rt:t=this.InterpolantFactoryMethodDiscrete;break;case Nt:t=this.InterpolantFactoryMethodLinear;break;case kt:t=this.InterpolantFactoryMethodSmooth;break}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Rt;case this.InterpolantFactoryMethodLinear:return Nt;case this.InterpolantFactoryMethodSmooth:return kt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this},scale:function(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,r=n.length;let i=0,A=r-1;while(i!==r&&n[i]<e)++i;while(-1!==A&&n[A]>t)--A;if(++A,0!==i||A!==r){i>=A&&(A=Math.max(A,1),i=A-1);const e=this.getValueSize();this.times=bd.arraySlice(n,i,A),this.values=bd.arraySlice(this.values,i*e,A*e)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let A=null;for(let o=0;o!==i;o++){const t=n[o];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==A&&A>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,A),e=!1;break}A=t}if(void 0!==r&&bd.isTypedArray(r))for(let o=0,s=r.length;o!==s;++o){const t=r[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}return e},optimize:function(){const e=bd.arraySlice(this.times),t=bd.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===kt,i=e.length-1;let A=1;for(let o=1;o<i;++o){let i=!1;const s=e[o],a=e[o+1];if(s!==a&&(1!==o||s!==s[0]))if(r)i=!0;else{const e=o*n,r=e-n,A=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[A+o]){i=!0;break}}}if(i){if(o!==A){e[A]=e[o];const r=o*n,i=A*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++A}}if(i>0){e[A]=e[i];for(let e=i*n,r=A*n,o=0;o!==n;++o)t[r+o]=t[e+o];++A}return A!==e.length?(this.times=bd.arraySlice(e,0,A),this.values=bd.arraySlice(t,0,A*n)):(this.times=e,this.values=t),this},clone:function(){const e=bd.arraySlice(this.times,0),t=bd.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),Td.prototype=Object.assign(Object.create(_d.prototype),{constructor:Td,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Rt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ud.prototype=Object.assign(Object.create(_d.prototype),{constructor:Ud,ValueTypeName:"color"}),Sd.prototype=Object.assign(Object.create(_d.prototype),{constructor:Sd,ValueTypeName:"number"}),Qd.prototype=Object.assign(Object.create(Cd.prototype),{constructor:Qd,interpolate_:function(e,t,n,r){const i=this.resultBuffer,A=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let a=e*o;for(let c=a+o;a!==c;a+=4)qn.slerpFlat(i,0,A,a-o,A,a,s);return i}}),Ld.prototype=Object.assign(Object.create(_d.prototype),{constructor:Ld,ValueTypeName:"quaternion",DefaultInterpolation:Nt,InterpolantFactoryMethodLinear:function(e){return new Qd(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Dd.prototype=Object.assign(Object.create(_d.prototype),{constructor:Dd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Rt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Id.prototype=Object.assign(Object.create(_d.prototype),{constructor:Id,ValueTypeName:"vector"}),Object.assign(Od,{parse:function(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let A=0,o=n.length;A!==o;++A)t.push(Hd(n[A]).scale(r));const i=new Od(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i},toJSON:function(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,A=n.length;i!==A;++i)t.push(_d.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){const i=t.length,A=[];for(let o=0;o<i;o++){let e=[],s=[];e.push((o+i-1)%i,o,(o+1)%i),s.push(0,1,0);const a=bd.getKeyframeOrder(e);e=bd.sortedArray(e,1,a),s=bd.sortedArray(s,1,a),r||0!==e[0]||(e.push(i),s.push(s[0])),A.push(new Sd(".morphTargetInfluences["+t[o].name+"]",e,s).scale(1/n))}return new Od(e,-1,A)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let o=0,s=e.length;o<s;o++){const t=e[o],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const A=[];for(const o in r)A.push(Od.CreateFromMorphTargetSequence(o,r[o],t,n));return A},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const A=[],o=[];bd.flattenJSON(n,A,o,r),0!==A.length&&i.push(new e(t,A,o))}},r=[],i=e.name||"default",A=e.fps||30,o=e.blendMode;let s=e.length||-1;const a=e.hierarchy||[];for(let l=0;l<a.length;l++){const e=a[l].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],A=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),A.push(r.morphTarget===i?1:0)}r.push(new Sd(".morphTargetInfluence["+i+"]",t,A))}s=t.length*(A||1)}else{const i=".bones["+t[l].name+"]";n(Id,i+".position",e,"pos",r),n(Ld,i+".quaternion",e,"rot",r),n(Id,i+".scale",e,"scl",r)}}if(0===r.length)return null;const c=new Od(i,s,r,o);return c}}),Object.assign(Od.prototype,{resetDuration:function(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Od(this.name,this.duration,e,this.blendMode)},toJSON:function(){return Od.toJSON(this)}});const Rd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Nd(e,t,n){const r=this;let i=!1,A=0,o=0,s=void 0;const a=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,A,o),i=!0},this.itemEnd=function(e){A++,void 0!==r.onProgress&&r.onProgress(e,A,o),A===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return a.push(e,t),this},this.removeHandler=function(e){const t=a.indexOf(e);return-1!==t&&a.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=a.length;t<n;t+=2){const n=a[t],r=a[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}const kd=new Nd;function Kd(e){this.manager=void 0!==e?e:kd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Kd.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const Gd={};function Vd(e){Kd.call(this,e)}function zd(e){Kd.call(this,e)}function jd(e){Kd.call(this,e)}function Xd(e){Kd.call(this,e)}function Wd(e){Kd.call(this,e)}function Yd(e){Kd.call(this,e)}function qd(e){Kd.call(this,e)}function Jd(){this.type="Curve",this.arcLengthDivisions=200}function Zd(e,t,n,r,i,A,o,s){Jd.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=A||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function $d(e,t,n,r,i,A){Zd.call(this,e,t,n,n,r,i,A),this.type="ArcCurve"}function ep(){let e=0,t=0,n=0,r=0;function i(i,A,o,s){e=i,t=o,n=-3*i+3*A-2*o-s,r=2*i-2*A+o+s}return{initCatmullRom:function(e,t,n,r,A){i(t,n,A*(n-e),A*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,A,o,s){let a=(t-e)/A-(n-e)/(A+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+s)+(r-n)/s;a*=o,c*=o,i(t,n,a,c)},calc:function(i){const A=i*i,o=A*i;return e+t*i+n*A+r*o}}}Vd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Vd,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,A=Rd.get(e);if(void 0!==A)return i.manager.itemStart(e),setTimeout((function(){t&&t(A),i.manager.itemEnd(e)}),0),A;if(void 0!==Gd[e])return void Gd[e].push({onLoad:t,onProgress:n,onError:r});const o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);let a;if(s){const n=s[1],A=!!s[2];let o=s[3];o=decodeURIComponent(o),A&&(o=atob(o));try{let r;const A=(this.responseType||"").toLowerCase();switch(A){case"arraybuffer":case"blob":const e=new Uint8Array(o.length);for(let n=0;n<o.length;n++)e[n]=o.charCodeAt(n);r="blob"===A?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(o,n);break;case"json":r=JSON.parse(o);break;default:r=o;break}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(c){setTimeout((function(){r&&r(c),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{Gd[e]=[],Gd[e].push({onLoad:t,onProgress:n,onError:r}),a=new XMLHttpRequest,a.open("GET",e,!0),a.addEventListener("load",(function(t){const n=this.response,r=Gd[e];if(delete Gd[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Rd.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),a.addEventListener("progress",(function(t){const n=Gd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),a.addEventListener("error",(function(t){const n=Gd[e];delete Gd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),a.addEventListener("abort",(function(t){const n=Gd[e];delete Gd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)a.setRequestHeader(e,this.requestHeader[e]);a.send(null)}return i.manager.itemStart(e),a},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}}),zd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:zd,load:function(e,t,n,r){const i=this,A=new Vd(i.manager);A.setPath(i.path),A.setRequestHeader(i.requestHeader),A.setWithCredentials(i.withCredentials),A.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(A){r?r(A):console.error(A),i.manager.itemError(e)}}),n,r)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const r=Od.parse(e[n]);t.push(r)}return t}}),jd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:jd,load:function(e,t,n,r){const i=this,A=[],o=new Fu,s=new Vd(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let a=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);A[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},a+=1,6===a&&(1===n.mipmapCount&&(o.minFilter=ve),o.image=A,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let l=0,u=e.length;l<u;++l)c(l);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){A[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)A[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),A[t].format=n.format,A[t].width=n.width,A[t].height=n.height}o.image=A}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=ve),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}),Xd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Xd,load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,A=Rd.get(e);if(void 0!==A)return i.manager.itemStart(e),setTimeout((function(){t&&t(A),i.manager.itemEnd(e)}),0),A;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",a,!1),Rd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function a(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",a,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",a,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}),Wd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Wd,load:function(e,t,n,r){const i=new EA,A=new Xd(this.manager);A.setCrossOrigin(this.crossOrigin),A.setPath(this.path);let o=0;function s(n){A.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let a=0;a<e.length;++a)s(a);return i}}),Yd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Yd,load:function(e,t,n,r){const i=this,A=new _A,o=new Vd(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?A.image=n.image:void 0!==n.data&&(A.image.width=n.width,A.image.height=n.height,A.image.data=n.data),A.wrapS=void 0!==n.wrapS?n.wrapS:he,A.wrapT=void 0!==n.wrapT?n.wrapT:he,A.magFilter=void 0!==n.magFilter?n.magFilter:ve,A.minFilter=void 0!==n.minFilter?n.minFilter:ve,A.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(A.format=n.format),void 0!==n.type&&(A.type=n.type),void 0!==n.mipmaps&&(A.mipmaps=n.mipmaps,A.minFilter=Be),1===n.mipmapCount&&(A.minFilter=ve),A.needsUpdate=!0,t&&t(A,n))}),n,r),A}}),qd.prototype=Object.assign(Object.create(Kd.prototype),{constructor:qd,load:function(e,t,n,r){const i=new zn,A=new Xd(this.manager);return A.setCrossOrigin(this.crossOrigin),A.setPath(this.path),A.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Pe:He,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(Jd.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let A=1;A<=e;A++)n=this.getPoint(A/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let r=0;const i=n.length;let A;A=t||e*n[i-1];let o,s=0,a=i-1;while(s<=a)if(r=Math.floor(s+(a-s)/2),o=n[r]-A,o<0)s=r+1;else{if(!(o>0)){a=r;break}a=r-1}if(r=a,n[r]===A)return r/(i-1);const c=n[r],l=n[r+1],u=l-c,h=(A-c)/u,d=(r+h)/(i-1);return d},getTangent:function(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const A=this.getPoint(r),o=this.getPoint(i),s=t||(A.isVector2?new Nn:new Jn);return s.copy(o).sub(A).normalize(),s},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Jn,r=[],i=[],A=[],o=new Jn,s=new Mr;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new Jn),r[h].normalize()}i[0]=new Jn,A[0]=new Jn;let a=Number.MAX_VALUE;const c=Math.abs(r[0].x),l=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=a&&(a=c,n.set(1,0,0)),l<=a&&(a=l,n.set(0,1,0)),u<=a&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),A[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),A[h]=A[h-1].clone(),o.crossVectors(r[h-1],r[h]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Rn.clamp(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(s.makeRotationAxis(o,e))}A[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(Rn.clamp(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),A[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:A}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Zd.prototype=Object.create(Jd.prototype),Zd.prototype.constructor=Zd,Zd.prototype.isEllipseCurve=!0,Zd.prototype.getPoint=function(e,t){const n=t||new Nn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const A=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=A?0:r),!0!==this.aClockwise||A||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=a-this.aY;s=n*e-r*t+this.aX,a=n*t+r*e+this.aY}return n.set(s,a)},Zd.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Zd.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Zd.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},$d.prototype=Object.create(Zd.prototype),$d.prototype.constructor=$d,$d.prototype.isArcCurve=!0;const tp=new Jn,np=new ep,rp=new ep,ip=new ep;function Ap(e=[],t=!1,n="centripetal",r=.5){Jd.call(this),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}function op(e,t,n,r,i){const A=.5*(r-t),o=.5*(i-n),s=e*e,a=e*s;return(2*n-2*r+A+o)*a+(-3*n+3*r-2*A-o)*s+A*e+n}function sp(e,t){const n=1-e;return n*n*t}function ap(e,t){return 2*(1-e)*e*t}function cp(e,t){return e*e*t}function lp(e,t,n,r){return sp(e,t)+ap(e,n)+cp(e,r)}function up(e,t){const n=1-e;return n*n*n*t}function hp(e,t){const n=1-e;return 3*n*n*e*t}function dp(e,t){return 3*(1-e)*e*e*t}function pp(e,t){return e*e*e*t}function fp(e,t,n,r,i){return up(e,t)+hp(e,n)+dp(e,r)+pp(e,i)}function mp(e=new Nn,t=new Nn,n=new Nn,r=new Nn){Jd.call(this),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}function gp(e=new Jn,t=new Jn,n=new Jn,r=new Jn){Jd.call(this),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}function wp(e=new Nn,t=new Nn){Jd.call(this),this.type="LineCurve",this.v1=e,this.v2=t}function vp(e=new Jn,t=new Jn){Jd.call(this),this.type="LineCurve3",this.v1=e,this.v2=t}function xp(e=new Nn,t=new Nn,n=new Nn){Jd.call(this),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}function yp(e=new Jn,t=new Jn,n=new Jn){Jd.call(this),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}function Bp(e=[]){Jd.call(this),this.type="SplineCurve",this.points=e}Ap.prototype=Object.create(Jd.prototype),Ap.prototype.constructor=Ap,Ap.prototype.isCatmullRomCurve3=!0,Ap.prototype.getPoint=function(e,t=new Jn){const n=t,r=this.points,i=r.length,A=(i-(this.closed?0:1))*e;let o,s,a=Math.floor(A),c=A-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===c&&a===i-1&&(a=i-2,c=1),this.closed||a>0?o=r[(a-1)%i]:(tp.subVectors(r[0],r[1]).add(r[0]),o=tp);const l=r[a%i],u=r[(a+1)%i];if(this.closed||a+2<i?s=r[(a+2)%i]:(tp.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=tp),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(l),e),n=Math.pow(l.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),np.initNonuniformCatmullRom(o.x,l.x,u.x,s.x,t,n,r),rp.initNonuniformCatmullRom(o.y,l.y,u.y,s.y,t,n,r),ip.initNonuniformCatmullRom(o.z,l.z,u.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(np.initCatmullRom(o.x,l.x,u.x,s.x,this.tension),rp.initCatmullRom(o.y,l.y,u.y,s.y,this.tension),ip.initCatmullRom(o.z,l.z,u.z,s.z,this.tension));return n.set(np.calc(c),rp.calc(c),ip.calc(c)),n},Ap.prototype.copy=function(e){Jd.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ap.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Ap.prototype.fromJSON=function(e){Jd.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Jn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},mp.prototype=Object.create(Jd.prototype),mp.prototype.constructor=mp,mp.prototype.isCubicBezierCurve=!0,mp.prototype.getPoint=function(e,t=new Nn){const n=t,r=this.v0,i=this.v1,A=this.v2,o=this.v3;return n.set(fp(e,r.x,i.x,A.x,o.x),fp(e,r.y,i.y,A.y,o.y)),n},mp.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},mp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},mp.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},gp.prototype=Object.create(Jd.prototype),gp.prototype.constructor=gp,gp.prototype.isCubicBezierCurve3=!0,gp.prototype.getPoint=function(e,t=new Jn){const n=t,r=this.v0,i=this.v1,A=this.v2,o=this.v3;return n.set(fp(e,r.x,i.x,A.x,o.x),fp(e,r.y,i.y,A.y,o.y),fp(e,r.z,i.z,A.z,o.z)),n},gp.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},gp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},gp.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},wp.prototype=Object.create(Jd.prototype),wp.prototype.constructor=wp,wp.prototype.isLineCurve=!0,wp.prototype.getPoint=function(e,t=new Nn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},wp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},wp.prototype.getTangent=function(e,t){const n=t||new Nn;return n.copy(this.v2).sub(this.v1).normalize(),n},wp.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},wp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},wp.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},vp.prototype=Object.create(Jd.prototype),vp.prototype.constructor=vp,vp.prototype.isLineCurve3=!0,vp.prototype.getPoint=function(e,t=new Jn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},vp.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},vp.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},vp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},vp.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},xp.prototype=Object.create(Jd.prototype),xp.prototype.constructor=xp,xp.prototype.isQuadraticBezierCurve=!0,xp.prototype.getPoint=function(e,t=new Nn){const n=t,r=this.v0,i=this.v1,A=this.v2;return n.set(lp(e,r.x,i.x,A.x),lp(e,r.y,i.y,A.y)),n},xp.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},xp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},xp.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},yp.prototype=Object.create(Jd.prototype),yp.prototype.constructor=yp,yp.prototype.isQuadraticBezierCurve3=!0,yp.prototype.getPoint=function(e,t=new Jn){const n=t,r=this.v0,i=this.v1,A=this.v2;return n.set(lp(e,r.x,i.x,A.x),lp(e,r.y,i.y,A.y),lp(e,r.z,i.z,A.z)),n},yp.prototype.copy=function(e){return Jd.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},yp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},yp.prototype.fromJSON=function(e){return Jd.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bp.prototype=Object.create(Jd.prototype),Bp.prototype.constructor=Bp,Bp.prototype.isSplineCurve=!0,Bp.prototype.getPoint=function(e,t=new Nn){const n=t,r=this.points,i=(r.length-1)*e,A=Math.floor(i),o=i-A,s=r[0===A?A:A-1],a=r[A],c=r[A>r.length-2?r.length-1:A+1],l=r[A>r.length-3?r.length-1:A+2];return n.set(op(o,s.x,a.x,c.x,l.x),op(o,s.y,a.y,c.y,l.y)),n},Bp.prototype.copy=function(e){Jd.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this},Bp.prototype.toJSON=function(){const e=Jd.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e},Bp.prototype.fromJSON=function(e){Jd.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Nn).fromArray(n))}return this};var bp=Object.freeze({__proto__:null,ArcCurve:$d,CatmullRomCurve3:Ap,CubicBezierCurve:mp,CubicBezierCurve3:gp,EllipseCurve:Zd,LineCurve:wp,LineCurve3:vp,QuadraticBezierCurve:xp,QuadraticBezierCurve3:yp,SplineCurve:Bp});function Cp(){Jd.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Mp(e){Cp.call(this),this.type="Path",this.currentPoint=new Nn,e&&this.setFromPoints(e)}function Ep(e){Mp.call(this,e),this.uuid=Rn.generateUUID(),this.type="Shape",this.holes=[]}function Fp(e,t=1){qr.call(this),this.type="Light",this.color=new wi(e),this.intensity=t}function _p(e,t,n){Fp.call(this,e,n),this.type="HemisphereLight",this.position.copy(qr.DefaultUp),this.updateMatrix(),this.groundColor=new wi(t)}function Tp(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Nn(512,512),this.map=null,this.mapPass=null,this.matrix=new Mr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new SA,this._frameExtents=new Nn(1,1),this._viewportCount=1,this._viewports=[new Xn(0,0,1,1)]}function Up(){Tp.call(this,new BA(50,1,.5,500)),this.focus=1}function Sp(e,t,n,r,i,A){Fp.call(this,e,t),this.type="SpotLight",this.position.copy(qr.DefaultUp),this.updateMatrix(),this.target=new qr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==A?A:1,this.shadow=new Up}function Qp(){Tp.call(this,new BA(90,1,.5,500)),this._frameExtents=new Nn(4,2),this._viewportCount=6,this._viewports=[new Xn(2,1,1,1),new Xn(0,1,1,1),new Xn(3,1,1,1),new Xn(1,1,1,1),new Xn(3,0,1,1),new Xn(1,0,1,1)],this._cubeDirections=[new Jn(1,0,0),new Jn(-1,0,0),new Jn(0,0,1),new Jn(0,0,-1),new Jn(0,1,0),new Jn(0,-1,0)],this._cubeUps=[new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,0,1),new Jn(0,0,-1)]}function Lp(e,t,n,r){Fp.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Qp}function Dp(e=-1,t=1,n=1,r=-1,i=.1,A=2e3){yA.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=A,this.updateProjectionMatrix()}function Ip(){Tp.call(this,new Dp(-5,5,5,-5,.5,500))}function Op(e,t){Fp.call(this,e,t),this.type="DirectionalLight",this.position.copy(qr.DefaultUp),this.updateMatrix(),this.target=new qr,this.shadow=new Ip}function Pp(e,t){Fp.call(this,e,t),this.type="AmbientLight"}function Hp(e,t,n,r){Fp.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Cp.prototype=Object.assign(Object.create(Jd.prototype),{constructor:Cp,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wp(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;while(r<n.length){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],A=i.getLength(),o=0===A?0:1-e/A;return i.getPointAt(o)}r++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const A=i[r],o=A&&A.isEllipseCurve?2*e:A&&(A.isLineCurve||A.isLineCurve3)?1:A&&A.isSplineCurve?e*A.points.length:e,s=A.getPoints(o);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Jd.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Jd.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Jd.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new bp[n.type]).fromJSON(n))}return this}}),Mp.prototype=Object.assign(Object.create(Cp.prototype),{constructor:Mp,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new wp(this.currentPoint.clone(),new Nn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){const i=new xp(this.currentPoint.clone(),new Nn(e,t),new Nn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,A){const o=new mp(this.currentPoint.clone(),new Nn(e,t),new Nn(n,r),new Nn(i,A));return this.curves.push(o),this.currentPoint.set(i,A),this},splineThru:function(e){const t=[this.currentPoint.clone()].concat(e),n=new Bp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,A){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,A),this},absarc:function(e,t,n,r,i,A){return this.absellipse(e,t,n,n,r,i,A),this},ellipse:function(e,t,n,r,i,A,o,s){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+a,t+c,n,r,i,A,o,s),this},absellipse:function(e,t,n,r,i,A,o,s){const a=new Zd(e,t,n,r,i,A,o,s);if(this.curves.length>0){const e=a.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(a);const c=a.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Cp.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=Cp.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Cp.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ep.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Ep,getPointsHoles:function(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Mp.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){const e=Mp.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){Mp.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Mp).fromJSON(n))}return this}}),Fp.prototype=Object.assign(Object.create(qr.prototype),{constructor:Fp,isLight:!0,copy:function(e){return qr.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=qr.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),_p.prototype=Object.assign(Object.create(Fp.prototype),{constructor:_p,isHemisphereLight:!0,copy:function(e){return Fp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Tp.prototype,{_projScreenMatrix:new Mr,_lightPositionWorld:new Jn,_lookTarget:new Jn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,A=this._lightPositionWorld;A.setFromMatrixPosition(e.matrixWorld),t.position.copy(A),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Up.prototype=Object.assign(Object.create(Tp.prototype),{constructor:Up,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=2*Rn.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),Tp.prototype.updateMatrices.call(this,e)}}),Sp.prototype=Object.assign(Object.create(Fp.prototype),{constructor:Sp,isSpotLight:!0,copy:function(e){return Fp.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Qp.prototype=Object.assign(Object.create(Tp.prototype),{constructor:Qp,isPointLightShadow:!0,updateMatrices:function(e,t=0){const n=this.camera,r=this.matrix,i=this._lightPositionWorld,A=this._lookTarget,o=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),A.copy(n.position),A.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(A),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),Lp.prototype=Object.assign(Object.create(Fp.prototype),{constructor:Lp,isPointLight:!0,copy:function(e){return Fp.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Dp.prototype=Object.assign(Object.create(yA.prototype),{constructor:Dp,isOrthographicCamera:!0,copy:function(e,t){return yA.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,A){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=A,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,A=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,A=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,A,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=qr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Ip.prototype=Object.assign(Object.create(Tp.prototype),{constructor:Ip,isDirectionalLightShadow:!0,updateMatrices:function(e){Tp.prototype.updateMatrices.call(this,e)}}),Op.prototype=Object.assign(Object.create(Fp.prototype),{constructor:Op,isDirectionalLight:!0,copy:function(e){return Fp.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Pp.prototype=Object.assign(Object.create(Fp.prototype),{constructor:Pp,isAmbientLight:!0}),Hp.prototype=Object.assign(Object.create(Fp.prototype),{constructor:Hp,isRectAreaLight:!0,copy:function(e){return Fp.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=Fp.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class Rp{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Jn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,A=this.coefficients;return t.copy(A[0]).multiplyScalar(.282095),t.addScaledVector(A[1],.488603*r),t.addScaledVector(A[2],.488603*i),t.addScaledVector(A[3],.488603*n),t.addScaledVector(A[4],n*r*1.092548),t.addScaledVector(A[5],r*i*1.092548),t.addScaledVector(A[6],.315392*(3*i*i-1)),t.addScaledVector(A[7],n*i*1.092548),t.addScaledVector(A[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,A=this.coefficients;return t.copy(A[0]).multiplyScalar(.886227),t.addScaledVector(A[1],1.023328*r),t.addScaledVector(A[2],1.023328*i),t.addScaledVector(A[3],1.023328*n),t.addScaledVector(A[4],.858086*n*r),t.addScaledVector(A[5],.858086*r*i),t.addScaledVector(A[6],.743125*i*i-.247708),t.addScaledVector(A[7],.858086*n*i),t.addScaledVector(A[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}function Np(e,t){Fp.call(this,void 0,t),this.type="LightProbe",this.sh=void 0!==e?e:new Rp}function kp(e){Kd.call(this,e),this.textures={}}Np.prototype=Object.assign(Object.create(Fp.prototype),{constructor:Np,isLightProbe:!0,copy:function(e){return Fp.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=Fp.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}}),kp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:kp,load:function(e,t,n,r){const i=this,A=new Vd(i.manager);A.setPath(i.path),A.setRequestHeader(i.requestHeader),A.setWithCredentials(i.withCredentials),A.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(A){r?r(A):console.error(A),i.manager.itemError(e)}}),n,r)},parse:function(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new Bd[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new wi).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new wi).setHex(t.value);break;case"v2":r.uniforms[i].value=(new Nn).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new Jn).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new Xn).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new kn).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new Mr).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Nn).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Nn).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),r},setTextures:function(e){return this.textures=e,this}});const Kp={decodeText:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(n){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Gp(){Xi.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Vp(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Mi.call(this,e,t,n),this.meshPerAttribute=r||1}function zp(e){Kd.call(this,e)}Gp.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Gp,isInstancedBufferGeometry:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=Xi.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),Vp.prototype=Object.assign(Object.create(Mi.prototype),{constructor:Vp,isInstancedBufferAttribute:!0,copy:function(e){return Mi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=Mi.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),zp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:zp,load:function(e,t,n,r){const i=this,A=new Vd(i.manager);A.setPath(i.path),A.setRequestHeader(i.requestHeader),A.setWithCredentials(i.withCredentials),A.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(A){r?r(A):console.error(A),i.manager.itemError(e)}}),n,r)},parse:function(e){const t={},n={};function r(e,n){if(void 0!==t[n])return t[n];const r=e.interleavedBuffers,A=r[n],o=i(e,A.buffer),s=Ri(A.type,o),a=new Ml(s,A.stride);return a.uuid=A.uuid,t[n]=a,a}function i(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],A=new Uint32Array(i).buffer;return n[t]=A,A}const A=e.isInstancedBufferGeometry?new Gp:new Xi,o=e.data.index;if(void 0!==o){const e=Ri(o.type,o.array);A.setIndex(new Mi(e,1))}const s=e.data.attributes;for(const h in s){const t=s[h];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new Fl(i,t.itemSize,t.offset,t.normalized)}else{const e=Ri(t.type,t.array),r=t.isInstancedBufferAttribute?Vp:Mi;n=new r(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),A.setAttribute(h,n)}const a=e.data.morphAttributes;if(a)for(const h in a){const t=a[h],n=[];for(let i=0,A=t.length;i<A;i++){const A=t[i];let o;if(A.isInterleavedBufferAttribute){const t=r(e.data,A.data);o=new Fl(t,A.itemSize,A.offset,A.normalized)}else{const e=Ri(A.type,A.array);o=new Mi(e,A.itemSize,A.normalized)}void 0!==A.name&&(o.name=A.name),n.push(o)}A.morphAttributes[h]=n}const c=e.data.morphTargetsRelative;c&&(A.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let h=0,d=l.length;h!==d;++h){const e=l[h];A.addGroup(e.start,e.count,e.materialIndex)}const u=e.data.boundingSphere;if(void 0!==u){const e=new Jn;void 0!==u.center&&e.fromArray(u.center),A.boundingSphere=new mr(e,u.radius)}return e.name&&(A.name=e.name),e.userData&&(A.userData=e.userData),A}});class jp extends Kd{constructor(e){super(e)}load(e,t,n,r){const i=this,A=""===this.path?Kp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||A;const o=new Vd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let A=null;try{A=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}const o=A.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(A,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),A=this.parseImages(e.images,(function(){void 0!==t&&t(a)})),o=this.parseTextures(e.textures,A),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,i,s,n),c=this.parseSkeletons(e.skeletons,a);if(this.bindSkeletons(a,c),void 0!==t){let e=!1;for(const t in A)if(A[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(a)}return a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Ep).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,A=e.length;i<A;i++){const t=(new nu).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};let r;if(void 0!==e){const i=new zp;for(let A=0,o=e.length;A<o;A++){let o;const s=e[A];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new ud[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new ud[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new ud[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new ud[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new ud[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new ud[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new ud[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new ud[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new ud[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new ud[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new ud[s.type]((new bp[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new ud[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new ud[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let n=0,i=s.shapes.length;n<i;n++){const e=t[s.shapes[n]];r.push(e)}o=new ud[s.type](r,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let n=0,i=s.shapes.length;n<i;n++){const e=t[s.shapes[n]];r.push(e)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new bp[e.type]).fromJSON(e)),o=new ud[s.type](r,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new kp;i.setTextures(t);for(let t=0,A=e.length;t<A;t++){const A=e[t];if("MultiMaterial"===A.type){const e=[];for(let t=0;t<A.materials.length;t++){const r=A.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[A.uuid]=e}else void 0===n[A.uuid]&&(n[A.uuid]=i.parse(A)),r[A.uuid]=n[A.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=Od.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function A(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}function o(e){if("string"===typeof e){const t=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t;return A(r)}return e.data?{data:Ri(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Nd(t);i=new Xd(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=i[e],A=o(t);null!==A&&(A instanceof HTMLImageElement?r[n.uuid].push(A):r[n.uuid].push(new _A(A.data,A.width,A.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,A=e.length;i<A;i++){const A=e[i];let o;void 0===A.image&&console.warn('THREE.ObjectLoader: No "image" specified for',A.uuid),void 0===t[A.image]&&console.warn("THREE.ObjectLoader: Undefined image",A.image);const s=t[A.image];Array.isArray(s)?(o=new EA(s),6===s.length&&(o.needsUpdate=!0)):(o=s&&s.data?new _A(s.data,s.width,s.height):new zn(s),s&&(o.needsUpdate=!0)),o.uuid=A.uuid,void 0!==A.name&&(o.name=A.name),void 0!==A.mapping&&(o.mapping=n(A.mapping,Xp)),void 0!==A.offset&&o.offset.fromArray(A.offset),void 0!==A.repeat&&o.repeat.fromArray(A.repeat),void 0!==A.center&&o.center.fromArray(A.center),void 0!==A.rotation&&(o.rotation=A.rotation),void 0!==A.wrap&&(o.wrapS=n(A.wrap[0],Wp),o.wrapT=n(A.wrap[1],Wp)),void 0!==A.format&&(o.format=A.format),void 0!==A.type&&(o.type=A.type),void 0!==A.encoding&&(o.encoding=A.encoding),void 0!==A.minFilter&&(o.minFilter=n(A.minFilter,Yp)),void 0!==A.magFilter&&(o.magFilter=n(A.magFilter,Yp)),void 0!==A.anisotropy&&(o.anisotropy=A.anisotropy),void 0!==A.flipY&&(o.flipY=A.flipY),void 0!==A.premultiplyAlpha&&(o.premultiplyAlpha=A.premultiplyAlpha),void 0!==A.unpackAlignment&&(o.unpackAlignment=A.unpackAlignment),r[A.uuid]=o}return r}parseObject(e,t,n,r){let i,A,o;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Cl,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new wi(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new bl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Bl(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new BA(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Dp(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Pp(e.color,e.intensity);break;case"DirectionalLight":i=new Op(e.color,e.intensity);break;case"PointLight":i=new Lp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Hp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Sp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new _p(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new Np).fromJSON(e);break;case"SkinnedMesh":A=s(e.geometry),o=a(e.material),i=new Zl(A,o),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":A=s(e.geometry),o=a(e.material),i=new uA(A,o);break;case"InstancedMesh":A=s(e.geometry),o=a(e.material);const t=e.count,n=e.instanceMatrix;i=new su(A,o,t),i.instanceMatrix=new Mi(new Float32Array(n.array),16);break;case"LOD":i=new jl;break;case"Line":i=new pu(s(e.geometry),a(e.material));break;case"LineLoop":i=new wu(s(e.geometry),a(e.material));break;case"LineSegments":i=new gu(s(e.geometry),a(e.material));break;case"PointCloud":case"Points":i=new Cu(s(e.geometry),a(e.material));break;case"Sprite":i=new Kl(a(e.material));break;case"Group":i=new fl;break;case"Bone":i=new $l;break;default:i=new qr}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const A=e.children;for(let e=0;e<A.length;e++)i.add(this.parseObject(A[e],t,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const Xp={UVMapping:ie,CubeReflectionMapping:Ae,CubeRefractionMapping:oe,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:ae,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:le},Wp={RepeatWrapping:ue,ClampToEdgeWrapping:he,MirroredRepeatWrapping:de},Yp={NearestFilter:pe,NearestMipmapNearestFilter:fe,NearestMipmapLinearFilter:ge,LinearFilter:ve,LinearMipmapNearestFilter:xe,LinearMipmapLinearFilter:Be};function qp(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Kd.call(this,e),this.options={premultiplyAlpha:"none"}}function Jp(){this.type="ShapePath",this.color=new wi,this.subPaths=[],this.currentPath=null}function Zp(e){this.type="Font",this.data=e}function $p(e,t,n){const r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,A=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[];let s=0,a=0;for(let c=0;c<r.length;c++){const e=r[c];if("\n"===e)s=0,a-=A;else{const t=ef(e,i,s,a,n);s+=t.offsetX,o.push(t.path)}}return o}function ef(e,t,n,r,i){const A=i.glyphs[e]||i.glyphs["?"];if(!A)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const o=new Jp;let s,a,c,l,u,h,d,p;if(A.o){const e=A._cachedOutline||(A._cachedOutline=A.o.split(" "));for(let i=0,A=e.length;i<A;){const A=e[i++];switch(A){case"m":s=e[i++]*t+n,a=e[i++]*t+r,o.moveTo(s,a);break;case"l":s=e[i++]*t+n,a=e[i++]*t+r,o.lineTo(s,a);break;case"q":c=e[i++]*t+n,l=e[i++]*t+r,u=e[i++]*t+n,h=e[i++]*t+r,o.quadraticCurveTo(u,h,c,l);break;case"b":c=e[i++]*t+n,l=e[i++]*t+r,u=e[i++]*t+n,h=e[i++]*t+r,d=e[i++]*t+n,p=e[i++]*t+r,o.bezierCurveTo(u,h,d,p,c,l);break}}}return{offsetX:A.ha*t,path:o}}function tf(e){Kd.call(this,e)}let nf;qp.prototype=Object.assign(Object.create(Kd.prototype),{constructor:qp,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,A=Rd.get(e);if(void 0!==A)return i.manager.itemStart(e),setTimeout((function(){t&&t(A),i.manager.itemEnd(e)}),0),A;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,i.options)})).then((function(n){Rd.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(Jp.prototype,{moveTo:function(e,t){return this.currentPath=new Mp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,A){return this.currentPath.bezierCurveTo(e,t,n,r,i,A),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Ep;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,A=0;A<n;i=A++){let n=t[i],o=t[A],s=o.x-n.x,a=o.y-n.y;if(Math.abs(a)>Number.EPSILON){if(a<0&&(n=t[A],s=-s,o=t[i],a=-a),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=a*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const i=_h.isClockWise,A=this.subPaths;if(0===A.length)return[];if(!0===t)return n(A);let o,s,a;const c=[];if(1===A.length)return s=A[0],a=new Ep,a.curves=s.curves,c.push(a),c;let l=!i(A[0].getPoints());l=e?!l:l;const u=[],h=[];let d,p,f=[],m=0;h[m]=void 0,f[m]=[];for(let g=0,w=A.length;g<w;g++)s=A[g],d=s.getPoints(),o=i(d),o=e?!o:o,o?(!l&&h[m]&&m++,h[m]={s:new Ep,p:d},h[m].s.curves=s.curves,l&&m++,f[m]=[]):f[m].push({h:s,p:d[0]});if(!h[0])return n(A);if(h.length>1){let e=!1;const t=[];for(let n=0,r=h.length;n<r;n++)u[n]=[];for(let n=0,i=h.length;n<i;n++){const i=f[n];for(let A=0;A<i.length;A++){const o=i[A];let s=!0;for(let i=0;i<h.length;i++)r(o.p,h[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:A}),s?(s=!1,u[i].push(o)):e=!0);s&&u[n].push(o)}}t.length>0&&(e||(f=u))}for(let g=0,w=h.length;g<w;g++){a=h[g].s,c.push(a),p=f[g];for(let e=0,t=p.length;e<t;e++)a.holes.push(p[e].h)}return c}}),Object.assign(Zp.prototype,{isFont:!0,generateShapes:function(e,t=100){const n=[],r=$p(e,t,this.data);for(let i=0,A=r.length;i<A;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),tf.prototype=Object.assign(Object.create(Kd.prototype),{constructor:tf,load:function(e,t,n,r){const i=this,A=new Vd(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(i.withCredentials),A.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(A){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Zp(e)}});const rf={getContext:function(){return void 0===nf&&(nf=new(window.AudioContext||window.webkitAudioContext)),nf},setContext:function(e){nf=e}};function Af(e){Kd.call(this,e)}function of(e,t,n){Np.call(this,void 0,n);const r=(new wi).set(e),i=(new wi).set(t),A=new Jn(r.r,r.g,r.b),o=new Jn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),a=s*Math.sqrt(.75);this.sh.coefficients[0].copy(A).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(A).sub(o).multiplyScalar(a)}function sf(e,t){Np.call(this,void 0,t);const n=(new wi).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Af.prototype=Object.assign(Object.create(Kd.prototype),{constructor:Af,load:function(e,t,n,r){const i=this,A=new Vd(i.manager);A.setResponseType("arraybuffer"),A.setPath(i.path),A.setRequestHeader(i.requestHeader),A.setWithCredentials(i.withCredentials),A.load(e,(function(n){try{const e=n.slice(0),r=rf.getContext();r.decodeAudioData(e,(function(e){t(e)}))}catch(A){r?r(A):console.error(A),i.manager.itemError(e)}}),n,r)}}),of.prototype=Object.assign(Object.create(Np.prototype),{constructor:of,isHemisphereLightProbe:!0,copy:function(e){return Np.prototype.copy.call(this,e),this},toJSON:function(e){const t=Np.prototype.toJSON.call(this,e);return t}}),sf.prototype=Object.assign(Object.create(Np.prototype),{constructor:sf,isAmbientLightProbe:!0,copy:function(e){return Np.prototype.copy.call(this,e),this},toJSON:function(e){const t=Np.prototype.toJSON.call(this,e);return t}});const af=new Mr,cf=new Mr;function lf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new BA,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new BA,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(lf.prototype,{update:function(e){const t=this._cache,n=t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep;if(n){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,A=t.near*Math.tan(Rn.DEG2RAD*t.fov*.5)/t.zoom;let o,s;cf.elements[12]=-r,af.elements[12]=r,o=-A*t.aspect+i,s=A*t.aspect+i,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(n),o=-A*t.aspect-i,s=A*t.aspect-i,n.elements[0]=2*t.near/(s-o),n.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(cf),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(af)}});class uf{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hf(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=hf();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hf(){return("undefined"===typeof performance?Date:performance).now()}const df=new Jn,pf=new qn,ff=new Jn,mf=new Jn;class gf extends qr{constructor(){super(),this.type="AudioListener",this.context=rf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new uf}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(df,pf,ff),mf.set(0,0,-1).applyQuaternion(pf),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(df.x,e),t.positionY.linearRampToValueAtTime(df.y,e),t.positionZ.linearRampToValueAtTime(df.z,e),t.forwardX.linearRampToValueAtTime(mf.x,e),t.forwardY.linearRampToValueAtTime(mf.y,e),t.forwardZ.linearRampToValueAtTime(mf.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(df.x,df.y,df.z),t.setOrientation(mf.x,mf.y,mf.z,n.x,n.y,n.z)}}class wf extends qr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const vf=new Jn,xf=new qn,yf=new Jn,Bf=new Jn;class bf extends wf{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(vf,xf,yf),Bf.set(0,0,1).applyQuaternion(xf);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(vf.x,e),t.positionY.linearRampToValueAtTime(vf.y,e),t.positionZ.linearRampToValueAtTime(vf.z,e),t.orientationX.linearRampToValueAtTime(Bf.x,e),t.orientationY.linearRampToValueAtTime(Bf.y,e),t.orientationZ.linearRampToValueAtTime(Bf.z,e)}else t.setPosition(vf.x,vf.y,vf.z),t.setOrientation(Bf.x,Bf.y,Bf.z)}}class Cf{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}function Mf(e,t,n){let r,i,A;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,A=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,A=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,A=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=A,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Mf.prototype,{accumulate:function(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let A=this.cumulativeWeight;if(0===A){for(let e=0;e!==r;++e)n[i+e]=n[e];A=t}else{A+=t;const e=t/A;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=A},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,A=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}A>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,a=t+t;s!==a;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,A=r;i!==A;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(let A=0;A!==i;++A)e[t+A]=e[n+A]},_slerp:function(e,t,n,r){qn.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){const A=this._workIndex*i;qn.multiplyQuaternionsFlat(e,A,e,t,e,n),qn.slerpFlat(e,t,e,t,e,A,r)},_lerp:function(e,t,n,r,i){const A=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*A+e[n+o]*r}},_lerpAdditive:function(e,t,n,r,i){for(let A=0;A!==i;++A){const i=t+A;e[i]=e[i]+e[n+A]*r}}});const Ef="\\[\\]\\.:\\/",Ff=new RegExp("["+Ef+"]","g"),_f="[^"+Ef+"]",Tf="[^"+Ef.replace("\\.","")+"]",Uf=/((?:WC+[\/:])*)/.source.replace("WC",_f),Sf=/(WCOD+)?/.source.replace("WCOD",Tf),Qf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_f),Lf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_f),Df=new RegExp("^"+Uf+Sf+Qf+Lf+"$"),If=["material","materials","bones"];function Of(e,t,n){const r=n||Pf.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Pf(e,t,n){this.path=t,this.parsedPath=n||Pf.parseTrackName(t),this.node=Pf.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Hf(){this.uuid=Rn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(Of.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Pf,{Composite:Of,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Pf.Composite(e,t,n):new Pf(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Ff,"")},parseTrackName:function(e){const t=Df.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==If.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const A=n(i.children);if(A)return A}return null},r=n(e.children);if(r)return r}return null}}),Object.assign(Pf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Pf.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const A=e[r];if(void 0===A){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=A,this.propertyIndex=i}else void 0!==A.fromArray&&void 0!==A.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=A):Array.isArray(A)?(s=this.BindingType.EntireArray,this.resolvedProperty=A):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Pf.prototype,{_getValue_unbound:Pf.prototype.getValue,_setValue_unbound:Pf.prototype.setValue}),Object.assign(Hf.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,A=i.length;let o=void 0,s=e.length,a=this.nCachedObjects_;for(let c=0,l=arguments.length;c!==l;++c){const l=arguments[c],u=l.uuid;let h=t[u];if(void 0===h){h=s++,t[u]=h,e.push(l);for(let e=0,t=A;e!==t;++e)i[e].push(new Pf(l,n[e],r[e]))}else if(h<a){o=e[h];const s=--a,c=e[s];t[c.uuid]=h,e[h]=c,t[u]=s,e[s]=l;for(let e=0,t=A;e!==t;++e){const t=i[e],A=t[s];let o=t[h];t[h]=A,void 0===o&&(o=new Pf(l,n[e],r[e])),t[s]=o}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=a},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let A=0,o=arguments.length;A!==o;++A){const o=arguments[A],s=o.uuid,a=t[s];if(void 0!==a&&a>=i){const A=i++,c=e[A];t[c.uuid]=a,e[a]=c,t[s]=A,e[A]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[A],i=t[a];t[a]=r,t[A]=i}}}this.nCachedObjects_=i},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,A=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,c=t[a];if(void 0!==c)if(delete t[a],c<i){const o=--i,s=e[o],a=--A,l=e[a];t[s.uuid]=c,e[c]=s,t[l.uuid]=o,e[o]=l,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[a];t[c]=r,t[o]=i,t.pop()}}else{const i=--A,o=e[i];i>0&&(t[o.uuid]=c),e[c]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[c]=t[i],t.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const A=this._paths,o=this._parsedPaths,s=this._objects,a=s.length,c=this.nCachedObjects_,l=new Array(a);r=i.length,n[e]=r,A.push(e),o.push(t),i.push(l);for(let u=c,h=s.length;u!==h;++u){const n=s[u];l[u]=new Pf(n,e,t)}return l},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,A=this._bindings,o=A.length-1,s=A[o],a=e[o];t[a]=n,A[n]=s,A.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}});class Rf{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,A=i.length,o=new Array(A),s={endingStart:Kt,endingEnd:Kt};for(let a=0;a!==A;++a){const e=i[a].createInterpolant(null);o[a]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(A),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Pt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,A=n/r;e.warp(1,i,t),this.warp(A,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,A=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=i,s[1]=i+n,a[0]=e/A,a[1]=t/A,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const A=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case jt:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(A),t[n].accumulateAdditive(o);break;case zt:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(A),t[n].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const A=n===Ht;if(0===e)return-1===i?r:A&&1===(1&i)?t-r:r;if(n===Ot){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,A)):this._setEndings(0===this.repetitions,!0,A)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,A)}else this._setEndings(!1,!1,A);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(A&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Gt,r.endingEnd=Gt):(r.endingStart=e?this.zeroSlopeAtStart?Gt:Kt:Vt,r.endingEnd=t?this.zeroSlopeAtEnd?Gt:Kt:Vt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let A=this._weightInterpolant;null===A&&(A=r._lendControlInterpolant(),this._weightInterpolant=A);const o=A.parameterPositions,s=A.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}function Nf(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Nf.prototype=Object.assign(Object.create(On.prototype),{constructor:Nf,_bindAction:function(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,A=e._propertyBindings,o=e._interpolants,s=n.uuid,a=this._bindingsByRootAndName;let c=a[s];void 0===c&&(c={},a[s]=c);for(let l=0;l!==i;++l){const e=r[l],i=e.name;let a=c[i];if(void 0!==a)A[l]=a;else{if(a=A[l],void 0!==a){null===a._cacheIndex&&(++a.referenceCount,this._addInactiveBinding(a,s,i));continue}const r=t&&t._propertyBindings[l].binding.parsedPath;a=new Mf(Pf.create(n,i,r),e.ValueTypeName,e.getValueSize()),++a.referenceCount,this._addInactiveBinding(a,s,i),A[l]=a}o[l].resultBuffer=a.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const r=this._actions,i=this._actionsByClip;let A=i[t];if(void 0===A)A={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=A;else{const t=A.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),A.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,A=this._actionsByClip,o=A[i],s=o.knownActions,a=s[s.length-1],c=e._byClipCacheIndex;a._byClipCacheIndex=c,s[c]=a,s.pop(),e._byClipCacheIndex=null;const l=o.actionByRoot,u=(e._localRoot||this._root).uuid;delete l[u],0===s.length&&delete A[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let A=r[t];void 0===A&&(A={},r[t]=A),A[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,A=this._bindingsByRootAndName,o=A[r],s=t[t.length-1],a=e._cacheIndex;s._cacheIndex=a,t[a]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete A[r]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Ed(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const r=t||this._root,i=r.uuid;let A="string"===typeof e?Od.findByName(r,e):e;const o=null!==A?A.uuid:e,s=this._actionsByClip[o];let a=null;if(void 0===n&&(n=null!==A?A.blendMode:zt),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;a=s.knownActions[0],null===A&&(A=a._clip)}if(null===A)return null;const c=new Rf(this,A,t,n);return this._bindAction(c,a),this._addInactiveAction(c,o,i),c},existingAction:function(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?Od.findByName(n,e):e,A=i?i.uuid:e,o=this._actionsByClip[A];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),A=this._accuIndex^=1;for(let a=0;a!==n;++a){const n=t[a];n._update(r,e,i,A)}const o=this._bindings,s=this._nActiveBindings;for(let a=0;a!==s;++a)o[a].apply(A);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,A=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,A._cacheIndex=i,t[i]=A,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const A in n){const e=n[A].actionByRoot,r=e[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName,i=r[t];if(void 0!==i)for(const A in i){const e=i[A];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class kf{constructor(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new kf(void 0===this.value.clone?this.value:this.value.clone())}}function Kf(e,t,n){Ml.call(this,e,t),this.meshPerAttribute=n||1}function Gf(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function Vf(e,t,n,r){this.ray=new Cr(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new Or,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function zf(e,t){return e.distance-t.distance}function jf(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)jf(r[e],t,n,!0)}}Kf.prototype=Object.assign(Object.create(Ml.prototype),{constructor:Kf,isInstancedInterleavedBuffer:!0,copy:function(e){return Ml.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Ml.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Ml.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(Gf.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Gf.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(Vf.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(e,t,n){const r=n||[];return jf(e,this,r,t),r.sort(zf),r},intersectObjects:function(e,t,n){const r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let i=0,A=e.length;i<A;i++)jf(e[i],this,r,t);return r.sort(zf),r}});class Xf{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Rn.clamp(t/this.radius,-1,1))),this}}class Wf{constructor(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}const Yf=new Nn;class qf{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==e?e:new Nn(1/0,1/0),this.max=void 0!==t?t:new Nn(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Yf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Nn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Nn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Nn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Nn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){const t=Yf.copy(e).clamp(this.min,this.max);return t.sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Jf=new Jn,Zf=new Jn;class $f{constructor(e,t){this.start=void 0!==e?e:new Jn,this.end=void 0!==t?t:new Jn}set(e,t){return this.start.copy(e),this.end.copy(t),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Jn),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Jn),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Jn),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Jf.subVectors(e,this.start),Zf.subVectors(this.end,this.start);const n=Zf.dot(Zf),r=Zf.dot(Jf);let i=r/n;return t&&(i=Rn.clamp(i,0,1)),i}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Jn),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}function em(e){qr.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}em.prototype=Object.create(qr.prototype),em.prototype.constructor=em,em.prototype.isImmediateRenderObject=!0;const tm=new Jn;class nm extends qr{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Xi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let A=0,o=1,s=32;A<s;A++,o++){const e=A/s*Math.PI*2,t=o/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Di(r,3));const i=new au({fog:!1,toneMapped:!1});this.cone=new gu(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tm),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rm=new Jn,im=new Mr,Am=new Mr;class om extends gu{constructor(e){const t=sm(e),n=new Xi,r=[],i=[],A=new wi(0,0,1),o=new wi(0,1,0);for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(A.r,A.g,A.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Di(r,3)),n.setAttribute("color",new Di(i,3));const s=new au({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,s),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Am.copy(this.root.matrixWorld).invert();for(let i=0,A=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(im.multiplyMatrices(Am,e.matrixWorld),rm.setFromMatrixPosition(im),r.setXYZ(A,rm.x,rm.y,rm.z),im.multiplyMatrices(Am,e.parent.matrixWorld),rm.setFromMatrixPosition(im),r.setXYZ(A+1,rm.x,rm.y,rm.z),A+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function sm(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,sm(e.children[n]));return t}class am extends uA{constructor(e,t,n){const r=new Zh(t,4,2),i=new Bi({wireframe:!0,fog:!1,toneMapped:!1});super(r,i),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const cm=new Jn,lm=new wi,um=new wi;class hm extends qr{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Nh(t);r.rotateY(.5*Math.PI),this.material=new Bi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),A=new Float32Array(3*i.count);r.setAttribute("color",new Mi(A,3)),this.add(new uA(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");lm.copy(this.light.color),um.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?lm:um;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(cm.setFromMatrixPosition(this.light.matrixWorld).negate())}}class dm extends gu{constructor(e=10,t=10,n=4473924,r=8947848){n=new wi(n),r=new wi(r);const i=t/2,A=e/t,o=e/2,s=[],a=[];for(let u=0,h=0,d=-o;u<=t;u++,d+=A){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);const e=u===i?n:r;e.toArray(a,h),h+=3,e.toArray(a,h),h+=3,e.toArray(a,h),h+=3,e.toArray(a,h),h+=3}const c=new Xi;c.setAttribute("position",new Di(s,3)),c.setAttribute("color",new Di(a,3));const l=new au({vertexColors:!0,toneMapped:!1});super(c,l),this.type="GridHelper"}}class pm extends gu{constructor(e=10,t=16,n=8,r=64,i=4473924,A=8947848){i=new wi(i),A=new wi(A);const o=[],s=[];for(let l=0;l<=t;l++){const n=l/t*(2*Math.PI),r=Math.sin(n)*e,a=Math.cos(n)*e;o.push(0,0,0),o.push(r,0,a);const c=1&l?i:A;s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(let l=0;l<=n;l++){const t=1&l?i:A,a=e-e/n*l;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*a,A=Math.cos(n)*a;o.push(i,0,A),s.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*a,A=Math.cos(n)*a,o.push(i,0,A),s.push(t.r,t.g,t.b)}}const a=new Xi;a.setAttribute("position",new Di(o,3)),a.setAttribute("color",new Di(s,3));const c=new au({vertexColors:!0,toneMapped:!1});super(a,c),this.type="PolarGridHelper"}}const fm=new Jn,mm=new Jn,gm=new Jn;class wm extends qr{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new Xi;r.setAttribute("position",new Di([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new au({fog:!1,toneMapped:!1});this.lightPlane=new pu(r,i),this.add(this.lightPlane),r=new Xi,r.setAttribute("position",new Di([0,0,0,0,0,1],3)),this.targetLine=new pu(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){fm.setFromMatrixPosition(this.light.matrixWorld),mm.setFromMatrixPosition(this.light.target.matrixWorld),gm.subVectors(mm,fm),this.lightPlane.lookAt(mm),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mm),this.targetLine.scale.z=gm.length()}}const vm=new Jn,xm=new yA;class ym extends gu{constructor(e){const t=new Xi,n=new au({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],A={},o=new wi(16755200),s=new wi(16711680),a=new wi(43775),c=new wi(16777215),l=new wi(3355443);function u(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===A[e]&&(A[e]=[]),A[e].push(r.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",a),u("u2","u3",a),u("u3","u1",a),u("c","t",c),u("p","c",l),u("cn1","cn2",l),u("cn3","cn4",l),u("cf1","cf2",l),u("cf3","cf4",l),t.setAttribute("position",new Di(r,3)),t.setAttribute("color",new Di(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=A,this.update()}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;xm.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Bm("c",t,e,xm,0,0,-1),Bm("t",t,e,xm,0,0,1),Bm("n1",t,e,xm,-n,-r,-1),Bm("n2",t,e,xm,n,-r,-1),Bm("n3",t,e,xm,-n,r,-1),Bm("n4",t,e,xm,n,r,-1),Bm("f1",t,e,xm,-n,-r,1),Bm("f2",t,e,xm,n,-r,1),Bm("f3",t,e,xm,-n,r,1),Bm("f4",t,e,xm,n,r,1),Bm("u1",t,e,xm,.7*n,1.1*r,-1),Bm("u2",t,e,xm,.7*-n,1.1*r,-1),Bm("u3",t,e,xm,0,2*r,-1),Bm("cf1",t,e,xm,-n,0,1),Bm("cf2",t,e,xm,n,0,1),Bm("cf3",t,e,xm,0,-r,1),Bm("cf4",t,e,xm,0,r,1),Bm("cn1",t,e,xm,-n,0,-1),Bm("cn2",t,e,xm,n,0,-1),Bm("cn3",t,e,xm,0,-r,-1),Bm("cn4",t,e,xm,0,r,-1),e.getAttribute("position").needsUpdate=!0}}function Bm(e,t,n,r,i,A,o){vm.set(i,A,o).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],vm.x,vm.y,vm.z)}}const bm=new er;class Cm extends gu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Xi;i.setIndex(new Mi(n,1)),i.setAttribute("position",new Mi(r,3)),super(i,new au({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&bm.setFromObject(this.object),bm.isEmpty())return;const t=bm.min,n=bm.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return gu.prototype.copy.call(this,e),this.object=e.object,this}}class Mm extends gu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new Xi;i.setIndex(new Mi(n,1)),i.setAttribute("position",new Di(r,3)),super(i,new au({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Em extends pu{constructor(e,t=1,n=16776960){const r=n,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],A=new Xi;A.setAttribute("position",new Di(i,3)),A.computeBoundingSphere(),super(A,new au({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new Xi;s.setAttribute("position",new Di(o,3)),s.computeBoundingSphere(),this.add(new uA(s,new Bi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?f:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Fm=new Jn;let _m,Tm;class Um extends qr{constructor(e,t,n,r,i,A){super(),this.type="ArrowHelper",void 0===e&&(e=new Jn(0,0,1)),void 0===t&&(t=new Jn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===A&&(A=.2*i),void 0===_m&&(_m=new Xi,_m.setAttribute("position",new Di([0,0,0,0,1,0],3)),Tm=new Hu(0,.5,1,5,1),Tm.translate(0,-.5,0)),this.position.copy(t),this.line=new pu(_m,new au({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new uA(Tm,new Bi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,A)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Fm.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Fm,t)}}setLength(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Sm extends gu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Xi;r.setAttribute("position",new Di(t,3)),r.setAttribute("color",new Di(n,3));const i=new au({vertexColors:!0,toneMapped:!1});super(r,i),this.type="AxesHelper"}}const Qm=new Float32Array(1),Lm=new Int32Array(Qm.buffer),Dm={toHalfFloat:function(e){Qm[0]=e;const t=Lm[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}},Im=4,Om=8,Pm=Math.pow(2,Om),Hm=[.125,.215,.35,.446,.526,.582],Rm=Om-Im+1+Hm.length,Nm=20,km={[qt]:0,[Jt]:1,[$t]:2,[tn]:3,[nn]:4,[rn]:5,[Zt]:6},Km=new Dp,{_lodPlanes:Gm,_sizeLods:Vm,_sigmas:zm}=$m(),jm=new wi;let Xm=null;const Wm=(1+Math.sqrt(5))/2,Ym=1/Wm,qm=[new Jn(1,1,1),new Jn(-1,1,1),new Jn(1,1,-1),new Jn(-1,1,-1),new Jn(0,Wm,Ym),new Jn(0,Wm,-Ym),new Jn(Ym,0,Wm),new Jn(-Ym,0,Wm),new Jn(Wm,Ym,0),new Jn(-Wm,Ym,0)];class Jm{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=ng(Nm),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Xm=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=ig(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=rg(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Gm.length;e++)Gm[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Xm),e.scissorTest=!1,tg(e,0,0,e.width,e.height)}_fromTexture(e){Xm=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:pe,minFilter:pe,generateMipmaps:!1,type:Ce,format:ke,encoding:Zm(e)?e.encoding:$t,depthBuffer:!1},n=eg(t);return n.depthBuffer=!e,this._pingPongRenderTarget=eg(t),n}_compileMaterial(e){const t=new uA(Gm[0],e);this._renderer.compile(t,Km)}_sceneToCubeUV(e,t,n,r){const i=90,A=1,o=new BA(i,A,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],c=this._renderer,l=c.outputEncoding,u=c.toneMapping;c.getClearColor(jm);const h=c.getClearAlpha();c.toneMapping=Z,c.outputEncoding=qt;let d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();const t=Math.max(d.r,d.g,d.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);d=d.multiplyScalar(Math.pow(2,-n));const r=(n+128)/255;c.setClearColor(d,r),e.background=null}for(let p=0;p<6;p++){const t=p%3;0==t?(o.up.set(0,s[p],0),o.lookAt(a[p],0,0)):1==t?(o.up.set(0,0,s[p]),o.lookAt(0,a[p],0)):(o.up.set(0,s[p],0),o.lookAt(0,0,a[p])),tg(r,t*Pm,p>2?Pm:0,Pm,Pm),c.setRenderTarget(r),c.render(e,o)}c.toneMapping=u,c.outputEncoding=l,c.setClearColor(jm,h)}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=ig()):null==this._equirectShader&&(this._equirectShader=rg());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new uA(Gm[0],r),A=r.uniforms;A["envMap"].value=e,e.isCubeTexture||A["texelSize"].value.set(1/e.image.width,1/e.image.height),A["inputEncoding"].value=km[e.encoding],A["outputEncoding"].value=km[t.texture.encoding],tg(t,0,0,3*Pm,2*Pm),n.setRenderTarget(t),n.render(i,Km)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<Rm;r++){const t=Math.sqrt(zm[r]*zm[r]-zm[r-1]*zm[r-1]),n=qm[(r-1)%qm.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const A=this._pingPongRenderTarget;this._halfBlur(e,A,t,n,r,"latitudinal",i),this._halfBlur(A,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,A,o){const s=this._renderer,a=this._blurMaterial;"latitudinal"!==A&&"longitudinal"!==A&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,l=new uA(Gm[r],a),u=a.uniforms,h=Vm[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/(2*Nm-1),p=i/d,f=isFinite(i)?1+Math.floor(c*p):Nm;f>Nm&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${Nm}`);const m=[];let g=0;for(let y=0;y<Nm;++y){const e=y/p,t=Math.exp(-e*e/2);m.push(t),0==y?g+=t:y<f&&(g+=2*t)}for(let y=0;y<m.length;y++)m[y]=m[y]/g;u["envMap"].value=e.texture,u["samples"].value=f,u["weights"].value=m,u["latitudinal"].value="latitudinal"===A,o&&(u["poleAxis"].value=o),u["dTheta"].value=d,u["mipInt"].value=Om-n,u["inputEncoding"].value=km[e.texture.encoding],u["outputEncoding"].value=km[e.texture.encoding];const w=Vm[r],v=3*Math.max(0,Pm-2*w),x=(0===r?0:2*Pm)+2*w*(r>Om-Im?r-Om+Im:0);tg(t,v,x,3*w,2*w),s.setRenderTarget(t),s.render(l,Km)}}function Zm(e){return void 0!==e&&e.type===Ce&&(e.encoding===qt||e.encoding===Jt||e.encoding===Zt)}function $m(){const e=[],t=[],n=[];let r=Om;for(let i=0;i<Rm;i++){const A=Math.pow(2,r);t.push(A);let o=1/A;i>Om-Im?o=Hm[i-Om+Im-1]:0==i&&(o=0),n.push(o);const s=1/(A-1),a=-s/2,c=1+s/2,l=[a,a,c,a,c,c,a,a,c,c,a,c],u=6,h=6,d=3,p=2,f=1,m=new Float32Array(d*h*u),g=new Float32Array(p*h*u),w=new Float32Array(f*h*u);for(let e=0;e<u;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];m.set(r,d*h*e),g.set(l,p*h*e);const i=[e,e,e,e,e,e];w.set(i,f*h*e)}const v=new Xi;v.setAttribute("position",new Mi(m,d)),v.setAttribute("uv",new Mi(g,p)),v.setAttribute("faceIndex",new Mi(w,f)),e.push(v),r>Im&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function eg(e){const t=new Wn(3*Pm,3*Pm,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function tg(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ng(e){const t=new Float32Array(e),n=new Jn(0,1,0),r=new dd({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:km[qt]},outputEncoding:{value:km[qt]}},vertexShader:Ag(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${og()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:v,depthTest:!1,depthWrite:!1});return r}function rg(){const e=new Nn(1,1),t=new dd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:km[qt]},outputEncoding:{value:km[qt]}},vertexShader:Ag(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${og()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:v,depthTest:!1,depthWrite:!1});return t}function ig(){const e=new dd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:km[qt]},outputEncoding:{value:km[qt]}},vertexShader:Ag(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${og()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:v,depthTest:!1,depthWrite:!1});return e}function Ag(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function og(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function sg(e,t,n,r,i,A,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new vi(e,t,n,i,A,o)}const ag=0,cg=1,lg=0,ug=1,hg=2;function dg(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function pg(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function fg(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Cu(e,t)}function mg(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Kl(e)}function gg(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Cu(e,t)}function wg(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new vu(e)}function vg(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new vu(e)}function xg(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new vu(e)}function yg(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Jn(e,t,n)}function Bg(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Mi(e,t).setUsage(En)}function bg(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ei(e,t)}function Cg(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Fi(e,t)}function Mg(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new _i(e,t)}function Eg(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ti(e,t)}function Fg(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ui(e,t)}function _g(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Si(e,t)}function Tg(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Qi(e,t)}function Ug(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Di(e,t)}function Sg(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ii(e,t)}function Qg(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ap.call(this,e),this.type="catmullrom",this.closed=!0}function Lg(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ap.call(this,e),this.type="catmullrom"}function Dg(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ap.call(this,e),this.type="catmullrom"}function Ig(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Sm(e)}function Og(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Cm(e,t)}function Pg(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new gu(new Yu(e.geometry),new au({color:void 0!==t?t:16777215}))}function Hg(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new gu(new ld(e.geometry),new au({color:void 0!==t?t:16777215}))}function Rg(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Vd(e)}function Ng(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Yd(e)}function kg(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new FA(e,n)}Jd.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Jd.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Cp.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Du;for(let n=0,r=e.length;n<r;n++){const r=e[n];t.vertices.push(new Jn(r.x,r.y,r.z||0))}return t}}),Object.assign(Mp.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Qg.prototype=Object.create(Ap.prototype),Lg.prototype=Object.create(Ap.prototype),Dg.prototype=Object.create(Ap.prototype),Object.assign(Dg.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),dm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},om.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Kd.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Kp.extractUrlBase(e)}}),Kd.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(qf.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(er.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(mr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),SA.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},$f.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Rn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Rn.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Rn.ceilPowerOfTwo(e)}}),Object.assign(kn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),Object.assign(Mr.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Jn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,A){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,A)},getInverse:function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}}),ei.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Object.assign(qn.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Cr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ui.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ui,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ui.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ui.getNormal(e,t,n,r)}}),Object.assign(Ep.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Dh(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new qh(this,e)}}),Object.assign(Nn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Jn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Du.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(qr.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(qr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(uA.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(uA.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Xt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(jl.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(nu.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Zl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Jd.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),BA.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Fp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Mi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===En},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(En)}}}),Object.assign(Mi.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?En:Mn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Xi.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Mi(arguments[1],arguments[2])))},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Xi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Gp.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(Vf.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(Ml.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===En},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Ml.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?En:Mn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Sh.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(Cl.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(kf.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(yi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new wi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===g}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(md.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(fd.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(xA.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(xl.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(xl.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Jt:qt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(ll.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Wn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(wf.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this,n=new Af;return n.load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Cf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},MA.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},MA.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)};const Kg={merge:function(e,t,n){let r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function Gg(){console.error("THREE.CanvasRenderer has been removed")}function Vg(){console.error("THREE.JSONLoader has been removed.")}Gn.crossOrigin=void 0,Gn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new qd;i.setCrossOrigin(this.crossOrigin);const A=i.load(e,n,void 0,r);return t&&(A.mapping=t),A},Gn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Wd;i.setCrossOrigin(this.crossOrigin);const A=i.load(e,n,void 0,r);return t&&(A.mapping=t),A},Gn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Gn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const zg={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function jg(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},e01f:function(e,t,n){var r=n("c4ee");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},e991:function(e,t,n){var r=n("57ad"),i=n("1740"),A="DOMException";i(r(A),A)},eb21:function(e,t,n){"use strict";n("cf33");var r=n("add7"),i=n("0d5e"),A=n("9f5b3"),o=n("137b"),s=n("4cd7"),a=n("7799"),c=s("species"),l=RegExp.prototype;e.exports=function(e,t,n,u){var h=s(e),d=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),p=d&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!d||!p||n){var f=r(/./[h]),m=t(h,""[e],(function(e,t,n,i,o){var s=r(e),a=t.exec;return a===A||a===l.exec?d&&!o?{done:!0,value:f(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,h,m[1])}u&&a(l[h],"sham",!0)}},eef6:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("6266")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},ef6c:function(e,t,n){var r=n("137b"),i=n("71fe"),A=i.RegExp,o=r((function(){var e=A("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||r((function(){return!A("a","y").sticky})),a=o||r((function(){var e=A("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},f3fa:function(e,t){(function(t){e.exports=t}).call(this,{})}}]);
//# sourceMappingURL=chunk-3c1ec538.cbfcd03c.js.map